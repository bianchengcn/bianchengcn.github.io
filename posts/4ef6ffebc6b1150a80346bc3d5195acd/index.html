<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【java】本地客户端内嵌浏览器3 - Swing 使用 Spring 框架 &#43; 打包项目 &#43; 转exe &#43; 源码 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【java】本地客户端内嵌浏览器3 - Swing 使用 Spring 框架 &#43; 打包项目 &#43; 转exe &#43; 源码" />
<meta property="og:description" content="目录 ★☆★ 写在前面 ★☆★★☆★ 本系列文章 ★☆★★☆★ 开源网址 ★☆★一、给 Swing 加上 Spring0、前期努力I. SpringBootII. SpringMVC 1、开始搞起：搭建 spring 框架2、添加 Service 并使用I. 准备II. 使用 3、异步 @AsyncI. 准备II. 使用III. 涅槃重生IV. 补充 二、给项目打包成 exe1、打包2、转exe 三、完 ★☆★ 写在前面 ★☆★ 请通过目录，选择感兴趣的部分阅读。
★☆★ 本系列文章 ★☆★ 【java】本地客户端内嵌浏览器1 - Swing、SWT、DJNativeSwing、javaFX
【java】本地客户端内嵌浏览器2 - chrome/chromium/cef/jcef
【java】本地客户端内嵌浏览器3 - Swing 使用 Spring 框架 &#43; 打包项目 &#43; 转exe &#43; 源码
★☆★ 开源网址 ★☆★ https://github.com/supsunc/swing-jcef-spring
一、给 Swing 加上 Spring ★ 这里说一下为什么使用 Spring，是因为本项目的一个功能：“搜寻仪器”，该功能调用了 dll 的方法，此方法至少要等待 7 - 8 秒才会返回结果，而正常写的话，因为是单线程，所以会导致 client 完全卡住，但不是 GG，在卡住期间，js正常运行，且在卡完之后，会直接表现当前 js 运行的状态，给人一种时间消失的感觉。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/4ef6ffebc6b1150a80346bc3d5195acd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-10T22:54:27+08:00" />
<meta property="article:modified_time" content="2019-11-10T22:54:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【java】本地客户端内嵌浏览器3 - Swing 使用 Spring 框架 &#43; 打包项目 &#43; 转exe &#43; 源码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#___2" rel="nofollow">★☆★ 写在前面 ★☆★</a></li><li><a href="#___5" rel="nofollow">★☆★ 本系列文章 ★☆★</a></li><li><a href="#___9" rel="nofollow">★☆★ 开源网址 ★☆★</a></li><li><ul><li><a href="#_Swing__Spring_11" rel="nofollow">一、给 Swing 加上 Spring</a></li><li><ul><li><ul><li><a href="#0_14" rel="nofollow">0、前期努力</a></li><li><ul><li><ul><li><a href="#I_SpringBoot_15" rel="nofollow">I. SpringBoot</a></li><li><a href="#II_SpringMVC_22" rel="nofollow">II. SpringMVC</a></li></ul> 
     </li></ul> 
     </li><li><a href="#1_spring__27" rel="nofollow">1、开始搞起：搭建 spring 框架</a></li><li><a href="#2_Service__182" rel="nofollow">2、添加 Service 并使用</a></li><li><ul><li><ul><li><a href="#I__183" rel="nofollow">I. 准备</a></li><li><a href="#II__210" rel="nofollow">II. 使用</a></li></ul> 
     </li></ul> 
     </li><li><a href="#3_Async_261" rel="nofollow">3、异步 @Async</a></li><li><ul><li><ul><li><a href="#I__262" rel="nofollow">I. 准备</a></li><li><a href="#II__315" rel="nofollow">II. 使用</a></li><li><a href="#III__396" rel="nofollow">III. 涅槃重生</a></li><li><a href="#IV__467" rel="nofollow">IV. 补充</a></li></ul> 
     </li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#_exe_489" rel="nofollow">二、给项目打包成 exe</a></li><li><ul><li><ul><li><a href="#1_490" rel="nofollow">1、打包</a></li><li><a href="#2exe_533" rel="nofollow">2、转exe</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_605" rel="nofollow">三、完</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="___2"></a>★☆★ 写在前面 ★☆★</h2> 
<blockquote> 
 <p><code>请通过目录，选择感兴趣的部分阅读。</code></p> 
</blockquote> 
<h2><a id="___5"></a>★☆★ 本系列文章 ★☆★</h2> 
<blockquote> 
 <p><a href="https://blog.csdn.net/u013642500/article/details/102788212">【java】本地客户端内嵌浏览器1 - Swing、SWT、DJNativeSwing、javaFX</a><br> <a href="https://blog.csdn.net/u013642500/article/details/103003284">【java】本地客户端内嵌浏览器2 - chrome/chromium/cef/jcef</a><br> <a href="https://blog.csdn.net/u013642500/article/details/103003386">【java】本地客户端内嵌浏览器3 - Swing 使用 Spring 框架 + 打包项目 + 转exe + 源码</a></p> 
</blockquote> 
<h2><a id="___9"></a>★☆★ 开源网址 ★☆★</h2> 
<blockquote> 
 <p><a href="https://github.com/supsunc/swing-jcef-spring">https://github.com/supsunc/swing-jcef-spring</a></p> 
</blockquote> 
<h3><a id="_Swing__Spring_11"></a>一、给 Swing 加上 Spring</h3> 
<blockquote> 
 <p>★ 这里说一下为什么使用 Spring，是因为本项目的一个功能：“搜寻仪器”，该功能调用了 dll 的方法，此方法至少要等待 7 - 8 秒才会返回结果，而正常写的话，因为是单线程，所以会导致 client 完全卡住，但不是 GG，在卡住期间，js正常运行，且在卡完之后，会直接表现当前 js 运行的状态，给人一种时间消失的感觉。<br> ★ 因此，是打算将“搜寻仪器”扔给异步线程去做，而 spring 的 @Async 注解则正符合需求，于是我便跳进了一个深渊巨坑。</p> 
</blockquote> 
<h5><a id="0_14"></a>0、前期努力</h5> 
<h6><a id="I_SpringBoot_15"></a>I. SpringBoot</h6> 
<blockquote> 
 <p>都说 SpringBoot 多么强大，然而也没真正接触过，在正式入坑之前，还请教了前辈：“SpringBoot只能构建web项目吗？”，哈哈，还是入坑了。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/cf/b8/ejeQ7mDY_o.png" alt="SpringBoot只能构建web项目吗？"></p> 
<p>具体细节不再说了，最后成功了用 SpringBoot 搭建起来项目了，但是由于原来的项目依赖相关 dll，用 SpringBoot 打包之后的发布版本，怎么也弄不进去相关 dll，搞了一天，最后我放弃了 SpringBoot。</p> 
<h6><a id="II_SpringMVC_22"></a>II. SpringMVC</h6> 
<p>★☆★ 最开始的想法：我们项目后台就是用 SpringMVC 啊，那么这个 client 能不能用呢。<br> ★☆★ 然后迅速否定，SpringMVC 就是开发 JavaWeb 的，其中的 DispatcherServlet、getServletConfigClasses 等不适用于这种本地 client 啊。<br> ★☆★ 然后转念一想，只用 Spring 不行么？</p> 
<h5><a id="1_spring__27"></a>1、开始搞起：搭建 spring 框架</h5> 
<ol start="0"><li>首先就是 Spring 的相关依赖 jar 包</li></ol> 
<blockquote> 
 <p>下载地址：</p> 
 <ol><li><a href="http://maven.springframework.org/release/org/springframework/spring/" rel="nofollow"><code>http://maven.springframework.org/release/org/springframework/spring/</code></a></li><li><a href="https://repo.spring.io/release/org/springframework/spring/" rel="nofollow"><code>https://repo.spring.io/release/org/springframework/spring/</code></a><br> <img src="https://images2.imgbox.com/91/f6/Vf9SrkZG_o.png" alt="spring 下载页面"></li></ol> 
</blockquote> 
<blockquote> 
 <p>我这边主要使用了核心包：<br> <img src="https://images2.imgbox.com/97/48/nHeYYRG0_o.png" alt="spring.jar"></p> 
</blockquote> 
<blockquote> 
 <p>spring 还需要 commons-logging.jar，下载地址：<a href="http://commons.apache.org/proper/commons-logging/download_logging.cgi" rel="nofollow"><code>commons-logging</code></a><br> <img src="https://images2.imgbox.com/04/20/DqWQbnQ0_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<ol><li>在项目中 lib 文件夹中创建 spring 文件夹，然后将 jar 包弄到里面，然后 Add as Library。</li></ol> 
<p><img src="https://images2.imgbox.com/49/2b/sF4s30U4_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>新建 package 叫做 <code>my.spring.config</code>，用来放置 spring 配置文件。</li><li>在 <code>my.spring.config</code> 中创建 ApplicationContextXml.java，直接分享源代码：</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> qpcr<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>ComponentScan<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"my"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextXml</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>给 idea 配上 spring 框架（此步不做也行，不影响程序 Run）</li></ol> 
<ul><li>打开 Project Structure，点击 Fact，然后点击“加号”，然后点击“spring”。</li></ul> 
<p><img src="https://images2.imgbox.com/a0/56/GOLanLna_o.png" alt="在这里插入图片描述"></p> 
<ul><li>选择 Module，点击 OK。</li></ul> 
<p><img src="https://images2.imgbox.com/13/27/7vpDZEkm_o.png" alt="在这里插入图片描述"></p> 
<ul><li>点击右侧的“加号”。</li></ul> 
<p><img src="https://images2.imgbox.com/ce/18/Oedf4dCc_o.png" alt="在这里插入图片描述"></p> 
<ul><li>选中后点击 OK。</li></ul> 
<p><img src="https://images2.imgbox.com/d5/0d/fVhRcgOn_o.png" alt="在这里插入图片描述"></p> 
<ul><li>Apply、OK 关闭窗口即可。</li></ul> 
<ol start="4"><li>在包 <code>my.spring.main</code> 中创建 UI.java，然后将 Main.java 中的 <code>init()</code> 方法移动到这个 UI.java 中。让 UI.java 实现一个接口 <code>org.springframework.beans.factory.InitializingBean</code>，并重写 <code>afterPropertiesSet()</code> 方法，执行 <code>init()</code>。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>main<span class="token punctuation">;</span>

<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>MyBrowser<span class="token punctuation">;</span>
<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>DownloadHandler<span class="token punctuation">;</span>
<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>MenuHandler<span class="token punctuation">;</span>
<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>handler<span class="token punctuation">.</span>MessageRouterHandler<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>cef<span class="token punctuation">.</span>CefApp<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>cef<span class="token punctuation">.</span>CefClient<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>cef<span class="token punctuation">.</span>browser<span class="token punctuation">.</span>CefMessageRouter<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>InitializingBean<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Component<span class="token punctuation">;</span>

<span class="token keyword">import</span> javax<span class="token punctuation">.</span>swing<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>event<span class="token punctuation">.</span>WindowAdapter<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>event<span class="token punctuation">.</span>WindowEvent<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UI</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        EventQueue<span class="token punctuation">.</span><span class="token function">invokeLater</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
            JFrame jFrame <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JFrame</span><span class="token punctuation">(</span><span class="token string">"MyBrowser"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            jFrame<span class="token punctuation">.</span><span class="token function">setMinimumSize</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dimension</span><span class="token punctuation">(</span><span class="token number">1366</span><span class="token punctuation">,</span> <span class="token number">738</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 设置最小窗口大小</span>
            jFrame<span class="token punctuation">.</span><span class="token function">setExtendedState</span><span class="token punctuation">(</span>JFrame<span class="token punctuation">.</span>MAXIMIZED_BOTH<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 默认窗口全屏</span>
            jFrame<span class="token punctuation">.</span><span class="token function">setIconImage</span><span class="token punctuation">(</span>Toolkit<span class="token punctuation">.</span><span class="token function">getDefaultToolkit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getImage</span><span class="token punctuation">(</span>jFrame<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"/images/icon.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>CefApp<span class="token punctuation">.</span><span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>    <span class="token comment">// 初始化失败</span>
                JLabel error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JLabel</span><span class="token punctuation">(</span><span class="token string">"&lt;html&gt;&lt;body&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在启动这个应用程序时，发生了一些错误，请关闭并重启这个应用程序。&lt;br&gt;There is something wrong when this APP start up, please close and restart it.&lt;/body&gt;&lt;/html&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                error<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">"宋体/Arial"</span><span class="token punctuation">,</span> Font<span class="token punctuation">.</span>PLAIN<span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                error<span class="token punctuation">.</span><span class="token function">setIcon</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ImageIcon</span><span class="token punctuation">(</span>jFrame<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"/images/error.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                error<span class="token punctuation">.</span><span class="token function">setForeground</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
                error<span class="token punctuation">.</span><span class="token function">setHorizontalAlignment</span><span class="token punctuation">(</span>SwingConstants<span class="token punctuation">.</span>CENTER<span class="token punctuation">)</span><span class="token punctuation">;</span>

                jFrame<span class="token punctuation">.</span><span class="token function">getContentPane</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBackground</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>white<span class="token punctuation">)</span><span class="token punctuation">;</span>
                jFrame<span class="token punctuation">.</span><span class="token function">getContentPane</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> BorderLayout<span class="token punctuation">.</span>CENTER<span class="token punctuation">)</span><span class="token punctuation">;</span>
                jFrame<span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>


            MyBrowser myBrowser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBrowser</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            CefClient client <span class="token operator">=</span> myBrowser<span class="token punctuation">.</span><span class="token function">getClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 绑定 MessageRouter 使前端可以执行 js 到 java 中</span>
            CefMessageRouter cmr <span class="token operator">=</span> CefMessageRouter<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CefMessageRouter<span class="token punctuation">.</span>CefMessageRouterConfig</span><span class="token punctuation">(</span><span class="token string">"cef"</span><span class="token punctuation">,</span> <span class="token string">"cefCancel"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cmr<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageRouterHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            client<span class="token punctuation">.</span><span class="token function">addMessageRouter</span><span class="token punctuation">(</span>cmr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 绑定 ContextMenuHandler 实现右键菜单</span>
            client<span class="token punctuation">.</span><span class="token function">addContextMenuHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MenuHandler</span><span class="token punctuation">(</span>jFrame<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 绑定 DownloadHandler 实现下载功能</span>
            client<span class="token punctuation">.</span><span class="token function">addDownloadHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DownloadHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            jFrame<span class="token punctuation">.</span><span class="token function">getContentPane</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myBrowser<span class="token punctuation">.</span><span class="token function">getBrowserUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> BorderLayout<span class="token punctuation">.</span>CENTER<span class="token punctuation">)</span><span class="token punctuation">;</span>
            jFrame<span class="token punctuation">.</span><span class="token function">setVisible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            jFrame<span class="token punctuation">.</span><span class="token function">addWindowListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WindowAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">windowClosing</span><span class="token punctuation">(</span>WindowEvent e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
                    String language <span class="token operator">=</span> <span class="token string">"en-us"</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>language<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"en-us"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        i <span class="token operator">=</span> JOptionPane<span class="token punctuation">.</span><span class="token function">showOptionDialog</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"Do you really want to quit this software?"</span><span class="token punctuation">,</span> <span class="token string">"Exit"</span><span class="token punctuation">,</span> JOptionPane<span class="token punctuation">.</span>YES_NO_OPTION<span class="token punctuation">,</span> JOptionPane<span class="token punctuation">.</span>QUESTION_MESSAGE<span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">"Yes"</span><span class="token punctuation">,</span> <span class="token string">"No"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"Yes"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>language<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"zh-cn"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        i <span class="token operator">=</span> JOptionPane<span class="token punctuation">.</span><span class="token function">showOptionDialog</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"你真的想退出这个软件吗？"</span><span class="token punctuation">,</span> <span class="token string">"Exit"</span><span class="token punctuation">,</span> JOptionPane<span class="token punctuation">.</span>YES_NO_OPTION<span class="token punctuation">,</span> JOptionPane<span class="token punctuation">.</span>QUESTION_MESSAGE<span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">"是的"</span><span class="token punctuation">,</span> <span class="token string">"不"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"是的"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">else</span>
                        i <span class="token operator">=</span> JOptionPane<span class="token punctuation">.</span><span class="token function">showOptionDialog</span><span class="token punctuation">(</span>null<span class="token punctuation">,</span> <span class="token string">"你真的想退出这个软件吗？\nDo you really want to quit this software?"</span><span class="token punctuation">,</span> <span class="token string">"Exit"</span><span class="token punctuation">,</span> JOptionPane<span class="token punctuation">.</span>YES_NO_OPTION<span class="token punctuation">,</span> JOptionPane<span class="token punctuation">.</span>QUESTION_MESSAGE<span class="token punctuation">,</span> null<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">"是的(Yes)"</span><span class="token punctuation">,</span> <span class="token string">"不(No)"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"是的(Yes)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> JOptionPane<span class="token punctuation">.</span>YES_OPTION<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        myBrowser<span class="token punctuation">.</span><span class="token function">getCefApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        jFrame<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        System<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="5"><li>修改 main 方法。</li></ol> 
<blockquote> 
 <p>★ 此处才是最坑的，我这边用的全是注解开发，没有一个 xml 。<br> ★ 然而网上搜索怎么启动 spring，全是 <code>ClassPathXmlApplicationContext</code> 和 <code>FileSystemXmlApplicationContext</code> 两个实例化方法，然后再 getBean() 之类的。</p> 
</blockquote> 
<p>全注解开发的正确代码应该这么写：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>main<span class="token punctuation">;</span>

<span class="token keyword">import</span> my<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>config<span class="token punctuation">.</span>ApplicationContextXml<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>AnnotationConfigApplicationContext<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span>ApplicationContextXml<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2_Service__182"></a>2、添加 Service 并使用</h5> 
<h6><a id="I__183"></a>I. 准备</h6> 
<ol><li>新建两个 package，分别是 <code>my.client.interfaces</code> 和 <code>my.client.impl</code>。</li><li>在 <code>my.client.interfaces</code> 中新建一个 interface 叫做 MyService。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyService</span> <span class="token punctuation">{<!-- --></span>
    String <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>在 <code>my.client.impl</code> 中新建一个 class 叫做 <code>MyServiceImpl</code>，实现 <code>MyService</code> 接口，并加上 <code>@Service</code> 注解。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>MyService<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MyService</span> <span class="token punctuation">{<!-- --></span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"This is method 'doSomething'."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"doSomething"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="II__210"></a>II. 使用</h6> 
<ol><li>给 UI.java 注入 MyService。</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UI</span> <span class="token keyword">implements</span> <span class="token class-name">InitializingBean</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> MyService myService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">UI</span><span class="token punctuation">(</span>MyService myService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>myService <span class="token operator">=</span> myService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
        <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>将 myService 传给 MessageRouterHandler 构造函数。</li></ol> 
<pre><code class="prism language-java"><span class="token comment">// 绑定 MessageRouter 使前端可以执行 js 到 java 中</span>
CefMessageRouter cmr <span class="token operator">=</span> CefMessageRouter<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CefMessageRouter<span class="token punctuation">.</span>CefMessageRouterConfig</span><span class="token punctuation">(</span><span class="token string">"cef"</span><span class="token punctuation">,</span> <span class="token string">"cefCancel"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cmr<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MessageRouterHandler</span><span class="token punctuation">(</span>myService<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">addMessageRouter</span><span class="token punctuation">(</span>cmr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>修改 MessageRouterHandler 构造函数，将 MyService 对象存起来。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MessageRouterHandler</span> <span class="token keyword">extends</span> <span class="token class-name">CefMessageRouterHandlerAdapter</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> MyService myService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">MessageRouterHandler</span><span class="token punctuation">(</span>MyService myService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>myService <span class="token operator">=</span> myService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onQuery</span><span class="token punctuation">(</span>CefBrowser browser<span class="token punctuation">,</span> CefFrame frame<span class="token punctuation">,</span> <span class="token keyword">long</span> query_id<span class="token punctuation">,</span> String request<span class="token punctuation">,</span> <span class="token keyword">boolean</span> persistent<span class="token punctuation">,</span> CefQueryCallback callback<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onQueryCanceled</span><span class="token punctuation">(</span>CefBrowser browser<span class="token punctuation">,</span> CefFrame frame<span class="token punctuation">,</span> <span class="token keyword">long</span> query_id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li>在 onQuery 方法中，使用 myService.doSomething()。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"doSomething"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    callback<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>myService<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3_Async_261"></a>3、异步 @Async</h5> 
<h6><a id="I__262"></a>I. 准备</h6> 
<ol><li>在 <code>my.spring.config</code> 中，创建一个 class 叫做 <code>TaskExecutorConfig</code>，实现 <code>AsyncConfigurer</code> 接口。</li><li>配置线程池，重写 <code>getAsyncExecutor()</code> 方法。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>config<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Configuration<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>AsyncConfigurer<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ThreadPoolTaskExecutor<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>Executor<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskExecutorConfig</span> <span class="token keyword">implements</span> <span class="token class-name">AsyncConfigurer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Executor <span class="token function">getAsyncExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        ThreadPoolTaskExecutor executor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadPoolTaskExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Set up the ExecutorService.</span>
        executor<span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 线程池核心线程数，核心线程会一直存活，即使没有任务需要处理。</span>
        <span class="token comment">// 当线程数小于核心线程数时，即使现有的线程空闲，线程池也会优先创建新线程来处理任务，而不是直接交给现有的线程处理。</span>
        <span class="token comment">// 核心线程在allowCoreThreadTimeout被设置为true时会超时退出，默认情况下不会退出。</span>
        <span class="token comment">// 默认是 1</span>

        <span class="token comment">// CPU 核心数 Runtime.getRuntime().availableProcessors();</span>
        executor<span class="token punctuation">.</span><span class="token function">setCorePoolSize</span><span class="token punctuation">(</span>Runtime<span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">availableProcessors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 当线程数大于或等于核心线程，且任务队列已满时，线程池会创建新的线程，直到线程数量达到maxPoolSize。</span>
        <span class="token comment">// 如果线程数已等于maxPoolSize，且任务队列已满，则已超出线程池的处理能力，线程池会拒绝处理任务而抛出异常。</span>
        <span class="token comment">// 默认时是 Integer.MAX_VALUE</span>
        <span class="token comment">// executor.setMaxPoolSize(10);</span>

        <span class="token comment">// 任务队列容量。从maxPoolSize的描述上可以看出，任务队列的容量会影响到线程的变化，因此任务队列的长度也需要恰当的设置。</span>
        <span class="token comment">// 默认时是 Integer.MAX_VALUE</span>
        executor<span class="token punctuation">.</span><span class="token function">setQueueCapacity</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*  keepAliveTime: 当线程空闲时间达到keepAliveTime，该线程会退出，直到线程数量等于corePoolSize。
         *  默认时是 60
         *  executor.setKeepAliveSeconds(10);
         */</span>

        <span class="token comment">// allowCoreThreadTimeout: 是否允许核心线程空闲退出，默认值为false。</span>
        <span class="token comment">// 如果allowCoreThreadTimeout设置为true，则所有线程均会退出直到线程数量为0。</span>
        <span class="token comment">// executor.setAllowCoreThreadTimeOut(true);</span>

        <span class="token keyword">return</span> executor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="II__315"></a>II. 使用</h6> 
<ol><li>在 <code>my.client.interfaces</code> 中新建一个 interface 叫做 AsyncService。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>Future<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">AsyncService</span> <span class="token punctuation">{<!-- --></span>
    Future<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> <span class="token function">asyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>在 <code>my.client.impl</code> 中新建一个 class 叫做 <code>AsyncServiceImpl</code>，实现 <code>AsyncService</code> 接口，并加上 <code>@Service</code> 注解。重写 <code>asyncMethod</code> 方法，写一个 <code>Thread.sleep(5000);</code> 代替耗时操作。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>AsyncService<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>Async<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>scheduling<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>AsyncResult<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>Future<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AsyncServicesImpl</span> <span class="token keyword">implements</span> <span class="token class-name">AsyncService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token annotation punctuation">@Async</span>
    <span class="token keyword">public</span> Future<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> <span class="token function">asyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AsyncResult</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"I am finished."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>在 <code>MyServiceImpl</code> 中注入 <code>AsyncService</code>。</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>AsyncService<span class="token punctuation">;</span>
<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>MyService<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MyService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> AsyncService asyncService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">MyServiceImpl</span><span class="token punctuation">(</span>AsyncService asyncService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>asyncService <span class="token operator">=</span> asyncService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"This is method 'doSomething'."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"doSomething"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li>重写 <code>doSomething()</code> 方法，使用 <code>asyncService</code> 的 <code>asyncMethod</code> 方法。</li></ol> 
<blockquote> 
 <p>★ 这是网上提供的异步结果的获取方法。<br> ★ 等等，这个异步线程不还是在主线程用一个 while 去等待结果么？这算哪门子异步啊。</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> String <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    Future<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> futureAsyncMethod<span class="token operator">=</span> asyncService<span class="token punctuation">.</span><span class="token function">asyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    String result <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>futureAsyncMethod<span class="token punctuation">.</span><span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            result <span class="token operator">=</span> futureAsyncMethod<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> ExecutionException e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="III__396"></a>III. 涅槃重生</h6> 
<blockquote> 
 <p>在 spring 章节部分开头，我说明了为什么要使用 spring。<br> <img src="https://images2.imgbox.com/92/5f/I3OwQEvx_o.png" alt="在这里插入图片描述"><br> 其直接原因就是 <code>client 内嵌浏览器</code> 向 <code>client</code> 发送请求，然后请求不响应的时候，<code>client</code> 就会卡住。<br> 那么解决办法就很简单了：</p> 
 <ul><li>把耗时操作扔给异步线程去操作，没有 Done 则返回 “doing”，前端接收响应数据为 “doing”，则再次发请求。</li><li>判断是否正在进行那个耗时操作，如果在进行，则判断 isDone，没有 Done 则返回 “doing”，重复上一步操作。</li><li>如果 Done 了，则正常返回数据。</li></ul> 
</blockquote> 
<ol><li>首先修改前端网页部分，如果响应数据为 “doing”，则再次发请求。(当然如果你正确返回结果就有可能是 doing 的话，那就把这个字符串换一个)</li></ol> 
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 这里的 cef 就是 client 创建 CefMessageRouter 对象的入参涉及到的字符串</span>
    window<span class="token punctuation">.</span><span class="token function">cef</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        request<span class="token punctuation">:</span> <span class="token string">'doSomething'</span><span class="token punctuation">,</span>
        <span class="token function">onSuccess</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>response <span class="token operator">===</span> <span class="token string">"doing"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            	<span class="token function">setTimeout</span><span class="token punctuation">(</span>doSomething<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 将任务加到新队列中，避免网页卡住</span>
           	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
           		<span class="token comment">// 正确得到响应数据</span>
           	<span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">onFailure</span><span class="token punctuation">(</span>error_code<span class="token punctuation">,</span> error_message<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error_code<span class="token punctuation">,</span> error_message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>由于 Spring 组件默认就是单例的，所以可以这么写，直接分享源代码：</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">package</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>impl<span class="token punctuation">;</span>

<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>AsyncService<span class="token punctuation">;</span>
<span class="token keyword">import</span> my<span class="token punctuation">.</span>client<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>MyService<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>ExecutionException<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>Future<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">MyService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> AsyncService asyncService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">MyServiceImpl</span><span class="token punctuation">(</span>AsyncService asyncService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>asyncService <span class="token operator">=</span> asyncService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> Future<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> futureAsyncMethod <span class="token operator">=</span> null<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>futureAsyncMethod <span class="token operator">==</span> null<span class="token punctuation">)</span>
            futureAsyncMethod <span class="token operator">=</span> asyncService<span class="token punctuation">.</span><span class="token function">asyncMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>futureAsyncMethod<span class="token punctuation">.</span><span class="token function">isDone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            String result <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                result <span class="token operator">=</span> futureAsyncMethod<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> <span class="token operator">|</span> ExecutionException e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            futureAsyncMethod <span class="token operator">=</span> null<span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token string">"doing"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="IV__467"></a>IV. 补充</h6> 
<blockquote> 
 <p>如果你和我发生了一样的事情：</p> 
 <ol><li>报错：<code>Bean 'my.spring.config.TaskExecutorConfig' of type [XXXX] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)</code></li><li><code>@Async</code> 根本没生效。</li></ol> 
</blockquote> 
<ol><li>请参考这个链接：<a href="https://blog.csdn.net/f641385712/article/details/89737791"><code>【小家Spring】注意BeanPostProcessor启动时对依赖Bean的“误伤”陷阱（is not eligible for getting processed by all...）</code></a></li><li>不过我并没有从这个链接中直接找到解决办法。</li><li>我的解决办法是，给 <code>TaskExecutorConfig</code> 类加上 <code>BeanPostProcessor</code> 的接口：</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAsync</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TaskExecutorConfig</span> <span class="token keyword">implements</span> <span class="token class-name">AsyncConfigurer</span><span class="token punctuation">,</span> BeanPostProcessor <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// BeanPostProcessor 接口的目的是使当前 Configuration 先加载</span>
    <span class="token comment">// 可能是吧，不太清楚，请参考上面的链接</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> Executor <span class="token function">getAsyncExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_exe_489"></a>二、给项目打包成 exe</h3> 
<h5><a id="1_490"></a>1、打包</h5> 
<ol><li>按图所示。</li></ol> 
<p><img src="https://images2.imgbox.com/78/55/SkGdfWm4_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>按图所示。</li></ol> 
<p><img src="https://images2.imgbox.com/21/28/ZbVPLWIG_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>按图所示创建文件夹 bin。</li></ol> 
<p><img src="https://images2.imgbox.com/e1/7a/RkaJSzXK_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>按图所示，在 bin 中创建文件夹 jcef 和 spring，将对应依赖移进去，在 jcef 中创建 lib 文件夹。</li></ol> 
<p><img src="https://images2.imgbox.com/bd/e0/OYH2fQbm_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li>右键单击 lib，或点击上面的“加号”，选择 Directory Content。</li></ol> 
<p><img src="https://images2.imgbox.com/55/f1/5QHEuJ2S_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li>选择 lib 下面 jcef 里面的 lib\win64。</li></ol> 
<p><img src="https://images2.imgbox.com/27/39/AKibGutO_o.png" alt="在这里插入图片描述"></p> 
<ol start="7"><li>点击 jcef.jar 之后，点击下面的 class path 后面的展开。</li></ol> 
<p><img src="https://images2.imgbox.com/5b/4b/XCtfvUOc_o.png" alt="在这里插入图片描述"></p> 
<ol start="8"><li>编辑完了之后，Build Artifacts。</li></ol> 
<p><img src="https://images2.imgbox.com/02/58/BrSz1Bs2_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/22/2f/kvFOtyDl_o.png" alt="在这里插入图片描述"></p> 
<ol start="9"><li>打开 Artifacts Build 之后的地方：E:\idea\jcef\out\artifacts\jcef_jar。</li></ol> 
<p><img src="https://images2.imgbox.com/52/14/Yq2awbGY_o.png" alt="在这里插入图片描述"></p> 
<ol start="10"><li>我们写一个 bat 文件命令行，或用 cmd cd 到此路径，然后执行命令行：<code>java -Djava.library.path=.\bin\jcef\lib -jar jcef.jar</code>。</li></ol> 
<blockquote> 
 <p>如果不写 <code>-Djava.library.path=.\bin\jcef\lib</code> 则会报之前提到过的错：<code>no chrome_elf in java.library.path</code>。</p> 
</blockquote> 
<h5><a id="2exe_533"></a>2、转exe</h5> 
<blockquote> 
 <p>将 <code>E:\idea\jcef\out\artifacts\jcef_jar</code> 的 <code>jcef_jar</code> 改名为 <code>app</code></p> 
</blockquote> 
<ol start="0"><li>下载工具：exe4j，激活过程我就不说了。</li><li>打开 exe4j，第一个页面：<code>Welcome</code>，直接 Next 即可。</li></ol> 
<p><img src="https://images2.imgbox.com/08/15/Mq56LEgx_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>第二个页面：<code>Project type</code>，默认选择 <code>Regular mode</code> 即可，必须选择这个，网上大部分教程全是选择 <code>"JAR in EXE" mode</code>，导致后面步骤完全不一样，真坑，前进的道路真曲折。</li></ol> 
<p><img src="https://images2.imgbox.com/54/8d/A77jv1si_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>第三个页面：<code>Application info</code>，三个填空：</li></ol> 
<ul><li>第一个为应用程序名字；</li><li>第二个为导出地址；</li><li>第三个为 exe 地址，写一个 <code>.</code> 即可。</li></ul> 
<p><img src="https://images2.imgbox.com/81/da/7BV9vDJK_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li>第四个页面：<code>Executable info</code>，输入 exe 名字，视情况勾选 <code>Allow only a single running instance of the application</code>，可以在 <code>Advanced Options</code> 中设置一些其他信息。（默认是32-bit，如果用64位jre，则需要到那里设置 <code>Generate 64-bit executable</code>）</li></ol> 
<p><img src="https://images2.imgbox.com/7a/0f/3RmfXgaA_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li>第五个页面：<code>Java invocation</code>。</li></ol> 
<ul><li>点击那个“加号”。</li></ul> 
<p><img src="https://images2.imgbox.com/db/71/GcplXFv8_o.png" alt="在这里插入图片描述"></p> 
<ul><li>选择 Archive，然后选择那个 jar 包。</li></ul> 
<p><img src="https://images2.imgbox.com/1b/03/YJ2TzXl0_o.png" alt="在这里插入图片描述"></p> 
<ul><li>再次点击那个“加号”，然后选择 Directory，选择 jcef 和 spring 文件夹。</li></ul> 
<p><img src="https://images2.imgbox.com/dc/40/6OraScTY_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/75/15/imhOogUX_o.png" alt="在这里插入图片描述"></p> 
<ul><li>点击下面 <code>Main class from</code> 后面的"更多"：</li></ul> 
<p><img src="https://images2.imgbox.com/07/cb/taxix8DP_o.png" alt="在这里插入图片描述"></p> 
<ul><li>点击 Advanced Options 里面的 Native libraries。</li></ul> 
<p><img src="https://images2.imgbox.com/4a/f1/7y9YofH7_o.png" alt="在这里插入图片描述"></p> 
<ul><li>点击“加号”后，选择 jcef 里面的 lib 文件夹。</li></ul> 
<p><img src="https://images2.imgbox.com/c5/97/F1H8rVCj_o.png" alt="在这里插入图片描述"></p> 
<ol start="6"><li>第六个页面：<code>JRE</code>，可以设置 Minimum version，也可以在 <code>Advanced Options</code> 中设置一些其他信息。</li></ol> 
<p><img src="https://images2.imgbox.com/23/56/N1VewLcx_o.png" alt="在这里插入图片描述"></p> 
<ol start="7"><li>第七个页面：<code>Splash screen</code>，第八个页面：<code>Messages</code>，默认即可。</li></ol> 
<p><img src="https://images2.imgbox.com/41/5a/SNRr4JEQ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/46/2b/sCJlAxuy_o.png" alt="在这里插入图片描述"></p> 
<ol start="8"><li>第九个页面：<code>Compile executable</code>，等待自动完成。</li></ol> 
<p><img src="https://images2.imgbox.com/74/d7/FFHmY6su_o.png" alt="在这里插入图片描述"></p> 
<ol start="9"><li>第十个页面：<code>Finished</code>，可以点击 Save As 将配置存起来，下次直接 open 这个配置。</li></ol> 
<p><img src="https://images2.imgbox.com/24/1e/w2kK6SBN_o.png" alt="在这里插入图片描述"></p> 
<ol start="10"><li>点击 <code>Click Here to Start the Application</code> ，可以直接启动 exe，或到指定路径下，双击打开。</li></ol> 
<p><img src="https://images2.imgbox.com/a3/d9/JjAS5Kyn_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_605"></a>三、完</h3> 
<blockquote> 
 <p>本博客写了 4 天，写之前研究这些全部内容，用了两个星期。<br> 本博客于 <code>2019-10-31 18:38</code> 首发于 <a href="https://blog.csdn.net/u013642500/article/details/102788212"><code>CSDN博客</code></a>。<br> 累死我啦！！！</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/85fc77d3d8b6f6dc59ddfe1547cb4d06/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java实现base64及图片路径转换mat的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/665407436e92997655f31d2ae4058d55/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java 获取两个日期相差的月份</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>