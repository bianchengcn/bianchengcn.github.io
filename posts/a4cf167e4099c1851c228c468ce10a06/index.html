<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>学JDBC，这一篇就够了 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="学JDBC，这一篇就够了" />
<meta property="og:description" content="目录
第一章：JDBC入门
3.1.1 什么是 JDBC
使用 JDBC 的好处：
3.1.2 使用 JDBC 开发使用到的包：
3.2 JDBC 的核心 API
3.3 导入驱动 Jar 包
3.4 加载和注册驱动
第二章：DriverManager类
2.1 DriverManager 作用：
2.2 类中的方法：
2.3 使用 JDBC 连接数据库的四个参数：
2.4 连接数据库的 URL 地址格式：
协议名:子协议://服务器名或 IP 地址:端口号/数据库名?参数=参数值
2.5 案例：得到 MySQL 的数据库连接对象
第三章：Conection接口
3.1 Connection 作用：
3.2 Connection 方法：
第四章：Statement接口
4.1 JDBC 访问数据库的步骤
4.2 Statement 作用：
4.3 Statement 中的方法：
4.4 释放资源
4.5 执行 DDL 操作
4.6 执行 DML 操作" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a4cf167e4099c1851c228c468ce10a06/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-10T14:33:57+08:00" />
<meta property="article:modified_time" content="2019-07-10T14:33:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">学JDBC，这一篇就够了</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%C2%A0%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9AJDBC%E5%85%A5%E9%97%A8-toc" style="margin-left:0px;"><a href="#%C2%A0%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9AJDBC%E5%85%A5%E9%97%A8" rel="nofollow"> 第一章：JDBC入门</a></p> 
<p id="3.1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%20JDBC-toc" style="margin-left:40px;"><a href="#3.1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%20JDBC" rel="nofollow">3.1.1 什么是 JDBC</a></p> 
<p id="%E4%BD%BF%E7%94%A8%20JDBC%20%E7%9A%84%E5%A5%BD%E5%A4%84%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%E4%BD%BF%E7%94%A8%20JDBC%20%E7%9A%84%E5%A5%BD%E5%A4%84%EF%BC%9A" rel="nofollow">使用 JDBC 的好处：</a></p> 
<p id="3.1.2%20%E4%BD%BF%E7%94%A8%20JDBC%20%E5%BC%80%E5%8F%91%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E5%8C%85%EF%BC%9A-toc" style="margin-left:40px;"><a href="#3.1.2%20%E4%BD%BF%E7%94%A8%20JDBC%20%E5%BC%80%E5%8F%91%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E5%8C%85%EF%BC%9A" rel="nofollow">3.1.2 使用 JDBC 开发使用到的包：</a></p> 
<p id="3.2%20JDBC%20%E7%9A%84%E6%A0%B8%E5%BF%83%20API-toc" style="margin-left:40px;"><a href="#3.2%20JDBC%20%E7%9A%84%E6%A0%B8%E5%BF%83%20API" rel="nofollow">3.2 JDBC 的核心 API</a></p> 
<p id="3.3%20%E5%AF%BC%E5%85%A5%E9%A9%B1%E5%8A%A8%20Jar%20%E5%8C%85-toc" style="margin-left:40px;"><a href="#3.3%20%E5%AF%BC%E5%85%A5%E9%A9%B1%E5%8A%A8%20Jar%20%E5%8C%85" rel="nofollow">3.3 导入驱动 Jar 包</a></p> 
<p id="3.4%20%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8-toc" style="margin-left:40px;"><a href="#3.4%20%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8" rel="nofollow">3.4 加载和注册驱动</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9ADriverManager%E7%B1%BB-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9ADriverManager%E7%B1%BB" rel="nofollow">第二章：DriverManager类</a></p> 
<p id="2.1%20DriverManager%20%E4%BD%9C%E7%94%A8%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2.1%20DriverManager%20%E4%BD%9C%E7%94%A8%EF%BC%9A" rel="nofollow">2.1 DriverManager 作用：</a></p> 
<p id="2.2%20%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2.2%20%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">2.2 类中的方法：</a></p> 
<p id="2.3%20%E4%BD%BF%E7%94%A8%20JDBC%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9B%9B%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2.3%20%E4%BD%BF%E7%94%A8%20JDBC%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9B%9B%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A" rel="nofollow">2.3 使用 JDBC 连接数据库的四个参数：</a></p> 
<p id="2.4%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%20URL%20%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F%EF%BC%9A-toc" style="margin-left:40px;"><a href="#2.4%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%20URL%20%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F%EF%BC%9A" rel="nofollow">2.4 连接数据库的 URL 地址格式：</a></p> 
<p id="%E5%8D%8F%E8%AE%AE%E5%90%8D%3A%E5%AD%90%E5%8D%8F%E8%AE%AE%3A%2F%2F%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E6%88%96%20IP%20%E5%9C%B0%E5%9D%80%3A%E7%AB%AF%E5%8F%A3%E5%8F%B7%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%3F%E5%8F%82%E6%95%B0%3D%E5%8F%82%E6%95%B0%E5%80%BC-toc" style="margin-left:40px;"><a href="#%E5%8D%8F%E8%AE%AE%E5%90%8D%3A%E5%AD%90%E5%8D%8F%E8%AE%AE%3A%2F%2F%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E6%88%96%20IP%20%E5%9C%B0%E5%9D%80%3A%E7%AB%AF%E5%8F%A3%E5%8F%B7%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%3F%E5%8F%82%E6%95%B0%3D%E5%8F%82%E6%95%B0%E5%80%BC" rel="nofollow">协议名:子协议://服务器名或 IP 地址:端口号/数据库名?参数=参数值</a></p> 
<p id="2.5%20%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%BE%97%E5%88%B0%20MySQL%20%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1-toc" style="margin-left:40px;"><a href="#2.5%20%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%BE%97%E5%88%B0%20MySQL%20%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1" rel="nofollow">2.5 案例：得到 MySQL 的数据库连接对象</a></p> 
<p id="%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9AConection%E6%8E%A5%E5%8F%A3-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9AConection%E6%8E%A5%E5%8F%A3" rel="nofollow">第三章：Conection接口</a></p> 
<p id="3.1%20Connection%20%E4%BD%9C%E7%94%A8%EF%BC%9A-toc" style="margin-left:40px;"><a href="#3.1%20Connection%20%E4%BD%9C%E7%94%A8%EF%BC%9A" rel="nofollow">3.1 Connection 作用：</a></p> 
<p id="3.2%20Connection%20%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:40px;"><a href="#3.2%20Connection%20%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">3.2 Connection 方法：</a></p> 
<p id="%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9AStatement%E6%8E%A5%E5%8F%A3-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9AStatement%E6%8E%A5%E5%8F%A3" rel="nofollow">第四章：Statement接口</a></p> 
<p id="4.1%20JDBC%20%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;"><a href="#4.1%20JDBC%20%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%AD%A5%E9%AA%A4" rel="nofollow">4.1 JDBC 访问数据库的步骤</a></p> 
<p id="4.2%20Statement%20%E4%BD%9C%E7%94%A8%EF%BC%9A-toc" style="margin-left:40px;"><a href="#4.2%20Statement%20%E4%BD%9C%E7%94%A8%EF%BC%9A" rel="nofollow">4.2 Statement 作用：</a></p> 
<p id="4.3%20Statement%20%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:40px;"><a href="#4.3%20Statement%20%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">4.3 Statement 中的方法：</a></p> 
<p id="4.4%20%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90-toc" style="margin-left:40px;"><a href="#4.4%20%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90" rel="nofollow">4.4 释放资源</a></p> 
<p id="4.5%20%E6%89%A7%E8%A1%8C%20DDL%20%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#4.5%20%E6%89%A7%E8%A1%8C%20DDL%20%E6%93%8D%E4%BD%9C" rel="nofollow">4.5 执行 DDL 操作</a></p> 
<p id="4.6%20%E6%89%A7%E8%A1%8C%20DML%20%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#4.6%20%E6%89%A7%E8%A1%8C%20DML%20%E6%93%8D%E4%BD%9C" rel="nofollow">4.6 执行 DML 操作</a></p> 
<p id="4.7%20%E6%89%A7%E8%A1%8C%20DQL%20%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#4.7%20%E6%89%A7%E8%A1%8C%20DQL%20%E6%93%8D%E4%BD%9C" rel="nofollow">4.7 执行 DQL 操作</a></p> 
<p id="%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E5%85%B7%E7%B1%BBJdbcUtils-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E5%85%B7%E7%B1%BBJdbcUtils" rel="nofollow">第五章：数据库工具类JdbcUtils</a></p> 
<p id="5.1%20%E9%9C%80%E6%B1%82%EF%BC%9A-toc" style="margin-left:40px;"><a href="#5.1%20%E9%9C%80%E6%B1%82%EF%BC%9A" rel="nofollow">5.1 需求：</a></p> 
<p id="%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9APreparedStatement-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9APreparedStatement" rel="nofollow">第六章：PreparedStatement</a></p> 
<p id="6.1%20%E7%BB%A7%E6%89%BF%E7%BB%93%E6%9E%84%E4%B8%8E%E4%BD%9C%E7%94%A8%EF%BC%9A-toc" style="margin-left:40px;"><a href="#6.1%20%E7%BB%A7%E6%89%BF%E7%BB%93%E6%9E%84%E4%B8%8E%E4%BD%9C%E7%94%A8%EF%BC%9A" rel="nofollow">6.1 继承结构与作用：</a></p> 
<p id="6.2%20PreparedSatement%20%E7%9A%84%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#6.2%20PreparedSatement%20%E7%9A%84%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86" rel="nofollow">6.2 PreparedSatement 的执行原理</a></p> 
<p id="6.3%20Connection%20%E5%88%9B%E5%BB%BA%20PreparedStatement%20%E5%AF%B9%E8%B1%A1-toc" style="margin-left:40px;"><a href="#6.3%20Connection%20%E5%88%9B%E5%BB%BA%20PreparedStatement%20%E5%AF%B9%E8%B1%A1" rel="nofollow">6.3 Connection 创建 PreparedStatement 对象</a></p> 
<p id="6.4%20PreparedStatement%20%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:40px;"><a href="#6.4%20PreparedStatement%20%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">6.4 PreparedStatement 接口中的方法：</a></p> 
<p id="6.5%20PreparedSatement%20%E7%9A%84%E5%A5%BD%E5%A4%84-toc" style="margin-left:40px;"><a href="#6.5%20PreparedSatement%20%E7%9A%84%E5%A5%BD%E5%A4%84" rel="nofollow">6.5 PreparedSatement 的好处</a></p> 
<p id="6.6%20%E4%BD%BF%E7%94%A8%20PreparedStatement%20%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:40px;"><a href="#6.6%20%E4%BD%BF%E7%94%A8%20PreparedStatement%20%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow">6.6 使用 PreparedStatement 的步骤：</a></p> 
<p id="6.7%20%E8%A1%A8%E4%B8%8E%E7%B1%BB%E7%9A%84%E5%85%B3%E7%B3%BB-toc" style="margin-left:40px;"><a href="#6.7%20%E8%A1%A8%E4%B8%8E%E7%B1%BB%E7%9A%84%E5%85%B3%E7%B3%BB" rel="nofollow">6.7 表与类的关系</a></p> 
<p id="6.8%20PreparedStatement%20%E6%89%A7%E8%A1%8C%20DML%20%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#6.8%20PreparedStatement%20%E6%89%A7%E8%A1%8C%20DML%20%E6%93%8D%E4%BD%9C" rel="nofollow">6.8 PreparedStatement 执行 DML 操作</a></p> 
<p id="%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9AJDBC%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9AJDBC%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86" rel="nofollow">第七章：JDBC的事务处理</a></p> 
<p id="7.1%20%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE-toc" style="margin-left:40px;"><a href="#7.1%20%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE" rel="nofollow">7.1 准备数据</a></p> 
<p id="7.2%20API%20%E4%BB%8B%E7%BB%8D-toc" style="margin-left:40px;"><a href="#7.2%20API%20%E4%BB%8B%E7%BB%8D" rel="nofollow">7.2 API 介绍</a></p> 
<p id="7.3%20%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;"><a href="#7.3%20%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4" rel="nofollow">7.3 开发步骤</a></p> 
<hr id="hr-toc"> 
<h2 id="%C2%A0%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9AJDBC%E5%85%A5%E9%97%A8"> 第一章：JDBC入门</h2> 
<p><span style="color:#f33b45;"><strong>客户端</strong></span><span style="color:#000000;">操作 </span><span style="color:#f33b45;"><strong>MySQL 数据库</strong></span><span style="color:#000000;">的方式：</span></p> 
<p><span style="color:#000000;">1)使用第三方客户端来访问 </span><span style="color:#3399ea;">MySQL：SQLyog、Navicat、SQLWave、MyDB Studio、EMS SQL Manager for MySQL</span></p> 
<p><img alt="" class="has" height="78" src="https://images2.imgbox.com/e5/14/aKX5gVFD_o.png" width="406"></p> 
<p><span style="color:#000000;">2)使用 </span><span style="color:#000000;">MySQL </span><span style="color:#000000;">自带的命令行方式 </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">通过 </span><span style="color:#000000;">Java </span><span style="color:#000000;">来访问 </span><span style="color:#000000;">MySQL </span><span style="color:#000000;">数据库，今天要学习的内容\</span></p> 
<h3 id="3.1.1%20%E4%BB%80%E4%B9%88%E6%98%AF%20JDBC"><span style="color:#000000;">3.1.1 什么是 JDBC</span></h3> 
<p><span style="color:#000000;"><strong>JDBC </strong></span><span style="color:#000000;"><strong>规范定义</strong></span><span style="color:#ff0000;"><strong>接口</strong></span><span style="color:#000000;"><strong>，具体的实现由各大数据库厂商来实现</strong></span><span style="color:#000000;">。 </span></p> 
<p><strong><span style="color:#000000;">JDBC </span></strong><span style="color:#000000;">是 </span><span style="color:#000000;"><strong>Java</strong> </span><span style="color:#000000;">访问数据库的标准规范，真正怎么操作数据库还需要具体的实现类，也就是</span><span style="color:#ff0000;">数据库驱动</span><span style="color:#000000;">。每个 </span></p> 
<p><span style="color:#000000;">数据库厂商根据自家数据库的通信格式编写好自己数据库的驱动。所以我们只需要会调用 </span><span style="color:#000000;">JDBC </span><span style="color:#000000;">接口中的方法即 </span></p> 
<p><span style="color:#000000;">可，</span><span style="color:#ff0000;">数据库驱动由数据库厂商提供</span><span style="color:#000000;">。 </span></p> 
<h3 id="%E4%BD%BF%E7%94%A8%20JDBC%20%E7%9A%84%E5%A5%BD%E5%A4%84%EF%BC%9A"><span style="color:#000000;">使用 </span><span style="color:#000000;">JDBC </span><span style="color:#000000;">的好处： </span></h3> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">程序员如果要开发访问数据库的程序，只需要会调用 </span><span style="color:#000000;"><strong>JDBC</strong> </span><span style="color:#000000;">接口中的方法即可，不用关注类是如何实现的。 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">使用同一套 </span><span style="color:#000000;"><strong>Java</strong> </span><span style="color:#000000;">代码，进行少量的修改就可以访问其他 </span><span style="color:#000000;"><strong>JDBC</strong> </span><span style="color:#000000;">支持的数据库</span></p> 
<p><img alt="" class="has" height="502" src="https://images2.imgbox.com/b8/59/vFsVJ4Xn_o.png" width="574"></p> 
<h3 id="3.1.2%20%E4%BD%BF%E7%94%A8%20JDBC%20%E5%BC%80%E5%8F%91%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E5%8C%85%EF%BC%9A"><span style="color:#000000;">3.1.2 使用 JDBC 开发使用到的包：</span></h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:544px;"><tbody><tr><td style="width:104px;"> <p><span style="color:#c7edcc;"><strong>会使用到的包 </strong></span></p> </td><td style="width:438px;"><span style="color:#c7edcc;"><strong>说明</strong></span></td></tr><tr><td style="width:104px;"> <p><span style="color:#000000;"><strong>java.sql </strong></span></p> </td><td style="width:438px;"><span style="color:#000000;">所有与 </span><span style="color:#000000;">JDBC </span><span style="color:#000000;">访问数据库相关的接口和类</span></td></tr><tr><td style="width:104px;"> <p><span style="color:#000000;"><strong>javax.sql</strong></span></p> </td><td style="width:438px;"> <p><span style="color:#000000;">数据库扩展包，提供数据库额外的功能。如：连接池</span></p> </td></tr><tr><td style="width:104px;"> <p><span style="color:#000000;"><strong>数据库的驱动 </strong></span></p> </td><td style="width:438px;"><span style="color:#000000;">由各大数据库厂商提供，需要额外去下载，是对 </span><span style="color:#000000;">JDBC </span><span style="color:#000000;">接口实现的类</span></td></tr></tbody></table> 
<h3 id="3.2%20JDBC%20%E7%9A%84%E6%A0%B8%E5%BF%83%20API"><span style="color:#000000;">3.2 JDBC 的核心 API</span></h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:594px;"><tbody><tr><td style="width:175px;"> <p><span style="color:#c7edcc;"><strong>接口或类 </strong></span></p> </td><td style="width:417px;"><span style="color:#c7edcc;"><strong>作用</strong></span></td></tr><tr><td style="width:175px;"> <p><span style="color:#000000;"><strong>DriverManager </strong></span><span style="color:#000000;"><strong>类</strong></span></p> </td><td style="width:417px;"> <p><span style="color:#000000;">1) </span><span style="color:#000000;">管理和注册数据库驱动 </span></p> <p><span style="color:#000000;">2) </span><span style="color:#000000;">得到数据库连接对象</span></p> </td></tr><tr><td style="width:175px;"> <p><span style="color:#000000;"><strong>Connection </strong></span><span style="color:#000000;"><strong>接口 </strong></span></p> </td><td style="width:417px;"><span style="color:#000000;">一个连接对象，可用于创建 </span><span style="color:#000000;">Statement </span><span style="color:#000000;">和 </span><span style="color:#000000;">PreparedStatement </span><span style="color:#000000;">对象</span></td></tr><tr><td style="width:175px;"> <p><span style="color:#000000;"><strong>Statement </strong></span><span style="color:#000000;"><strong>接口 </strong></span></p> </td><td style="width:417px;"><span style="color:#000000;">一个 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句对象，用于将 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句发送给数据库服务器。</span></td></tr><tr><td style="width:175px;"> <p><span style="color:#000000;"><strong>PreparedStatemen 接口</strong></span></p> </td><td style="width:417px;"><span style="color:#000000;">一个 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句对象，是 </span><span style="color:#000000;">Statement </span><span style="color:#000000;">的子接口</span></td></tr><tr><td style="width:175px;"> <p><span style="color:#000000;"><strong>ResultSet 接口</strong></span></p> </td><td style="width:417px;"> </td></tr></tbody></table> 
<h3 id="3.3%20%E5%AF%BC%E5%85%A5%E9%A9%B1%E5%8A%A8%20Jar%20%E5%8C%85"><span style="color:#000000;">3.3 导入驱动 Jar 包</span></h3> 
<p><img alt="" class="has" height="226" src="https://images2.imgbox.com/5d/75/uqXqIeNs_o.png" width="397">   <img alt="" class="has" height="405" src="https://images2.imgbox.com/50/c2/pKQVwqCd_o.png" width="473"></p> 
<h3 id="3.4%20%E5%8A%A0%E8%BD%BD%E5%92%8C%E6%B3%A8%E5%86%8C%E9%A9%B1%E5%8A%A8"><span style="color:#000000;">3.4 加载和注册驱动</span></h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>加载和注册驱动的方法 </strong></span></p> </td><td><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>Class.forName(</strong></span><span style="color:#000000;"><strong>数据库驱动实现类</strong></span><span style="color:#000000;"><strong>)</strong></span></p> </td><td> <p><span style="color:#000000;">加载和注册数据库驱动</span><span style="color:#000000;">，<strong>数据库驱动由 </strong></span><strong><span style="color:#000000;">mysql </span><span style="color:#000000;">厂商 "com.mysql.jdbc.Driver"</span></strong></p> </td></tr></tbody></table> 
<ul><li><span style="color:#000000;"> </span><span style="color:#000000;">疑问：为什么这样可以注册驱动？</span></li></ul> 
<pre class="has"><code class="language-java">package com.lqg;
public class Demo1 {
public static void main(String[] args) throws ClassNotFoundException {
3 / 21//抛出类找不到的异常，注册数据库驱动
Class.forName("com.mysql.jdbc.Driver");
    }
}
 com.mysql.jdbc.Driver 源代码：
// Driver 接口，所有数据库厂商必须实现的接口，表示这是一个驱动类。
public class Driver implements java.sql.Driver {
public Driver() throws SQLException {
    }
static {
try {
DriverManager.registerDriver(new Driver()); //注册数据库驱动
} catch (SQLException var1) {
throw new RuntimeException("Can't register driver!");
        }
    }
}</code></pre> 
<ul><li><span style="color:#000000;">注：从 </span><span style="color:#000000;">JDBC3 </span><span style="color:#000000;">开始，目前已经普遍使用的版本。可以不用注册驱动而直接使用。</span><span style="color:#000000;">Class.forName </span><span style="color:#000000;">这句话可以省略。</span></li></ul> 
<h2 id="%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9ADriverManager%E7%B1%BB">第二章：DriverManager类</h2> 
<h3 id="2.1%20DriverManager%20%E4%BD%9C%E7%94%A8%EF%BC%9A"><span style="color:#000000;">2.1 DriverManager 作用：</span></h3> 
<p><span style="color:#000000;">1) </span><span style="color:#f33b45;">管理和注册驱动 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#f33b45;">创建数据库的连接</span></p> 
<h3 id="2.2%20%E7%B1%BB%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span style="color:#000000;">2.2 类中的方法：</span></h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:700px;"><tbody><tr><td style="width:395px;"> <p><span style="color:#c7edcc;"><strong>DriverManager 类中的静态方法 </strong></span></p> </td><td style="width:301px;"><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td style="width:395px;"> <p><span style="color:#000000;"><strong>Connection getConnection (String url, String user, String password)</strong></span></p> </td><td style="width:301px;"> <p><span style="color:#000000;">通过连接字符串，用户名，密码来得到数据 库的连接对象</span></p> </td></tr><tr><td style="width:395px;"> <p><span style="color:#000000;"><strong>Connection getConnection (String url, Properties info) </strong></span></p> </td><td style="width:301px;"><span style="color:#000000;">通过连接字符串，属性对象来得到连接对象</span></td></tr></tbody></table> 
<h3 id="2.3%20%E4%BD%BF%E7%94%A8%20JDBC%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%9B%9B%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%9A"><span style="color:#000000;">2.3 使用 JDBC 连接数据库的四个参数：</span></h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:540px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>JDBC 连接数据库的四个参数</strong></span></p> </td><td style="width:353px;"><span style="color:#c7edcc;"><strong>说明</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>用户名</strong></span></p> </td><td style="width:353px;"><span style="color:#000000;">登录的用户名</span></td></tr><tr><td> <p><span style="color:#000000;"><strong>密码 </strong></span></p> </td><td style="width:353px;"><span style="color:#000000;">登录的密码</span></td></tr><tr><td> <p><span style="color:#000000;"><strong>连接字符串 </strong></span><span style="color:#000000;"><strong>URL</strong></span></p> </td><td style="width:353px;"> <p><span style="color:#000000;">不同的数据库 </span><span style="color:#000000;">URL </span><span style="color:#000000;">是不同的，</span><span style="color:#000000;">mysql </span><span style="color:#000000;">的写法 </span></p> <p><span style="color:#000000;">jdbc:mysql://localhost:3306/</span><span style="color:#000000;">数据库</span><span style="color:#000000;">[?</span><span style="color:#000000;">参数名</span><span style="color:#000000;">=</span><span style="color:#000000;">参数值</span><span style="color:#000000;">]</span></p> </td></tr><tr><td> <p><span style="color:#000000;"><strong>驱动类的字符串名</strong></span></p> </td><td style="width:353px;"> <p><span style="color:#000000;">com.mysql.jdbc.Driver</span></p> </td></tr></tbody></table> 
<p> </p> 
<h3 id="2.4%20%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%20URL%20%E5%9C%B0%E5%9D%80%E6%A0%BC%E5%BC%8F%EF%BC%9A"><span style="color:#000000;">2.4 连接数据库的 URL 地址格式：</span></h3> 
<h3 id="%E5%8D%8F%E8%AE%AE%E5%90%8D%3A%E5%AD%90%E5%8D%8F%E8%AE%AE%3A%2F%2F%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E6%88%96%20IP%20%E5%9C%B0%E5%9D%80%3A%E7%AB%AF%E5%8F%A3%E5%8F%B7%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%3F%E5%8F%82%E6%95%B0%3D%E5%8F%82%E6%95%B0%E5%80%BC"><span style="color:#c7edcc;"><strong>协议名</strong></span><span style="color:#c7edcc;"><strong>:</strong></span><span style="color:#c7edcc;"><strong>子协议</strong></span><span style="color:#c7edcc;"><strong>://</strong></span><span style="color:#c7edcc;"><strong>服务器名或 </strong></span><span style="color:#c7edcc;"><strong>IP </strong></span><span style="color:#c7edcc;"><strong>地址</strong></span><span style="color:#c7edcc;"><strong>:</strong></span><span style="color:#c7edcc;"><strong>端口号</strong></span><span style="color:#c7edcc;"><strong>/</strong></span><span style="color:#c7edcc;"><strong>数据库名</strong></span><span style="color:#c7edcc;"><strong>?</strong></span><span style="color:#c7edcc;"><strong>参数</strong></span><span style="color:#c7edcc;"><strong>=</strong></span><span style="color:#c7edcc;"><strong>参数值</strong></span></h3> 
<p><strong><span style="color:#000000;">2.4.1 MySQL 写法：</span></strong></p> 
<p><img alt="" class="has" height="124" src="https://images2.imgbox.com/04/4b/CzYCjbht_o.png" width="396"></p> 
<p><strong><span style="color:#000000;">2.4.2 MySQL 中可以简写：</span></strong></p> 
<p><span style="color:#c7edcc;"><strong>前提：必须是本地服务器，端口号是 </strong></span><span style="color:#c7edcc;"><strong>3306 </strong></span></p> 
<p><span style="color:#c7edcc;"><strong>jdbc:mysql:///</strong></span><span style="color:#c7edcc;"><strong>数据库名</strong></span></p> 
<p><strong><span style="color:#000000;">2.4.3 乱码的处理</span></strong></p> 
<p><span style="color:#000000;">如果数据库出现</span><span style="color:#f33b45;">乱码</span><span style="color:#000000;">，可以指定参数</span><span style="color:#000000;">: </span><span style="color:#f33b45;">?characterEncoding=utf8</span><span style="color:#000000;">，表示让数据库以 </span><span style="color:#000000;">UTF-8 </span><span style="color:#000000;">编码来处理数据。</span></p> 
<pre class="has"><code class="language-java">jdbc:mysql://localhost:3306/数据库?characterEncoding=utf8</code></pre> 
<h3 id="2.5%20%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%BE%97%E5%88%B0%20MySQL%20%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%AF%B9%E8%B1%A1"><span style="color:#000000;">2.5 案例：得到 MySQL 的数据库连接对象 </span></h3> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">使用用户名、密码、</span><span style="color:#000000;">URL </span><span style="color:#000000;">得到连接对象</span></p> 
<pre class="has"><code class="language-java">package com.lqg;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
/**
* 得到连接对象
*/
public class Demo2 {
public static void main(String[] args) throws SQLException {
String url = "jdbc:mysql://localhost:3306/day24";
//1) 使用用户名、密码、URL 得到连接对象
Connection connection = DriverManager.getConnection(url, "root", "root");
//com.mysql.jdbc.JDBC4Connection@68de145
System.out.println(connection);
    }
}</code></pre> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">使用属性文件和 </span><span style="color:#000000;">url </span><span style="color:#000000;">得到连接对象</span></p> 
<pre class="has"><code class="language-java">package com.lqg;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.Properties;
public class Demo3 {
public static void main(String[] args) throws SQLException {
//url 连接字符串
String url = "jdbc:mysql://localhost:3306/day24";
//属性对象
Properties info = new Properties();
//把用户名和密码放在 info 对象中
5 / 21info.setProperty("user","root");
info.setProperty("password","root");
Connection connection = DriverManager.getConnection(url, info);
//com.mysql.jdbc.JDBC4Connection@68de145
System.out.println(connection);
    }
}</code></pre> 
<h2 id="%E7%AC%AC%E4%B8%89%E7%AB%A0%EF%BC%9AConection%E6%8E%A5%E5%8F%A3">第三章：Conection接口</h2> 
<h3 id="3.1%20Connection%20%E4%BD%9C%E7%94%A8%EF%BC%9A"><span style="color:#000000;">3.1 Connection 作用： </span></h3> 
<p><span style="color:#f33b45;">Connection 接口</span><span style="color:#000000;">，具体的实现类由数据库的厂商实现，代表一个连接对象。</span></p> 
<h3 id="3.2%20Connection%20%E6%96%B9%E6%B3%95%EF%BC%9A"><span style="color:#000000;">3.2 Connection 方法：</span></h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>Connection 接口中的方法 </strong></span></p> </td><td><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>Statement createStatement() </strong></span></p> </td><td><span style="color:#000000;">创建一条 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句对象</span></td></tr></tbody></table> 
<h2 id="%E7%AC%AC%E5%9B%9B%E7%AB%A0%EF%BC%9AStatement%E6%8E%A5%E5%8F%A3">第四章：Statement接口</h2> 
<h3 id="4.1%20JDBC%20%E8%AE%BF%E9%97%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%AD%A5%E9%AA%A4"><span style="color:#000000;">4.1 JDBC 访问数据库的步骤</span></h3> 
<p><img alt="" class="has" height="318" src="https://images2.imgbox.com/89/dd/SAbLAKAz_o.png" width="554"></p> 
<p><span style="color:#000000;">1) </span><span style="color:#3399ea;">注册和加载驱动</span><span style="color:#000000;">(</span><span style="color:#3399ea;">可以省略</span><span style="color:#000000;">) </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#f33b45;">获取连接 </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#f33b45;">Connection 获取 Statement 对象 </span></p> 
<p><span style="color:#000000;">4) </span><span style="color:#f33b45;">使用 Statement 对象执行 SQL 语句 </span></p> 
<p><span style="color:#000000;">5) </span><span style="color:#f33b45;">返回结果集 </span></p> 
<p><span style="color:#000000;">6) </span><span style="color:#f33b45;">释放资源</span></p> 
<h3 id="4.2%20Statement%20%E4%BD%9C%E7%94%A8%EF%BC%9A"><span style="color:#000000;">4.2 Statement 作用：</span></h3> 
<p><span style="color:#000000;">代表一条语句对象，用于发送 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句给服务器，用于执行静态 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句并返回它所生成结果的对象。</span></p> 
<h3 id="4.3%20Statement%20%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span style="color:#000000;">4.3 Statement 中的方法：</span></h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:636px;"><tbody><tr><td style="width:242px;"> <p><span style="color:#c7edcc;"><strong>Statement 接口中的方法 </strong></span></p> </td><td style="width:391px;"><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td style="width:242px;"> <p><span style="color:#000000;"><strong>int executeUpdate(String sql) </strong></span></p> </td><td style="width:391px;"> <p><span style="color:#000000;">用于发送 </span><span style="color:#000000;">DML </span><span style="color:#000000;">语句，增删改的操作，</span><span style="color:#000000;">insert</span><span style="color:#000000;">、</span><span style="color:#000000;">update </span><span style="color:#000000;">delete </span></p> <p><span style="color:#000000;">参数：</span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句 </span></p> <p><span style="color:#000000;">返回值：返回对数据库影响的行数</span></p> </td></tr><tr><td style="width:242px;"> <p><span style="color:#000000;"><strong>ResultSet executeQuery(String sql) </strong></span></p> </td><td style="width:391px;"> <p><span style="color:#000000;">用于发送 </span><span style="color:#000000;">DQL </span><span style="color:#000000;">语句，执行查询的操作。</span><span style="color:#000000;">select </span></p> <p><span style="color:#000000;">参数：</span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句 </span></p> <p><span style="color:#000000;">返回值：查询的结果集</span></p> </td></tr></tbody></table> 
<h3 id="4.4%20%E9%87%8A%E6%94%BE%E8%B5%84%E6%BA%90"><span style="color:#000000;">4.4 释放资源</span></h3> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">需要释放的对象：</span><span style="color:#f33b45;">ResultSet 结果集，Statement 语句，Connection 连接 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">释放原则：先开的后关，后开的先关。</span><span style="color:#f33b45;">ResultSet  Statement  Connection </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">放在哪个代码块中：</span><span style="color:#f33b45;">finally 块</span></p> 
<h3 id="4.5%20%E6%89%A7%E8%A1%8C%20DDL%20%E6%93%8D%E4%BD%9C"><span style="color:#000000;">4.5 执行 DDL 操作</span></h3> 
<p><strong><span style="color:#000000;">4.5.1 需求：使用 JDBC 在 MySQL 的数据库中创建一张学生表</span></strong></p> 
<p><img alt="" class="has" height="94" src="https://images2.imgbox.com/f1/96/7R8a6b1I_o.png" width="442"></p> 
<p><strong><span style="color:#000000;">4.5.2 代码：</span></strong></p> 
<pre class="has"><code class="language-java">package com.lqg;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
/**
* 创建一张学生表
*/
public class Demo4DDL {
public static void main(String[] args) {
//1. 创建连接
Connection conn = null;
Statement statement = null;
try {
conn = DriverManager.getConnection("jdbc:mysql:///day24", "root", "root");
//2. 通过连接对象得到语句对象
statement = conn.createStatement();
//3. 通过语句对象发送 SQL 语句给服务器
//4. 执行 SQL
statement.executeUpdate("create table student (id int PRIMARY key auto_increment, " +
"name varchar(20) not null, gender boolean, birthday date)");
//5. 返回影响行数(DDL 没有返回值)
System.out.println("创建表成功");
    } catch (SQLException e) {
e.printStackTrace();
    }
//6. 释放资源
finally {
//关闭之前要先判断
if (statement != null) {
try {
statement.close();
} catch (SQLException e) {
e.printStackTrace();
    }
7 / 21}
if (conn != null) {
try {
conn.close();
} catch (SQLException e) {
e.printStackTrace();
          }
        }
      }
   }
}</code></pre> 
<h3 id="4.6%20%E6%89%A7%E8%A1%8C%20DML%20%E6%93%8D%E4%BD%9C"><span style="color:#000000;">4.6 执行 DML 操作</span></h3> 
<ul><li><span style="color:#000000;">需求：向学生表中添加 </span><span style="color:#000000;">4 </span><span style="color:#000000;">条记录，主键是自动增长</span></li></ul> 
<p><img alt="" class="has" height="131" src="https://images2.imgbox.com/40/31/1UbVcQ1C_o.png" width="385"></p> 
<ul><li><strong><span style="color:#000000;">步骤：</span></strong></li></ul> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">创建连接对象 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">创建 </span><span style="color:#000000;">Statement </span><span style="color:#000000;">语句对象 </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">执行 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句：</span><span style="color:#000000;">executeUpdate(sql) </span></p> 
<p><span style="color:#000000;">4) </span><span style="color:#000000;">返回影响的行数 </span></p> 
<p><span style="color:#000000;">5) </span><span style="color:#000000;">释放资源</span></p> 
<ul><li><strong><span style="color:#000000;"> </span><span style="color:#000000;">代码：</span></strong></li></ul> 
<pre class="has"><code class="language-java">package com.lqg;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
/**
* 向学生表中添加 4 条记录，主键是自动增长
*/
public class Demo5DML {
public static void main(String[] args) throws SQLException {
// 1) 创建连接对象
Connection connection = DriverManager.getConnection("jdbc:mysql:///day24", "root",
"root");
// 2) 创建 Statement 语句对象
Statement statement = connection.createStatement();
// 3) 执行 SQL 语句：executeUpdate(sql)
int count = 0;
// 4) 返回影响的行数
count += statement.executeUpdate("insert into student values(null, '孙悟空', 1, '1993-03-24')");
count += statement.executeUpdate("insert into student values(null, '白骨精', 0, '1995-03-24')");
count += statement.executeUpdate("insert into student values(null, '猪八戒', 1, '1903-03-8 / 2124')");
count += statement.executeUpdate("insert into student values(null, '嫦娥', 0, '1993-03-11')");
System.out.println("插入了" + count + "条记录");
// 5) 释放资源
statement.close();
connection.close();
    }
}</code></pre> 
<h3 id="4.7%20%E6%89%A7%E8%A1%8C%20DQL%20%E6%93%8D%E4%BD%9C"><span style="color:#000000;">4.7 执行 DQL 操作</span></h3> 
<p><strong><span style="color:#000000;">4.7.1 ResultSet 接口：</span></strong></p> 
<ul><li><span style="color:#000000;"> </span><span style="color:#000000;">作用：封装数据库查询的结果集，对结果集进行遍历，取出每一条记录。</span></li></ul> 
<p><img alt="" class="has" height="240" src="https://images2.imgbox.com/3e/df/ZQcuvKT6_o.png" width="525"></p> 
<ul><li><span style="color:#000000;">接口中的方法：</span></li></ul> 
<table border="1" cellpadding="1" cellspacing="1" style="width:643px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>ResultSet 接口中的方法 </strong></span></p> </td><td style="width:474px;"><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>boolean next() </strong></span></p> </td><td style="width:474px;"> <p><span style="color:#000000;">1) </span><span style="color:#000000;">游标向下移动 </span><span style="color:#000000;">1 </span><span style="color:#000000;">行</span></p> <p><span style="color:#000000;">2) </span><span style="color:#000000;">返回 </span><span style="color:#000000;">boolean </span><span style="color:#000000;">类型，如果还有下一条记录，返回 </span><span style="color:#000000;">true</span><span style="color:#000000;">，否则返回 </span><span style="color:#000000;">false</span></p> </td></tr><tr><td> <p><span style="color:#000000;"><strong>数据类型 </strong></span><span style="color:#000000;"><strong>getXxx() </strong></span></p> </td><td style="width:474px;"> <p><span style="color:#000000;">1) </span><span style="color:#000000;">通过字段名，参数是 </span><span style="color:#000000;">String </span><span style="color:#000000;">类型。返回不同的类型</span></p> <p><span style="color:#000000;">2) </span><span style="color:#000000;">通过列号，参数是整数，从 </span><span style="color:#000000;">1 </span><span style="color:#000000;">开始。返回不同的类型 </span></p> </td></tr></tbody></table> 
<p>                               <img alt="" class="has" height="339" src="https://images2.imgbox.com/f3/a3/b6OCVmax_o.png" width="488"></p> 
<p><strong><span style="color:#000000;">4.7.2 常用数据类型转换表</span></strong></p> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:527px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>SQL 类型 </strong></span></p> </td><td><span style="color:#c7edcc;"><strong>Jdbc 对应方法</strong></span></td><td style="width:267px;"><span style="color:#c7edcc;"><strong>返回类型</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>BIT(1) bit(n) </strong></span></p> </td><td><span style="color:#000000;"><strong>getBoolean()</strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>boolean</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>TINYINT </strong></span></p> </td><td><span style="color:#000000;"><strong>getByte() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>byte</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>SMALLINT </strong></span></p> </td><td><span style="color:#000000;"><strong>getShort() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>short</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>INT</strong></span></p> </td><td><span style="color:#000000;"><strong>getInt() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>int</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>BIGINT </strong></span></p> </td><td><span style="color:#000000;"><strong>getLong()</strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>long</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>CHAR,VARCHAR </strong></span></p> </td><td><span style="color:#000000;"><strong>getString() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>String</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>Text(Clob) Blob </strong></span></p> </td><td><span style="color:#000000;"><strong>getClob getBlob() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>Clob Blob</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>DATE </strong></span></p> </td><td><span style="color:#000000;"><strong>getDate() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>java.sql.Date </strong></span><span style="color:#000000;"><strong>只代表日期</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>TIME </strong></span></p> </td><td><span style="color:#000000;"><strong>getTime() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>java.sql.Time </strong></span><span style="color:#000000;"><strong>只表示时间</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>TIMESTAMP</strong></span></p> </td><td><span style="color:#000000;"><strong>getTimestamp() </strong></span></td><td style="width:267px;"><span style="color:#000000;"><strong>java.sql.Timestamp </strong></span><span style="color:#000000;"><strong>同时有日期和时间</strong></span></td></tr></tbody></table> 
<blockquote> 
 <p><span style="color:#000000;">java.sql.Date</span><span style="color:#000000;">、</span><span style="color:#000000;">Time</span><span style="color:#000000;">、</span><span style="color:#000000;">Timestamp(</span><span style="color:#f33b45;">时间戳</span><span style="color:#000000;">)</span><span style="color:#000000;">，三个共同父类是：</span><span style="color:#f33b45;">java.util.Date</span></p> 
</blockquote> 
<p><strong><span style="color:#000000;">4.7.3 需求：确保数据库中有 3 条以上的记录，查询所有的学员信息 </span></strong></p> 
<ul><li><span style="color:#000000;">步骤： </span></li></ul> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">得到连接对象 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">得到语句对象 </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">执行 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句得到结果集 </span><span style="color:#000000;">ResultSet </span><span style="color:#000000;">对象 </span></p> 
<p><span style="color:#000000;">4) </span><span style="color:#000000;">循环遍历取出每一条记录 </span></p> 
<p><span style="color:#000000;">5) </span><span style="color:#000000;">输出的控制台上 </span></p> 
<p><span style="color:#000000;">6) </span><span style="color:#000000;">释放资源</span></p> 
<p><span style="color:#000000;">结果：</span></p> 
<p><img alt="" class="has" height="113" src="https://images2.imgbox.com/4f/3b/NEEYVddl_o.png" width="361"></p> 
<pre class="has"><code class="language-java">package com.lqg;
import java.sql.*;
10 / 21/**
* 查询所有的学生信息
*/
public class Demo6DQL {
    public static void main(String[] args) throws SQLException {
    //1) 得到连接对象
    Connection connection =
    DriverManager.getConnection("jdbc:mysql://localhost:3306/day24","root","root");
    //2) 得到语句对象
    Statement statement = connection.createStatement();
    //3) 执行 SQL 语句得到结果集 ResultSet 对象
    ResultSet rs = statement.executeQuery("select * from student");
    //4) 循环遍历取出每一条记录
    while(rs.next()) {
        int id = rs.getInt("id");
        String name = rs.getString("name");
        boolean gender = rs.getBoolean("gender");
        Date birthday = rs.getDate("birthday");
    //5) 输出的控制台上
System.out.println("编号：" + id + ", 姓名：" + name + ", 性别：" + gender + ", 生日：" +birthday);
}
//6) 释放资源
rs.close();
statement.close();
connection.close();
    }
}</code></pre> 
<p><strong><span style="color:#000000;">4.7.4 关于 ResultSet 接口中的注意事项：</span></strong> </p> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">如果光标在第一行之前，使用 </span><span style="color:#000000;">rs.getXX()</span><span style="color:#000000;">获取列值，报错：</span><span style="color:#000000;">Before start of result set </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">如果光标在最后一行之后，使用 </span><span style="color:#000000;">rs.getXX()</span><span style="color:#000000;">获取列值，报错：</span><span style="color:#000000;">After end of result set </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">使用完毕以后要关闭结果集 </span><span style="color:#000000;">ResultSet</span><span style="color:#000000;">，再关闭 </span><span style="color:#000000;">Statement</span><span style="color:#000000;">，再关闭 </span><span style="color:#000000;">Connection</span></p> 
<h2 id="%E7%AC%AC%E4%BA%94%E7%AB%A0%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B7%A5%E5%85%B7%E7%B1%BBJdbcUtils">第五章：数据库工具类JdbcUtils</h2> 
<ul><li><span style="color:#000000;">什么时候自己创建工具类？ </span></li></ul> 
<p><span style="color:#000000;">如果一个功能</span><span style="color:#3399ea;">经常要用到</span><span style="color:#000000;">，我们建议把这个功能做成一个</span><span style="color:#3399ea;">工具类</span><span style="color:#000000;">，可以在不同的地方</span><span style="color:#f33b45;">重用</span><span style="color:#000000;">。</span></p> 
<h3 id="5.1%20%E9%9C%80%E6%B1%82%EF%BC%9A"><span style="color:#000000;">5.1 需求：</span></h3> 
<p><span style="color:#000000;"><strong>5.3.1 需求</strong>：</span></p> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">有一张用户表 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">添加几条用户记录</span></p> 
<pre class="has"><code class="language-sql">create table user (
id int primary key auto_increment,
name varchar(20),
password varchar(20)
)
insert into user values (null,'jack','123'),(null,'rose','456');
-- 登录, SQL 中大小写不敏感
select * from user where name='JACK' and password='123';
-- 登录失败
select * from user where name='JACK' and password='333';</code></pre> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">使用 </span><span style="color:#000000;"><strong>Statement</strong> </span><span style="color:#000000;">字符串拼接的方式实现用户的登录</span><span style="color:#000000;">, </span><span style="color:#000000;">用户在控制台上输入用户名和密码。</span></p> 
<p><strong><span style="color:#000000;">5.3.2 步骤：</span></strong></p> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">得到用户从控制台上输入的用户名和密码来查询数据库 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">写一个登录的方法</span></p> 
<p><span style="color:#000000;">a) </span><span style="color:#000000;">通过工具类得到连接</span></p> 
<p><span style="color:#000000;">b) </span><span style="color:#000000;">创建语句对象，使用拼接字符串的方式生成 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句</span></p> 
<p><span style="color:#000000;">c) </span><span style="color:#000000;">查询数据库，如果有记录则表示登录成功，否则登录失</span></p> 
<p><span style="color:#000000;">d) </span><span style="color:#000000;">释放资源</span></p> 
<pre class="has"><code class="language-java">package com.lqg;
import com.lqg.utils.JdbcUtils;
import javax.xml.transform.Result;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;
public class Demo7Login {
//从控制台上输入的用户名和密码
public static void main(String[] args) {
Scanner sc = new Scanner(System.in);
System.out.println("请输入用户名：");
String name = sc.nextLine();
System.out.println("请输入密码：");
String password = sc.nextLine();
login(name, password);
13 / 21
    }
    /**
    * 登录的方法
    */
public static void login(String name, String password) {
//a) 通过工具类得到连接
Connection connection = null;
Statement statement = null;
ResultSet rs = null;
try {
connection = JdbcUtils.getConnection();
//b) 创建语句对象，使用拼接字符串的方式生成 SQL 语句
statement = connection.createStatement();
//c) 查询数据库，如果有记录则表示登录成功，否则登录失败
String sql = "select * from user where name='" + name + "' and password='" + password
+ "'";
System.out.println(sql);
rs = statement.executeQuery(sql);
if (rs.next()) {
System.out.println("登录成功，欢迎您：" + name);
} else {
System.out.println("登录失败");
    }
    } catch (SQLException e) {
e.printStackTrace();
} finally {
//d) 释放资源
JdbcUtils.close(connection, statement, rs);
        } 
    }
}</code></pre> 
<p><strong><span style="color:#000000;">5.3.3 SQL 注入问题</span></strong></p> 
<ul><li><span style="color:#000000;">当我们输入以下密码，我们发现我们账号和密码都不对竟然登录成功了</span></li></ul> 
<pre class="has"><code class="language-sql">请输入用户名：
newboy
请输入密码：
a' or '1'='1
select * from user where name='newboy' and password='a' or '1'='1'
登录成功，欢迎您：newboy</code></pre> 
<ul><li><span style="color:#000000;"> </span><span style="color:#000000;">问题分析：</span></li></ul> 
<pre class="has"><code class="language-sql">select * from user where name='newboy' and password='a' or '1'='1'
name='newboy' and password='a' 为假
'1'='1' 真
相当于
select * from user where true; 查询了所有记录</code></pre> 
<p><span style="color:#000000;">我们让用户输入的密码和 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句进行字符串拼接。用户输入的内容作为了 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句语法的一部分，改变了 </span></p> 
<p><span style="color:#000000;">原有 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">真正的意义，以上问题称为 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">注入。要解决 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">注入就不能让用户输入的密码和我们的 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句进 </span></p> 
<p><span style="color:#000000;">行简单的字符串拼接。</span></p> 
<h2 id="%E7%AC%AC%E5%85%AD%E7%AB%A0%EF%BC%9APreparedStatement">第六章：PreparedStatement</h2> 
<h3 id="6.1%20%E7%BB%A7%E6%89%BF%E7%BB%93%E6%9E%84%E4%B8%8E%E4%BD%9C%E7%94%A8%EF%BC%9A"><span style="color:#000000;">6.1 继承结构与作用：</span></h3> 
<p><img alt="" class="has" height="314" src="https://images2.imgbox.com/0a/bf/OlgWTNDL_o.png" width="336"></p> 
<p><span style="color:#f33b45;">PreparedStatement</span><span style="color:#000000;"> </span><span style="color:#000000;">是 </span><span style="color:#3399ea;">Statement 接口的子接口</span><span style="color:#000000;">，继承于父接口中所有的方法。它是一个</span><span style="color:#f33b45;">预编译的 SQL 语句</span></p> 
<h3 id="6.2%20PreparedSatement%20%E7%9A%84%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span style="color:#000000;">6.2 PreparedSatement 的执行原理</span></h3> 
<p><img alt="" class="has" height="522" src="https://images2.imgbox.com/78/2d/VR2WftZC_o.png" width="590"></p> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">因为有预先编译的功能，提高 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">的执行效率。 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">可以有效的防止 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">注入的问题，安全性更高。</span></p> 
<h3 id="6.3%20Connection%20%E5%88%9B%E5%BB%BA%20PreparedStatement%20%E5%AF%B9%E8%B1%A1"><span style="color:#000000;">6.3 Connection 创建 PreparedStatement 对象</span></h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:623px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>Connection 接口中的方法 </strong></span></p> </td><td style="width:367px;"><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>PreparedStatement prepareStatement(String sql) </strong></span></p> </td><td style="width:367px;"> <p><span style="color:#000000;">指定预编译的 </span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句，</span><span style="color:#000000;">SQL </span><span style="color:#000000;">语句中使用占位符</span><span style="color:#000000;">? </span></p> <p><span style="color:#000000;">创建一个语句对象 </span></p> </td></tr></tbody></table> 
<h3 id="6.4%20PreparedStatement%20%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span style="color:#000000;">6.4 PreparedStatement 接口中的方法：</span></h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:568px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>PreparedStatement 接口中的方法</strong></span></p> </td><td style="width:349px;"><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>int executeUpdate() </strong></span></p> </td><td style="width:349px;"><span style="color:#000000;">执行 </span><span style="color:#000000;">DML</span><span style="color:#000000;">，增删改的操作，返回影响的行数。</span></td></tr><tr><td> <p><span style="color:#000000;"><strong>ResultSet executeQuery() </strong></span></p> </td><td style="width:349px;"><span style="color:#000000;">执行 </span><span style="color:#000000;">DQL</span><span style="color:#000000;">，查询的操作，返回结果集</span></td></tr></tbody></table> 
<h3 id="6.5%20PreparedSatement%20%E7%9A%84%E5%A5%BD%E5%A4%84"><span style="color:#000000;">6.5 PreparedSatement 的好处</span></h3> 
<p><span style="color:#000000;">1. </span><span style="color:#f33b45;">prepareStatement()</span><span style="color:#000000;">会先将 </span><span style="color:#f33b45;">SQL</span><span style="color:#000000;"> </span><span style="color:#000000;">语句发送给数据库预编译。</span><span style="color:#f33b45;">PreparedStatement</span><span style="color:#000000;"> </span><span style="color:#000000;">会引用着预编译后的结果。 </span></p> 
<p><span style="color:#000000;">可以多次传入不同的参数给 </span><span style="color:#f33b45;">PreparedStatement </span><span style="color:#000000;">对象并执行。减少 </span><span style="color:#f33b45;">SQL</span><span style="color:#000000;"> </span><span style="color:#000000;">编译次数，提高效率。 </span></p> 
<p><span style="color:#000000;">2. </span><span style="color:#000000;">安全性更高，没有 </span><span style="color:#f33b45;">SQL 注入</span><span style="color:#000000;">的隐患。 </span></p> 
<p><span style="color:#000000;">3. </span><span style="color:#000000;">提高了程序的可读性</span></p> 
<h3 id="6.6%20%E4%BD%BF%E7%94%A8%20PreparedStatement%20%E7%9A%84%E6%AD%A5%E9%AA%A4%EF%BC%9A"><span style="color:#000000;">6.6 使用 PreparedStatement 的步骤：</span></h3> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">编写 </span><span style="color:#f33b45;">SQL</span><span style="color:#000000;"> </span><span style="color:#000000;">语句，未知内容使用</span><span style="color:#000000;">?</span><span style="color:#000000;">占位：</span><span style="color:#f33b45;">"SELECT * FROM user WHERE name=? AND password=?";</span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">获得 </span><span style="color:#f33b45;">PreparedStatement </span><span style="color:#000000;">对象</span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">设置实际参数：</span><span style="color:#f33b45;">setXxx</span><span style="color:#000000;">(</span><span style="color:#000000;">占位符的位置</span><span style="color:#000000;">, </span><span style="color:#000000;">真实的值</span><span style="color:#000000;">)</span></p> 
<p><span style="color:#000000;">4) </span><span style="color:#000000;">执行参数化 </span><span style="color:#f33b45;">SQ</span><span style="color:#000000;">L </span><span style="color:#000000;">语句</span></p> 
<p><span style="color:#000000;">5) </span><span style="color:#000000;">关闭资源</span></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:665px;"><tbody><tr><td style="width:330px;"> <p><span style="color:#c7edcc;"><strong>PreparedStatement 中设置参数的方法 </strong></span></p> </td><td style="width:334px;"><span style="color:#c7edcc;"><strong>描述</strong></span></td></tr><tr><td style="width:330px;"> <p><span style="color:#000000;"><strong>void setDouble(int parameterIndex, double x)</strong></span></p> </td><td style="width:334px;"><span style="color:#000000;">将指定参数设置为给定 </span><span style="color:#000000;">Java double </span><span style="color:#000000;">值。</span></td></tr><tr><td style="width:330px;"> <p><span style="color:#000000;"><strong>void setFloat(int parameterIndex, float x) </strong></span></p> </td><td style="width:334px;"><span style="color:#000000;">将指定参数设置为给定 </span><span style="color:#000000;">Java REAL </span><span style="color:#000000;">值。</span></td></tr><tr><td style="width:330px;"> <p><span style="color:#000000;"><strong>void setInt(int parameterIndex, int x) </strong></span></p> </td><td style="width:334px;"><span style="color:#000000;">将指定参数设置为给定 </span><span style="color:#000000;">Java int </span><span style="color:#000000;">值。</span></td></tr><tr><td style="width:330px;"> <p><span style="color:#000000;"><strong>void setLong(int parameterIndex, long x) </strong></span></p> </td><td style="width:334px;"><span style="color:#000000;">将指定参数设置为给定 </span><span style="color:#000000;">Java long </span><span style="color:#000000;">值。</span></td></tr><tr><td style="width:330px;"> <p><span style="color:#000000;"><strong>void setObject(int parameterIndex, Object x) </strong></span></p> </td><td style="width:334px;"><span style="color:#000000;">使用给定对象设置指定参数的值。</span></td></tr><tr><td style="width:330px;"> <p><span style="color:#000000;"><strong>void setString(int parameterIndex, String x) </strong></span></p> </td><td style="width:334px;"><span style="color:#000000;">将指定参数设置为给定 </span><span style="color:#000000;">Java String </span><span style="color:#000000;">值。</span></td></tr></tbody></table> 
<ul><li><span style="color:#000000;">使用 </span><span style="color:#000000;"><strong>PreparedStatement</strong> </span><span style="color:#000000;">改写上面的登录程序，看有没有 </span><span style="color:#f33b45;">SQL 注入</span><span style="color:#000000;">的情况</span></li></ul> 
<pre class="has"><code class="language-java">package com.lqg;
import com.itheima.utils.JdbcUtils;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Scanner;
/**
* 使用 PreparedStatement
*/
public class Demo8Login {
    //从控制台上输入的用户名和密码
    public static void main(String[] args) throws SQLException {
    Scanner sc = new Scanner(System.in);
    System.out.println("请输入用户名");
    String name = sc.nextLine();
    System.out.println("请输入密码：");
    String password = sc.nextLine();
    login(name, password);
}
/**
* 登录的方法
* @param name
16 / 21
* @param password
*/
private static void login(String name, String password) throws SQLException {
    Connection connection = JdbcUtils.getConnection();
    //写成登录 SQL 语句，没有单引号
    String sql = "select * from user where name=? and password=?";
    //得到语句对象
    PreparedStatement ps = connection.prepareStatement(sql);
    //设置参数
    ps.setString(1, name);
    ps.setString(2,password);
    ResultSet resultSet = ps.executeQuery();
    if (resultSet.next()) {
    System.out.println("登录成功：" + name);
    }
    else {
    System.out.println("登录失败");
    }
    //释放资源,子接口直接给父接口
    JdbcUtils.close(connection,ps,resultSet);
    } 
}</code></pre> 
<h3 id="6.7%20%E8%A1%A8%E4%B8%8E%E7%B1%BB%E7%9A%84%E5%85%B3%E7%B3%BB"><span style="color:#000000;">6.7 表与类的关系</span></h3> 
<p><span style="color:#000000;"> </span><img alt="" class="has" height="324" src="https://images2.imgbox.com/b3/85/3dCKT5I9_o.png" width="499"></p> 
<p><strong><span style="color:#000000;">6.7.1 案例：使用 PreparedStatement 查询一条数据，封装成一个学生 Student 对象 </span></strong></p> 
<pre class="has"><code class="language-java">package com.lqg;
import com.lqg.entity.Student;
import com.lqg.utils.JdbcUtils;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
public class Demo9Student {
public static void main(String[] args) throws SQLException {
    //创建学生对象
    Student student = new Student();
    17 / 21
    Connection connection = JdbcUtils.getConnection();
    PreparedStatement ps = connection.prepareStatement("select * from student where              id=?");
    //设置参数
    ps.setInt(1,2);
    ResultSet resultSet = ps.executeQuery();
    if (resultSet.next()) {
    //封装成一个学生对象
    student.setId(resultSet.getInt("id"));
    student.setName(resultSet.getString("name"));
    student.setGender(resultSet.getBoolean("gender"));
    student.setBirthday(resultSet.getDate("birthday"));
    }
    //释放资源
    JdbcUtils.close(connection,ps,resultSet);
    //可以数据
    System.out.println(student);
    } 
}</code></pre> 
<p><strong><span style="color:#000000;">6.7.2 案例：将多条记录封装成集合 List&lt;Student&gt;，集合中每个元素是一个 JavaBean 实体类</span></strong></p> 
<ul><li><span style="color:#000000;">需求： 查询所有的学生类，封装成 </span><span style="color:#000000;">List&lt;Student&gt;</span><span style="color:#000000;">返回 </span></li><li><span style="color:#000000;"> </span><span style="color:#000000;">代码：</span></li></ul> 
<p><img alt="" class="has" height="100" src="https://images2.imgbox.com/93/71/tA8t3xdx_o.png" width="314"></p> 
<pre class="has"><code class="language-java">package com.lqg;
import com.lqg.entity.Student;
import com.lqg.utils.JdbcUtils;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;
public class Demo10List {
public static void main(String[] args) throws SQLException {
    //创建一个集合
    List&lt;Student&gt; students = new ArrayList&lt;&gt;();
    Connection connection = JdbcUtils.getConnection();
    PreparedStatement ps = connection.prepareStatement("select * from student");
    //没有参数替换
    ResultSet resultSet = ps.executeQuery();
    while(resultSet.next()) {
    //每次循环是一个学生对象
    Student student = new Student();
    //封装成一个学生对象
    student.setId(resultSet.getInt("id"));
    18 / 21
    student.setName(resultSet.getString("name"));
        student.setGender(resultSet.getBoolean("gender"));
    student.setBirthday(resultSet.getDate("birthday"));
    //把数据放到集合中
    students.add(student);
    }
    //关闭连接
    JdbcUtils.close(connection,ps,resultSet);
    //使用数据
    for (Student stu: students) {
    System.out.println(stu);
        } 
    }
 }</code></pre> 
<h3 id="6.8%20PreparedStatement%20%E6%89%A7%E8%A1%8C%20DML%20%E6%93%8D%E4%BD%9C"><span style="color:#000000;">6.8 PreparedStatement 执行 DML 操作</span></h3> 
<pre class="has"><code class="language-java">package com.lqg;
import com.lqg.utils.JdbcUtils;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
public class Demo11DML {
public static void main(String[] args) throws SQLException {
    //insert();
    //update();
    delete();
    }
    //插入记录
    private static void insert() throws SQLException {
    Connection connection = JdbcUtils.getConnection();
    PreparedStatement ps = connection.prepareStatement("insert into student
    values(null,?,?,?)");
    ps.setString(1,"小白龙");
    ps.setBoolean(2, true);
    ps.setDate(3,java.sql.Date.valueOf("1999-11-11"));
    int row = ps.executeUpdate();
    System.out.println("插入了" + row + "条记录");
    JdbcUtils.close(connection,ps);
    }
    //更新记录: 换名字和生日
    private static void update() throws SQLException {
    Connection connection = JdbcUtils.getConnection();
    PreparedStatement ps = connection.prepareStatement("update student set name=?,         birthday=?
    where id=?");
    ps.setString(1,"黑熊怪");
    ps.setDate(2,java.sql.Date.valueOf("1999-03-23"));
    ps.setInt(3,5);
    int row = ps.executeUpdate();
    System.out.println("更新" + row + "条记录");
    JdbcUtils.close(connection,ps);
    }
    19 / 21
    //删除记录: 删除第 5 条记录
    private static void delete() throws SQLException {
    Connection connection = JdbcUtils.getConnection();
    PreparedStatement ps = connection.prepareStatement("delete from student where id=?");
    ps.setInt(1,5);
    int row = ps.executeUpdate();
    System.out.println("删除了" + row + "条记录");
    JdbcUtils.close(connection,ps);
    } 
}</code></pre> 
<h2 id="%E7%AC%AC%E4%B8%83%E7%AB%A0%EF%BC%9AJDBC%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86">第七章：JDBC的事务处理</h2> 
<p><span style="color:#000000;">之前我们是使用 </span><span style="color:#f33b45;">MySQL</span><span style="color:#000000;"> </span><span style="color:#000000;">的命令来操作事务。接下来我们使用 </span><span style="color:#000000;">JDBC </span><span style="color:#000000;">来操作银行转账的事务。</span></p> 
<h3 id="7.1%20%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE"><span style="color:#000000;">7.1 准备数据</span></h3> 
<pre class="has"><code class="language-sql">CREATE TABLE account (
id INT PRIMARY KEY AUTO_INCREMENT,
NAME VARCHAR(10),
balance DOUBLE
);
-- 添加数据
INSERT INTO account (NAME, balance) VALUES ('Jack', 1000), ('Rose', 1000);</code></pre> 
<h3> </h3> 
<h3 id="7.2%20API%20%E4%BB%8B%E7%BB%8D"><span style="color:#000000;">7.2 API 介绍 </span></h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:625px;"><tbody><tr><td> <p><span style="color:#c7edcc;"><strong>Connection 接口中与事务有关的方法</strong></span></p> </td><td style="width:395px;"><span style="color:#c7edcc;"><strong>说明</strong></span></td></tr><tr><td> <p><span style="color:#000000;"><strong>void setAutoCommit(boolean autoCommit) </strong></span></p> </td><td style="width:395px;"><span style="color:#000000;">参数是 </span><span style="color:#000000;">true </span><span style="color:#000000;">或 </span><span style="color:#000000;">false</span></td></tr><tr><td> </td><td style="width:395px;"> <p><span style="color:#000000;">如果设置为 </span><span style="color:#000000;">false</span><span style="color:#000000;">，表示关闭自动提交，相当于开启事务</span></p> </td></tr><tr><td> <p><span style="color:#000000;"><strong>void commit()</strong></span></p> </td><td style="width:395px;"><span style="color:#000000;">提交事务</span></td></tr><tr><td> <p><span style="color:#000000;"><strong>void rollback()</strong></span></p> </td><td style="width:395px;"><span style="color:#000000;">回滚事务</span></td></tr></tbody></table> 
<h3 id="7.3%20%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span style="color:#000000;">7.3 开发步骤</span></h3> 
<p><span style="color:#000000;">1) </span><span style="color:#000000;">获取连接 </span></p> 
<p><span style="color:#000000;">2) </span><span style="color:#000000;">开启事务 </span></p> 
<p><span style="color:#000000;">3) </span><span style="color:#000000;">获取到 </span><span style="color:#000000;">PreparedStatement </span></p> 
<p><span style="color:#000000;">4) </span><span style="color:#000000;">使用 </span><span style="color:#000000;">PreparedStatement </span><span style="color:#000000;">执行两次更新操作 </span></p> 
<p><span style="color:#000000;">5) </span><span style="color:#000000;">正常情况下提交事务 </span></p> 
<p><span style="color:#000000;">6) </span><span style="color:#000000;">出现异常回滚事务 </span></p> 
<p><span style="color:#000000;">7) </span><span style="color:#000000;">最后关闭资源</span></p> 
<ul><li><span style="color:#000000;">案例代码</span></li></ul> 
<pre class="has"><code class="language-java">package com.lqg;
import com.lqg.utils.JdbcUtils;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;
public class Demo12Transaction {
    //没有异常，提交事务，出现异常回滚事务
    public static void main(String[] args) {
    20 / 21
    //1) 注册驱动
    Connection connection = null;
    PreparedStatement ps = null;
    try {
    //2) 获取连接
    connection = JdbcUtils.getConnection();
    //3) 开启事务
    connection.setAutoCommit(false);
    //4) 获取到 PreparedStatement
    //从 jack 扣钱
    ps = connection.prepareStatement("update account set balance = balance - ? where
    name=?");
    ps.setInt(1, 500);
    ps.setString(2,"Jack");
    ps.executeUpdate();
    //出现异常
    System.out.println(100 / 0);
    //给 rose 加钱
    ps = connection.prepareStatement("update account set balance = balance + ? where
    name=?");
    ps.setInt(1, 500);
    ps.setString(2,"Rose");
    ps.executeUpdate();
    //提交事务
    connection.commit();
    System.out.println("转账成功");
    } catch (Exception e) {
    e.printStackTrace();
    try {
    //事务的回滚
    connection.rollback();
    } catch (SQLException e1) {
    e1.printStackTrace();
    }
    System.out.println("转账失败");
    }
    finally {
    //7) 关闭资源
    JdbcUtils.close(connection,ps);
        } 
    }
}</code></pre> 
<p>                                                     <strong>  觉得文章对自己有用，想要<span style="color:#f33b45;">继续学</span>下去的可以</strong></p> 
<p><strong>                                                                         可以长按下方<span style="color:#f33b45;">二维码</span>        </strong></p> 
<p>                                                                <img alt="" src="https://images2.imgbox.com/a5/92/gkaUySnC_o.png"></p> 
<p>                                                                        <span style="color:#f33b45;">   <strong>关注【javalingfeng】哦</strong></span></p> 
<p><span style="color:#f33b45;"><strong>                                                          公众号正在更新vue.js和springboot的详细教程</strong></span></p> 
<p><span style="color:#f33b45;"><strong>                                                          还有超多免费Java，Python，Android等系列教程</strong></span></p> 
<p><span style="color:#f33b45;"><strong>                                                                                    等你来领</strong></span></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/64256197b95d817958867c0ebc68ceca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">npm : Depends: node-gyp (&gt;= 0.10.9) but it is not going to be installed</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/01704ec759f7d0a37403a5fd7b7ff3e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">免费版（个人家庭免费使用）xshell6 和 xftp6 及xmanager5 企业版</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>