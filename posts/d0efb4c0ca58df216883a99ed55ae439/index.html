<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>kkfileview介绍安装及使用 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="kkfileview介绍安装及使用" />
<meta property="og:description" content="背景 开发中网页端管理系统中会有各种类型的文件，比如（pdf、doc、docx、xls、ppt、png等），文件上传后数据库存放的都是文件的链接，除了图片能简单地实现在线预览外，其他文件基本上都需要下载了才能看到里面的内容。而有时候我们只是想看看里面的内容，但要我们自己在代码中实现这么多文件都能在线预览的工作量是很大的，还可能会有浏览器和文件的兼容问题。
项目介绍 kkFileView为文件文档在线预览解决方案，该项目使用流行的spring boot搭建，易上手和部署，基本支持主流办公文档的在线预览，如doc,docx,xls,xlsx,ppt,pptx,pdf,txt,zip,rar,图片,视频,音频等等。项目作者也列出了支持预览的20多种大种类的文件。
官方支持的预览文件
软件安装 下面是Windows、Linux、docker三种安装方式，大家可以根据自己的需要进行安装。
开发工具演示 开始Windows版本使用前，我们先使用idea编辑器进行简单的演示，最后用idea将其打成jar，以备后续的其他系统的使用。
1、下载源码文件
码云上搜索 kkFileView
2、Idea运行
运行ServerMain中的main方法就可以。
3、本地预览
项目启动后会自动打开页面，端口号等配置都是可以在config文件夹中修改application.properties配置信息就行修改。具体的配置项代表意思可以进入其官网查询。
本地预览
4、使用maven插件将其打包
打包完的文件就会有Windows和Linux的版本的包。
Windows版本安装 1、将上面打包好的zip的包解压
2、运行bin文件夹中的startup.bat
查看log文件夹中的kkFileView.log文件，出现如下图所示的信息（服务启动完成，演示页访问地址）则表示启动成功。
3、输入地址进行访问，后续操作就和在编辑器上启动时是一样的了。
Docker版本安装 1、拉取镜像: docker pull keking/kkfileview
2、运行: docker run -dit -p 8012:8012 keking/kkfileview
3、进入运行起来的容器中，然后可以进入 /opt/kkFileView-4.2.1-SNAPSHOT/bin 安装目录,
运行命令 ./showlog.sh 查看日志
具体使用 普通文件下载url预览
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js&#34;&gt;&lt;/script&gt;
var url = &#39;http://127.0.0.1:8080/file/test.txt&#39;; //要预览文件的访问地址
window.open(&#39;http://127.0.0.1:8012/onlinePreview?url=&#39;&#43;encodeURIComponent(Base64.encode(url)));
http/https下载流url预览
很多系统内不是直接暴露文件下载地址，而是请求通过id、code等参数到通过统一的接口，后端通过id或code等参数定位文件，再通过OutputStream输出下载，此时下载url是不带文件后缀名的，预览时需要拿到文件名，传一个参数fullfilename=xxx.xxx来指定文件名，示例如下
&lt;script type=&#34;text/javascript&#34; src=&#34;https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js&#34;&gt;&lt;/script&gt;
var originUrl = &#39;http://127.0.0.1:8080/filedownload?fileId=1&#39;; //要预览文件的访问地址 var previewUrl = originUrl &#43; &#39;&amp;fullfilename=test." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/d0efb4c0ca58df216883a99ed55ae439/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-08T09:34:33+08:00" />
<meta property="article:modified_time" content="2023-06-08T09:34:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">kkfileview介绍安装及使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>背景</h4> 
<p>开发中网页端管理系统中会有各种类型的文件，比如（pdf、doc、docx、xls、ppt、png等），文件上传后数据库存放的都是文件的链接，除了图片能简单地实现在线预览外，其他文件基本上都需要下载了才能看到里面的内容。而有时候我们只是想看看里面的内容，但要我们自己在代码中实现这么多文件都能在线预览的工作量是很大的，还可能会有浏览器和文件的兼容问题。</p> 
<p></p> 
<h4>项目介绍</h4> 
<p>kkFileView为文件文档在线预览解决方案，该项目使用流行的spring boot搭建，易上手和部署，基本支持主流办公文档的在线预览，如doc,docx,xls,xlsx,ppt,pptx,pdf,txt,zip,rar,图片,视频,音频等等。项目作者也列出了支持预览的20多种大种类的文件。</p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/8d/8f/e3mPaywI_o.jpg"></p> 
<p>官方支持的预览文件</p> 
<p></p> 
<h4>软件安装</h4> 
<p>下面是Windows、Linux、docker三种安装方式，大家可以根据自己的需要进行安装。</p> 
<p></p> 
<h4>开发工具演示</h4> 
<p>开始Windows版本使用前，我们先使用idea编辑器进行简单的演示，最后用idea将其打成jar，以备后续的其他系统的使用。</p> 
<p></p> 
<p><strong>1、下载源码文件</strong></p> 
<p>码云上搜索 kkFileView</p> 
<p></p> 
<p><strong>2、<strong>Idea运行</strong></strong></p> 
<p>运行ServerMain中的main方法就可以。</p> 
<p><strong>3、本地预览</strong></p> 
<p>项目启动后会自动打开页面，端口号等配置都是可以在config文件夹中修改application.properties配置信息就行修改。具体的配置项代表意思可以进入其官网查询。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/34/b3/aoJaovyM_o.jpg"></p> 
<p>本地预览</p> 
<p></p> 
<p><strong>4、使用maven插件将其打包</strong></p> 
<p>打包完的文件就会有Windows和Linux的版本的包。</p> 
<p></p> 
<h4>Windows版本安装</h4> 
<p><strong>1、将上面打包好的zip的包解压</strong></p> 
<p><strong>2、运行bin文件夹中的startup.bat</strong></p> 
<p>查看log文件夹中的kkFileView.log文件，出现如下图所示的信息（服务启动完成，演示页访问地址）则表示启动成功。</p> 
<p><strong>3、输入地址进行访问，后续操作就和在编辑器上启动时是一样的了。</strong></p> 
<p></p> 
<h4>Docker版本安装</h4> 
<p></p> 
<p></p> 
<p>1、拉取镜像: docker pull keking/kkfileview</p> 
<p></p> 
<p>2、运行: docker run -dit -p 8012:8012 keking/kkfileview</p> 
<p></p> 
<p>3、进入运行起来的容器中，然后可以进入 /opt/kkFileView-4.2.1-SNAPSHOT/bin 安装目录,</p> 
<p></p> 
<p>运行命令 ./showlog.sh 查看日志</p> 
<p></p> 
<h4>具体使用</h4> 
<p></p> 
<p><strong>普通文件下载url预览</strong></p> 
<p></p> 
<blockquote> 
 <p>&lt;script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js"&gt;&lt;/script&gt;</p> 
 <p>var url = 'http://127.0.0.1:8080/file/test.txt'; //要预览文件的访问地址</p> 
 <p>window.open('http://127.0.0.1:8012/onlinePreview?url='+encodeURIComponent(Base64.encode(url)));</p> 
</blockquote> 
<p></p> 
<p><strong>http/https下载流url预览</strong></p> 
<p></p> 
<p>很多系统内不是直接暴露文件下载地址，而是请求通过id、code等参数到通过统一的接口，后端通过id或code等参数定位文件，再通过OutputStream输出下载，此时下载url是不带文件后缀名的，预览时需要拿到文件名，传一个参数fullfilename=xxx.xxx来指定文件名，示例如下</p> 
<p></p> 
<blockquote> 
 <p>&lt;script type="text/javascript" src="https://cdn.jsdelivr.net/npm/js-base64@3.6.0/base64.min.js"&gt;&lt;/script&gt;</p> 
 <p>var originUrl = 'http://127.0.0.1:8080/filedownload?fileId=1'; //要预览文件的访问地址 var previewUrl = originUrl + '&amp;fullfilename=test.txt' window.open('http://127.0.0.1:8012/onlinePreview?url='+encodeURIComponent(Base64.encode(previewUrl)));</p> 
</blockquote> 
<p></p> 
<h4>使用Nginx代理</h4> 
<p>例如nginx的访问地址为 https://file.show.cn 想要使用 https://file.show.cn/preview/来做预览，kkFileView部署在内网192.168.1.140服务器上，需要在nginx中添加反向代理如下：</p> 
<blockquote> 
 <p>location /preview {<!-- --></p> 
 <p>proxy_pass 192.168.1.140:8012;</p> 
 <p>}</p> 
</blockquote> 
<p>修改kkFileView的配置文件如下两项</p> 
<blockquote> 
 <p>server.context-path = /preview</p> 
 <p>base.url = https://file.show.cn/preview</p> 
</blockquote> 
<p>使用如下地址来访问预览页面</p> 
<blockquote> 
 <p>var url = 'https://file.show.cn/file/test.txt'; //要预览文件的访问地址</p> 
 <p>window.open('https://file.show.cn/preview/onlinePreview?url='+encodeURIComponent(url));</p> 
</blockquote> 
<p></p> 
<h4>结束语</h4> 
<p>以上则为文件预览解决方案项目-kkFileView的基本安装和使用，具体的配置文件修改大家可以到官网进行查询从而实现项目的自定义。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c00d2b147ab80ed4a93bc624b0e3d225/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【操作系统】僵尸进程与孤儿进程总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/34df1e5d8210550bdad8dcd08a20515c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">中文网页自动导航挑战赛——lora微调ChatGLM经验分享</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>