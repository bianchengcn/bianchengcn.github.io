<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据库】基础知识【MySql】 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据库】基础知识【MySql】" />
<meta property="og:description" content="《关系数据库标准语言MySQL》 一. 关键词索引 关键词语义insert插入(增)delete删除(删)select查询(查)update更新/修改(改) 二. 数据定义 操作对象创建删除修改模式create schemadrop schema表create tabledrop tablealter table视图create viewdrop view索引create indexdrop indexalter index (一) 模式的定义与删除 Ⅰ. 定义模式 create schema&lt;模式名&gt;authorization&lt;用户名&gt;; //例：为用户zhang创建一个模式test. create schema test authorization zhang ; Ⅱ. 删除模式 drop schema&lt;模式名&gt;&lt;cascade|restrict&gt;; //例：删除模式test. drop schema test cascade //该语句删除了test模式,同时，该模式中已经定义的表也&gt;被删除了 选择了cascade，表示在删除模式的同时把模式中所有的数据库对象全部删除；选择了restrict，只有在该模式中没有任何下属对象时才能执行删除语句； (二) 基本表的定义，删除与修改 Ⅰ. 定义基本表 create table&lt;表名&gt;(&lt;列名&gt;&lt;数据类型&gt;[列级完整性约束条件][,&lt;列名&gt;&lt;数据类型&gt;[列级完整性约束条件]] …… [,&lt;表级完整性约束条件&gt;]); //例：建立一个“学生”表Student. create table Student /*学号*/(Sno char(9) primary key,	/*列级完整性约束条件，Sno是主码*/ /*姓名*/Sname char(20) unique, /*Sname取唯一值*/ /*性别*/Ssex char(2), /*年龄*/Sage smallint, /*专业*/Sdept char(20)); //例：建立一个“课程”表Course. create table Course /*课程号*/(Cno char(4) primary key, /*列级完整性约束条件，Cno是主码*/ /*课程名*/Cname char(40) not null, /*列级完整性约束条件，Cname不能取空值*/ /*先行课*/Cpno char(4), /*学分*/Ccredit smallint, foreign key(Cpno) references Course(Cno)	/*表级完整性约束条件，Cpno是外码，被参照表是Course，被参照列是Cno*/ ); //例：建立一个学生选课表SC." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/fc5fc13b72172703706090eca330e368/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-19T20:47:54+08:00" />
<meta property="article:modified_time" content="2023-03-19T20:47:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据库】基础知识【MySql】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MySQL_0"></a>《<strong>关系数据库标准语言MySQL</strong>》</h2> 
<h2><a id="__2"></a>一. 关键词索引</h2> 
<table><thead><tr><th>关键词</th><th>语义</th></tr></thead><tbody><tr><td>insert</td><td>插入(增)</td></tr><tr><td>delete</td><td>删除(删)</td></tr><tr><td>select</td><td>查询(查)</td></tr><tr><td>update</td><td>更新/修改(改)</td></tr></tbody></table> 
<h2><a id="__9"></a>二. 数据定义</h2> 
<table><thead><tr><th>操作对象</th><th>创建</th><th>删除</th><th>修改</th></tr></thead><tbody><tr><td>模式</td><td>create schema</td><td>drop schema</td><td></td></tr><tr><td>表</td><td>create table</td><td>drop table</td><td>alter table</td></tr><tr><td>视图</td><td>create view</td><td>drop view</td><td></td></tr><tr><td>索引</td><td>create index</td><td>drop index</td><td>alter index</td></tr></tbody></table> 
<h3><a id="__16"></a>(一) 模式的定义与删除</h3> 
<h4><a id="__17"></a>Ⅰ. 定义模式</h4> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">schema</span><span class="token operator">&lt;</span>模式名<span class="token operator">&gt;</span><span class="token keyword">authorization</span><span class="token operator">&lt;</span>用户名<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">//例：为用户zhang创建一个模式test.</span>
<span class="token keyword">create</span> <span class="token keyword">schema</span> test <span class="token keyword">authorization</span> zhang <span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__24"></a>Ⅱ. 删除模式</h4> 
<blockquote> 
 <pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">schema</span><span class="token operator">&lt;</span>模式名<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token keyword">cascade</span><span class="token operator">|</span><span class="token keyword">restrict</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">//例：删除模式test.</span>
<span class="token keyword">drop</span> <span class="token keyword">schema</span> test <span class="token keyword">cascade</span>
<span class="token comment">//该语句删除了test模式,同时，该模式中已经定义的表也&gt;被删除了</span>
</code></pre> 
 <ol><li>选择了<code>cascade</code>，表示在删除模式的同时把模式中所有的数据库对象全部删除；</li><li>选择了<code>restrict</code>，只有在该模式中没有任何下属对象时才能执行删除语句；</li></ol> 
</blockquote> 
<hr> 
<h3><a id="__35"></a>(二) 基本表的定义，删除与修改</h3> 
<h4><a id="__36"></a>Ⅰ. 定义基本表</h4> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>列级完整性约束条件<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>列级完整性约束条件<span class="token punctuation">]</span><span class="token punctuation">]</span>
……
<span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>表级完整性约束条件<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token comment">//例：建立一个“学生”表Student.</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> Student 
<span class="token comment">/*学号*/</span><span class="token punctuation">(</span>Sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>	<span class="token comment">/*列级完整性约束条件，Sno是主码*/</span>
<span class="token comment">/*姓名*/</span>Sname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span> 	<span class="token comment">/*Sname取唯一值*/</span>
<span class="token comment">/*性别*/</span>Ssex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/*年龄*/</span>Sage <span class="token keyword">smallint</span><span class="token punctuation">,</span>
<span class="token comment">/*专业*/</span>Sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">//例：建立一个“课程”表Course.</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> Course
<span class="token comment">/*课程号*/</span><span class="token punctuation">(</span>Cno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 	<span class="token comment">/*列级完整性约束条件，Cno是主码*/</span>
<span class="token comment">/*课程名*/</span>Cname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> 	<span class="token comment">/*列级完整性约束条件，Cname不能取空值*/</span>
<span class="token comment">/*先行课*/</span>Cpno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/*学分*/</span>Ccredit <span class="token keyword">smallint</span><span class="token punctuation">,</span> 
	<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>Cpno<span class="token punctuation">)</span> <span class="token keyword">references</span> Course<span class="token punctuation">(</span>Cno<span class="token punctuation">)</span>	<span class="token comment">/*表级完整性约束条件，Cpno是外码，被参照表是Course，被参照列是Cno*/</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token comment">//例：建立一个学生选课表SC.</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> SC
<span class="token comment">/*学号*/</span>Sno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/*课程号*/</span>Cno <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">/*成绩*/</span>Grade <span class="token keyword">smallint</span><span class="token punctuation">,</span> 
	<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> cno<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token comment">/*主码由两个属性构成，必须作为表级完整性进行定义*/</span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token keyword">references</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token comment">/*表级完整性约束条件，Sno是外码，被参照表是Student*/</span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>Cno<span class="token punctuation">)</span><span class="token keyword">references</span> Course<span class="token punctuation">(</span>Cno<span class="token punctuation">)</span>	<span class="token comment">/*表级完整性约束条件，Cno是外码，被参照表是Course*/</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__70"></a>Ⅱ. 数据类型</h4> 
<table><thead><tr><th>数据类型</th><th>含义</th></tr></thead><tbody><tr><td>char(n), character(n)</td><td>长度为n的定长字符串</td></tr><tr><td>varchar(n), charactervarying(n)</td><td>最大长度为n的变长字符串</td></tr><tr><td>clob</td><td>字符串大对象</td></tr><tr><td>blob</td><td>二进制大对象</td></tr><tr><td>int, integer</td><td>长整数(4字节)</td></tr><tr><td>smallint</td><td>短整数(2字节)</td></tr><tr><td>bigint</td><td>大整数(8字节)</td></tr><tr><td>numeric(p, d)</td><td>定点数， 由p位数字(不包括符号，小数点)组成，小数点后面有b位数字</td></tr><tr><td>decimal(p, d), dec(p, d)</td><td>同numeric</td></tr><tr><td>real</td><td>取决于机器精度的单精度浮点数</td></tr><tr><td>double precision</td><td>取决于机器精度的双精度浮点数</td></tr><tr><td>float(n)</td><td>可选精度的浮点数，精度至少为n位数字</td></tr><tr><td>boolean</td><td>逻辑布尔量</td></tr><tr><td>date</td><td>日期，包括年，月，日，格式为YYYY-MM-DD</td></tr><tr><td>time</td><td>时间，包含一日的时，分，秒，格式为HH:MM:SS</td></tr><tr><td>timestamp</td><td>时间戳类型</td></tr><tr><td>interval</td><td>时间间隔类型</td></tr></tbody></table> 
<h4><a id="__91"></a>Ⅲ. 模式与表</h4> 
<blockquote> 
 <p>🔷当定义基本表时，有三种方法定义它所属的模式；</p> 
 <ol><li>在表名中明显给出模式名：</li></ol> 
 <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token string">"S-T"</span><span class="token punctuation">.</span>Student<span class="token punctuation">(</span>……<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">/*Student所属的模式是S-T*/</span>
</code></pre> 
 <ol start="2"><li>在创建模式语句中同时创建表：</li></ol> 
 <pre><code class="prism language-sql"><span class="token comment">//例：为用户ZHANG创建了一个模式TEST，并且在其中&gt;定义一个表TAB1</span>
<span class="token keyword">CREATE</span> <span class="token keyword">SCHEMA</span> TEST <span class="token keyword">AUTHORIZATION</span> ZHANG 
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> TAB1 <span class="token punctuation">(</span> COL1 <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span> 
	COL2 <span class="token keyword">INT</span><span class="token punctuation">,</span>
	COL3 <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	COL4 <span class="token keyword">NUMERIC</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	COL5 <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
 <ol start="3"><li>设置所属的模式，这样可以在创建表时表名中不必给出模式名；</li></ol> 
</blockquote> 
<h4><a id="__108"></a>Ⅳ. 修改基本表</h4> 
<blockquote> 
 <p>🔷&lt;表名&gt;：是<mark>要修改的基本表</mark>；</p> 
 <pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">add</span> <span class="token punctuation">[</span><span class="token keyword">column</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>新列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">[</span>完整性约束<span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">add</span><span class="token operator">&lt;</span>表级完整性约束<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">drop</span> <span class="token punctuation">[</span><span class="token keyword">column</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">cascade</span> <span class="token operator">|</span> <span class="token keyword">restrict</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">drop</span> <span class="token keyword">constraint</span><span class="token operator">&lt;</span>完整性约束名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">cascade</span> <span class="token operator">|</span> <span class="token keyword">restrict</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">alter</span> <span class="token keyword">column</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token operator">&lt;</span>数据类型<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷add子句：<mark>用于增加新列、新的列级完整性约束条件和新的表级完整性约束条件</mark>；</p> 
 <ol><li>向student表增加“入学时间”列，其数据类型为日期型；</li></ol> 
 <pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">add</span> 入学时间 <span class="token keyword">Date</span><span class="token punctuation">;</span>
</code></pre> 
 <ol start="2"><li>增加课程名必须取唯一值的约束条件；</li></ol> 
 <pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> course
<span class="token keyword">add</span> <span class="token keyword">unique</span><span class="token punctuation">(</span>cname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷drop column子句：<mark>用于删除表中的列</mark>；</p> 
 <ol><li> <p>如果指定了cascade短语，则自动删除引用了该列的其他对象;</p> </li><li> <p>如果指定了restrict短语，则如果该列被其他对象引用，关系数据库管理系统将拒绝删除该列;</p> </li><li> <p>删除‘入学时间’列；</p> </li></ol> 
 <pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">drop</span> <span class="token keyword">column</span> 入学时间<span class="token punctuation">;</span>
</code></pre> 
 <p>🔷drop constraint子句：<mark>用于删除指定的完整性约束条件</mark>；</p> 
 <p>🔷alter column子句：<mark>用于修改原有的列定义</mark>，包括修改列名和数据类型；</p> 
 <ol><li>将年龄的数据类型由字符型改为整数；</li></ol> 
 <pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> student
<span class="token keyword">alter</span> <span class="token keyword">column</span> sage <span class="token keyword">int</span><span class="token punctuation">;</span>
</code></pre> 
</blockquote> 
<h4><a id="__146"></a>Ⅴ. 删除基本表</h4> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">restrict</span> <span class="token operator">|</span> <span class="token keyword">cascade</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h3><a id="__151"></a>(三) 索引的建立与删除</h3> 
<h4><a id="__152"></a>Ⅰ. 建立索引</h4> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">unique</span><span class="token punctuation">]</span><span class="token punctuation">[</span>cluster<span class="token punctuation">]</span><span class="token keyword">index</span><span class="token operator">&lt;</span>索引名<span class="token operator">&gt;</span> <span class="token keyword">on</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>次序<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token operator">&lt;</span>次序<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>……<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//例</span>
<span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> Stusno <span class="token keyword">on</span> Student<span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> SCno <span class="token keyword">on</span> SC<span class="token punctuation">(</span>Sno <span class="token keyword">asc</span><span class="token comment">/*升序*/</span><span class="token punctuation">,</span> Cno <span class="token keyword">desc</span><span class="token comment">/*降序*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__159"></a>Ⅱ. 修改索引</h4> 
<pre><code class="prism language-sql"><span class="token keyword">alter</span> <span class="token keyword">index</span> <span class="token operator">&lt;</span>旧索引名<span class="token operator">&gt;</span><span class="token keyword">rename</span> <span class="token keyword">to</span> <span class="token operator">&lt;</span>新索引名<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__163"></a>Ⅲ. 删除索引</h4> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">index</span> <span class="token operator">&lt;</span>索引名<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<hr> 
<h2><a id="__169"></a>三. 数据查询</h2> 
<blockquote> 
 <pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token punctuation">[</span><span class="token keyword">all</span> <span class="token operator">|</span> <span class="token keyword">distinct</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>目标列表达式<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>目标列表达式<span class="token operator">&gt;</span><span class="token punctuation">]</span>……
<span class="token keyword">from</span> <span class="token operator">&lt;</span>表名或视图名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>表名或视图名<span class="token operator">&gt;</span>……<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token keyword">select</span>语句<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token keyword">as</span><span class="token punctuation">]</span><span class="token operator">&lt;</span>别名<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>条件表达式<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token operator">&lt;</span>列名<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">having</span><span class="token operator">&lt;</span>条件表达式<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token operator">&lt;</span>列名<span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token keyword">asc</span> <span class="token operator">|</span> <span class="token keyword">desc</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷<mark>select语句</mark>：根据Where子句的条件表达式从from子句指定的基本表，视图或派生表中找出满足条件的元组，再按照select子句中的目标列表达式选出元组中的属性值形成结果表；<br> 🔷<mark>group by子句</mark>：如果有该子句，则将结果按&lt;列名1&gt;的值进行分组，该属性列值相等的元组为一组；如果group by子句带having短语，则只有满足指定条件的组才予以输出；</p> 
</blockquote> 
<h3><a id="__179"></a>(一) 单表查询</h3> 
<h4><a id="__180"></a>Ⅰ. 选择表中的若干列</h4> 
<p><strong>🔷查询指定列</strong><br> 1.查询全体学生的学号与姓名</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> sname
<span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fd/a4/5GWdDWlM_o.png" alt="在这里插入图片描述"></p> 
<p><strong>🔷查询全部列</strong><br> 2.查询全体学生的详细记录</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> student
</code></pre> 
<p><img src="https://images2.imgbox.com/95/cb/3An1DZB6_o.png" alt="在这里插入图片描述"><br> <strong>🔷查询经过计算的值</strong><br> 3.查询全体学生的姓名及出生年份</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span> <span class="token number">2022</span><span class="token operator">-</span>sage
<span class="token keyword">from</span> student
</code></pre> 
<p><img src="https://images2.imgbox.com/40/1f/ly3P81iT_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="__204"></a>Ⅱ. 选择表中的若干元组</h4> 
<p><strong>🔷消除取值重复的行(用distinct子句)</strong><br> 1.查询选修了课程的学生学号</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno
<span class="token keyword">from</span> sc<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/65/b7/Up8Ff3Xu_o.png" alt="有重复的学号">有重复的学号<br> 加distinct子句就会解决该问题</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">distinct</span> sno
<span class="token keyword">from</span> sc<span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/74/TPHoXtIA_o.png" alt="在这里插入图片描述"><br> <strong>🔷查询满足条件的元组</strong></p> 
<blockquote> 
 <p>查询满足指定条件的元组可以通过where子句实现。where子句常用的查询条件如下：</p> 
 <table><thead><tr><th>查询条件</th><th>谓词</th></tr></thead><tbody><tr><td>比较</td><td>=, &gt;, &lt;, &gt;=, &lt;=, !=, !&gt;, !&lt;, not+上述比较运算符</td></tr><tr><td>确定范围</td><td>between and, not between and</td></tr><tr><td>确定集合</td><td>in, not in</td></tr><tr><td>字符匹配</td><td>like, not like</td></tr><tr><td>空填</td><td>is null, is not null</td></tr><tr><td>多重条件</td><td>and, or, not</td></tr></tbody></table> 
</blockquote> 
<p><em><strong>(一) 比较大小</strong></em></p> 
<p>1.查询所有年龄在20岁以下的学生的姓名及其年龄</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span> sage
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sage<span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/29/da/9Nw2rhVC_o.png" alt="在这里插入图片描述"><br> 2.查询考试成绩不及格的学生的学号及成绩</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token keyword">distinct</span> sno <span class="token punctuation">,</span> score
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> score<span class="token operator">&lt;</span><span class="token number">60</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/08/e8/BXk2EqZc_o.png" alt="在这里插入图片描述"><br> <em><strong>(二) 确定范围</strong></em><br> 3.查询年龄不在20~23岁之间的学生的姓名，系别和年龄</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span> sdept<span class="token punctuation">,</span> sage
<span class="token keyword">from</span> student 
<span class="token keyword">where</span> sage <span class="token operator">not</span> <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">23</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/b8/s33JoJhG_o.png" alt="在这里插入图片描述"><br> <em><strong>(三) 确定集合</strong></em><br> 4.查询计算机科学系(CS)，数学系(MA)和信息系(IS)学生的姓名和性别；</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span> ssex
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sdept <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'CS'</span><span class="token punctuation">,</span><span class="token string">'MA'</span><span class="token punctuation">,</span><span class="token string">'IS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/d6/vnpUHieg_o.png" alt="在这里插入图片描述"><br> <em><strong>(四) 字符匹配</strong></em></p> 
<blockquote> 
 <p>🔷like一般语法格式如下：<br> <code>[not] like '&lt;匹配串&gt;' [escape'&lt;换码字符&gt;']</code><br> 🔷其含义是查找指定的属性列值与&lt;匹配串&gt;相匹配的元组。&lt;匹配串&gt;可以是完整的字符串，也可以是含有通配符%和_。<br> 🔷<code>%</code>代表任意长度的字符串。如，a%b表示以a开头，以b结尾的任意长度的字符串；<br> 🔷<code>_</code>代表任意单个字符。如，a_b表示以a开头，以b结尾的长度为3 的任意字符串；</p> 
</blockquote> 
<p>5.查询学号为201215121的学生的详细情况</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> student 
<span class="token keyword">where</span> sno <span class="token operator">like</span> <span class="token string">'20172018'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/67/3d/Z5ENpdBG_o.png" alt="在这里插入图片描述"><br> 6.查询所有姓刘的学生的姓名，学号和性别</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span> sno<span class="token punctuation">,</span>ssex
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">'刘%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/55/b8/fBe0TMR0_o.png" alt="在这里插入图片描述"><br> 7.查询姓“古”且全名为三个汉字的学生姓名</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname
<span class="token keyword">from</span> student 
<span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">'古__'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5e/0b/OunG34qk_o.png" alt="在这里插入图片描述"><br> 8.查询名字第二个字为“阳”的学生的姓名与学号</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span> sno
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sname <span class="token operator">like</span> <span class="token string">'_凤%'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/85/ab/O3QtQxo5_o.png" alt="在这里插入图片描述"><br> <em><strong>(五) 涉及空值的查询</strong></em><br> 9.查询所有有成绩的学生的学号和课程号</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> cno<span class="token punctuation">,</span>score
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> score <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/28/ce/G6bWtsGs_o.png" alt="在这里插入图片描述"><br> <em><strong>(六) 多重条件查询</strong></em><br> 10.查询软件工程系年龄在20岁以下的学生姓名及年龄</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sname<span class="token punctuation">,</span>sage
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sdept <span class="token operator">=</span><span class="token string">'软件工程'</span> <span class="token operator">and</span> sage <span class="token operator">&lt;</span><span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ad/9d/aacp449O_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_order_by__322"></a>Ⅲ. order by 子句</h4> 
<blockquote> 
 <p>🔷用户可以用 order by 子句对查询结果按照一个或多个属性列的升序(asc)或降序(desc)排列，默认值为升序；</p> 
</blockquote> 
<p>1.查询选修了3号课程的学生的学号及其成绩，查询结果按分数的降序排列</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> score
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> cno <span class="token operator">=</span> <span class="token string">'c3'</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> score <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/20/49/zF0vxp6E_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="__334"></a>Ⅳ. 聚集函数</h4> 
<table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>count(*)</td><td>统计元组个数</td></tr><tr><td>count([distinct / all] &lt;列名&gt;)</td><td>统计一列中值的个数</td></tr><tr><td>sum([distinct / all] &lt;列名&gt;)</td><td>计算一列值的总和(此列必须是数值型)</td></tr><tr><td>avg([distinct / all] &lt;列名&gt;)</td><td>计算一列值的平均值(此列必须是数值型)</td></tr><tr><td>max([distinct / all] &lt;列名&gt;)</td><td>求一列值中的最大值</td></tr><tr><td>min([distinct / all] &lt;&gt;列名)</td><td>求一列值中的最小值</td></tr></tbody></table> 
<blockquote> 
 <p>🔷如果指定 distinct 短语， 则表示计算时要取消重复值；若指定 all 短语 或 没指定，则表示不取消重复值；</p> 
</blockquote> 
<ol><li>查询学生总人数</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>查询选修了课程的学生人数</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> sno<span class="token punctuation">)</span>
<span class="token keyword">from</span> sc<span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>计算选修了一号课程的学生平均成绩</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span>
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> cno <span class="token operator">=</span> <span class="token string">'c1'</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="4"><li>查询选修了1号课程的学生最高分数</li></ol> 
<pre><code class="prism language-sql"> <span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span>
 <span class="token keyword">from</span> sc
 <span class="token keyword">where</span> cno <span class="token operator">=</span> <span class="token string">'c1'</span>
</code></pre> 
<ol start="5"><li>查询学生20211525选修课程的总学分分数</li></ol> 
<pre><code class="prism language-sql"> <span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>ccredit<span class="token punctuation">)</span>
 <span class="token keyword">from</span> sc<span class="token punctuation">,</span> course
 <span class="token keyword">where</span> sno <span class="token operator">=</span> <span class="token string">'20211525'</span> <span class="token operator">and</span> sc<span class="token punctuation">.</span>cno <span class="token operator">=</span> course<span class="token punctuation">.</span>cno<span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p><code>注意：</code>where子句是不能用聚集函数作为条件表达式的；聚集函数只能用于select子句和group by 中的having子句；</p> 
</blockquote> 
<h4><a id="_group_by__378"></a>Ⅴ. group by 子句</h4> 
<blockquote> 
 <p>🔷group by 子句将查询结果按某一列或多列的值分组，值相等的为一组；<br> 🔷分组后聚集函数将作用与每一个组，即每一组都有一个函数值；<br> 🔷where子句与having短语的区别在于作用对象不同，<mark>where子句作用于基本表或视图，从中选择满足条件的元组</mark>，<mark>having短语作用于组，从中选择满足条件的组</mark>；</p> 
</blockquote> 
<ol><li>求各个课程号及相应的选课人数</li></ol> 
<pre><code class="prism language-sql"> <span class="token keyword">select</span> cno<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span>
 <span class="token keyword">from</span> sc
 <span class="token keyword">group</span> <span class="token keyword">by</span> cno<span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>查询选修了三门以上课程的学生学号</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno
 <span class="token keyword">from</span> sc 
 <span class="token keyword">group</span> <span class="token keyword">by</span> sno
 <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>查询平均成绩大于等于90分的学生学号和平均成绩</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span>
<span class="token keyword">from</span> sc
<span class="token keyword">group</span> <span class="token keyword">by</span> sno
<span class="token keyword">having</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">90</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__406"></a>(二) 连接查询</h3> 
<blockquote> 
 <p>🔷<mark>若一个表同时涉及两个以上的表，则称之为连接查询</mark>；</p> 
</blockquote> 
<ol><li>查询选修2号课程且成绩在90分以上的所有学生的学号和姓名</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">,</span> sname
<span class="token keyword">from</span> sc<span class="token punctuation">,</span> student
<span class="token keyword">where</span> cno <span class="token operator">=</span> <span class="token string">'c2'</span> <span class="token operator">and</span> score <span class="token operator">&gt;</span> <span class="token number">90</span> <span class="token operator">and</span> sc<span class="token punctuation">.</span>sno <span class="token operator">=</span> student<span class="token punctuation">.</span>sno<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__415"></a>(三) 嵌套查询</h3> 
<blockquote> 
 <p>🔷一个<code>select-from-where</code>语句称为一个查询块。将一个查询块嵌套在另一个查询块的where子句或having短语的条件中的查询称之为嵌套查询；</p> 
</blockquote> 
<ol><li>查询与“刘晨”同一个系学习的学生</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sclass
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sclass <span class="token operator">in</span> 
	<span class="token punctuation">(</span><span class="token keyword">select</span> sclass 
	<span class="token keyword">from</span> student
	<span class="token keyword">where</span> sname <span class="token operator">=</span> <span class="token string">'刘晨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>查询选修了课程名为“信息系统”的学生学号和姓名</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> sname
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sno <span class="token operator">in</span>
	<span class="token punctuation">(</span><span class="token keyword">select</span> sno
	<span class="token keyword">from</span> sc
	<span class="token keyword">where</span> cno <span class="token operator">in</span>
		<span class="token punctuation">(</span><span class="token keyword">select</span> cno
		<span class="token keyword">from</span> course
		<span class="token keyword">where</span> cname <span class="token operator">=</span> <span class="token string">'信息系统'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>找出每名学生超过自己选修课平均分的课程号</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno<span class="token punctuation">,</span> cno
<span class="token keyword">from</span> sc x
<span class="token keyword">where</span> score <span class="token operator">&gt;=</span> 
	<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span>
	<span class="token keyword">from</span> sc y
	<span class="token keyword">where</span> y<span class="token punctuation">.</span>sno <span class="token operator">=</span> x<span class="token punctuation">.</span>sno<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_anysomeall_450"></a>Ⅰ. 带有any(some)或all谓词的子查询</h4> 
<table><thead><tr><th>谓词</th><th>说明</th></tr></thead><tbody><tr><td>&gt;any</td><td>大于子查询结果中的某个值</td></tr><tr><td>&gt;all</td><td>大于子查询结果中的所有值</td></tr><tr><td>&lt;any</td><td>小于子查询结果中的某个值</td></tr><tr><td>&lt;all</td><td>小于子查询结果中的所有值</td></tr><tr><td>&gt;=any</td><td>大于等于子查询结果中的某个值</td></tr><tr><td>&gt;=all</td><td>大于等于子查询结果中的所有值</td></tr><tr><td>&lt;=any</td><td>小于等于子查询结果中的某个值</td></tr><tr><td>&lt;=all</td><td>小于等于子查询结果中的所有值</td></tr><tr><td>=any</td><td>等于子查询结果中的某个值</td></tr><tr><td>=all</td><td>等于子查询结果中的所有值</td></tr><tr><td>!=any</td><td>不等于子查询结果中的某个值</td></tr><tr><td>!=all</td><td>不等于子查询结果中的所有值</td></tr></tbody></table> 
<ol><li>查询非计算机科学系中比计算机科学系任意一个学生年龄小的学生姓名和年龄</li></ol> 
<pre><code class="prism language-sql">
</code></pre> 
<h3><a id="__470"></a>(四) 集合查询</h3> 
<hr> 
<hr> 
<h2><a id="__473"></a>四. 数据更新</h2> 
<h3><a id="__474"></a>(一) 插入数据</h3> 
<h4><a id="__475"></a>Ⅰ. 插入元组</h4> 
<blockquote> 
 <p>🔷其功能是<mark>将新元组处插入指定表中</mark>；<br> 🔷<mark>into子句中没有出现的属性列，新元组在这些列上将取空值</mark>，但是表定义时说明了not null 的属性不能取空值否则会报错；<br> 🔷<mark>如果into子句中没有指明任何属性列名，则新插入的元组必须在每个属性列上均有值</mark>；</p> 
 <pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列<span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>…<span class="token punctuation">]</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>常量<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>常量<span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>…<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
</blockquote> 
<ol><li>将一个学生元组(学号：20202336，姓名：陈东，性别：男，所在系：软件工程，年龄：18岁)插入到student表中；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> ssex<span class="token punctuation">,</span> sage<span class="token punctuation">,</span> sdept<span class="token punctuation">)</span> 
<span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'20202336'</span><span class="token punctuation">,</span><span class="token string">'陈东'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token string">'软件工程'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>插入一条选课记录(‘20202336’, ‘c1’);</li></ol> 
<pre><code class="prism language-sql"> <span class="token keyword">insert</span>
 <span class="token keyword">into</span> sc<span class="token punctuation">(</span>sno<span class="token punctuation">,</span> cno<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'20202336'</span><span class="token punctuation">,</span> <span class="token string">'c1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__496"></a>Ⅱ. 插入子查询结果</h4> 
<blockquote> 
 <p>🔷<mark>子查询可以嵌套在insert语句中用以生成要插入的批量数据；</mark></p> 
 <pre><code class="prism language-sql"><span class="token keyword">insert</span>
<span class="token keyword">into</span><span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>属性列<span class="token number">1</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>属性列<span class="token number">2</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>…<span class="token punctuation">]</span>
子查询<span class="token punctuation">;</span>
</code></pre> 
</blockquote> 
<ol><li>对每个系，求学生的平均年龄，并把结果存入数据库中；</li></ol> 
<pre><code class="prism language-sql"><span class="token comment">// 首先在数据库中建立一个新表，一列为系名，另一列为相应学生的平均年龄。</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> Dept_age
	<span class="token punctuation">(</span>sdept <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	avg_age <span class="token keyword">smallint</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 然后对student表按系分组求平均年龄，再把系名和平均年龄存入新表中</span>
<span class="token keyword">insert</span> 
<span class="token keyword">into</span> Dept_age<span class="token punctuation">(</span>sdept<span class="token punctuation">,</span> avg_age<span class="token punctuation">)</span>
<span class="token keyword">select</span> sdept<span class="token punctuation">,</span> <span class="token function">Avg</span><span class="token punctuation">(</span>sage<span class="token punctuation">)</span>
<span class="token keyword">from</span> student
<span class="token keyword">group</span> <span class="token keyword">by</span> sdept<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__516"></a>(二) 修改数据</h3> 
<blockquote> 
 <p>🔷修改操作又称为更新操作，功能是<mark>修改指定表中满足where子句条件的元组；</mark><br> 🔷<mark>set子句给出&lt;表达式&gt;的值用于取代相应的属性列值</mark>。<mark>如果省略where子句，则表示要修改表中所有的元组</mark>。</p> 
 <pre><code class="prism language-sql"><span class="token keyword">update</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span>
<span class="token keyword">set</span> <span class="token operator">&lt;</span>列名<span class="token operator">&gt;=</span><span class="token operator">&lt;</span>表达式<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;=</span><span class="token operator">&lt;</span>表达式<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
</blockquote> 
<h4><a id="___524"></a>Ⅰ. 修改某一个元组的值</h4> 
<ol><li>将学生20202336的年龄改成22岁；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> student
<span class="token keyword">set</span> sage <span class="token operator">=</span> <span class="token number">22</span>
<span class="token keyword">where</span> sno <span class="token operator">=</span> <span class="token string">'20202336'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__532"></a>Ⅱ. 修改多个元组的值</h4> 
<ol><li>将所有的学生的年龄增加一岁；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> student
<span class="token keyword">set</span> sage <span class="token operator">=</span> sage<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__539"></a>Ⅲ. 带子查询的修改语句</h4> 
<ol><li>将软件工程系全体学生的成绩置60；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> sc
<span class="token keyword">set</span> score <span class="token operator">=</span> <span class="token number">60</span>
<span class="token keyword">where</span> sno <span class="token operator">in</span>
	<span class="token punctuation">(</span><span class="token keyword">select</span> sno
	<span class="token keyword">from</span> student
	<span class="token keyword">where</span> sdept <span class="token operator">=</span> <span class="token string">'软件工程'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__550"></a>(三) 删除数据</h3> 
<blockquote> 
 <p>🔷delete语句的功能是<mark>从指定的表中删除满足where子句条件的所有元组</mark>；<br> 🔷<mark>如果省略where子句，则表示删除表中全部元组</mark>，但表的定义仍在字典中；<br> 🔷<mark>delete语句删除的是表中的数据，而不是关于表的定义</mark>；</p> 
 <pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">where</span> <span class="token operator">&lt;</span>条件<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
</blockquote> 
<h4><a id="___559"></a>Ⅰ. 删除某一个元组的值</h4> 
<ol><li>删除学号为20202336的学生记录 ；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> student
<span class="token keyword">where</span> sno <span class="token operator">=</span> <span class="token string">'20202336'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__568"></a>Ⅱ. 删除多个元组的值</h4> 
<ol><li>删除所有学生的选课记录；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> sc<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__575"></a>Ⅲ. 带子查询的删除语句</h4> 
<ol><li>删除软件工程系所有学生的选课记录；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">delete</span>
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> sno <span class="token operator">in</span>
	<span class="token punctuation">(</span><span class="token keyword">select</span> sno
	<span class="token keyword">from</span> student
	<span class="token keyword">where</span> sdept <span class="token operator">=</span> <span class="token string">'软件工程'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<hr> 
<h2><a id="__588"></a>五. 空值的处理</h2> 
<p><strong>1. 空值的产生</strong></p> 
<ol><li>向sc表插入一个元组，学号是‘20202334’，课程号是‘1’，成绩为空；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> sc <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'20202338'</span><span class="token punctuation">,</span> <span class="token string">'c1'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>2. 空值的判断</strong></p> 
<blockquote> 
 <p>🔷判断一个属性的值是否为空值，用 is null 或 is not null 来表示；</p> 
</blockquote> 
<ol start="2"><li>从sc表中找出漏填了数据的选课信息；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span>
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> sno <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> cno <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> score <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>3. 空值的约束条件</strong></p> 
<blockquote> 
 <p>🔷属性定义中有 not null 约束条件的不能取空值；<br> 🔷加了unique 限制的属性不能取空值；<br> 🔷码属性不能取空值；</p> 
</blockquote> 
<p><strong>4. 空值的算术运算，比较运算和逻辑运算</strong></p> 
<ol><li>找出选修1号课程的不及格的学生；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> score<span class="token operator">&lt;</span><span class="token number">60</span> <span class="token operator">and</span> cno <span class="token operator">=</span> <span class="token string">'c1'</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>找出选修1号课程的不及格的学生以及缺考的学生；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno
<span class="token keyword">from</span> sc
<span class="token keyword">where</span> cno <span class="token operator">=</span> <span class="token string">'c1'</span> <span class="token operator">and</span> <span class="token punctuation">(</span>score <span class="token operator">&gt;</span> <span class="token number">60</span> <span class="token operator">or</span> score <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="__624"></a>六. 视图</h2> 
<h3><a id="__625"></a>(一) 定义视图</h3> 
<h4><a id="__626"></a>Ⅰ. 建立视图</h4> 
<blockquote> 
 <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>列名<span class="token operator">&gt;</span><span class="token punctuation">]</span>…<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token keyword">as</span> <span class="token operator">&lt;</span>子查询<span class="token operator">&gt;</span>
<span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷with check option 表示对视图进行update， insert 和 selete 操作时要保证更新，插入，删除的行满足视图定义中的谓词条件；</p> 
</blockquote> 
<ol><li>建立软件工程系学生 的视图；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">view</span> IS_RuanJian
<span class="token keyword">as</span>
<span class="token keyword">select</span> sno<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sage
<span class="token keyword">from</span> student 
<span class="token keyword">where</span> sdept <span class="token operator">=</span> <span class="token string">'软件工程'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__643"></a>Ⅱ. 删除视图</h4> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">view</span> <span class="token operator">&lt;</span>视图名<span class="token operator">&gt;</span> <span class="token punctuation">[</span>casccade<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<ol><li>删除视图IS_RuanJIan;</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">view</span> IS_RuanJian<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__653"></a>(二) 查询视图</h3> 
<ol><li>在软件工程系学生的试图中找出年龄小于20岁发学生；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> sno <span class="token punctuation">,</span> sage
<span class="token keyword">from</span> IS_RuanJian
<span class="token keyword">where</span> sage <span class="token operator">&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="__660"></a>(三) 更新视图</h3> 
<blockquote> 
 <p>🔷更新视图是指通过视图来插入，删除和修改数据；</p> 
</blockquote> 
<ol><li>将软件工程系学生视图中学号为‘20202338’的学生姓名改为‘小买’；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">update</span> IS_RuanJian
<span class="token keyword">set</span> sname <span class="token operator">=</span> <span class="token string">'小买'</span>
<span class="token keyword">where</span> sno<span class="token operator">=</span><span class="token string">'20202338'</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>向软件工程系学生试图中插入新的学生记录，其中学号为‘20202129’，姓名为‘超新’， 年龄为‘20’；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">insert</span> 
<span class="token keyword">into</span> IS_RuanJian<span class="token punctuation">(</span>sno<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sage<span class="token punctuation">)</span>
<span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'20202129'</span><span class="token punctuation">,</span> <span class="token string">'超新'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<hr> 
<h2><a id="_678"></a>《<strong>数据库安全性</strong>》</h2> 
<h2><a id="__680"></a>一. 数据库安全性控制</h2> 
<p><strong>【对象类型==》数据库模式】的存取权限</strong></p> 
<table><thead><tr><th>对象</th><th>操作类型</th></tr></thead><tbody><tr><td>模式</td><td>create schema(创建模式)</td></tr><tr><td>基本表</td><td>create table(创建表), alter table(修改表)</td></tr><tr><td>视图</td><td>create view(创建视图)</td></tr><tr><td>索引</td><td>create index(创建索引)</td></tr></tbody></table> 
<p><strong>【对象类型==》数据】的存取权限</strong></p> 
<table><thead><tr><th>对象</th><th>操作类型</th></tr></thead><tbody><tr><td>基本表和视图</td><td>select(查询), insert(插入), update(更新), delete(删除), references(参考), all privileges(所有特权)</td></tr><tr><td>属性列</td><td>select, insert, update, references, all privileges</td></tr></tbody></table> 
<h3><a id="__694"></a>(一) 授权：授予与收回</h3> 
<h4><a id="__696"></a>Ⅰ. 授予权限</h4> 
<blockquote> 
 <pre><code class="prism language-sql"><span class="token keyword">grant</span> <span class="token operator">&lt;</span>权限<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>权限<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token keyword">on</span> <span class="token operator">&lt;</span>对象类型<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>对象名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>对象类型<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>对象名<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token keyword">to</span> <span class="token operator">&lt;</span>用户<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>用户<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷将对指定操作对象的制定操作权限授予指定用户。<br> 🔷发出该 grant 语句的可以是数据库管理员，也可以是数据库对象创建者，还可以是已经拥有该权限的用户。<br> 🔷接受权限的用户可以是一个或多个具体用户，也可以是public，即全体用户。<br> 🔷如果指定了 with grant option 子句，则获得某种权限的用户还可以把这种权限授予其他用户。</p> 
</blockquote> 
<ol><li>把 查询student表的权限授给用户B1；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">grant</span> <span class="token keyword">select</span>
<span class="token keyword">on</span> student
<span class="token keyword">to</span> B1<span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>把对sc表的查询权限授予所有用户；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">grant</span> <span class="token keyword">select</span>
<span class="token keyword">on</span> sc
<span class="token keyword">to</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="__721"></a>Ⅱ. 收回权限</h4> 
<blockquote> 
 <pre><code class="prism language-sql"><span class="token keyword">revoke</span> <span class="token operator">&lt;</span>权限<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>权限<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token keyword">on</span> <span class="token operator">&lt;</span>对象类型<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>对象名<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>对象类型<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>对象名<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token keyword">from</span> <span class="token operator">&lt;</span>用户<span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token operator">&lt;</span>用户<span class="token operator">&gt;</span><span class="token punctuation">]</span>…
<span class="token punctuation">[</span><span class="token keyword">cascade</span> <span class="token operator">|</span> <span class="token keyword">restrict</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷授予用户的权限可以由数据库管理员或其他授权者用 revoke 语句收回。</p> 
</blockquote> 
<ol><li>把用户U1查询学生学号的权限收回；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">revoke</span> <span class="token keyword">select</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span>
<span class="token keyword">on</span> student
<span class="token keyword">from</span> B1<span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>收回所有用户对sc表的查询权限；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">revoke</span> <span class="token keyword">select</span>
<span class="token keyword">on</span> sc
<span class="token keyword">from</span> <span class="token keyword">public</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>🔷数据库管理员拥有对数据库中所有对象的所有权限，并可以根据实际情况将不同的权限授予不同的用户。<br> 🔷用户对自己建立的基本表和视图拥有全部的操作权限，并且可以用grant语句把其中某些权限授予其他用户。</p> 
</blockquote> 
<h4><a id="__745"></a>Ⅲ. 创建数据据库模式的权限</h4> 
<blockquote> 
 <p>🔷grant 和 revoke 语句向用户授予或收回对数据的操作权限。<br> 🔷对创建数据库模式一类的数据库对象的授权则有数据据库管理员在创建用户时实现。</p> 
 <pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">with</span><span class="token punctuation">]</span><span class="token punctuation">[</span>dba <span class="token operator">|</span> resource <span class="token operator">|</span> <span class="token keyword">connect</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
 <p>🔷只有系统的超级用户才有权创建一个新的数据库用户；<br> 🔷新创建的数据库用户有三种权限：connect，resource 和 dba；<br> 🔷create user 命令中如果没有指定创建的新用户的权限，默认该用户拥有connect权限。<br> 🔷拥有connect权限的用户不能创建新用户，不能创建模式，也不能创建基本表，只能登录数据库。由数据库管理员或其他用户授予他权限，她才能进行权限范围内的其他操作。<br> 🔷拥有resource权限的用户能创建基本表和视图，成为所创建对象的属主，但不能创建模式，不能创建新的用户。数据库对象的属主可以使用grant语句把该对象上的存取权限授与其他人。<br> 🔷🔷拥有 dba 权限的用户是系统中的超级用户，可以创建新的用户，创建模式，创建基本表和视图等；dba拥有对所有数据据库对象的存取权限，还可以把这些权限授予一般用户。</p> 
 <table><thead><tr><th>拥有权限 \ 可执行操作</th><th>create user <br>创建用户</th><th>create schema<br>创建模式</th><th>create table<br>创建表</th><th>登录数据库，执行数据查询和操纵</th></tr></thead><tbody><tr><td>bda</td><td>可以</td><td>可以</td><td>可以</td><td>可以</td></tr><tr><td>resource</td><td>不可以</td><td>不可以</td><td>可以</td><td>可以</td></tr><tr><td>connect</td><td>不可以</td><td>不可以</td><td>不可以</td><td>可以，但必须拥有相应的权限</td></tr></tbody></table> 
</blockquote> 
<hr> 
<hr> 
<h2><a id="_764"></a>《<strong>数据库完整性</strong>》</h2> 
<h2><a id="__765"></a>一. 实体完整性</h2> 
<h3><a id="__766"></a>(一) 定义实体完整性</h3> 
<blockquote> 
 <p>🔷关系模型的实体完整性在create，table 中用 primary key 定义。<br> 🔷对单属性构成的码有两种说明方法：</p> 
 <ol><li>一种是定义为列级约束条件；</li><li>另一种是定义为表级约束条件；</li></ol> 
 <p>🔷对多个属性构成的码只有一种方法，即定义为表级约束条件；</p> 
</blockquote> 
<ol><li>将student表中的sno属性定义为码；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student
<span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>  <span class="token comment">/*在列级定义主码*/</span>
Sname <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
Ssex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Sage <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>
Sdept <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Student
<span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Sname <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
Ssex <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
Sage <span class="token keyword">SMALLINT</span><span class="token punctuation">,</span>
Sdept <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">/*在表级定义主码*/</span>
</code></pre> 
<ol start="2"><li>将sc表中的sno, cno属性定义为码；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> SC
<span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
Cno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
Score <span class="token keyword">smallint</span><span class="token punctuation">,</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">/*只能在表级定义主码*/</span>
</code></pre> 
<h3><a id="__801"></a>(二) 实体完整性检查和违约处理</h3> 
<blockquote> 
 <p>🔷定义了关系的主码后，每当用户对基本表插入一条记录或对主码列进行更新操作时，数据库管理系统将按照实体完整性规则自动进行检查；</p> 
 <ol><li>检查主码值是否唯一，如果不唯一则拒绝插入或修改；</li><li>检查主码的各个属性是否为空，只要有一个为空就拒绝插入或修改；</li></ol> 
</blockquote> 
<h2><a id="__805"></a>二. 参照完整性</h2> 
<h3><a id="__806"></a>(一) 定义参照完整性</h3> 
<blockquote> 
 <p>🔷关系模型的参照完整性在create，table 中用 foreign key 定义那些列为外码，用references 指明这些外码参照那些表的主码。</p> 
</blockquote> 
<ol><li>定义sc中的参照完整性；</li></ol> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> SC
<span class="token punctuation">(</span>Sno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
Cno <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
Score <span class="token keyword">smallint</span><span class="token punctuation">,</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>Sno<span class="token punctuation">,</span> Cno<span class="token punctuation">)</span><span class="token punctuation">,</span>						<span class="token comment">/*在表级定义实体完整性*/</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>sno<span class="token punctuation">)</span> <span class="token keyword">references</span> student<span class="token punctuation">(</span>sno<span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token comment">/*在表级定义参照完整性*/</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cno<span class="token punctuation">)</span> <span class="token keyword">references</span> course<span class="token punctuation">(</span>cno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">/*在表级定义参照完整性*/</span>
</code></pre> 
<h3><a id="__819"></a>(二) 参照完整性检查和违约处理</h3> 
<blockquote> 
 <p>🔷</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/80846a3e7886e7c7235b34937bdabb17/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java学习星球，Java学习路线</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c90df23a594af76d6908ab97f5956b95/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Python】界面设计——GUI编程之【PyQt5】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>