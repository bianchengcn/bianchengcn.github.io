<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Asp.net WebApi 项目示例（增删改查） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Asp.net WebApi 项目示例（增删改查）" />
<meta property="og:description" content="Asp.net WebApi 项目示例（增删改查） 1.WebApi是什么
ASP.NET Web API 是一种框架，用于轻松构建可以由多种客户端（包括浏览器和移动设备）访问的 HTTP 服务。ASP.NET Web API 是一种用于在 .NET Framework 上构建 RESTful 应用程序的理想平台。
可以把WebApi看成Asp.Net项目类型中的一种，其他项目类型诸如我们熟知的WebForm项目，Windows窗体项目，控制台应用程序等。
WebApi类型项目的最大优势就是，开发者再也不用担心客户端和服务器之间传输的数据的序列化和反序列化问题，因为WebApi是强类型的，可以自动进行序列化和反序列化，一会儿项目中会见到。
下面我们建立了一个WebApi类型的项目，项目中对产品Product进行增删改查，Product的数据存放在List&lt;&gt;列表（即内存）中。
2.页面运行效果
如图所示，可以添加一条记录; 输入记录的Id，查询出该记录的其它信息； 修改该Id的记录； 删除该Id的记录。
开始建项目
1）新建一个“ASP.NET Web API项目：
2）和MVC类型的项目相似，构建程序的过程是先建立数据模型（Model）用于存取数据,
这里我们先在Models文件夹中建立产品Product类： Product.cs，如下：
using System; using System.Collections.Generic; using System.Linq; using System.Web; namespace WebApplication7.Models { public class Product { public int Id { get; set; } public string Name { get; set; } public string Category { get; set; } public decimal Price { get; set; } } } 3）试想，我们目前只有一个Product类型的对象，我们要编写一个类对其实现增删改查，以后我们可能会增加其他的类型的对象，再需要编写一个对新类型的对象进行增删改查的类，为了便于拓展和调用，我们在Product之上构造一个接口，使这个接口约定增删改查的方法名称和参数，所以我们在Models文件夹中新建一个接口： IProductRepository." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f809af6e12058c063a8a01ed32cd94b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-18T16:00:19+08:00" />
<meta property="article:modified_time" content="2020-08-18T16:00:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Asp.net WebApi 项目示例（增删改查）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Aspnet_WebApi__0"></a>Asp.net WebApi 项目示例（增删改查）</h3> 
<p><strong>1.WebApi是什么</strong></p> 
<p>ASP.NET Web API 是一种框架，用于轻松构建可以由多种客户端（包括浏览器和移动设备）访问的 HTTP 服务。ASP.NET Web API 是一种用于在 .NET Framework 上构建 RESTful 应用程序的理想平台。</p> 
<p>可以把WebApi看成Asp.Net项目类型中的一种，其他项目类型诸如我们熟知的WebForm项目，Windows窗体项目，控制台应用程序等。</p> 
<p>WebApi类型项目的最大优势就是，开发者再也不用担心客户端和服务器之间传输的数据的序列化和反序列化问题，因为WebApi是强类型的，可以自动进行序列化和反序列化，一会儿项目中会见到。</p> 
<p>下面我们建立了一个WebApi类型的项目，项目中对产品Product进行增删改查，Product的数据存放在List&lt;&gt;列表（即内存）中。</p> 
<p><strong>2.页面运行效果</strong><br> <img src="https://images2.imgbox.com/87/33/2ce1KS52_o.png" alt="在这里插入图片描述"><br> 如图所示，可以添加一条记录; 输入记录的Id，查询出该记录的其它信息； 修改该Id的记录； 删除该Id的记录。</p> 
<p><strong>开始建项目</strong></p> 
<p>1）新建一个“ASP.NET Web API项目：<br> <img src="https://images2.imgbox.com/e1/23/9magideh_o.png" alt="在这里插入图片描述"><br> 2）和MVC类型的项目相似，构建程序的过程是先建立数据模型（Model）用于存取数据,<br> 这里我们先在Models文件夹中建立产品Product类： Product.cs，如下：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Linq<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Web<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApplication7<span class="token punctuation">.</span>Models
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Product</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token keyword">int</span> Id <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Name <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">string</span> Category <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">decimal</span> Price <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>3）试想，我们目前只有一个Product类型的对象，我们要编写一个类对其实现增删改查，以后我们可能会增加其他的类型的对象，再需要编写一个对新类型的对象进行增删改查的类，为了便于拓展和调用，我们在Product之上构造一个接口，使这个接口约定增删改查的方法名称和参数，所以我们在Models文件夹中新建一个接口： IProductRepository.cs ，如下：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Linq<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApplication7<span class="token punctuation">.</span>Models
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">interface</span> <span class="token class-name">IProductRepository</span>
    <span class="token punctuation">{<!-- --></span>
        IEnumerable<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Product</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Product</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name">Product</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">void</span> <span class="token function">Remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">bool</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token class-name">Product</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>4）然后，我们实现这个接口，在Models文件夹中新建一个类，具体针对Product类型的对象进行增删改查存取数据，并在该类的构造方法中，向List列表中存入几条数据，这个类叫：ProductRepository.cs，如下：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Linq<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Web<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApplication7<span class="token punctuation">.</span>Models
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductRepository</span> <span class="token punctuation">:</span> <span class="token class-name">IProductRepository</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> List<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> products <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-method"><span class="token function">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> _nextId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token function">ProductRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Product</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> <span class="token string">"西瓜"</span><span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"水果"</span><span class="token punctuation">,</span> Price <span class="token operator">=</span> <span class="token number">2.50</span>M <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Product</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> <span class="token string">"土豆"</span><span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"蔬菜"</span><span class="token punctuation">,</span> Price <span class="token operator">=</span> <span class="token number">1.75</span>M <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Product</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> <span class="token string">"酸奶"</span><span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"饮料"</span><span class="token punctuation">,</span> Price <span class="token operator">=</span> <span class="token number">8.99</span>M <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Product</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> <span class="token string">"冰箱"</span><span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"家电"</span><span class="token punctuation">,</span> Price <span class="token operator">=</span> <span class="token number">3000</span>M <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> products<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> products<span class="token punctuation">.</span><span class="token function">Find</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>Id <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token class-name">Product</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">"item"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            item<span class="token punctuation">.</span>Id <span class="token operator">=</span> _nextId<span class="token operator">++</span><span class="token punctuation">;</span>
            products<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            products<span class="token punctuation">.</span><span class="token function">RemoveAll</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>Id <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token class-name">Product</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ArgumentNullException</span><span class="token punctuation">(</span><span class="token string">"item"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token function">FindIndex</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>Id <span class="token operator">==</span> item<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            products<span class="token punctuation">.</span><span class="token function">RemoveAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            products<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>此时，Model层就构建好了。</p> 
<p>5）下面，我们要构建Controller层，在此之前，先回顾一下Http中几种请求类型，如下</p> 
<p>get 类型 用于从服务器端获取数据，且不应该对服务器端有任何操作和影响</p> 
<p>post 类型 用于发送数据到服务器端，创建一条新的数据，对服务器端产生影响</p> 
<p>put 类型 用于向服务器端更新一条数据，对服务器端产生影响 （也可创建一条新的数据但不推荐这样用）</p> 
<p>delete 类型 用于删除一条数据，对服务器端产生影响</p> 
<p>这样，四种请求类型刚好可对应于对数据的 查询，添加，修改，删除。WebApi也推荐如此使用。在WebApi</p> 
<p>项目中，我们请求的不再是一个具体页面，而是各个控制器中的方法（控制器也是一种类，默认放在Controllers</p> 
<p>文件夹中）。下面我们将要建立一个ProductController.cs控制器类，其中的方法都是以“Get Post Put Delete”中</p> 
<p>的任一一个开头的，这样的开头使得Get类型的请求发送给以Get开头的方法去处理，Post类型的请求交给Post开头的方法去处理，Put和Delete同理。</p> 
<pre><code>而以Get开头的方法有好几个也是可以的，此时如何区分到底交给哪个方法执行呢？这就取决于Get开头的方法们的传入参数了，一会儿在代码中可以分辨。
</code></pre> 
<p>构建Controller层，在Controllers文件夹中建立一个ProductController.cs控制器类，如下：</p> 
<pre><code class="prism language-csharp">  <span class="token keyword">using</span> System<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Linq<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Http<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Web<span class="token punctuation">.</span>Http<span class="token punctuation">;</span>
<span class="token keyword">using</span> WebApplication7<span class="token punctuation">.</span>Models<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> WebApplication7<span class="token punctuation">.</span>Controllers
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductController</span> <span class="token punctuation">:</span> <span class="token class-name">ApiController</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">IProductRepository</span> repository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//GET:  /api/products</span>
        <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> <span class="token function">GetAllProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> repository<span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//GET: /api/products/id</span>
        <span class="token keyword">public</span> <span class="token class-name">Product</span> <span class="token function">GetProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Product</span> item <span class="token operator">=</span> repository<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponseException</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//GET: /api/products?category=category</span>
        <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> <span class="token function">GetProductsByCategory</span><span class="token punctuation">(</span><span class="token keyword">string</span> category<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> repository<span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>Category<span class="token punctuation">,</span> category<span class="token punctuation">,</span> StringComparison<span class="token punctuation">.</span>OrdinalIgnoreCase<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//POST: /api/products</span>
        <span class="token keyword">public</span> <span class="token class-name">HttpResponseMessage</span> <span class="token function">PostProduct</span><span class="token punctuation">(</span><span class="token class-name">Product</span> item<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            item <span class="token operator">=</span> repository<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> response <span class="token operator">=</span> Request<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">CreateResponse</span><span class="token punctuation">&lt;</span><span class="token class-name">Product</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>Created<span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">string</span> uri <span class="token operator">=</span> Url<span class="token punctuation">.</span><span class="token function">Link</span><span class="token punctuation">(</span><span class="token string">"DefaultApi"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token punctuation">{<!-- --></span> id <span class="token operator">=</span> item<span class="token punctuation">.</span>Id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            response<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uri</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//PUT: /api/products/id</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">PutProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">Product</span> product<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            product<span class="token punctuation">.</span>Id <span class="token operator">=</span> id<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>repository<span class="token punctuation">.</span><span class="token function">Update</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponseException</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//Delete: /api/products/id</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">DeleteProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Product</span> item <span class="token operator">=</span> repository<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponseException</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            repository<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使该类继承于ApiController类，在其中实现处理各种Get,Post,Put,Delete类型Http请求的方法。</p> 
<p>每一个方法前都有一句注释，标识了该方法的针对的请求的类型（取决于方法的开头），以及</p> 
<p>要请求到该方法，需要使用的url。</p> 
<p>这些url是有规律的，见下图：</p> 
<p><img src="https://images2.imgbox.com/13/19/6sJJQfmC_o.png" alt="在这里插入图片描述"></p> 
<p>api是必须的，products对应的是ProductsControllers控制器，然后又Http请求的类型和url的</p> 
<p>后边地址决定。</p> 
<p>这里，我们除了第三个“Get a product by category”,其他方法都实现了。</p> 
<p>6）最后，我们来构建View视图层，我们更改Views文件夹中的Home文件夹下的Index.cshtml文件，</p> 
<p>这个文件是项目启动页，如下：</p> 
<pre><code class="prism language-csharp"> <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"body"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"~/Scripts/jquery-1.10.2.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

        

        <span class="token operator">&lt;</span>section<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>添加记录<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            Name<span class="token punctuation">:</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"name"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            Category<span class="token punctuation">:</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"category"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            Price<span class="token punctuation">:</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"price"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"addItem"</span> type<span class="token operator">=</span><span class="token string">"button"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"添加"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span>



        <span class="token operator">&lt;</span>section<span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>修改记录<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
            Id：<span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"id2"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            Name<span class="token punctuation">:</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"name2"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            Category<span class="token punctuation">:</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"category2"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            Price<span class="token punctuation">:</span><span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"price2"</span> type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"showItem"</span> type<span class="token operator">=</span><span class="token string">"button"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"查询"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"editItem"</span> type<span class="token operator">=</span><span class="token string">"button"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"修改"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"removeItem"</span> type<span class="token operator">=</span><span class="token string">"button"</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token string">"删除"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">//用于保存用户输入数据</span>
    <span class="token keyword">var</span> Product <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        create<span class="token punctuation">:</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            Id<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
            Name<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
            Category<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
            Price<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Product<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//添加一条记录 请求类型:POST  请求url:  /api/Products</span>
    <span class="token comment">//请求到ProductsController.cs中的 public HttpResponseMessage PostProduct(Product item) 方法</span>
    $<span class="token punctuation">(</span><span class="token string">"#addItem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> newProduct <span class="token operator">=</span> Product<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newProduct<span class="token punctuation">.</span>Name <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newProduct<span class="token punctuation">.</span>Category <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#category"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newProduct<span class="token punctuation">.</span>Price <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#price"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            url<span class="token punctuation">:</span> <span class="token string">"/api/Product"</span><span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>
            contentType<span class="token punctuation">:</span> <span class="token string">"application/json; charset=utf-8"</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newProduct<span class="token punctuation">)</span><span class="token punctuation">,</span>
            success<span class="token punctuation">:</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"添加成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            error<span class="token punctuation">:</span> function <span class="token punctuation">(</span>XMLHttpRequest<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> errorThrown<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"请求失败，消息："</span> <span class="token operator">+</span> textStatus <span class="token operator">+</span> <span class="token string">"  "</span> <span class="token operator">+</span> errorThrown<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//先根据Id查询记录  请求类型:GET  请求url:  /api/Products/Id</span>
    <span class="token comment">//请求到ProductsController.cs中的 public Product GetProduct(int id) 方法</span>
    $<span class="token punctuation">(</span><span class="token string">"#showItem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> inputId <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#id2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">(</span><span class="token string">"#name2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">(</span><span class="token string">"#category2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">(</span><span class="token string">"#price2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            url<span class="token punctuation">:</span> <span class="token string">"/api/Product/"</span> <span class="token operator">+</span> inputId<span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
            contentType<span class="token punctuation">:</span> <span class="token string">"application/json; charset=urf-8"</span><span class="token punctuation">,</span>
            success<span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                $<span class="token punctuation">(</span><span class="token string">"#name2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                $<span class="token punctuation">(</span><span class="token string">"#category2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>Category<span class="token punctuation">)</span><span class="token punctuation">;</span>
                $<span class="token punctuation">(</span><span class="token string">"#price2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>Price<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            error<span class="token punctuation">:</span> function <span class="token punctuation">(</span>XMLHttpRequest<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> errorThrown<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"请求失败，消息："</span> <span class="token operator">+</span> textStatus <span class="token operator">+</span> <span class="token string">"  "</span> <span class="token operator">+</span> errorThrown<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//修改该Id的记录 请求类型:PUT  请求url:  /api/Products/Id</span>
    <span class="token comment">//请求到ProductsController.cs中的 public void PutProduct(int id, Product product) 方法</span>
    $<span class="token punctuation">(</span><span class="token string">"#editItem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> inputId <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#id2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> newProduct <span class="token operator">=</span> Product<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newProduct<span class="token punctuation">.</span>Name <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#name2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newProduct<span class="token punctuation">.</span>Category <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#category2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        newProduct<span class="token punctuation">.</span>Price <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#price2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            url<span class="token punctuation">:</span> <span class="token string">"/api/Product/"</span> <span class="token operator">+</span> inputId<span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">"PUT"</span><span class="token punctuation">,</span>
            data<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>newProduct<span class="token punctuation">)</span><span class="token punctuation">,</span>
            contentType<span class="token punctuation">:</span> <span class="token string">"application/json; charset=urf-8"</span><span class="token punctuation">,</span>
            success<span class="token punctuation">:</span> function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"修改成功！ "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            error<span class="token punctuation">:</span> function <span class="token punctuation">(</span>XMLHttpRequest<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> errorThrown<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"请求失败，消息："</span> <span class="token operator">+</span> textStatus <span class="token operator">+</span> <span class="token string">"  "</span> <span class="token operator">+</span> errorThrown<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//删除输入Id的记录  请求类型:DELETE  请求url:  /api/Products/Id</span>
    <span class="token comment">//请求到ProductsController.cs中的  public void DeleteProduct(int id) 方法</span>
    $<span class="token punctuation">(</span><span class="token string">"#removeItem"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> inputId <span class="token operator">=</span> $<span class="token punctuation">(</span><span class="token string">"#id2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            url<span class="token punctuation">:</span> <span class="token string">"/api/Product/"</span> <span class="token operator">+</span> inputId<span class="token punctuation">,</span>
            type<span class="token punctuation">:</span> <span class="token string">"DELETE"</span><span class="token punctuation">,</span>
            contentType<span class="token punctuation">:</span> <span class="token string">"application/json; charset=uft-8"</span><span class="token punctuation">,</span>
            success<span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Id为 "</span> <span class="token operator">+</span> inputId <span class="token operator">+</span> <span class="token string">" 的记录删除成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            error<span class="token punctuation">:</span> function <span class="token punctuation">(</span>XMLHttpRequest<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> errorThrown<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"请求失败，消息："</span> <span class="token operator">+</span> textStatus <span class="token operator">+</span> <span class="token string">"  "</span> <span class="token operator">+</span> errorThrown<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>这里，WebApi的一个简单的增删改查项目就完成了，选择执行项目即可测试。注意到，其中用ajax发起请求时，<br> 发送到服务器端的数据直接是一个json字符串，当然这个json字符串中每个字段要和Product.cs类中的每个字段同名对应，在服务器端接收数据的时候，我们并没有对接收到的数据进行序列化，而返回数据给客户端的时候也并没有对数据进行反序列化，大大节省了以前开发中不停地进行序列化和反序列化的时间。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3733ed4b84974441663d13e0b0893566/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">揭秘三大运营商在5G专网的布局！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3426a585e61e940b9f8bdeeb5421cd69/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2020.08最新必看 pytorch&#43;cuda10.2（或10.1）&#43;python3.7版 30min完成安装（五小时血泪经验）亲测可用！！防坑！！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>