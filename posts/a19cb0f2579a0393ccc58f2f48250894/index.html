<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Linux】gdb安装、执行与调试 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Linux】gdb安装、执行与调试" />
<meta property="og:description" content="目录
一、linux内安装gdb
二、使用gdb调试程序步骤
1.执行程序
2.调试
设置断点
开始调试
debug版本与release版本的说明： debug版本：在编译阶段会加入某些调试信息，是给程序员使用的
release版本：linux默认的版本，给用户的发行版本，没有调试信息，调试信息是在编译过程中加入到中间文件.o文件的。
使用gdb调试程序的前提是：待调试的程序中包含有调试符号信息，即生成debug版本的程序。
一、linux内安装gdb 参照vim安装方法 当再次输入为如下界面，即安装成功 二、使用gdb调试程序步骤 1.执行程序 gdb命令run（可以简写为r）执行装载代码，在run命令之后可以指定程序运行所需要的参数。(gdb) r 2.调试 设置断点 如果程序中存在断点，则会在断点处自动暂停。通过使用gdb逐步调试代码，可以看到程序内部是如何运行的，还可以知道什么命令正在执行，变量的值的变化以及其他一些细节问题。 与断点相关命令：
首先，调用gdb，装载子程序：以main.c示例 $gdb main 如要在GDB启动后载入，使用file命令：(gdb) file main1 开始调试 gcc -o test test.c -g //编译生成test执行文件
调试信息是在编译阶段进行的，而不是链接阶段
gdb test //在gdb内调试test文件
b &#43;行号: 加断点 通过使用break命令（可简写为b）指定一个特定的位置设置断点。指定一个特定的位置设置断点，当程序运行到这个位置时就被中断，然后把程序的控制权交给调试器和程序员。设置断点的最简单形式——在break命令后加入行号来在该行加入断点,如下所示：
设置断点时也可以进行条件判断，即只有条件为真，程序到达指定行或函数时才停下来。 (gdb) b 9 if i&gt;9 info b / info break 查看断点信息，包括编号、类型、地址等。
delete &#43;断点编号 : 删除断点 图示为删除断点编号为2的断点信息
在delete命令后加入断点编号可以删除指定的断点。不指定断点号则删除所有的断点。 (gdb) d 1 －－删除编号为1的断点delete命令后面可以跟一个范围 (gdb) d 1-6 －－删除编号为1~6的断点也可以使用clear来删除指定代码行上的断点。clear命令后面可以跟一个范围。 (gdb) clear 9 －－删除第9行上的所有断点可以使用disable命令使某个断点暂时失效。disable命令可加断点号来禁用指定断点，否则会将所有断点禁用。断点在禁用之后可以用enable命令来恢复使用。 c 在断点后继续运行程序，可使用continue命令（简写为c)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a19cb0f2579a0393ccc58f2f48250894/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-23T09:24:00+08:00" />
<meta property="article:modified_time" content="2023-07-23T09:24:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Linux】gdb安装、执行与调试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%AE%89%E8%A3%85gdb-toc" style="margin-left:0px;"><a href="#%E5%AE%89%E8%A3%85gdb" rel="nofollow">一、linux内安装gdb</a></p> 
<p id="%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F-toc" style="margin-left:0px;"><a href="#%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F" rel="nofollow">二、使用gdb调试程序步骤</a></p> 
<p id="1.%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F-toc" style="margin-left:40px;"><a href="#1.%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F" rel="nofollow">1.执行程序</a></p> 
<p id="%E8%B0%83%E8%AF%95-toc" style="margin-left:40px;"><a href="#%E8%B0%83%E8%AF%95" rel="nofollow">2.调试</a></p> 
<p id="%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9-toc" style="margin-left:80px;"><a href="#%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9" rel="nofollow">设置断点</a></p> 
<p id="%E5%BC%80%E5%A7%8B%E8%B0%83%E8%AF%95-toc" style="margin-left:80px;"><a href="#%E5%BC%80%E5%A7%8B%E8%B0%83%E8%AF%95" rel="nofollow">开始调试</a></p> 
<hr> 
<p><strong>debug版本与release版本的说明：</strong> </p> 
<p>        debug版本：在编译阶段会加入某些调试信息，是给程序员使用的</p> 
<p>        release版本：linux默认的版本，给用户的发行版本，没有调试信息，调试信息是在编译过程中加入到中间文件.o文件的。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;">        使用gdb调试程序的前提是：待调试的程序中包含有调试符号信息，即生成debug版本的程序。</span></p> 
<hr> 
<h2 id="%E5%AE%89%E8%A3%85gdb"><span style="color:#fe2c24;"><strong>一、linux内安装gdb</strong></span></h2> 
<blockquote> 
 <ul><li>         参照<a class="link-info" href="https://blog.csdn.net/qq_53830608/article/details/126225499" title="vim安装方法 ">vim安装方法 </a></li><li>        当再次输入为如下界面，即安装成功</li><li> <p class="img-center"><img alt="" height="257" src="https://images2.imgbox.com/fc/a1/LmnOA7oj_o.png" width="554"></p> </li></ul> 
 <p></p> 
</blockquote> 
<h2 id="%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span style="color:#fe2c24;">二、<span style="background-color:#ffffff;">使用gdb调试程序步骤</span></span></h2> 
<h3 id="1.%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span style="color:#fe2c24;">1.执行程序</span></h3> 
<blockquote> 
 <ul><li>gdb命令run（可以简写为r）执行装载代码，在run命令之后可以指定程序运行所需要的参数。</li><li>(gdb) r</li></ul> 
</blockquote> 
<h3 id="%E8%B0%83%E8%AF%95"><span style="color:#fe2c24;"><strong>2.调试</strong></span></h3> 
<h4 id="%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9">设置断点</h4> 
<ul><li>如果程序中存在断点，则会在断点处自动暂停。通过使用gdb逐步调试代码，可以看到程序内部是如何运行的，还可以知道什么命令正在执行，变量的值的变化以及其他一些细节问题。</li></ul> 
<p id="%E4%B8%8E%E6%96%AD%E7%82%B9%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><strong>与断点相关命令：</strong></p> 
<blockquote> 
 <ul><li><span style="color:#0d0016;">首先，调用gdb，装载子程序：以main.c示例 $gdb main</span> 
   <ul><li><span style="color:#0d0016;"> 如要在GDB启动后载入，使用file命令：(gdb) file main1 </span></li></ul></li></ul> 
</blockquote> 
<h4 id="%E5%BC%80%E5%A7%8B%E8%B0%83%E8%AF%95"><strong><span style="color:#0d0016;">开始调试</span></strong></h4> 
<blockquote> 
 <p>gcc -o test test.c <strong>-g  </strong><span style="color:#1c7331;">//编译生成test执行文件</span></p> 
 <p>调试信息是在<a class="link-info" href="https://blog.csdn.net/qq_53830608/article/details/126279383" title="编译阶段">编译阶段</a>进行的，而不是链接阶段</p> 
 <p>gdb test  <span style="color:#1c7331;">//在gdb内调试test文件</span></p> 
</blockquote> 
<blockquote> 
 <ul><li><strong><span style="color:#0d0016;">b +行号: 加断点</span></strong> 
   <ul><li> <p><span style="color:#0d0016;">通过使用break命令（可简写为b）指定一个特定的位置设置断点。指定一个特定的位置设置断点，当程序运行到这个位置时就被中断，然后把程序的控制权交给调试器和程序员。设置断点的最简单形式——在break命令后加入行号来在该行加入断点,如下所示：</span></p> </li><li> <p></p> <span style="color:#0d0016;"><img alt="" class="left" height="39" src="https://images2.imgbox.com/ed/0a/qeo6XLAv_o.png" width="478"></span></li></ul></li></ul> 
 <p></p> 
 <ul><li><span style="color:#0d0016;">设置断点时也可以进行条件判断，即只有条件为真，程序到达指定行或函数时才停下来。</span> 
   <ul><li><span style="color:#0d0016;">(gdb) b 9 if i&gt;9</span></li></ul></li></ul> 
 <p></p> 
</blockquote> 
<blockquote> 
 <p><strong><span style="color:#0d0016;">info b / info break 查看断点信息，</span></strong>包括编号、类型、地址等。</p> 
</blockquote> 
<blockquote> 
 <ul><li><span style="color:#0d0016;"><strong> delete +断点编号 :  删除断点 </strong>    </span></li><li> <p class="img-center"><img alt="" height="107" src="https://images2.imgbox.com/43/29/4VqCFeeS_o.jpg" width="490"></p> <p style="text-align:center;"><span style="color:#0d0016;"> 图示为删除断点编号为2的断点信息</span></p> </li><li><strong>在delete命令后加入断点编号可以删除指定的断点。不指定断点号则删除所有的断点。</strong> 
   <ul><li>(gdb) d 1            －－删除编号为1的断点</li></ul></li><li><strong>delete命令后面可以跟一个范围</strong> 
   <ul><li>(gdb) d 1-6         －－删除编号为1~6的断点</li></ul></li><li>也可以使用<strong>clear</strong>来删除指定代码行上的断点。clear命令后面可以跟一个范围。 
   <ul><li>(gdb) clear 9              －－删除第9行上的所有断点</li></ul></li><li>可以使用<strong>disable</strong>命令使某个断点暂时失效。disable命令可加断点号来禁用指定断点，否则会将所有断点禁用。断点在禁用之后可以用enable命令来恢复使用。</li></ul> 
 <p></p> 
</blockquote> 
<blockquote> 
 <p><span style="color:#0d0016;"> c 在断点后<strong>继续运行程序</strong>，可使用<strong>continue</strong>命令（简写为c)</span></p> 
 <ul><li> <p><span style="color:#0d0016;">(gdb) c</span></p> </li></ul> 
</blockquote> 
<blockquote> 
 <p><strong>列出源代码</strong></p> 
 <ul><li>程序在载入到gdb之后，就可以通过列出源代码list命令（可简写为l）来查看源代码信息。</li><li>                     (gdb) list</li><li> <p class="img-center"><img alt="" height="123" src="https://images2.imgbox.com/f8/59/Fm1NeJSp_o.png" width="353"></p> </li><li>list命令默认情况下只列出10行代码。如果上面命令的基础上再次输入list命令，会接着列出后面的10行代码，当然，如果后面还有10行的话，否则只列到源文件末尾。也可以通过参数来指定list命令列出源文件的某一部分。例如：列出源文件example1.c的第3~5行代码。</li><li>                     (gdb) l 3,5</li><li>list命令后也可直接跟行号，这样列出的是该行上下5行代码。</li><li>                     (gdb) l 9</li></ul> 
</blockquote> 
<blockquote> 
 <p><strong>显示数据</strong></p> 
 <ul><li>使用print和display。display和print 是显示数据最常用的两种命令，这两个命令的功能非常强大，并不限于简单地显示一个整数值。</li><li>使用printf，该命令可以接受指定格式和变量列表为参数，使用起来类似于 C 中的 printf()函数。</li><li>内存检查命令</li><li>gdb提供了命令examine，简写为x，来获得指针所指向的内容。</li><li>x /format address</li></ul> 
</blockquote> 
<blockquote> 
 <p id="gdb%E8%B0%83%E8%AF%95%E2%80%94%E8%AE%BE%E7%BD%AE%E8%A7%82%E5%AF%9F%E7%82%B9%EF%BC%88%E7%AA%97%E5%8F%A3%EF%BC%89"><strong>设置观察点（窗口）</strong></p> 
 <ul><li>观察点也称为数据断点，用来监测某个变量或表达式的值是否有变化，如果有变化，则暂停程序的运行，这在调试程序的过程中是非常有用。</li><li>设置观察点的命令为watch，后面跟需要查看的变量或表达式。</li><li>(gdb) watch tol         －－设置变量tol的观察点</li><li>继续程序运行可以看到，GDB给出了变量tol的旧值0和新值1，同时也给出了下一条指令的行号和指令内容。</li></ul> 
</blockquote> 
<blockquote> 
 <p id="gdb%E8%B0%83%E8%AF%95%E2%80%94%E6%9F%A5%E7%9C%8B%E6%A0%88%E4%BF%A1%E6%81%AF"><strong>查看栈信息</strong></p> 
 <ul><li>当程序调用了一个函数时，函数的地址、函数参数、函数内的局部变量都会被压入“栈”(Stack)中。可以用backtrace（简写为bt）来查看当前的栈中的信息。</li><li>如果要查看某一层的信息，需要切换当前的栈。程序停止时，最顶层的栈就是当前栈，如果要查看栈下面层的详细信息，首先要做的是切换当前栈，可使用frame （简写为f）命令，后面跟栈帧的编号。</li><li>                     (gdb) f 1</li><li>查看当前栈帧的详细信息，可使用info frame命令（简写为info f）。</li><li>                     (gdb) info f</li><li>将显示调用函数的地址、被调用函数的地址、函数的编写语言、函数的参数、局部变量的地址、栈的层编号、当前的函数名、函数所在文件及行号、函数执行到的语句等信息。</li></ul> 
</blockquote> 
<blockquote> 
 <p id="gdb%E8%B0%83%E8%AF%95%E2%80%94%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E6%8E%A7%E5%88%B6"><strong>程序执行控制</strong></p> 
 <ul><li><strong>单步执行</strong>：即一步一步跟踪程序执行的流程，是经常使用的一种调试操作。GDB中可以通过step（简写为s）或next（简写为n）来单步执行代码。 
   <ul><li> <p class="img-center"><img alt="" height="52" src="https://images2.imgbox.com/8b/6d/DQFr3VOD_o.png" width="427"></p> </li><li>step命令可以跟踪进入函数内部，在执行到函数调用部分时，GDB会给出提示信息，包括被调用函数的入口参数、起始行号等，同时也会给出函数中将要执行的语句及所在行的行号。</li><li>next命令也可以实现程序代码的单步执行，但它将函数调用看作是一条语句，不跟踪进入函数内部。next命令后面还可以跟参数来指定执行操作的次数，直至程序因其他原因暂停运行。</li><li>ni 可以在汇编指令中单步执行。</li></ul></li><li><strong>return命令</strong>：忽略当前函数剩余的语句，跳出函数并继续向下执行。return命令后可以跟变量或者表达式来作为函数的返回值。</li><li><strong>执行到指定行：</strong>命令until加指定行号 
   <ul><li>需要注意的是如果执行中有断点则会停在断点处。</li></ul></li><li><strong>finish命令</strong>：在退出当前函数前执行函数体</li><li><strong>jump命令</strong>：跳过某一段代码继续执行，从而改变程序执行的顺序。命令后跟运行转到的行号。 
   <ul><li>注意：jump命令不会改变程序栈的内容，所以当从一个函数跳到另一个函数后，函数返回所进行的出栈操作必定会发生错误，程序运行结果也可能非常奇怪，所以最好是在同一个函数内进行跳转</li></ul></li></ul> 
</blockquote> 
<blockquote> 
 <p id="gdb%E8%B0%83%E8%AF%95%E2%80%94%E6%9F%A5%E7%9C%8B%E4%BF%A1%E6%81%AF"><strong>查看信息</strong></p> 
 <ul><li>查看寄存器信息：info命令，可以简写成i。</li><li>                       (gdb) info registers</li><li>查看单个寄存器：在print命令后加上寄存器名称（前加“$”符号）。</li><li>                       (gdb) p $eip</li><li>查看程序的汇编代码：disassemble命令</li><li>(gdb) disassemble printinfo    －－显示函数printinfo的汇编代码。</li></ul> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/19c8d7bb09270d0fc3a4c6ef201d5f00/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关闭屏幕 DFS</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/08ae522f298d0947decdb19f9318c7e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">4.SpringBoot&#43;Shiro免密登录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>