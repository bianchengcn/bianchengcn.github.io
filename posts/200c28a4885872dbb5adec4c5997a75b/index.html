<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unix备份与压缩命令实践 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Unix备份与压缩命令实践" />
<meta property="og:description" content="Unix下的备份与压缩的命令主要有tar,gzip,unzip等等，以下分别介绍：
tar命令
tar可以为文件和目录创建档案。利用tar，用户可以为某一特定文件创建档案(备份文件)，也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案，如软盘。利用 tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。Linux上的 tar是GNU版本的。
语法:tar [主选项&#43;辅选项] 文件或者目录
使用该命令时，主选项是必须要有的，它告诉tar要做什么事情，辅选项是辅助使用的，可以选用。
主选项:
c 创建新的档案文件。如果用户想备份一个目录或是一些文件，就要选择这个选项。
r 把要存档的文件追加到档案文件的未尾。例如用户已经作好备份文件，又发现还有一个目录或是一些文件忘记备份了，这时可以使用该选项，将忘记的目录或文件追加到备份文件中。
t 列出档案文件的内容，查看已经备份了哪些文件。
u 更新文件。就是说，用新增的文件取代原备份文件，如果在备份文件中找不到要更新的文件，则把它追加到备份文件的最后。
x 从档案文件中释放文件。
辅助选项:
b 该选项是为磁带机设定的。其后跟一数字，用来说明区块的大小，系统预设值为20(20*512 bytes)。
f 使用档案文件或设备，这个选项通常是必选的。
k 保存已经存在的文件。例如我们把某个文件还原，在还原的过程中，遇到相同的文件，不会进行覆盖。
m 在还原文件时，把所有文件的修改时间设定为现在。
M 创建多卷的档案文件，以便在几个磁盘中存放。
v 详细报告tar处理的文件信息。如无此选项，tar不报告文件信息。
w 每一步都要求确认。
z 用gzip来压缩/解压缩文件，加上该选项后可以将档案文件进行压缩，但还原时也一定要使用该选项进行解压缩。
例1:把/home目录下包括它的子目录全部做备份文件，备份文件名为usr.tar。 $ tar cvf usr.tar /home 例2:把/home目录下包括它的子目录全部做备份文件，并进行压缩，备份文件名为usr.tar.gz 。 $ tar czvf usr.tar.gz /home
例3:把usr.tar.gz这个备份文件还原并解压缩。 $ tar xzvf usr.tar.gz
例4:查看usr.tar备份文件的内容，并以分屏方式显示在显示器上。 $ tar tvf usr.tar | more
要将文件备份到一个特定的设备，只需把设备名作为备份文件名。
例5:用户在/dev/fd0设备的软盘中创建一个备份文件，并将/home 目录中所有的文件都拷贝到备份文件中。 $ tar cf /dev/fd0 /home" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/200c28a4885872dbb5adec4c5997a75b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-01-08T16:32:00+08:00" />
<meta property="article:modified_time" content="2010-01-08T16:32:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unix备份与压缩命令实践</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <table style="table-layout: fixed; width: 100%;" border="0"><tbody><tr><td> 
    <div id="blog_text" class="cnt"> 
     <span class="top11"> <p>Unix下的备份与压缩的命令主要有tar,gzip,unzip等等，以下分别介绍：</p> <p><strong>tar命令</strong></p> <p>tar可以为文件和目录创建档案。利用tar，用户可以为某一特定文件创建档案(备份文件)，也可以在档案中改变文件，或者向档案中加入新的文件。tar最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案，如软盘。利用 tar命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。Linux上的 tar是GNU版本的。</p> <p>语法:tar [主选项+辅选项] 文件或者目录</p> <p>使用该命令时，主选项是必须要有的，它告诉tar要做什么事情，辅选项是辅助使用的，可以选用。</p> <p>主选项:</p> <p>c 创建新的档案文件。如果用户想备份一个目录或是一些文件，就要选择这个选项。</p> <p>r 把要存档的文件追加到档案文件的未尾。例如用户已经作好备份文件，又发现还有一个目录或是一些文件忘记备份了，这时可以使用该选项，将忘记的目录或文件追加到备份文件中。</p> <p>t 列出档案文件的内容，查看已经备份了哪些文件。</p> <p>u 更新文件。就是说，用新增的文件取代原备份文件，如果在备份文件中找不到要更新的文件，则把它追加到备份文件的最后。</p> <p>x 从档案文件中释放文件。</p> <p>辅助选项:</p> <p>b 该选项是为磁带机设定的。其后跟一数字，用来说明区块的大小，系统预设值为20(20*512 bytes)。</p> <p>f 使用档案文件或设备，这个选项通常是必选的。</p> <p>k 保存已经存在的文件。例如我们把某个文件还原，在还原的过程中，遇到相同的文件，不会进行覆盖。</p> <p>m 在还原文件时，把所有文件的修改时间设定为现在。</p> <p>M 创建多卷的档案文件，以便在几个磁盘中存放。</p> <p>v 详细报告tar处理的文件信息。如无此选项，tar不报告文件信息。</p> <p>w 每一步都要求确认。</p> <p>z 用gzip来压缩/解压缩文件，加上该选项后可以将档案文件进行压缩，但还原时也一定要使用该选项进行解压缩。</p> <p>例1:把/home目录下包括它的子目录全部做备份文件，备份文件名为usr.tar。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre>$ tar cvf usr.tar /home</pre> </td></tr></tbody></table> <p></p> <p>例2:把/home目录下包括它的子目录全部做备份文件，并进行压缩，备份文件名为usr.tar.gz 。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar czvf usr.tar.gz /home</p></pre> </td></tr></tbody></table> <p></p> <p>例3:把usr.tar.gz这个备份文件还原并解压缩。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar xzvf usr.tar.gz</p></pre> </td></tr></tbody></table> <p></p> <p>例4:查看usr.tar备份文件的内容，并以分屏方式显示在显示器上。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar tvf usr.tar | more</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>要将文件备份到一个特定的设备，只需把设备名作为备份文件名。</p> <p>例5:用户在/dev/fd0设备的软盘中创建一个备份文件，并将/home 目录中所有的文件都拷贝到备份文件中。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar cf /dev/fd0 /home</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>要恢复设备磁盘中的文件，可使用xf选项: </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar xf /dev/fd0</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>如果用户备份的文件大小超过设备可用的存贮空间，如软盘，您可以创建一个多卷的 tar备份文件。M选项指示tar命令提示您使用一个新的存贮设备，当使用M选项向一个软驱进行存档时，tar命令在一张软盘已满的时候会提醒您再放入一张新的软盘。这样您就可以把tar档案存入几张磁盘中。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar cMf /dev/fd0 /home</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>要恢复几张盘中的档案，只要将第一张放入软驱，然后输入有x和M选项的tar命令。在必要时您会被提醒放入另外一张软盘。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ tar xMf /dev/fd0</p></pre> </td></tr></tbody></table> <p></p> <p><strong>gzip命令</strong></p> <p>减少文件大小有两个明显的好处，一是可以减少存储空间，二是通过网络传输文件时，可以减少传输的时间。gzip是在Linux系统中经常使用的一个对文件进行压缩和解压缩的命令，既方便又好用。</p> <p>语法:gzip [选项] 压缩(解压缩)的文件名</p> <p>各选项的含义:</p> <p>-c 将输出写到标准输出上，并保留原有文件。</p> <p>-d 将压缩文件解压。</p> <p>-l 对每个压缩文件，显示下列字段:</p> <p>压缩文件的大小</p> <p>未压缩文件的大小</p> <p>压缩比</p> <p>未压缩文件的名字</p> <p>-r 递归式地查找指定目录并压缩其中的所有文件或者是解压缩。</p> <p>-t 测试，检查压缩文件是否完整。</p> <p>-v 对每一个压缩和解压的文件，显示文件名和压缩比。</p> <p>-num 用指定的数字num调整压缩的速度，-1或--fast表示最快压缩方法(低压缩比)，-9或--best表示最慢压缩方法(高压缩比)。系统缺省值为6。</p> <p>假设一个目录/home下有文件mm.txt、sort.txt、xx.com。</p> <p>例1:把/home目录下的每个文件压缩成.gz文件。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ cd /home</p><p>$ gzip *</p><p>$ ls</p><p>m.txt.gz sort.txt.gz xx.com.gz</p></pre> </td></tr></tbody></table> <p></p> <p>例2:把例1中每个压缩的文件解压，并列出详细的信息。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ gzip -dv *</p><p>mm.txt.gz 43.1%-----replaced with mm.txt</p><p>sort.txt.gz 43.1%-----replaced with sort.txt</p><p>xx.com.gz 43.1%-----replaced with xx.com</p><p>$ ls</p><p>mm.txt sort.txt xx.com</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>例3:详细显示例1中每个压缩的文件的信息，并不解压。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ gzip -l *</p><p>compressed uncompr. ratio uncompressed_name</p><p>277 445 43.1% mm.txt</p><p>278 445 43.1% sort.txt</p><p>277 445 43.1% xx.com</p><p>$ ls</p><p>mm.txt.gz sort.txt.gz xx.com.gz</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>例4:压缩一个tar备份文件，如usr.tar，此时压缩文件的扩展名为.tar.gz </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ gzip usr.tar</p><p>$ ls</p><p>usr.tar.gz</p></pre> </td></tr></tbody></table> <p></p> <p><strong>unzip命令</strong></p> <p>用MS Windows下的压缩软件winzip压缩的文件如何在Linux系统下展开呢?可以用unzip命令，该命令用于解扩展名为.zip的压缩文件。</p> <p>语法:unzip [选项] 压缩文件名.zip</p> <p>各选项的含义分别为:</p> <p>-x 文件列表 解压缩文件，但不包括指定的file文件。</p> <p>-v 查看压缩文件目录，但不解压。</p> <p>-t 测试文件有无损坏，但不解压。</p> <p>-d 目录 把压缩文件解到指定目录下。</p> <p>-z 只显示压缩文件的注解。</p> <p>-n 不覆盖已经存在的文件。</p> <p>-o 覆盖已存在的文件且不要求用户确认。</p> <p>-j 不重建文档的目录结构，把所有文件解压到同一目录下。</p> <p>例1:将压缩文件text.zip在当前目录下解压缩。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ unzip text.zip</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p>例2:将压缩文件text.zip在指定目录/tmp下解压缩，如果已有相同的文件存在，要求unzip命令不覆盖原先的文件。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ unzip -n text.zip -d /tmp</p></pre> </td></tr></tbody></table> <p></p> <p>例3:查看压缩文件目录，但不解压。 </p> 
      <table style="width: 400px;" border="1" cellspacing="0" cellpadding="2" align="center"><tbody><tr><td class="code" bgcolor="#e6e6e6"> <pre><p>$ unzip -v text.zip</p><p> </p></pre> </td></tr></tbody></table> <p></p> <p><strong>zgrep命令</strong></p> <p>这个命令的功能是在压缩文件中寻找匹配的正则表达式，用法和grep命令一样，只不过操作的对象是压缩文件。如果用户想看看在某个压缩文件中有没有某一句话，便可用zgrep命令。</p> </span> 
    </div> </td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bfd0f7029710a665be2476ea69743540/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MAKEFILE2</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e57ad833003d27a2817ab5f35fe229e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AIX的topas命令解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>