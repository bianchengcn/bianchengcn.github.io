<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uniapp小程序使用地图 并且渲染坐标点 点击坐标点弹出对应的信息 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="uniapp小程序使用地图 并且渲染坐标点 点击坐标点弹出对应的信息" />
<meta property="og:description" content="实现效果展示：
&lt;template&gt; &lt;view class=&#34;map&#34;&gt; &lt;!-- subkey是在微信小程序官网申请的地图样式，比如申请黑暗系，会给一个key值，放在这里 --&gt; &lt;map subkey=&#34;Q6YBZ-XXXXX-C6UXD-XXXXX-SNFZ2-XXXXX&#34; name=&#34;myMap&#34; :longitude=&#34;mapCenter.longitude&#34; :latitude=&#34;mapCenter.latitude&#34; :markers=&#34;markers&#34; @markertap=&#34;handleMarkerTap&#34; enable-3D&gt;&lt;/map&gt; &lt;view class=&#34;bulletBox&#34; v-if=&#34;closeShow&#34;&gt; &lt;view class=&#34;center&#34;&gt; &lt;view class=&#34;centers&#34;&gt; &lt;view style=&#34;color:#B2C7CE !important;font-size: 32rpx;display: flex;align-items: center;&#34;&gt; &lt;view&gt;当前水位高度：&lt;/view&gt; &lt;view style=&#34;color: #9CEDF8;font-family: digifaw;font-size: 38rpx;&#34;&gt;36.52&lt;/view&gt; &lt;view style=&#34;margin-left: 10rpx;&#34;&gt;m&lt;/view&gt; &lt;/view&gt; &lt;view class=&#34;echarts&#34;&gt; &lt;qiun-data-charts type=&#34;line&#34; :opts=&#34;opts&#34; :chartData=&#34;chartData&#34; /&gt; &lt;/view&gt; &lt;view class=&#34;video&#34;&gt; &lt;video style=&#34;width: 100%;height:100%;border: 3rpx solid #7cbcc1;&#34; controls autoplay src=&#34;https://haokan.baidu.com/5f6b3f0d-bcf3-44a9-800f-d0674189d876&#34;&gt;&lt;/video&gt; &lt;/view&gt; &lt;/view&gt; &lt;img class=&#34;box&#34; src=&#34;https://test.shipgroup.net/jd/img/box.png&#34; alt=&#34;&#34;&gt; &lt;img @tap=&#34;close&#34; class=&#34;clouse&#34; src=&#34;https://test.shipgroup.net/jd/img/clouse.png&#34; alt=&#34;&#34;&gt; &lt;/view&gt; &lt;/view&gt; &lt;/view&gt; &lt;/template&gt; &lt;script&gt; export default { data() { return { mapCenter: { longitude: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f69a60b1cc9f85ce208eca9b817a03a9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-30T16:32:44+08:00" />
<meta property="article:modified_time" content="2023-06-30T16:32:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uniapp小程序使用地图 并且渲染坐标点 点击坐标点弹出对应的信息</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>实现效果展示：</p> 
</blockquote> 
<p><img alt="" height="531" src="https://images2.imgbox.com/ec/6a/NgFOpuG0_o.png" width="303"> <img alt="" height="531" src="https://images2.imgbox.com/3b/30/jhXYzYpx_o.png" width="313"></p> 
<p></p> 
<pre><code class="language-javascript">&lt;template&gt;
	&lt;view class="map"&gt;
        &lt;!-- subkey是在微信小程序官网申请的地图样式，比如申请黑暗系，会给一个key值，放在这里 --&gt;
		&lt;map subkey="Q6YBZ-XXXXX-C6UXD-XXXXX-SNFZ2-XXXXX" name="myMap" :longitude="mapCenter.longitude"
			:latitude="mapCenter.latitude" :markers="markers" @markertap="handleMarkerTap" enable-3D&gt;&lt;/map&gt;
		&lt;view class="bulletBox" v-if="closeShow"&gt;
			&lt;view class="center"&gt;
				&lt;view class="centers"&gt;
					&lt;view style="color:#B2C7CE !important;font-size: 32rpx;display: flex;align-items: center;"&gt;
						&lt;view&gt;当前水位高度：&lt;/view&gt;
						&lt;view style="color: #9CEDF8;font-family: digifaw;font-size: 38rpx;"&gt;36.52&lt;/view&gt;
						&lt;view style="margin-left: 10rpx;"&gt;m&lt;/view&gt;
					&lt;/view&gt;
					&lt;view class="echarts"&gt;
						&lt;qiun-data-charts type="line" :opts="opts" :chartData="chartData" /&gt;
					&lt;/view&gt;
					&lt;view class="video"&gt;
						&lt;video style="width: 100%;height:100%;border: 3rpx solid #7cbcc1;" controls autoplay
							src="https://haokan.baidu.com/5f6b3f0d-bcf3-44a9-800f-d0674189d876"&gt;&lt;/video&gt;
					&lt;/view&gt;
				&lt;/view&gt;
				&lt;img class="box" src="https://test.shipgroup.net/jd/img/box.png" alt=""&gt;
				&lt;img @tap="close" class="clouse" src="https://test.shipgroup.net/jd/img/clouse.png" alt=""&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;
  
&lt;script&gt;
export default {
	data() {
		return {
			mapCenter: {
				longitude: "",
				latitude: "",
			},
			chartData: {},
			//您可以通过修改 config-ucharts.js 文件中下标为 ['line'] 的节点来配置全局默认参数，如都是默认参数，此处可以不传 opts 。实际应用过程中 opts 只需传入与全局默认参数中不一致的【某一个属性】即可实现同类型的图表显示不同的样式，达到页面简洁的需求。
			opts: {
				title: {
					color: '#fff'
				},
				color: ["#9CEDF8", "#9CEDF8", "#9CEDF8", "#9CEDF8", "#9CEDF8", "#9CEDF8", "#9CEDF8", "#9CEDF8", "#9CEDF8"],
				padding: [15, 15, 0, 0],
				dataLabel: false,
				dataPointShape: false,
				enableScroll: false,
				legend: {
					color: '#fff'
				},
				xAxis: {
					disableGrid: true,
					fontColor: '#ffffff'
				},
				yAxis: {
					name: '单位：毫米',
					nameTextStyle: {
						color: '#fff',
						fontSize: 14
					},
					labels: {
						fontColor: '#fff'
					},
					gridType: 'dash',
					dashLength: 2,
					data: [{
						min: 0,
						max: 150
					}]
				},
				extra: {
					line: {
						type: "curve",
						width: 2,
						activeType: "hollow",
						linearType: "custom",
						onShadow: true,
						animation: "horizontal"
					}
				}
			},
			closeShow: false,
			markers: []
		};
	},
	mounted() {
		this.getMarkers();
	},
	methods: {
		// 获取地图点位
		getMarkers() {
			let markesData = [
				{
					id: 1,
					longitude: 116.39748,
					latitude: 39.90882,
					iconPath: '/static/swjc.png',
					width: 40,
					height: 100,
					callout: {
						content: '首都机场',
						fontSize: 14,
						borderRadius: 5,
						bgColor: '#ffffff',
						padding: 6,
						textAlign: 'center'
					}
				},
				{
					id: 2,
					longitude: 116.39404,
					latitude: 39.90399,
					iconPath: '/static/dbsb.png',
					width: 40,
					height: 100,
					callout: {
						content: '人民广场',
						fontSize: 14,
						borderRadius: 5,
						bgColor: '#ffffff',
						padding: 6,
						textAlign: 'center'
					}
				}
			]
			this.markers = markesData
			this.mapCenter = {
				longitude: this.calculateCenter(markesData).longitude,
				latitude: this.calculateCenter(markesData).latitude,
			}
			console.log(666666, this.mapCenter);
		},
		// 计算地图的中心点
		calculateCenter(markesData) {
			var sumLongitude = 0;
			var sumLatitude = 0;
			for (var i = 0; i &lt; markesData.length; i++) {
				sumLongitude += markesData[i].longitude;
				sumLatitude += markesData[i].latitude;
			}
			var averageLongitude = sumLongitude / markesData.length;
			var averageLatitude = sumLatitude / markesData.length;
			return {
				longitude: averageLongitude,
				latitude: averageLatitude
			};
		},
		close() {
			this.closeShow = false
		},
		handleMarkerTap(event) {
			console.log('经度：', event)
			console.log('纬度：', event)
			this.closeShow = true
			this.echartsShow()
		},
		echartsShow() {
			this.getServerData();
		},
		getServerData() {
			//模拟从服务器获取数据时的延时
			setTimeout(() =&gt; {
				//模拟服务器返回数据，如果数据格式和标准格式不同，需自行按下面的格式拼接
				let res = {
					categories: ["12:00", "12:10", "12:20", "12:30", "12:40", "12:50"],
					series: [
						{
							name: "降水量",
							linearColor: [
								[
									0,
									"#a8d4de"
								],
								[
									0.25,
									"#a8d4de"
								],
								[
									0.5,
									"#a8d4de"
								],
								[
									0.75,
									"#a8d4de"
								],
								[
									1,
									"#a8d4de"
								]
							],
							setShadow: [
								3,
								8,
								10,
								"#a8d4de"
							],
							data: [15, 45, 15, 45, 15, 45]
						}
					]
				};
				this.chartData = JSON.parse(JSON.stringify(res));
			}, 500);
		},

	}
};
&lt;/script&gt;
  
&lt;style&gt;
@font-face {
	font-family: 'digifaw';
	src: url('../../static/font/digifaw.ttf') format('woff2'),
		url('../../static/font/digifaw.ttf') format('woff');
	font-weight: normal;
	font-style: normal;
}

.map,
map {
	width: 100%;
	height: 100vh;
}

.bulletBox {
	position: fixed;
	z-index: 999;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 95%;
	height: 80%;
}

.center {
	position: relative;
	width: 100%;
	height: 100%;
}

.centers {
	position: absolute;
	display: flex;
	flex-flow: column;
	justify-content: space-between;
	top: 70rpx;
	bottom: 90rpx;
	left: 60rpx;
	right: 60rpx;
	z-index: 9999999;
}

.box {
	position: absolute;
	bottom: 0;
	width: 100%;
	height: 100%;
}

.clouse {
	position: absolute;
	width: 56rpx;
	height: 56rpx;
	right: 0;
	top: -70rpx;
}

.echarts {
	width: 100%;
	height: 380rpx;
}

.video {
	width: 99%;
	height: 328rpx;
	box-sizing: border-box;
}
&lt;/style&gt;
  </code></pre> 
<p> </p> 
<p><img alt="" height="140" src="https://images2.imgbox.com/f6/75/qfx1R3BM_o.png" width="142"> </p> 
<p></p> 
<p>点位顶部如果想要显示名字，可以在这里加入这段代码，官网可以查看详情<a href="https://developers.weixin.qq.com/miniprogram/dev/component/map.html" rel="nofollow" title="map | 微信开放文档">map | 微信开放文档</a></p> 
<p><img alt="" height="450" src="https://images2.imgbox.com/fe/d8/SKjv6Eyn_o.png" width="548"> </p> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9c611b418564bba6ef92156d8e97cd4b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">OBS直播画质怎么调？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b83fe3c93ae009c3f595fb170debcbc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ivx低代码开发平台</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>