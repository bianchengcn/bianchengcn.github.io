<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NLTK命名实体识别 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NLTK命名实体识别" />
<meta property="og:description" content="引例： NLTK中对于很多自然语言处理应用有着开箱即用的api，但是结果往往让人弄不清楚状况。 下面的例子使用NLTK进行命名实体的识别。第一例中，Apple成功被识别出来，而第二例并未被识别。究竟是什么原因导致这样的结果，接下来一探究竟。
In [1]: import nltk In [2]: tokens = nltk.word_tokenize(&#39;I am very excited about the next generation of Apple products.&#39;) In [3]: tokens = nltk.pos_tag(tokens) In [4]: print tokens [(&#39;I&#39;, &#39;PRP&#39;), (&#39;am&#39;, &#39;VBP&#39;), (&#39;very&#39;, &#39;RB&#39;), (&#39;excited&#39;, &#39;JJ&#39;), (&#39;about&#39;, &#39;IN&#39;), (&#39;the&#39;, &#39;DT&#39;), (&#39;next&#39;, &#39;JJ&#39;), (&#39;generation&#39;, &#39;NN&#39;), (&#39;of&#39;, &#39;IN&#39;), (&#39;Apple&#39;, &#39;NNP&#39;), (&#39;products&#39;, &#39;NNS&#39;), (&#39;.&#39;, &#39;.&#39;)] In [5]: tree = nltk.ne_chunk(tokens) In [6]: print tree (S I/PRP am/VBP very/RB excited/JJ about/IN the/DT next/JJ generation/NN of/IN (GPE Apple/NNP) products/NNS ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2d0b00df1f1fdc7589895dffee5d2305/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-02T14:51:44+08:00" />
<meta property="article:modified_time" content="2015-12-02T14:51:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NLTK命名实体识别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4 id="引例">引例：</h4> 
<p>NLTK中对于很多自然语言处理应用有着开箱即用的api，但是结果往往让人弄不清楚状况。 <br> 下面的例子使用NLTK进行命名实体的识别。第一例中，Apple成功被识别出来，而第二例并未被识别。究竟是什么原因导致这样的结果，接下来一探究竟。</p> 
<pre class="prettyprint"><code class="language-python hljs ">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">import</span> nltk
In [<span class="hljs-number">2</span>]: tokens = nltk.word_tokenize(<span class="hljs-string">'I am very excited about the next generation of Apple products.'</span>)
In [<span class="hljs-number">3</span>]: tokens = nltk.pos_tag(tokens)
In [<span class="hljs-number">4</span>]: <span class="hljs-keyword">print</span> tokens
[(<span class="hljs-string">'I'</span>, <span class="hljs-string">'PRP'</span>), (<span class="hljs-string">'am'</span>, <span class="hljs-string">'VBP'</span>), (<span class="hljs-string">'very'</span>, <span class="hljs-string">'RB'</span>), (<span class="hljs-string">'excited'</span>, <span class="hljs-string">'JJ'</span>), (<span class="hljs-string">'about'</span>, <span class="hljs-string">'IN'</span>), (<span class="hljs-string">'the'</span>, <span class="hljs-string">'DT'</span>), (<span class="hljs-string">'next'</span>, <span class="hljs-string">'JJ'</span>), (<span class="hljs-string">'generation'</span>, <span class="hljs-string">'NN'</span>), (<span class="hljs-string">'of'</span>, <span class="hljs-string">'IN'</span>), (<span class="hljs-string">'Apple'</span>, <span class="hljs-string">'NNP'</span>), (<span class="hljs-string">'products'</span>, <span class="hljs-string">'NNS'</span>), (<span class="hljs-string">'.'</span>, <span class="hljs-string">'.'</span>)]
In [<span class="hljs-number">5</span>]: tree = nltk.ne_chunk(tokens)
In [<span class="hljs-number">6</span>]: <span class="hljs-keyword">print</span> tree
(S
  I/PRP
  am/VBP
  very/RB
  excited/JJ
  about/IN
  the/DT
  next/JJ
  generation/NN
  of/IN
  (GPE Apple/NNP)
  products/NNS
  ./.)
In [<span class="hljs-number">7</span>]: tokens = nltk.word_tokenize(<span class="hljs-string">'I bought these Apple products today.'</span>)
In [<span class="hljs-number">8</span>]: tokens = nltk.pos_tag(tokens)
In [<span class="hljs-number">9</span>]: <span class="hljs-keyword">print</span> tokens
[<span class="hljs-string">'I'</span>, <span class="hljs-string">'bought'</span>, <span class="hljs-string">'these'</span>, <span class="hljs-string">'Apple'</span>, <span class="hljs-string">'products'</span>, <span class="hljs-string">'today'</span>, <span class="hljs-string">'.'</span>]
In [<span class="hljs-number">10</span>]: tree = nltk.ne_chunk(tokens)
In [<span class="hljs-number">11</span>]: <span class="hljs-keyword">print</span> tree
(S I/PRP bought/VBD these/DT Apple/NNP products/NNS today/NN ./.)</code></pre> 
<h4 id="最大熵算法">最大熵算法</h4> 
<p>注意到在上述两个例子Apple这个词被词性标注为NNP（NNP是宾夕法尼亚大学树图资料库II为专有名词，单数）。另外，这两个单词都以大写字母开始。为什么Apple在1例中被标记为GPE（地缘政治实体），而2例未标记？另外，为什么Apple标记为GPE，而不是ORG（组织机构）？</p> 
<p>NLTK的命名实体识别是通过使用的MaxEnt分类器。MaxEnt分类器工作有两个原则：1.总是试图保持均匀分布(即最大化熵)，2.保持其统计概率与经验数据一致。经验数据来源于语料库，通过手动标记，所以大多数标记数据并不是免费的。NLTK不提供其训练命名实体识别器的语料库（训练数据来自ACE（自动内容抽取））。NLTK所提供的是一个pickle文件（在nltk_data/chunkers/目录下），而这个pickle文件，就是训练好的MaxEnt分类器实例。　　 　　</p> 
<pre class="prettyprint"><code class=" hljs avrasm">➜  maxent_ne_chunker  tree
.
├── english_ace_binary<span class="hljs-preprocessor">.pickle</span>
├── english_ace_multiclass<span class="hljs-preprocessor">.pickle</span>
└── PY3
    ├── english_ace_binary<span class="hljs-preprocessor">.pickle</span>
    └── english_ace_multiclass<span class="hljs-preprocessor">.pickle</span></code></pre> 
<p>要训练良好的监督学习的算法基于良好的特征。在命名实体识别中，特征可能是这个词是否包含一个大写字母。所以NLTK使用的特征有哪些呢？下面我列出他们： <br> - 词的形状（是否包含数字/首字母大写/包含符号）　　 <br> - 词的长度 <br> - 词的前三个字母 <br> - 词尾三个字母　 <br> - 词性标签 <br> - 词本身　 <br> - 该词是否存在 <br> - 该词前面词的词性（前面是否有名词）　　 <br> - 前词词性 <br> - 后词词性 <br> - 前词本身　 <br> - 后词本身　 <br> - …</p> 
<p>下面的代码可以列出NLTK中所使用的标签</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">import</span> nltk

<span class="hljs-comment"># 载入序列化对象</span>
chunker = nltk.data.load(<span class="hljs-string">'chunkers/maxent_ne_chunker/english_ace_multiclass.pickle'</span>)

<span class="hljs-comment"># 最大熵分类器</span>
maxEnt = chunker._tagger.classifier()

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maxEnt_report</span><span class="hljs-params">()</span>:</span>
    maxEnt = chunker._tagger.classifier()
    <span class="hljs-keyword">print</span> <span class="hljs-string">'These are the labels used by the NLTK\'s NEC...'</span>
    <span class="hljs-keyword">print</span> maxEnt.labels()
    <span class="hljs-keyword">print</span> <span class="hljs-string">''</span>

    <span class="hljs-keyword">print</span> <span class="hljs-string">'These are the most informative features found in the ACE corpora...'</span>
    maxEnt.show_most_informative_features()

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">ne_report</span><span class="hljs-params">(sentence, report_all=False)</span>:</span>

    <span class="hljs-comment"># 词性标记</span>
    tokens = nltk.word_tokenize(sentence)
    tokens = nltk.pos_tag(tokens)

    tags = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, len(tokens)):
        featureset = chunker._tagger.feature_detector(tokens, i, tags)
        tag = chunker._tagger.choose_tag(tokens, i, tags)
        <span class="hljs-keyword">if</span> tag != <span class="hljs-string">'O'</span> <span class="hljs-keyword">or</span> report_all:
            <span class="hljs-keyword">print</span> <span class="hljs-string">'\nExplanation on the why the word \''</span> + tokens[i][<span class="hljs-number">0</span>] + <span class="hljs-string">'\' was tagged:'</span>
            featureset = chunker._tagger.feature_detector(tokens, i, tags)
            maxEnt.explain(featureset)
        tags.append(tag)</code></pre> 
<p>下面的输出报告中列出了NLTK所使用的标签，”I-“，”B-“, “O”前缀的含义为包含/开始/例外（inside/begin/others）标记。当一块开始，第一个词是前缀“B”来表示这个词是一个块的开始。下一个单词，如果它属于同一块，将以”I-“前缀，表示这是块的一部分，而不是开始。如果一个词不属于一块，贴上“O”，这意味着它是在外面。</p> 
<pre class="prettyprint"><code class=" hljs vhdl">➜  test  python dd.py 
These are the labels used by the NLTK<span class="hljs-attribute">'s</span> NEC...
[<span class="hljs-attribute">'I</span>-GSP', <span class="hljs-attribute">'B</span>-LOCATION', <span class="hljs-attribute">'B</span>-GPE', <span class="hljs-attribute">'I</span>-ORGANIZATION', <span class="hljs-attribute">'I</span>-PERSON', <span class="hljs-attribute">'O</span>', <span class="hljs-attribute">'I</span>-FACILITY', <span class="hljs-attribute">'I</span>-LOCATION', <span class="hljs-attribute">'B</span>-PERSON', <span class="hljs-attribute">'B</span>-FACILITY', <span class="hljs-attribute">'B</span>-GSP', <span class="hljs-attribute">'B</span>-ORGANIZATION', <span class="hljs-attribute">'I</span>-GPE']

These are the most informative features found <span class="hljs-keyword">in</span> the ACE corpora...
  <span class="hljs-number">10.125</span> bias==True <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'O</span>'
   <span class="hljs-number">6.631</span> suffix3==<span class="hljs-attribute">'day</span>' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'O</span>'
  -<span class="hljs-number">6.207</span> bias==True <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'I</span>-GSP'
   <span class="hljs-number">5.628</span> prevtag==<span class="hljs-attribute">'O</span>' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'O</span>'
  -<span class="hljs-number">4.740</span> shape==<span class="hljs-attribute">'upcase</span>' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'O</span>'
   <span class="hljs-number">4.106</span> shape+prevtag=='&lt;<span class="hljs-keyword">function</span> shape at <span class="hljs-number">0x8bde0d4</span>&gt;+O' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'O</span>'
  -<span class="hljs-number">3.994</span> shape==<span class="hljs-attribute">'mixedcase</span>' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'O</span>'
   <span class="hljs-number">3.992</span> pos+prevtag==<span class="hljs-attribute">'NNP</span>+B-PERSON' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'I</span>-PERSON'
   <span class="hljs-number">3.890</span> prevtag==<span class="hljs-attribute">'I</span>-ORGANIZATION' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'I</span>-ORGANIZATION'
   <span class="hljs-number">3.879</span> shape+prevtag=='&lt;<span class="hljs-keyword">function</span> shape at <span class="hljs-number">0x8bde0d4</span>&gt;+I-ORGANIZATION' <span class="hljs-keyword">and</span> <span class="hljs-keyword">label</span> <span class="hljs-keyword">is</span> <span class="hljs-attribute">'I</span>-ORGANIZATION'</code></pre> 
<p><strong>Note:</strong> <br> - GPE is Geo-Political Entity <br> - GSP is Geo-Socio-Political group</p> 
<p><strong>例1输出：</strong></p> 
<pre class="prettyprint"><code class=" hljs lasso">Explanation <span class="hljs-keyword">on</span> the why the word <span class="hljs-string">'Apple'</span> was tagged:
  Feature                                            B<span class="hljs-attribute">-GPE</span>       O B<span class="hljs-attribute">-ORGAN</span>   B<span class="hljs-attribute">-GSP</span>
  <span class="hljs-subst">--------------------------------------------------------------------------------</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                   <span class="hljs-number">3.767</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                <span class="hljs-number">2.701</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                           <span class="hljs-number">2.254</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                             <span class="hljs-number">2.095</span>
  label is <span class="hljs-string">'B-GPE'</span> (<span class="hljs-number">1</span>)                              <span class="hljs-subst">-</span><span class="hljs-number">2.005</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                    <span class="hljs-subst">-</span><span class="hljs-number">1.975</span>
  prevword<span class="hljs-subst">==</span><span class="hljs-string">'of'</span> (<span class="hljs-number">1</span>)                                 <span class="hljs-number">0.742</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                     <span class="hljs-number">0.681</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                 <span class="hljs-number">0.661</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'IN'</span> (<span class="hljs-number">1</span>)                                  <span class="hljs-number">0.311</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                     <span class="hljs-number">0.113</span>
  nextword<span class="hljs-subst">==</span><span class="hljs-string">'products'</span> (<span class="hljs-number">1</span>)                           <span class="hljs-number">0.060</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                            <span class="hljs-number">10.125</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                           <span class="hljs-number">5.628</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                       <span class="hljs-subst">-</span><span class="hljs-number">4.740</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'IN'</span> (<span class="hljs-number">1</span>)                                         <span class="hljs-subst">-</span><span class="hljs-number">1.668</span>
  label is <span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                          <span class="hljs-subst">-</span><span class="hljs-number">1.075</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                            <span class="hljs-subst">-</span><span class="hljs-number">1.024</span>
  suffix3<span class="hljs-subst">==</span><span class="hljs-string">'ple'</span> (<span class="hljs-number">1</span>)                                         <span class="hljs-number">0.797</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                                     <span class="hljs-number">0.698</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                            <span class="hljs-subst">-</span><span class="hljs-number">0.449</span>
  prevword<span class="hljs-subst">==</span><span class="hljs-string">'of'</span> (<span class="hljs-number">1</span>)                                        <span class="hljs-subst">-</span><span class="hljs-number">0.217</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                         <span class="hljs-number">0.104</span>
  prefix3<span class="hljs-subst">==</span><span class="hljs-string">'app'</span> (<span class="hljs-number">1</span>)                                         <span class="hljs-number">0.089</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                                   <span class="hljs-number">0.011</span>
  nextword<span class="hljs-subst">==</span><span class="hljs-string">'products'</span> (<span class="hljs-number">1</span>)                                   <span class="hljs-number">0.005</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                                   <span class="hljs-number">3.389</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                                           <span class="hljs-number">1.725</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                                     <span class="hljs-number">0.955</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                                             <span class="hljs-number">0.837</span>
  label is <span class="hljs-string">'B-ORGANIZATION'</span> (<span class="hljs-number">1</span>)                                      <span class="hljs-number">0.718</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                                 <span class="hljs-number">0.365</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                                    <span class="hljs-subst">-</span><span class="hljs-number">0.351</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                                     <span class="hljs-number">0.174</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'IN'</span> (<span class="hljs-number">1</span>)                                                 <span class="hljs-subst">-</span><span class="hljs-number">0.139</span>
  prevword<span class="hljs-subst">==</span><span class="hljs-string">'of'</span> (<span class="hljs-number">1</span>)                                                 <span class="hljs-number">0.131</span>
  prefix3<span class="hljs-subst">==</span><span class="hljs-string">'app'</span> (<span class="hljs-number">1</span>)                                                <span class="hljs-subst">-</span><span class="hljs-number">0.126</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                               <span class="hljs-subst">-</span><span class="hljs-number">0.084</span>
  suffix3<span class="hljs-subst">==</span><span class="hljs-string">'ple'</span> (<span class="hljs-number">1</span>)                                                <span class="hljs-subst">-</span><span class="hljs-number">0.077</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                                           <span class="hljs-number">2.925</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                                                   <span class="hljs-number">2.213</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                                        <span class="hljs-number">0.929</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                                                     <span class="hljs-number">0.891</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                                            <span class="hljs-subst">-</span><span class="hljs-number">0.592</span>
  label is <span class="hljs-string">'B-GSP'</span> (<span class="hljs-number">1</span>)                                                      <span class="hljs-subst">-</span><span class="hljs-number">0.565</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'IN'</span> (<span class="hljs-number">1</span>)                                                          <span class="hljs-number">0.410</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                                         <span class="hljs-number">0.399</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                                             <span class="hljs-number">0.393</span>
  prevword<span class="hljs-subst">==</span><span class="hljs-string">'of'</span> (<span class="hljs-number">1</span>)                                                         <span class="hljs-number">0.184</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                                             <span class="hljs-number">0.177</span>
  <span class="hljs-subst">---------------------------------------------------------------------------------</span>
  TOTAL:                                             <span class="hljs-number">9.406</span>   <span class="hljs-number">8.283</span>   <span class="hljs-number">7.515</span>   <span class="hljs-number">7.366</span>
  PROBS:                                             <span class="hljs-number">0.453</span>   <span class="hljs-number">0.208</span>   <span class="hljs-number">0.122</span>   <span class="hljs-number">0.110</span></code></pre> 
<p>最后一行中列出的概率加起来加起来是0.893，而非1。这是因为只输出概率最大的四类标签。</p> 
<p><strong>例2输出：</strong></p> 
<pre class="prettyprint"><code class=" hljs lasso">Explanation <span class="hljs-keyword">on</span> the why the word <span class="hljs-string">'Apple'</span> was tagged:
  Feature                                                O   B<span class="hljs-attribute">-GPE</span> B<span class="hljs-attribute">-ORGAN</span> B<span class="hljs-attribute">-LOCAT</span>
  <span class="hljs-subst">--------------------------------------------------------------------------------</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                    <span class="hljs-number">10.125</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                   <span class="hljs-number">5.628</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                               <span class="hljs-subst">-</span><span class="hljs-number">4.740</span>
  label is <span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                  <span class="hljs-subst">-</span><span class="hljs-number">1.075</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                    <span class="hljs-subst">-</span><span class="hljs-number">1.024</span>
  suffix3<span class="hljs-subst">==</span><span class="hljs-string">'ple'</span> (<span class="hljs-number">1</span>)                                 <span class="hljs-number">0.797</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                             <span class="hljs-number">0.698</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'DT'</span> (<span class="hljs-number">1</span>)                                  <span class="hljs-number">0.585</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                    <span class="hljs-subst">-</span><span class="hljs-number">0.449</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                 <span class="hljs-number">0.104</span>
  prefix3<span class="hljs-subst">==</span><span class="hljs-string">'app'</span> (<span class="hljs-number">1</span>)                                 <span class="hljs-number">0.089</span>
  prevword<span class="hljs-subst">==</span><span class="hljs-string">'these'</span> (<span class="hljs-number">1</span>)                             <span class="hljs-subst">-</span><span class="hljs-number">0.024</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                           <span class="hljs-number">0.011</span>
  nextword<span class="hljs-subst">==</span><span class="hljs-string">'products'</span> (<span class="hljs-number">1</span>)                           <span class="hljs-number">0.005</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                           <span class="hljs-number">3.767</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                        <span class="hljs-number">2.701</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                                   <span class="hljs-number">2.254</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                                     <span class="hljs-number">2.095</span>
  label is <span class="hljs-string">'B-GPE'</span> (<span class="hljs-number">1</span>)                                      <span class="hljs-subst">-</span><span class="hljs-number">2.005</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                            <span class="hljs-subst">-</span><span class="hljs-number">1.975</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                             <span class="hljs-number">0.681</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                         <span class="hljs-number">0.661</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'DT'</span> (<span class="hljs-number">1</span>)                                         <span class="hljs-subst">-</span><span class="hljs-number">0.181</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                             <span class="hljs-number">0.113</span>
  nextword<span class="hljs-subst">==</span><span class="hljs-string">'products'</span> (<span class="hljs-number">1</span>)                                   <span class="hljs-number">0.060</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                                   <span class="hljs-number">3.389</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                                           <span class="hljs-number">1.725</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                                     <span class="hljs-number">0.955</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                                             <span class="hljs-number">0.837</span>
  label is <span class="hljs-string">'B-ORGANIZATION'</span> (<span class="hljs-number">1</span>)                                      <span class="hljs-number">0.718</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'DT'</span> (<span class="hljs-number">1</span>)                                                 <span class="hljs-subst">-</span><span class="hljs-number">0.494</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                                 <span class="hljs-number">0.365</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                                    <span class="hljs-subst">-</span><span class="hljs-number">0.351</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                                     <span class="hljs-number">0.174</span>
  prefix3<span class="hljs-subst">==</span><span class="hljs-string">'app'</span> (<span class="hljs-number">1</span>)                                                <span class="hljs-subst">-</span><span class="hljs-number">0.126</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                               <span class="hljs-subst">-</span><span class="hljs-number">0.084</span>
  suffix3<span class="hljs-subst">==</span><span class="hljs-string">'ple'</span> (<span class="hljs-number">1</span>)                                                <span class="hljs-subst">-</span><span class="hljs-number">0.077</span>
  prevword<span class="hljs-subst">==</span><span class="hljs-string">'these'</span> (<span class="hljs-number">1</span>)                                              <span class="hljs-number">0.067</span>
  prevtag<span class="hljs-subst">==</span><span class="hljs-string">'O'</span> (<span class="hljs-number">1</span>)                                                           <span class="hljs-number">2.682</span>
  label is <span class="hljs-string">'B-LOCATION'</span> (<span class="hljs-number">1</span>)                                                 <span class="hljs-subst">-</span><span class="hljs-number">2.038</span>
  pos<span class="hljs-subst">+</span>prevtag<span class="hljs-subst">==</span><span class="hljs-string">'NNP+O'</span> (<span class="hljs-number">1</span>)                                                   <span class="hljs-number">1.724</span>
  shape<span class="hljs-subst">==</span><span class="hljs-string">'upcase'</span> (<span class="hljs-number">1</span>)                                                        <span class="hljs-number">1.275</span>
  prefix3<span class="hljs-subst">==</span><span class="hljs-string">'app'</span> (<span class="hljs-number">1</span>)                                                         <span class="hljs-number">1.169</span>
  bias<span class="hljs-subst">==</span><span class="hljs-literal">True</span> (<span class="hljs-number">1</span>)                                                             <span class="hljs-number">0.747</span>
  prevpos<span class="hljs-subst">==</span><span class="hljs-string">'DT'</span> (<span class="hljs-number">1</span>)                                                          <span class="hljs-number">0.745</span>
  pos<span class="hljs-subst">==</span><span class="hljs-string">'NNP'</span> (<span class="hljs-number">1</span>)                                                             <span class="hljs-number">0.616</span>
  en<span class="hljs-attribute">-wordlist</span><span class="hljs-subst">==</span><span class="hljs-literal">False</span> (<span class="hljs-number">1</span>)                                                    <span class="hljs-subst">-</span><span class="hljs-number">0.309</span>
  nextpos<span class="hljs-subst">==</span><span class="hljs-string">'nns'</span> (<span class="hljs-number">1</span>)                                                         <span class="hljs-number">0.151</span>
  wordlen<span class="hljs-subst">==</span><span class="hljs-number">5</span> (<span class="hljs-number">1</span>)                                                             <span class="hljs-number">0.041</span>
  <span class="hljs-subst">---------------------------------------------------------------------------------</span>
  TOTAL:                                            <span class="hljs-number">10.730</span>   <span class="hljs-number">8.171</span>   <span class="hljs-number">7.095</span>   <span class="hljs-number">6.802</span>
  PROBS:                                             <span class="hljs-number">0.697</span>   <span class="hljs-number">0.118</span>   <span class="hljs-number">0.056</span>   <span class="hljs-number">0.046</span></code></pre> 
<p>由此：1和2中在GPE识别中唯一的区别在于下面三行：</p> 
<blockquote> 
 <p>prevword==’of’ (1) 0.742 <br> prevpos==’IN’ (1) 0.311 <br> prevpos==’DT’ (1) -0.181</p> 
</blockquote> 
<p>可见，1中 <br> 1中的Apple被识别为B-GPE，而2中的Apple被识别为O。</p> 
<h4 id="引用">引用：</h4> 
<p>[1] <a href="http://www.nltk.org/book/ch07.html" rel="nofollow">http://www.nltk.org/book/ch07.html</a> <br> [2] <a href="http://spark-public.s3.amazonaws.com/nlp/slides/Information_Extraction_and_Named_Entity_Recognition_v2.pdf" rel="nofollow">http://spark-public.s3.amazonaws.com/nlp/slides/Information_Extraction_and_Named_Entity_Recognition_v2.pdf</a> <br> [3] <a href="http://www.mattshomepage.com/#/blog/feb2013/liftingthehood" rel="nofollow">http://www.mattshomepage.com/#/blog/feb2013/liftingthehood</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e07b622148c186ad2d4a01e32883063b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何在鼠标右键新建里添加/删除菜单项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b1e84fd368bf28a1041025c7002909c8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ECharts图表插件禁止拖动合并</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>