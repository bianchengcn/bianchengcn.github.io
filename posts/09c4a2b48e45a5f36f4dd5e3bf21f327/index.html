<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>设计一个采用udp实现数据传输的程序_终于把TCP协议与UDP协议给整明白了 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="设计一个采用udp实现数据传输的程序_终于把TCP协议与UDP协议给整明白了" />
<meta property="og:description" content="﻿网络编程有三个要素，分别是IP地址、端口号和通信协议，那本文主要讲述的是TCP与UDP这两种通信协议，以及编程的实现。
首先，我们需要了解一下IP地址、端口号、通信协议的相关知识。
一、IP地址 网络中的计算机使用IP地址来进行唯一标识，IP地址有IPv4和IPv6两种类型。IPv4采用十进制或二进制表示形式，十进制是一种比较常用的表示形式，如192.168.1.131，IPv6采用十六进制表示形式，一般不常用。
如何查看IP地址相关信息：
在Windows系统下，打开cmd，输入命令ipconfig，按回车即可查看。在Linux或Mac系统下，打开终端，使用ifconfig命令，按回车即可查看。
二、端口号 端口号是计算机中的应用程序的一个整数数字标号，用来区分不同的应用程序。
0 ~ 1024 为被系统使用或保留的端口号，0 ~ 65535为有效的端口号，也就是说我们要对一些程序定义端口号的时候，要选择1024 ~ 65535范围内的整数数字。
比如，以前学过的MySQL的端口号是3306，SQLServer的端口号是1433，还有Oracle的端口号是1521。
一定要把这些数据库对应的端口号，藏在深深的脑海里，以后在连接数据库的时候，会使用到端口号。
三、通信协议 说的通俗一点，通信协议就是网络通信中的规则，分为TCP协议和UDP协议两种。
第一种：TCP协议 英文名：Transmission Control Protocol 中文名：传输控制协议 协议说明：TCP是一种面向连接的、可靠的、基于字节流的传输层通信协议。
举例：打电话，需要双方都接通，才能进行对话。
特点：效率低，数据传输比较安全。
第二种：UDP协议 英文名：User Datagram Protocol 中文名：数据报协议 协议说明：UDP是一种面向无连接的传输层通信协议。
举例：发短信，不需要双方建立连接，But，数据报的大小应限制在64k以内。
特点：效率高，数据传输不安全，容易丢包。
四、三要素关系图与网络模型图 1、网络编程三要素关系图 注：图中端口号、IP地址为演示，并非真实
2、OSI参考模型与TCP/IP参考模型 五、TCP编程 TCP是基于字节流的传输层通信协议，所以TCP编程是基于IO流编程。
对于客户端，我们需要使用Socket类来创建对象。对于服务器端，我们需要使用ServerSocket来创建对象，通过对象调用accept()方法来进行监听是否有客户端访问。
客户端与服务器端图解： 客户端与服务器端实现步骤：
前提：创建一个项目，在项目中创建两个模块（model），一个模块用来放客户端相关代码，一个模块用来放服务器端相关代码。
目录结构如下图
客户端：
1、创建Socket对象，并指定服务器端应用程序的端口号和服务器端主机的IP地址。
2、使用Socket的对象调用getOutputStream()方法来获取字节输出流对象。
3、调用字节输出流的write(byte[] buf)或者write(int b)向服务器发送指定数据。
4、记得关闭流。
服务器端：
1、创建ServerSocket对象，并指定该应用程序的端口号，端口号必须和客户端指定的端口号一样。
2、使用ServerSocket对象的accept()方法来监听客户端发送过来的请求，返回值为Socket对象。
3、调用Socket对象的getInputStream()方法获取字节输入流对象
4、调用字节输入流对象的read(byte[] buf)或read()方法获取数据。
5、记得关闭流。
实例：
客户端向服务器端发送信息，并显示在服务器端。
Client类（客户端）
package cn.tkrnet.client; import java.io.IOException; import java." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/09c4a2b48e45a5f36f4dd5e3bf21f327/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-01T09:47:07+08:00" />
<meta property="article:modified_time" content="2020-12-01T09:47:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">设计一个采用udp实现数据传输的程序_终于把TCP协议与UDP协议给整明白了</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/92/6c/CbA3kjGn_o.png" alt="5403159291eaf2a904b12e620c2f1aba.png"> 
 </div> 
 <p>﻿网络编程有三个要素，分别是IP地址、端口号和通信协议，那本文主要讲述的是TCP与UDP这两种通信协议，以及编程的实现。</p> 
 <p>首先，我们需要了解一下IP地址、端口号、通信协议的相关知识。</p> 
 <h3>一、IP地址</h3> 
 <p>网络中的计算机使用IP地址来进行唯一标识，IP地址有IPv4和IPv6两种类型。IPv4采用十进制或二进制表示形式，十进制是一种比较常用的表示形式，如<code>192.168.1.131</code>，IPv6采用十六进制表示形式，一般不常用。</p> 
 <p>如何查看IP地址相关信息：</p> 
 <p>在Windows系统下，打开cmd，输入命令<code>ipconfig</code>，按回车即可查看。在Linux或Mac系统下，打开终端，使用<code>ifconfig</code>命令，按回车即可查看。</p> 
 <h3>二、端口号</h3> 
 <p>端口号是计算机中的应用程序的一个整数数字标号，用来区分不同的应用程序。</p> 
 <p><code>0 ~ 1024</code> 为被系统使用或保留的端口号，<code>0 ~ 65535</code>为有效的端口号，也就是说我们要对一些程序定义端口号的时候，要选择<code>1024 ~ 65535</code>范围内的整数数字。</p> 
 <p>比如，以前学过的MySQL的端口号是3306，SQLServer的端口号是1433，还有Oracle的端口号是1521。</p> 
 <p>一定要把这些数据库对应的端口号，藏在深深的脑海里，以后在连接数据库的时候，会使用到端口号。</p> 
 <h3>三、通信协议</h3> 
 <p>说的通俗一点，通信协议就是网络通信中的规则，分为TCP协议和UDP协议两种。</p> 
 <p><b>第一种：TCP协议</b> </p> 
 <p>英文名：Transmission Control Protocol </p> 
 <p>中文名：传输控制协议 </p> 
 <p>协议说明：TCP是一种面向连接的、可靠的、基于字节流的传输层通信协议。</p> 
 <p>举例：打电话，需要双方都接通，才能进行对话。</p> 
 <p>特点：效率低，数据传输比较安全。</p> 
 <p><b>第二种：UDP协议</b> </p> 
 <p>英文名：User Datagram Protocol </p> 
 <p>中文名：数据报协议 </p> 
 <p>协议说明：UDP是一种面向无连接的传输层通信协议。</p> 
 <p>举例：发短信，不需要双方建立连接，But，数据报的大小应限制在64k以内。</p> 
 <p>特点：效率高，数据传输不安全，容易丢包。</p> 
 <h3>四、三要素关系图与网络模型图</h3> 
 <p>1、网络编程三要素关系图 </p> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/8e/ec/hK6naYaQ_o.png" alt="3fe0ce3107cbe35efc1bbd18e2862904.png"> 
 </div> 
 <p>注：图中端口号、IP地址为演示，并非真实</p> 
 <p>2、OSI参考模型与TCP/IP参考模型 </p> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/25/05/y1smjmaz_o.png" alt="1e7de1bfbe7a3fc6f6ff5df26b64d3d6.png"> 
 </div> 
 <h3>五、TCP编程</h3> 
 <p>TCP是基于字节流的传输层通信协议，所以TCP编程是基于IO流编程。</p> 
 <p>对于客户端，我们需要使用<code>Socket</code>类来创建对象。对于服务器端，我们需要使用<code>ServerSocket</code>来创建对象，通过对象调用<code>accept()</code>方法来进行监听是否有客户端访问。</p> 
 <p>客户端与服务器端图解： </p> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/27/db/EvfKZ2Rk_o.png" alt="4f014132ae23409a7e985979314ec1c6.png"> 
 </div> 
 <p>客户端与服务器端实现步骤：</p> 
 <p>前提：创建一个项目，在项目中创建两个模块（model），一个模块用来放客户端相关代码，一个模块用来放服务器端相关代码。</p> 
 <p>目录结构如下图</p> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/41/3b/pYcFswCf_o.png" alt="cb47e41ce625e2f79dd1e25d51fa882d.png"> 
 </div> 
 <p><b>客户端：</b></p> 
 <p>1、创建<code>Socket</code>对象，并指定服务器端应用程序的端口号和服务器端主机的IP地址。</p> 
 <p>2、使用<code>Socket</code>的对象调用<code>getOutputStream()</code>方法来获取字节输出流对象。</p> 
 <p>3、调用字节输出流的<code>write(byte[] buf)</code>或者<code>write(int b)</code>向服务器发送指定数据。</p> 
 <p>4、记得关闭流。</p> 
 <p><b>服务器端：</b></p> 
 <p>1、创建<code>ServerSocket</code>对象，并指定该应用程序的端口号，端口号必须和客户端指定的端口号一样。</p> 
 <p>2、使用<code>ServerSocket</code>对象的<code>accept()</code>方法来监听客户端发送过来的请求，返回值为<code>Socket</code>对象。</p> 
 <p>3、调用<code>Socket</code>对象的<code>getInputStream()</code>方法获取字节输入流对象</p> 
 <p>4、调用字节输入流对象的<code>read(byte[] buf)</code>或<code>read()</code>方法获取数据。</p> 
 <p>5、记得关闭流。</p> 
 <p><b>实例：</b></p> 
 <p>客户端向服务器端发送信息，并显示在服务器端。</p> 
 <p>Client类（客户端）</p> 
 <div class="has"> 
  <pre class="has"><code>package cn.tkrnet.client;

import java.io.IOException;
import java.io.OutputStream;
import java.net.Socket;

public class Client {<!-- -->
    public static void main(String[] args) throws IOException {<!-- -->

        //创建Socket对象，指定要发送到服务器端的IP地址，以及服务器端应用程序接收的端口号
        //localhost代表本机IP地址
        Socket client = new Socket("localhost",9000);

        //获取输出流，用于向服务器端发送数据
        OutputStream os = client.getOutputStream();

        os.write("Java is my friend !".getBytes());
        System.out.println("信息已发送");

        //关闭流
        os.close();
        client.close();
    }
}</code></pre> 
 </div> 
 <p>Server类（服务器端）</p> 
 <div class="has"> 
  <pre class="has"><code>package cn.tkrnet.server;

import java.io.IOException;
import java.io.InputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {<!-- -->
    public static void main(String[] args) throws IOException {<!-- -->
        System.out.println("--服务器端已开启--");

        //创建ServerSocket对象，这里的端口号必须与客户端的端口号相同
        ServerSocket server = new ServerSocket(9000);

        //调用方法accept()，用来监听客户端发来的请求
        Socket socket = server.accept();

        //获取输入流对象
        InputStream is = socket.getInputStream();

        //读取输入流中的数据
        int b = 0;
        while ((b =is.read()) != -1){<!-- -->
            System.out.print((char)b);
        }
        //关闭流
        is.close();
        socket.close();
        server.close();
    }
}</code></pre> 
 </div> 
 <p>提示：在运行程序时，一定要先运行服务器端的程序代码，再运行客户端的程序代码。因为客户端要向服务器发送请求，前提是服务器端要处于开启状态。</p> 
 <p>Server类（服务器端）运行结果：</p> 
 <div class="has"> 
  <pre class="has"><code>--服务器端已开启--

</code></pre> 
 </div> 
 <p>Client类（客户端）运行结果：</p> 
 <div class="has"> 
  <pre class="has"><code>信息已发送</code></pre> 
 </div> 
 <p>Client类（客户端）运行后，Server类（服务器端）收到信息，运行结果：</p> 
 <div class="has"> 
  <pre class="has"><code>--服务器端已开启--
Java is my friend !</code></pre> 
 </div> 
 <p>实例分析：</p> 
 <p>服务器端启动后，服务器端的<code>accept()</code>方法一直处于监听状态，直到客户端连接了服务器，服务器端再从流中读取客户端发来的数据。</p> 
 <p>恕我直言，这是一个超级无敌简单的单向通信实例。</p> 
 <h3>六、UDP编程</h3> 
 <p>UDP使用数据报进行数据传输，没有客户端与服务器端之分，只有发送方与接收方，两者哪个先启动都不会报错，但是会出现数据丢包现象。发送的内容有字数限制，大小必须限制在64k以内。</p> 
 <p>发送方与接收方实现步骤：</p> 
 <p>前提：创建一个项目，在项目中创建两个模块（model），一个模块用来放发送方相关代码，一个模块用来放接收方相关代码。</p> 
 <p>目录结构如下图</p> 
 <p></p> 
 <div style="text-align:center;"> 
  <img src="https://images2.imgbox.com/60/29/S1aKpwCZ_o.png" alt="d5e5a7e6bf160ec83079e1c506c8475d.png"> 
 </div> 
 <p><b>发送方：</b></p> 
 <p>1、创建<code>DatagramSocket</code>对象，可以指定应用程序的端口号，也可以不指定。</p> 
 <p>2、准备需要发送的数据</p> 
 <p>3、创建<code>DatagramPacket</code>对象，用来对发送的数据进行打包，需要指定发送内容、发送多少、发送到哪里和接收方的端口号四个参数。</p> 
 <p>4、调用<code>DatagramSocket</code>对象的<code>send()</code>方法发送数据。</p> 
 <p>5、记得关闭流。</p> 
 <p><b>接收方：</b></p> 
 <p>1、创建<code>DatagramSocket</code>对象，指定接收方的端口号，这个必须指定。</p> 
 <p>2、创建一个<code>byte</code>类型数组，用来接收发送方发送过来的数据。</p> 
 <p>3、创建<code>DatagramPacket</code>对象，准备接收数据。</p> 
 <p>4、调用<code>DatagramSocket</code>对象的<code>receive()</code>方法用于接收数据。</p> 
 <p>5、使用<code>String</code>类的构造方法将<code>byte</code>类型的数组中的数据转化成<code>String</code>类型并显示。</p> 
 <p>6、记得关闭流。</p> 
 <p><b>实例：</b></p> 
 <p>发送方发送信息，接收方接收信息，并显示。</p> 
 <p>Sender类（发送方）</p> 
 <div class="has"> 
  <pre class="has"><code>package cn.tkrnet.Sender;

import java.io.IOException;
import java.net.*;

public class Sender {<!-- -->
    public static void main(String[] args) throws IOException {<!-- -->

        //创建接受或发送的数据报套接字，并指定发送方的端口号为7770
        DatagramSocket ds = new DatagramSocket(7770);   //端口号也可以不指定
        System.out.println("---发送方---");

        //创建数据报对象，用来发送数据
        byte[] b = "Java is my friend ！".getBytes();

        //8800为接收方的端口号，netAddress.getByName("localhost")是获取主机的IP地址
        DatagramPacket dp = new DatagramPacket(b,b.length, InetAddress.getByName("localhost"),7788);

        ds.send(dp);    //发送数据报
        System.out.println("数据已发送");
        //关闭流
        ds.close();
    }
}</code></pre> 
 </div> 
 <p>Receiver类（接收方）</p> 
 <div class="has"> 
  <pre class="has"><code>package cn.tkrnet.receiver;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;

public class Receiver {<!-- -->
    public static void main(String[] args) throws IOException {<!-- -->
        System.out.println("---接收方---");

        //创建数据报套接字对象，指定的端口号要和发送方发送数据的端口号相同
        // （不是发送方的端口号7770，是发送方发送数据的端口号7788）
        DatagramSocket ds = new DatagramSocket(7788);

        //创建接收数据报的对象
        byte[] b = new byte[1024];
        DatagramPacket dp = new DatagramPacket(b,b.length);

        //接收数据
        ds.receive(dp);
        System.out.println(new String(b,0,dp.getLength()));
        //关闭流
        ds.close();
    }
}</code></pre> 
 </div> 
 <p>提示：在运行程序时，先运行发送方程序，还是先运行接收方程序都不会报错，但是有可能会出现数据丢包，一般我们都先运行接收方的程序代码，再运行发送方的程序代码。</p> 
 <p>Receiver类（接收方）运行结果：</p> 
 <div class="has"> 
  <pre class="has"><code>---接收方---

</code></pre> 
 </div> 
 <p>Sender类（发送方）运行结果：</p> 
 <div class="has"> 
  <pre class="has"><code>---发送方---
数据已发送</code></pre> 
 </div> 
 <p>Sender类（发送方）运行后，Receiver类（接收方）接收到信息，运行结果：</p> 
 <div class="has"> 
  <pre class="has"><code>---接收方---
Java is my friend ！</code></pre> 
 </div> 
 <p>实例分析：</p> 
 <p>只有接收方先启动运行，才会存在端口号为7788的程序，发送方才能发送数据到指定端口号7788，接收方才能接收数据。</p> 
 <p>不瞒你说，这也是个超级无敌简单的单向通信实例。</p> 
 <h3>七、总结</h3> 
 <p>以上是我分享给大家的关于网络通信TCP协议与UDP协议的一些总结。</p> 
 <p><b>建议先点赞再收藏！</b></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f9af87925e96a44c23c3a78f687ec8f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构基本操作的复杂度汇总</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/edce49c50366bdee96e543b7208a78cf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">b460 win7 usb驱动_【实战系列】B460主板&#43;Intel 10代CPU i5 10400&#43;H630核显完美装WIN7系统...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>