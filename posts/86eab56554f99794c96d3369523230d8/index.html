<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MVC&#43;jQuery.Ajax异步实现增删改查和分页的实例 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MVC&#43;jQuery.Ajax异步实现增删改查和分页的实例" />
<meta property="og:description" content="本文实例为大家分享了MVC&#43;jQuery.Ajax异步实现增删改查和分页的具体代码，供大家参考，具体内容如下
1、Model层代码
using System; using System.Data; using System.Configuration; using System.Linq; using System.Web; using System.Web.Security; using System.Web.UI; using System.Web.UI.HtmlControls; using System.Web.UI.WebControls; using System.Web.UI.WebControls.WebParts; using System.Xml.Linq; using System.Collections.Generic; using MvcExamples; using System.Web.Mvc; namespace MvcExamples.Web.Models { public class StudentModels { /// &lt;summary&gt; /// 获取学生信息列表 /// &lt;/summary&gt; public List&lt;MvcExamples.Model.Student&gt; StudentList { get; set; } /// &lt;summary&gt; /// 获取教工信息列表 /// &lt;/summary&gt; public List&lt;MvcExamples.Model.Teacher&gt; TeacherList { get; set; } /// &lt;summary&gt; /// 获取学生信息列表(分页) /// &lt;/summary&gt; public PagedList&lt;MvcExamples." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/86eab56554f99794c96d3369523230d8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-08-15T10:41:15+08:00" />
<meta property="article:modified_time" content="2017-08-15T10:41:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MVC&#43;jQuery.Ajax异步实现增删改查和分页的实例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">本文实例为大家分享了MVC+jQuery.Ajax异步实现增删改查和分页的具体代码，供大家参考，具体内容如下</span></span></p> 
<p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><strong>1、Model层代码</strong></span></span></p> 
<div class="jb51code" align="left"> 
 <pre><code class="language-csharp"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">using System;
using System.Data;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Collections.Generic;
using MvcExamples;
using System.Web.Mvc;

namespace MvcExamples.Web.Models
{
 public class StudentModels
 {
  /// &lt;summary&gt;
  /// 获取学生信息列表
  /// &lt;/summary&gt;
  public List&lt;MvcExamples.Model.Student&gt; StudentList { get; set; }
  /// &lt;summary&gt;
  /// 获取教工信息列表
  /// &lt;/summary&gt;
  public List&lt;MvcExamples.Model.Teacher&gt; TeacherList { get; set; }
  /// &lt;summary&gt;
  /// 获取学生信息列表(分页)
  /// &lt;/summary&gt;
  public PagedList&lt;MvcExamples.Model.Student&gt; GetStudentList { get; set; }
 }
}

</span></span></code></pre> 
</div> 
<p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><strong>2、View层代码</strong></span></span></p> 
<div class="jb51code" align="left"> 
 <pre><code class="language-html"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">&lt;%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage&lt;MvcExamples.Web.Models.StudentModels&gt;" %&gt;

&lt;asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server"&gt;
 Index
&lt;/asp:Content&gt;
&lt;asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server"&gt;

 &lt;script src="http://www.cnblogs.com/Scripts/jquery-1.4.2.min.js" type="text/javascript"&gt;&lt;/script&gt;
 &lt;script src="http://www.cnblogs.com/Scripts/My97DatePicker/WdatePicker.js" type="text/javascript"&gt;&lt;/script&gt;
 &lt;script src="http://www.cnblogs.com/Scripts/windwUi/jquery-ui-1.8.1.min.js" type="text/javascript"&gt;&lt;/script&gt;
 &lt;link href="http://www.cnblogs.com/Scripts/windwUi/jquery-ui-1.8.1.custom.css" rel="stylesheet" type="text/css" /&gt;
 &lt;script type="text/javascript"&gt;
 $(function(){
 
  //添加学生信息
  $('#a_add').click(function(){
   $('#window').dialog({ 
     title: "添加学生信息",
     width: 300,
     height: 200,
     modal: true,
     buttons: { 
      "取消": function() {
       $(this).dialog("close"); //当点击取消按钮时，关闭窗口
      }, 
      "添加": function() { 
       //当点击添加按钮时，获取各参数的值
       var sno=$('#sno').val();
       var sname=$('#sname').val();
       var ssex=$('#ssex').val();
       var sbirsthday=$('#sbirthday').val();
       var sclass=$('#sclass').val();
       $.ajax({
       type:'post',
       url:'/Student/AddStudent',//路径为添加方法
       data:'no='+sno+'&amp;name='+sname+'&amp;sex='+ssex+'&amp;birsthday='+sbirsthday+'&amp;sclass='+sclass,//参数的个数和名字要和方法的名字保持一致
       success:function(json)//返回的是Json类型的
        {
         $('#window').dialog("close"); 
         //判断是否成功
         if(json.result=="true")
         {
          $('#btn_close').click();
          alert('恭喜你，修改成功！'); 
         }else{
          alert('抱歉，修改失败！');
         }
        }
       });
      }
      } 
    });
  })
  
  //删除学生信息
  $('.a_delete').click(function(){
   //确认是否删除
   if(confirm("是否删除此条信息？"))
   {
    $.ajax({
     type:'post',
     url:'/Student/DeleteStudent',
     data:'no='+$(this).attr("sno"),//获取当前对象的属性(自定义属性)sno的值，用自定义属性保存相应需要的数据
     sucess:function(json)
      {
       if(json.result=="true")
       {
        alert("恭喜你，已成功删除！");
       }else
       {
        alert("抱歉，删除失败！");
       }
      }
    })
   }
  })
 
  //修改学生信息
  $('.a_update').click(function(){
   var student=$(this);
   $("#sno").attr("value",student.attr("sno"));
   $("#sname").attr("value",student.attr("sname"));
   $("#ssex").attr("value",student.attr("ssex"));
   $("#sbirthday").attr("value",student.attr("sbirthday"));
   $("#sclass").attr("value",student.attr("sclass"));
   
   $('#window').dialog({ 
    title: "修改学生信息",
    width: 300,
    height: 200,
    modal: true,
    buttons: { 
     "取消": function() {
      $(this).dialog("close"); 
     }, 
     "修改": function() { 
      var sno=$('#sno').val();
      var sname=$('#sname').val();
      var ssex=$('#ssex').val();
      var sbirsthday=$('#sbirthday').val();
      var sclass=$('#sclass').val();
      $.ajax({
      type:'post',
      url:'/Student/UpdateStudent',
      data:'no='+sno+'&amp;name='+sname+'&amp;sex='+ssex+'&amp;birsthday='+sbirsthday+'&amp;sclass='+sclass,
      success:function(json)
       {
        $('#window').dialog("close"); 
        if(json.result=="true")
        {
         $('#btn_close').click();
         alert('恭喜你，修改成功！'); 
        }else{
         alert('抱歉，修改失败！');
        }
       }
      });
     }
     } 
    });  
  });
  
 })
 &lt;/script&gt;

&lt;/asp:Content&gt;
&lt;asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server"&gt;
 &lt;h2&gt;
  MVC 演示&lt;/h2&gt;
 &lt;table&gt;
  &lt;thead&gt;
   &lt;tr&gt;
    &lt;td&gt;
     学生表
    &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td&gt;
     学号
    &lt;/td&gt;
    &lt;td&gt;
     姓名
    &lt;/td&gt;
    &lt;td&gt;
     性别
    &lt;/td&gt;
    &lt;td&gt;
     生日
    &lt;/td&gt;
    &lt;td&gt;
     班级
    &lt;/td&gt;
    &lt;td&gt;
     操作
    &lt;/td&gt;
   &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
   &lt;%foreach (MvcExamples.Model.Student student in Model.GetStudentList)
    {%&gt;
   &lt;tr&gt;
    &lt;td&gt;
     &lt;%=student.sno %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.sname %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.ssex %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.sbirthday %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.sclass %&gt;
    &lt;/td&gt;
    &lt;td&gt;
    &lt;a href="javascript:void(0);" class="a_update" sno="&lt;%=student.sno %&gt;" sname="&lt;%=student.sname %&gt;" ssex="&lt;%=student.ssex %&gt;"
      sbirthday="&lt;%=student.sbirthday %&gt;" sclass="&lt;%=student.sclass %&gt;"&gt;修改&lt;/a&gt;
       
     &lt;a href="javascript:void(0);" class="a_delete" sno="&lt;%=student.sno %&gt;"&gt;删除&lt;/a&gt;
    &lt;/td&gt;
   &lt;/tr&gt;
   &lt;% } %&gt;
  &lt;/tbody&gt;
  &lt;tfoot&gt;
   &lt;tr&gt;
    &lt;td&gt;
     全选
    &lt;/td&gt;
    &lt;td colspan="5" style="text-align: right;"&gt;
     &lt;a href="javascript:void(0);" id="a_add"&gt;添加&lt;/a&gt;
    &lt;/td&gt;
   &lt;/tr&gt;
  &lt;/tfoot&gt;
 &lt;/table&gt;
 &lt;%=Html.MikePager(Model.GetStudentList)%&gt;
 &lt;br /&gt;
 &lt;table&gt;
  &lt;thead&gt;
   &lt;tr&gt;
    &lt;td&gt;
     学生表
    &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td&gt;
     学号
    &lt;/td&gt;
    &lt;td&gt;
     姓名
    &lt;/td&gt;
    &lt;td&gt;
     性别
    &lt;/td&gt;
    &lt;td&gt;
     生日
    &lt;/td&gt;
    &lt;td&gt;
     班级
    &lt;/td&gt;
   &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
   &lt;%foreach (MvcExamples.Model.Student student in Model.StudentList)
    {%&gt;
   &lt;tr&gt;
    &lt;td&gt;
     &lt;%=student.sno %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.sname %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.ssex %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.sbirthday %&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=student.sclass %&gt;
    &lt;/td&gt;
   &lt;/tr&gt;
   &lt;% } %&gt;
  &lt;/tbody&gt;
 &lt;/table&gt;
 &lt;br /&gt;
 &lt;table&gt;
  &lt;thead&gt;
   &lt;tr&gt;
    &lt;td&gt;
     老师表
    &lt;/td&gt;
   &lt;/tr&gt;
   &lt;tr&gt;
    &lt;td&gt;
     编号
    &lt;/td&gt;
    &lt;td&gt;
     姓名
    &lt;/td&gt;
    &lt;td&gt;
     性别
    &lt;/td&gt;
    &lt;td&gt;
     生日
    &lt;/td&gt;
    &lt;td&gt;
     职称
    &lt;/td&gt;
    &lt;td&gt;
     所在部门
    &lt;/td&gt;
   &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
   &lt;%foreach (MvcExamples.Model.Teacher teacher in Model.TeacherList)
    {%&gt;
   &lt;tr&gt;
    &lt;td&gt;
     &lt;%=teacher.tno%&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=teacher.tname%&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=teacher.tsex%&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=teacher.tbirthday%&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=teacher.prof%&gt;
    &lt;/td&gt;
    &lt;td&gt;
     &lt;%=teacher.depart%&gt;
    &lt;/td&gt;
   &lt;/tr&gt;
   &lt;% } %&gt;
  &lt;/tbody&gt;
 &lt;/table&gt;
 
 &lt;div id="window" style="display:none;"&gt;
 &lt;input type="hidden" id="sno" name="sno" value="" /&gt;
 姓名：&lt;input type="text" id="sname" name="sname" /&gt;&lt;br /&gt;
 性别：&lt;input type="text" id="ssex" name="ssex" /&gt;&lt;br /&gt;
 生日：&lt;input type="text" id="sbirthday" name="sbirthday" onClick = "WdatePicker()" /&gt;&lt;br /&gt;
 班级：&lt;input type="text" id="sclass" name="sclass" /&gt;&lt;br /&gt;
 &lt;/div&gt;
&lt;/asp:Content&gt;

</span></span></code></pre> 
</div> 
<p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><strong>3、Controller层代码</strong></span></span></p> 
<div class="jb51code" align="left"> 
 <pre><code class="language-csharp"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Mvc.Ajax;

namespace MvcExamples.Web.Controllers
{
 public class StudentController : Controller
 {
  //
  // GET: /Student/

  MvcExamples.BLL.Student _Student = new MvcExamples.BLL.Student();
  MvcExamples.BLL.Teacher _Teacher = new MvcExamples.BLL.Teacher();
  /// &lt;summary&gt;
  /// 演示
  /// &lt;/summary&gt;
  /// &lt;param name="pi"&gt;&lt;/param&gt;
  /// &lt;param name="sclass"&gt;&lt;/param&gt;
  /// &lt;returns&gt;&lt;/returns&gt;
  public ActionResult Index(int? pi, string sclass)
  {
   int PageIndex = pi ?? 1;
   int PageSize = 5;
   string sClass = sclass == null ? "95031" : sclass;
   MvcExamples.Web.Models.StudentModels _StudentModels = new MvcExamples.Web.Models.StudentModels();
   _StudentModels.StudentList = _Student.GetModelList("sclass=" + sClass);
   _StudentModels.TeacherList = _Teacher.GetModelList("tsex='男'");
   _StudentModels.GetStudentList = new PagedList&lt;MvcExamples.Model.Student&gt;(_Student.GetModelList("sclass=" + sClass).AsQueryable(), PageIndex, PageSize);
   return View(_StudentModels);//返回一个Model
  }
  /// &lt;summary&gt;
  /// 修改学生信息
  /// &lt;/summary&gt;
  /// &lt;param name="no"&gt;&lt;/param&gt;
  /// &lt;param name="name"&gt;&lt;/param&gt;
  /// &lt;param name="sex"&gt;&lt;/param&gt;
  /// &lt;param name="birsthday"&gt;&lt;/param&gt;
  /// &lt;param name="sclass"&gt;&lt;/param&gt;
  /// &lt;returns&gt;&lt;/returns&gt;
  public ActionResult UpdateStudent(string no, string name, string sex, string birsthday, string sclass)
  {
   MvcExamples.Model.Student _student = new MvcExamples.Model.Student();
   _student.sno = no;
   _student.sname = name;
   _student.ssex = sex;
   _student.sbirthday = Convert.ToDateTime(birsthday);
   _student.sclass = sclass;

   _Student.Update(_student);   

   JsonResult json = new JsonResult();
   json.Data = new
   {
    result = "true"
   };
   return json;
  }
  /// &lt;summary&gt;
  /// 删除学生信息
  /// &lt;/summary&gt;
  /// &lt;param name="no"&gt;&lt;/param&gt;
  /// &lt;returns&gt;&lt;/returns&gt;
  public ActionResult DeleteStudent(string no)
  {
   bool IsDelete= _Student.Delete(no);
   JsonResult json = new JsonResult();
   return json;
   if (IsDelete)
   {
    json.Data = new
    {
     result = "true"
    };
   }
   else
   {
    json.Data = new
    {
     result ="false"
    };
   }
   return json;
  }
  /// &lt;summary&gt;
  /// 添加学生信息
  /// &lt;/summary&gt;
  /// &lt;param name="no"&gt;&lt;/param&gt;
  /// &lt;param name="name"&gt;&lt;/param&gt;
  /// &lt;param name="sex"&gt;&lt;/param&gt;
  /// &lt;param name="birsthday"&gt;&lt;/param&gt;
  /// &lt;param name="sclass"&gt;&lt;/param&gt;
  /// &lt;returns&gt;&lt;/returns&gt;
  public ActionResult AddStudent(string no, string name, string sex, string birsthday, string sclass)
  {
   MvcExamples.Model.Student _student = new MvcExamples.Model.Student();
   _student.sno = no;
   _student.sname = name;
   _student.ssex = sex;
   _student.sbirthday = Convert.ToDateTime(birsthday);
   _student.sclass = sclass;

   _Student.Add(_student);

   JsonResult json = new JsonResult();
   json.Data = new
   {
    result = "true"
   };
   return json;
  }

  /// &lt;summary&gt;
  /// 提供弹出窗口的数据
  /// &lt;/summary&gt;
  /// &lt;param name="id"&gt;&lt;/param&gt;
  /// &lt;returns&gt;&lt;/returns&gt;
  public ActionResult WindowData(int id)
  {
   JsonResult json = new JsonResult();
   //这里给json数据(这里只是演示，下面数据是模拟的)
   json.Data = new
   {
    name = "张三",
    sex = "男"
   };
   return json;
  }

 }
}

</span></span></code></pre> 
</div> 
<p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><strong>4、两个分页辅助类PagedList和MikePagerHtmlExtensions<br> </strong></span></span></p> 
<p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><span style="color:#800000"><strong>PagedList辅助类</strong></span></span></span></p> 
<div class="jb51code" align="left"> 
 <pre><code class="language-csharp"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">using System;
using System.Data;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Collections.Generic;
using System.Collections.Specialized;

namespace System.Web.Mvc
{
 public interface IPagedList
 {
  int TotalPage //总页数
  {
   get;
  }

  int TotalCount
  {
   get;
   set;
  }

  int PageIndex
  {
   get;
   set;
  }

  int PageSize
  {
   get;
   set;
  }

  bool IsPreviousPage
  {
   get;
  }

  bool IsNextPage
  {
   get;
  }
 }

 public class PagedList&lt;T&gt; : List&lt;T&gt;, IPagedList
 {
  public PagedList(IQueryable&lt;T&gt; source, int? index, int? pageSize)
  {
   if (index == null) { index = 1; }
   if (pageSize == null) { pageSize = 10; }
   this.TotalCount = source.Count();
   this.PageSize = pageSize.Value;
   this.PageIndex = index.Value;
   this.AddRange(source.Skip((index.Value - 1) * pageSize.Value).Take(pageSize.Value));
  }

  public int TotalPage
  {
   get { return (int)System.Math.Ceiling((double)TotalCount / PageSize); }
  }

  public int TotalCount
  {
   get;
   set;
  }
  /// &lt;summary&gt;
/// 
/// &lt;/summary&gt;
  public int PageIndex
  {
   get;
   set;
  }

  public int PageSize
  {
   get;
   set;
  }

  public bool IsPreviousPage
  {
   get
   {
    return (PageIndex &gt; 1);
   }
  }

  public bool IsNextPage
  {
   get
   {
    return ((PageIndex) * PageSize) &lt; TotalCount;
   }
  }

 }

 public static class Pagination
 {
  public static PagedList&lt;T&gt; ToPagedList&lt;T&gt;(this IOrderedQueryable&lt;T&gt; source, int? index, int? pageSize)
  {
   return new PagedList&lt;T&gt;(source, index, pageSize);
  }

  public static PagedList&lt;T&gt; ToPagedList&lt;T&gt;(this IOrderedQueryable&lt;T&gt; source, int? index)
  {
   return new PagedList&lt;T&gt;(source, index, 10);
  }

  public static PagedList&lt;T&gt; ToPagedList&lt;T&gt;(this IQueryable&lt;T&gt; source, int? index, int? pageSize)
  {
   return new PagedList&lt;T&gt;(source, index, pageSize);
  }

  public static PagedList&lt;T&gt; ToPagedList&lt;T&gt;(this IQueryable&lt;T&gt; source, int? index)
  {
   return new PagedList&lt;T&gt;(source, index, 10);
  }
 }
}

</span></span></code></pre> 
</div> 
<p align="left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><span style="color:#800000"><strong>MikePagerHtmlExtensions辅助类</strong></span></span></span></p> 
<div class="jb51code" align="left"> 
 <pre><code class="language-csharp"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">using System;
using System.Data;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.Web.Mvc;
using System.Web.Routing;
using System.Text;

namespace System.Web.Mvc
{
 public static class MikePagerHtmlExtensions
 {
  
  #region MikePager 分页控件

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data)
  {
   string actioinName = html.ViewContext.RouteData.GetRequiredString("action");
   return MikePager&lt;T&gt;(html, data, actioinName);
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, object values)
  {
   string actioinName = html.ViewContext.RouteData.GetRequiredString("action");
   return MikePager&lt;T&gt;(html, data, actioinName, values);
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, string action)
  {
   return MikePager&lt;T&gt;(html, data, action, null);
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, string action, object values)
  {
   string controllerName = html.ViewContext.RouteData.GetRequiredString("controller");
   return MikePager&lt;T&gt;(html, data, action, controllerName, values);
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, string action, string controller, object values)
  {
   return MikePager&lt;T&gt;(html, data, action, controller, new RouteValueDictionary(values));
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, RouteValueDictionary values)
  {
   string actioinName = html.ViewContext.RouteData.GetRequiredString("action");
   return MikePager&lt;T&gt;(html, data, actioinName, values);
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, string action, RouteValueDictionary values)
  {
   string controllerName = html.ViewContext.RouteData.GetRequiredString("controller");
   return MikePager&lt;T&gt;(html, data, action, controllerName, values);
  }

  public static string MikePager&lt;T&gt;(this HtmlHelper html, PagedList&lt;T&gt; data, string action, string controller, RouteValueDictionary valuedic)
  {
   int start = (data.PageIndex - 5) &gt;= 1 ? (data.PageIndex - 5) : 1;
   int end = (data.TotalPage - start) &gt; 9 ? start + 9 : data.TotalPage;

   RouteValueDictionary vs = valuedic == null ? new RouteValueDictionary() : valuedic;

   var builder = new StringBuilder();
   builder.AppendFormat("&lt;div class=\"mike_mvc_pager\"&gt;");

   if (data.IsPreviousPage)
   {
    vs["pi"] = 1;
    builder.Append(Html.LinkExtensions.ActionLink(html, "首页", action, controller, vs, null));
    builder.Append(" ");
    vs["pi"] = data.PageIndex - 1;
    builder.Append(Html.LinkExtensions.ActionLink(html, "上一页", action, controller, vs, null));
    builder.Append(" ");

   }

   for (int i = start; i &lt;= end; i++) //前后各显示5个数字页码
   {
    vs["pi"] = i;
    if (i == data.PageIndex)
    {
     builder.Append("&lt;font class='thispagethis'&gt;" + i.ToString() + "&lt;/font&gt; ");
    }
    else
    {
     builder.Append(" ");

     builder.Append(Html.LinkExtensions.ActionLink(html, i.ToString(), action, controller, vs, null));
    }
   }

   if (data.IsNextPage)
   {
    builder.Append(" ");

    vs["pi"] = data.PageIndex + 1;
    builder.Append(Html.LinkExtensions.ActionLink(html, "下一页", action, controller, vs, null));
    builder.Append(" ");


    vs["pi"] = data.TotalPage;
    builder.Append(Html.LinkExtensions.ActionLink(html, "末页", action, controller, vs, null));


   }
   builder.Append(" 每页" + data.PageSize + "条/共" + data.TotalCount + "条 第" + data.PageIndex + "页/共" + data.TotalPage + "页 &lt;/div&gt;");
   return builder.ToString();
  }
  #endregion
 }
}

</span></span></code></pre> 
</div> 
<p align="left" style="text-align:left"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px">效果图：</span></span></p> 
<p align="left" style="text-align:center"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><img alt="" src="https://images2.imgbox.com/1a/ed/E84aiuGn_o.jpg"></span></span></p> 
<p align="left" style="text-align:center"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><img alt="" src="https://images2.imgbox.com/60/95/r0S1mdlu_o.jpg"><br> </span></span></p> 
<p align="left" style="text-align:center"><span style="background-color:rgb(192,192,192)"><span style="font-family:Times New Roman; font-size:14px"><a target="_blank" href="http://www.jb51.net/article/83813.htm" rel="nofollow noopener noreferrer">本文转自的文章详情点击打开链接</a><br> </span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d57a5e03d7b10e8de61ed018e96f7bf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Rundll32.exe 调用Dll</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e7c23c26628a836eeb4103419e4b3f4e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">webpack 如何优雅的使用tree-shaking（摇树优化）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>