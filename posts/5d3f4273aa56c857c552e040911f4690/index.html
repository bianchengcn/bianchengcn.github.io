<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>12.4-在Qt中使用Log4Qt输出Log文件，看这一篇就足够了 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="12.4-在Qt中使用Log4Qt输出Log文件，看这一篇就足够了" />
<meta property="og:description" content="文章目录 一、为啥要使用第三方Log库，而不用平台自带的Log库二、Log4j系列库的功能介绍与基本概念三、Log4Qt库的基本介绍四、将Log4qt组装成为一个单独模块五、使用配置文件的方式配置Log4Qt六、使用代码的方式配置Log4Qt七、在Qt工程中引入Log4Qt库模块的方法八、获取示例中的源代码 一、为啥要使用第三方Log库，而不用平台自带的Log库 首先要说明的是，在平时开发和调试中开发平台自带的“打印输出”已经足够了。但是在深入使用的场合则显得“心有余而力不足”了。
比如在如下几个使用场合：
记录软件崩溃log文件：
正式发布的软件，需要把使用过程中的报错信息写入到log文件中。这个“Log文件”主要记录软件的使用环境、操作动作、警告信息、报错信息等。在软件发生崩溃的时候，这些log文件对开发者定位bug并修改bug有非常大的帮助。是大型软件必不可少的功能。记录软件使用详细过程
对于一些涉及数据安全的软件，需要对软件的操作步骤和过程做详细的log记录。从而避免操作人员随意或恶意修改数据却不留下任何证据。比如：医疗数据、金融数据、电力数据、化工数据等。同时为了log记录的安全，需要远程储存log数据。常用的方式是用“远程数据库”来记录log。
因此，在这些重量级的需求下，发展出来了各种个样的第三方Log库，而最为著名的就是Log4J这个开源库。 二、Log4j系列库的功能介绍与基本概念 Log4J相比于系统自带log的优点 支持多源输出：支持输出log到控制台、文件、套接口服务器等；线程安全：可以安全的在多线程应用中使用；输出格式可控：可以根据需求定制输出格式：xml格式、数据库表格式、（时间，日期，线程，级别）自由组合格式；支持日志级别：可以用不同级别来记录log，比如：debug、info、warn、error。同时可以灵活限定输出等级；配置简单：使用统一的配置文件配置即可实现定制化的log输出，配置文件可以随时修改动态生效；多个输出源同时输出：比如终点输出和文件输出可以同时记录log；多平台可用：现在Log4J被移植到多个平台上支持多种编程语言； Log4j的组成部分
Log4j由三个组件组成，分别是：记录器（logger）、数据输出源（appender）、布局（layout）。开发者可以根具输出消息类型、等级、输出格式以及使用那种方式输出作出灵活的配置。这些都离不开这三个组件的支持。 记录器（logger）：在代码中采集需要输出的消息。并且根具所配置的等级过滤输入消息数据输出源（appender）：log消息数据输出的目标地点。比如：终端、文件、远程socket布局（layout）：指定消息输出的格式。比如：xml格式、时间，日期，线程，级别）自由组合格式； Log4j的输出等级
日志信息的优先级从高到低有FATAL、ERROR、WARN、INFO、DEBUG、TRACE、ALL，分别用来指定这条日志信息的重要程度。Log4j建议只使用四个级别，优先级从高到低分别是ERROR、WARN、INFO、DEBUG。Log4j只输出，级别设置等级以及比设置等级高的消息。比如设置等级为Info。则属于“FATAL、ERROR、WARN、INFO”等级的消息可以输出到log。而“DEBUG、TRACE”级别的消息则不会被输出。
常用的输出源（Appender）
org.apache.log4j.ConsoleAppender（控制台）
org.apache.log4j.FileAppender（文件）
org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）
org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）
org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）
常用的布局（Layout）
org.apache.log4j.HTMLLayout（以HTML表格形式布局）
org.apache.log4j.PatternLayout（根据patten符号格式化输出数据，类似printf的格式化方式）
org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）
org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等信息）
一些规则说明
一个Logger可以挂接多个Appender(日志信息同时转发到多个输出源)一个Appender只能指定一个Layout进行格式化RootLogger可以设置一个基本log输出等级限制每个Appender可以单独设置自己的输出等级，但是受限于RootLogger的log输出等级限制 三、Log4Qt库的基本介绍 Log4Qt作为Log4j的一个分支扩展。使得在Qt应用程序中也可以使用到这个优秀的log库。在Apache-2.0协议下发布，这个开源库可以使用在开源软件和商业软件中。项目地址如下：
https://github.com/MEONMedical/Log4Qt Log4qt在Log4j的基础增加的功能
//简单的包含时间“输出布局”
SimpleTimeLayout (“dd.MM.yyyy hh:mm [Thread] Level Logger Message”)
//多彩颜色终端输出（仅支持windows）
ColorConsoleAppender (render colorized message by escape sequence and put it to console)
//当记录输出消息的时候，发生一个qt平台的信号
SignalAppender (emit signal when log event happens)
//数据库“输出源”
DatabaseAppender (append log event into sql table)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/5d3f4273aa56c857c552e040911f4690/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-11T01:50:04+08:00" />
<meta property="article:modified_time" content="2020-04-11T01:50:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">12.4-在Qt中使用Log4Qt输出Log文件，看这一篇就足够了</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#LogLog_1" rel="nofollow">一、为啥要使用第三方Log库，而不用平台自带的Log库</a></li><li><a href="#Log4j_10" rel="nofollow">二、Log4j系列库的功能介绍与基本概念</a></li><li><a href="#Log4Qt_48" rel="nofollow">三、Log4Qt库的基本介绍</a></li><li><a href="#Log4qt_87" rel="nofollow">四、将Log4qt组装成为一个单独模块</a></li><li><a href="#Log4Qt_130" rel="nofollow">五、使用配置文件的方式配置Log4Qt</a></li><li><a href="#Log4Qt_223" rel="nofollow">六、使用代码的方式配置Log4Qt</a></li><li><a href="#QtLog4Qt_296" rel="nofollow">七、在Qt工程中引入Log4Qt库模块的方法</a></li><li><a href="#_372" rel="nofollow">八、获取示例中的源代码</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="LogLog_1"></a>一、为啥要使用第三方Log库，而不用平台自带的Log库</h3> 
<p>首先要说明的是，在平时开发和调试中开发平台自带的“打印输出”已经足够了。但是在深入使用的场合则显得“心有余而力不足”了。<br> 比如在如下几个使用场合：</p> 
<ol><li>记录软件崩溃log文件：<br> 正式发布的软件，需要把使用过程中的报错信息写入到log文件中。这个“Log文件”主要记录软件的使用环境、操作动作、警告信息、报错信息等。在软件发生崩溃的时候，这些log文件对开发者定位bug并修改bug有非常大的帮助。是大型软件必不可少的功能。</li><li>记录软件使用详细过程<br> 对于一些涉及数据安全的软件，需要对软件的操作步骤和过程做详细的log记录。从而避免操作人员随意或恶意修改数据却不留下任何证据。比如：医疗数据、金融数据、电力数据、化工数据等。同时为了log记录的安全，需要远程储存log数据。常用的方式是用“远程数据库”来记录log。<br> 因此，在这些重量级的需求下，发展出来了各种个样的第三方Log库，而最为著名的就是Log4J这个开源库。</li></ol> 
<h3><a id="Log4j_10"></a>二、Log4j系列库的功能介绍与基本概念</h3> 
<ol><li>Log4J相比于系统自带log的优点</li></ol> 
<ul><li>支持多源输出：支持输出log到控制台、文件、套接口服务器等；</li><li>线程安全：可以安全的在多线程应用中使用；</li><li>输出格式可控：可以根据需求定制输出格式：xml格式、数据库表格式、（时间，日期，线程，级别）自由组合格式；</li><li>支持日志级别：可以用不同级别来记录log，比如：debug、info、warn、error。同时可以灵活限定输出等级；</li><li>配置简单：使用统一的配置文件配置即可实现定制化的log输出，配置文件可以随时修改动态生效；</li><li>多个输出源同时输出：比如终点输出和文件输出可以同时记录log；</li><li>多平台可用：现在Log4J被移植到多个平台上支持多种编程语言；</li></ul> 
<ol start="2"><li>Log4j的组成部分<br> Log4j由三个组件组成，分别是：记录器（logger）、数据输出源（appender）、布局（layout）。开发者可以根具输出消息类型、等级、输出格式以及使用那种方式输出作出灵活的配置。这些都离不开这三个组件的支持。</li></ol> 
<ul><li>记录器（logger）：在代码中采集需要输出的消息。并且根具所配置的等级过滤输入消息</li><li>数据输出源（appender）：log消息数据输出的目标地点。比如：终端、文件、远程socket</li><li>布局（layout）：指定消息输出的格式。比如：xml格式、时间，日期，线程，级别）自由组合格式；</li></ul> 
<ol start="3"><li> <p>Log4j的输出等级<br> 日志信息的优先级从高到低有FATAL、ERROR、WARN、INFO、DEBUG、TRACE、ALL，分别用来指定这条日志信息的重要程度。Log4j建议只使用四个级别，优先级从高到低分别是ERROR、WARN、INFO、DEBUG。Log4j只输出，级别设置等级以及比设置等级高的消息。比如设置等级为Info。则属于“FATAL、ERROR、WARN、INFO”等级的消息可以输出到log。而“DEBUG、TRACE”级别的消息则不会被输出。</p> </li><li> <p>常用的输出源（Appender）<br> org.apache.log4j.ConsoleAppender（控制台）<br> org.apache.log4j.FileAppender（文件）<br> org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）<br> org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）<br> org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</p> </li><li> <p>常用的布局（Layout）<br> org.apache.log4j.HTMLLayout（以HTML表格形式布局）<br> org.apache.log4j.PatternLayout（根据patten符号格式化输出数据，类似printf的格式化方式）<br> org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）<br> org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等信息）</p> </li><li> <p>一些规则说明</p> </li></ol> 
<ul><li>一个Logger可以挂接多个Appender(日志信息同时转发到多个输出源)</li><li>一个Appender只能指定一个Layout进行格式化</li><li>RootLogger可以设置一个基本log输出等级限制</li><li>每个Appender可以单独设置自己的输出等级，但是受限于RootLogger的log输出等级限制</li></ul> 
<h3><a id="Log4Qt_48"></a>三、Log4Qt库的基本介绍</h3> 
<p>Log4Qt作为Log4j的一个分支扩展。使得在Qt应用程序中也可以使用到这个优秀的log库。在Apache-2.0协议下发布，这个开源库可以使用在开源软件和商业软件中。项目地址如下：</p> 
<pre><code class="prism language-https">https://github.com/MEONMedical/Log4Qt
</code></pre> 
<ol><li> <p>Log4qt在Log4j的基础增加的功能<br> //简单的包含时间“输出布局”<br> SimpleTimeLayout (“dd.MM.yyyy hh:mm [Thread] Level Logger Message”)<br> //多彩颜色终端输出（仅支持windows）<br> ColorConsoleAppender (render colorized message by escape sequence and put it to console)<br> //当记录输出消息的时候，发生一个qt平台的信号<br> SignalAppender (emit signal when log event happens)<br> //数据库“输出源”<br> DatabaseAppender (append log event into sql table)<br> //数据库“输出布局”<br> DatabaseLayout (put log event into sql table columns)<br> //Telnet“输出源”<br> Telnet appender (append log event to telnet clients)<br> //支持和qDebug()一样的消息拼接方式<br> LogStream (qDebug()-style log messages appending)<br> //主线程“输出源”，通过消息循环，以代理的方式记录数据log消息<br> MainThreadAppender (Proxy appender for sending log messages through event loop)<br> //xml的“输出布局”<br> XMLLayout to support apache chainsaw<br> //每天一个log文件的方式的输出源<br> DailyFileAppender which generates a logfile for each day (add current date formatted to the filename)<br> //二进制消息“记录器”<br> Binary logger<br> //windows下的调试终端“输出源”<br> Windows Debug Console Appender</p> </li><li> <p>使用Log4Qt库的基本需求<br> 要求Qt的最低版本为5.12<br> 如果要使用5.3及以下的qt版本，使用本开源库的1.4或1.4.x分支<br> 如果要使用5.7及以下的qt版本，使用本开源库的1.5或1.5.x分支<br> 使用本库需要启用C++11<br> 最低编译器版本要求：MSVC14, GCC 4.8 或 CLANG 3.3</p> </li></ol> 
<h3><a id="Log4qt_87"></a>四、将Log4qt组装成为一个单独模块</h3> 
<p>这里并没有直接把log4qt和自己的工程融合在一起。而是设计为一个独立的模块。这样做的意义如下：</p> 
<ul><li>如果以后有需要，可以随时替换为其他log模块</li><li>由于是独立模块，公司中的其他项目再次快速使用</li><li>独立模块，方便单独维护</li></ul> 
<p>把log4qt组装成为一个跨平台log库模块的步骤如下：</p> 
<ol><li>编译各个平台下的log4qt动态库<br> 下载好源码之后，使用你所需要的各个平台安装好的Qt Creater编译源码（release）。在编译输出目录可以看到生成的log4qt动态库文件。如下图所示：<br> <img src="https://images2.imgbox.com/88/57/D7jKgVMm_o.png" alt="在这里插入图片描述"></li><li>整理动态库和所需要的头文件（形成一个log4qt模块）<br> a.新建一个log4qt文件夹，作为log4qt模块的文件夹。<br> b.在log4qt目录下创建一个bin目录，把之前生成的动态库文件放入。<br> c.在log4qt目录下创建一个include目录，把下载好的Log4qt的源码中的"Log4Qt-master/src/"下的log4qt目录复制的刚刚创建好的include目录。<br> d.在log4qt目录下创建一个helper目录，此目录用于存放配置log4qt的代码。此部分代码将在第五小节和第六小节详细说明<br> log4qt模块整理完成如下图所示：<br> <img src="https://images2.imgbox.com/99/a5/8jcpmLCt_o.png" alt="在这里插入图片描述"></li><li>编写log4qt模块的引入文件“log4qtlib.pri”</li></ol> 
<pre><code class="prism language-bash">message<span class="token punctuation">(</span><span class="token string">"log4qt_lib_been_attached"</span><span class="token punctuation">)</span>
CONFIG +<span class="token operator">=</span> c++11
INCLUDEPATH +<span class="token operator">=</span> $<span class="token variable">$PWD</span>/helper
INCLUDEPATH +<span class="token operator">=</span> $<span class="token variable">$PWD</span>/include
DEPENDPATH +<span class="token operator">=</span> $<span class="token variable">$PWD</span>/include

SOURCES +<span class="token operator">=</span> \
        $<span class="token variable">$PWD</span>/helper/log4qt_init_helper_by_coding.cpp \
        $<span class="token variable">$PWD</span>/helper/log4qt_init_helper_by_config.cpp
HEADERS +<span class="token operator">=</span> \
        $<span class="token variable">$PWD</span>/helper/log4qt_init_helper_by_coding.h \
        $<span class="token variable">$PWD</span>/helper/log4qt_init_helper_by_config.h
macx <span class="token punctuation">{<!-- --></span>
    macx: LIBS +<span class="token operator">=</span> -L$<span class="token variable">$PWD</span>/bin/ -llog4qt.1
<span class="token punctuation">}</span>
win32 <span class="token punctuation">{<!-- --></span>
    win32: LIBS +<span class="token operator">=</span> -L$<span class="token variable">$PWD</span>/bin/ -llog4qt
<span class="token punctuation">}</span>
DISTFILES +<span class="token operator">=</span> \
    $<span class="token variable">$PWD</span>/log4qt.properties

</code></pre> 
<p>至此，log模块就组装完成了。以上过程提到的相关目录和代码，都在第八节源码中找到大完整示例</p> 
<h3><a id="Log4Qt_130"></a>五、使用配置文件的方式配置Log4Qt</h3> 
<p>Log4qt的功能强大，使用配置也非常简单。只需要编写简单的配置文件就可以完成个性化log输出的配置。在网上可以找到好多log4j的配置文件。这里要强调一点，虽然Log4qt是Log4j的分支，但是由于平台的不同，Log4qt不完全支持log4j的配置文件。<br> 下面介绍在本log4qt模块中怎样使用配置文件配置log4qt。<br> <strong>注：可以在第八节的源码中获取本节完整代码。为了良好的阅读体验，这里仅列出核心代码。</strong></p> 
<ol><li>在log4qt/helper目录下创建一个“log4qt_init_helper_by_config.h“文件，内容如下(简化代码)：</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">ifndef</span> LOG4QT_HELPER_BY_CONFIG_H</span>
<span class="token macro property">#<span class="token directive keyword">define</span> LOG4QT_HELPER_BY_CONFIG_H</span>
<span class="token comment">//启动log4qt库，使用配置文件的方式配置log4qt</span>
<span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">SetupLog4QtByConfigWithConfigFileAbsPath</span><span class="token punctuation">(</span>QString config_file_abs_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">ShutDownLog4QtByConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭log4qt库</span>
<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment">// LOG4QT_HELPER_H</span>

</code></pre> 
<ol start="2"><li>在log4qt/helper目录下创建一个”log4qt_init_helper_by_config.cpp“文件。内容如下(简化代码)：</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt_init_helper_by_config.h"</span></span>
<span class="token keyword">void</span> <span class="token function">SetupLog4QtByConfigWithConfigFileAbsPath</span><span class="token punctuation">(</span>QString config_file_abs_path<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>QFile<span class="token operator">::</span><span class="token function">exists</span><span class="token punctuation">(</span>config_file_abs_path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        Log4Qt<span class="token operator">::</span>PropertyConfigurator<span class="token operator">::</span><span class="token function">configure</span><span class="token punctuation">(</span>config_file_abs_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"Can't find log4qt-config-file path:"</span> <span class="token operator">&lt;&lt;</span> config_file_abs_path<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">ShutDownLog4QtByConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">auto</span> logger <span class="token operator">=</span> Log4Qt<span class="token operator">::</span>Logger<span class="token operator">::</span><span class="token function">rootLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">removeAllAppenders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">loggerRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ol start="3"><li>以上编写好了加载log4qt配置文件的代码，下面正式介绍配置文件的编写。配置文件如下，相关配置的说明直接以注视的形式写在配置文件中，配置文件“log4qt.properties”如下所示：</li></ol> 
<pre><code class="prism language-cpp">#设置储存log文件的根目录
logpath<span class="token operator">=</span><span class="token punctuation">.</span>

log4j<span class="token punctuation">.</span>reset<span class="token operator">=</span><span class="token boolean">true</span>
log4j<span class="token punctuation">.</span>Debug<span class="token operator">=</span>WARN
log4j<span class="token punctuation">.</span>threshold<span class="token operator">=</span><span class="token constant">NULL</span>
#设置是否监听QDebug输出的字符串
log4j<span class="token punctuation">.</span>handleQtMessages<span class="token operator">=</span><span class="token boolean">true</span>
#在运行中，是否监视此文件配置的变化
log4j<span class="token punctuation">.</span>watchThisFile<span class="token operator">=</span><span class="token boolean">false</span>

#设置根Logger的输出log等级为All
#设置Log输出的几种输出源（appender）：console<span class="token punctuation">,</span> daily<span class="token punctuation">,</span> rolling
log4j<span class="token punctuation">.</span>rootLogger<span class="token operator">=</span>ALL<span class="token punctuation">,</span> console<span class="token punctuation">,</span> daily

#设置终端打印记录器
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>ConsoleAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>target<span class="token operator">=</span>STDOUT_TARGET
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>TTCCLayout
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dateFormat<span class="token operator">=</span>dd<span class="token punctuation">.</span>MM<span class="token punctuation">.</span>yyyy hh<span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span>zzz
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>contextPrinting<span class="token operator">=</span><span class="token boolean">true</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>threshold<span class="token operator">=</span>ALL

#设置一个每日储存一个log文件的记录器
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>DailyFileAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>file<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>logpath<span class="token punctuation">}</span><span class="token operator">/</span>propertyconfigurator<span class="token punctuation">.</span>log
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>appendFile<span class="token operator">=</span><span class="token boolean">true</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>datePattern<span class="token operator">=</span>_yyyy_MM_dd
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>keepDays<span class="token operator">=</span><span class="token number">90</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>layout<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">}</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dateFormat<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dateFormat<span class="token punctuation">}</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>daily<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>contextPrinting<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>contextPrinting<span class="token punctuation">}</span>

# 配置一个滚动文件记录器
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token operator">=</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span>RollingFileAppender
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>file<span class="token operator">=</span> $<span class="token punctuation">{<!-- --></span>logpath<span class="token punctuation">}</span><span class="token operator">/</span>propertyconfigurator_rolling<span class="token punctuation">.</span>log
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>appendFile<span class="token operator">=</span><span class="token boolean">true</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>maxFileSize<span class="token operator">=</span> <span class="token number">20</span>MB
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>maxBackupIndex<span class="token operator">=</span> <span class="token number">10</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>layout<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">}</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dateFormat<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>dateFormat<span class="token punctuation">}</span>
log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>rolling<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>contextPrinting<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>log4j<span class="token punctuation">.</span>appender<span class="token punctuation">.</span>console<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>contextPrinting<span class="token punctuation">}</span>

# 给“LoggerObjectPrio”这个类的Logger定义log输出等级为Error，
# 给“LoggerObjectPrio”这个类的Logger定义log输出源：daily<span class="token punctuation">,</span> console
log4j<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>LoggerObjectPrio<span class="token operator">=</span>ERROR<span class="token punctuation">,</span> rolling
#设置为<span class="token boolean">false</span>，表示“LoggerObjectPrio”这个类的logger不继承的rootLogger输出源（appender）
log4j<span class="token punctuation">.</span>additivity<span class="token punctuation">.</span>LoggerObjectPrio<span class="token operator">=</span><span class="token boolean">false</span>






</code></pre> 
<ol start="4"><li>至此，使用配置文件配置log4qt的方式就完成了，在主要数分别调用，启动函数和停止函数即可。需要说明的一点是，一般这个配置文件储存在软件主体所在的目录。log文件储存的位置由配置文件配置。</li></ol> 
<h3><a id="Log4Qt_223"></a>六、使用代码的方式配置Log4Qt</h3> 
<p>另一种为使用代码配置log4qt的方法。使用代码的配置方法的优点是，比配置文件更加灵活且可定制性强。比如，在配置log文件储存位置的时候。使用配置文件只能在软件运行前配置好。而使用代码配置的时候，可以在软件启动后，获取一个动态的目录作为log文件的储存位置。当然各有优点，根据你的实际需求，选择其中任意一种配置方法都可以。<br> 下面介绍在本log4qt模块中怎样使用代码的方式来配置log4qt。<br> <strong>注：可以在第八节的源码中获取本节完整代码。为了良好的阅读体验，这里仅列出核心代码。</strong></p> 
<ol><li>在log4qt/helper目录下创建一个“log4qt_init_helper_by_coding.h“文件，内容如下(简化代码)：</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">ifndef</span> LOG4QT_HELPER_BY_CODING_H</span>
<span class="token macro property">#<span class="token directive keyword">define</span> LOG4QT_HELPER_BY_CODING_H</span>

<span class="token comment">//layouts</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt/ttcclayout.h"</span></span>
<span class="token comment">//appenders</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt/consoleappender.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt/rollingfileappender.h"</span></span>

<span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">SetupLog4QtByCodingWithLogSavingDirAbsPath</span><span class="token punctuation">(</span>QString log_saving_dir_abs_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">void</span> <span class="token function">ShutDownLog4QtByCoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span> </span><span class="token comment">// LOG4QT_HELPER_H</span>

</code></pre> 
<ol><li>在log4qt/helper目录下创建一个“log4qt_init_helper_by_coding.cpp“文件，内容如下(简化代码)：</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt_init_helper_by_coding.h"</span></span>

<span class="token keyword">void</span> <span class="token function">SetupLog4QtByCodingWithLogSavingDirAbsPath</span><span class="token punctuation">(</span>QString log_saving_dir_abs_path<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QString absPath <span class="token operator">=</span> log_saving_dir_abs_path<span class="token punctuation">;</span>
    <span class="token keyword">auto</span> rootLogger <span class="token operator">=</span> Log4Qt<span class="token operator">::</span>Logger<span class="token operator">::</span><span class="token function">rootLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Create a layout</span>
    <span class="token keyword">auto</span> <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> Log4Qt<span class="token operator">::</span><span class="token function">TTCCLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">QStringLiteral</span><span class="token punctuation">(</span><span class="token string">"My Layout"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token string">"dd.MM.yyyy hh:mm:ss.zzz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">activateOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Create a console appender</span>
    Log4Qt<span class="token operator">::</span>ConsoleAppender <span class="token operator">*</span>consoleAppender <span class="token operator">=</span>
            <span class="token keyword">new</span> Log4Qt<span class="token operator">::</span><span class="token function">ConsoleAppender</span><span class="token punctuation">(</span>layout<span class="token punctuation">,</span> Log4Qt<span class="token operator">::</span>ConsoleAppender<span class="token operator">::</span>STDOUT_TARGET<span class="token punctuation">)</span><span class="token punctuation">;</span>
    consoleAppender<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">QStringLiteral</span><span class="token punctuation">(</span><span class="token string">"My console Appender"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    consoleAppender<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">activateOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootLogger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addAppender</span><span class="token punctuation">(</span>consoleAppender<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//Create a rolling file appender</span>
    Log4Qt<span class="token operator">::</span>RollingFileAppender <span class="token operator">*</span>rollingFileAppender <span class="token operator">=</span>
            <span class="token keyword">new</span> Log4Qt<span class="token operator">::</span><span class="token function">RollingFileAppender</span><span class="token punctuation">(</span>layout<span class="token punctuation">,</span> absPath <span class="token operator">+</span> <span class="token string">"/basic.log"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rollingFileAppender<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token function">QStringLiteral</span><span class="token punctuation">(</span><span class="token string">"My rolling file appender"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//default is 10 MB (10 * 1024 * 1024).</span>
    rollingFileAppender<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setMaximumFileSize</span><span class="token punctuation">(</span><span class="token number">20</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rollingFileAppender<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setThreshold</span><span class="token punctuation">(</span>Log4Qt<span class="token operator">::</span>Level<span class="token operator">::</span>Value<span class="token operator">::</span>INFO_INT<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置子输出等级过滤</span>
    rollingFileAppender<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">activateOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rootLogger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addAppender</span><span class="token punctuation">(</span>rollingFileAppender<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//设置根logger允许所以等级的消息被输出（子输出过滤是在根输出过滤的基础上）</span>
    rootLogger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setLevel</span><span class="token punctuation">(</span>Log4Qt<span class="token operator">::</span>Level<span class="token operator">::</span>ALL_INT<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Log4Qt<span class="token operator">::</span>LogManager<span class="token operator">::</span><span class="token function">setHandleQtMessages</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置监听qt自带的log输出</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">ShutDownLog4QtByCoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">auto</span> logger <span class="token operator">=</span> Log4Qt<span class="token operator">::</span>Logger<span class="token operator">::</span><span class="token function">rootLogger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">removeAllAppenders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">loggerRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>







</code></pre> 
<h3><a id="QtLog4Qt_296"></a>七、在Qt工程中引入Log4Qt库模块的方法</h3> 
<p>通过第四节、五节、六节，我们得到了一个跨平台的Log模块，这里介绍一下这个模块的使用方法。<br> 使用步骤如下：</p> 
<ol><li>新建一个Qt Creater工程并引入做好的“log4qt模块”<br> 使用Qt Creater新建一个工程QWidget工程，名称叫做“Log4qtDemo”。在工程文件(.pro)中加入如下配置，用于导入之前配置好的log4qt模块。</li></ol> 
<pre><code class="prism language-sh">include($$PWD/src/third_libs/log4qt/log4qtlib.pri)
</code></pre> 
<ol start="2"><li>在主函数中加入如下内容</li></ol> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ui/demodialog.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;QApplication&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;QStandardPaths&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;QDir&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt_init_helper_by_coding.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"log4qt/logger.h"</span> </span><span class="token comment">//每个使用log4qt的类都需要包含此头文件</span>

<span class="token comment">//在类的cpp文件中，使用此静态方法声明logger（此方法比较通用）</span>
<span class="token comment">//第二个参数写类名字，因此，输出的log条目中包含其对应的类名</span>
<span class="token function">LOG4QT_DECLARE_STATIC_LOGGER</span><span class="token punctuation">(</span>logger<span class="token punctuation">,</span> Main<span class="token punctuation">)</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QApplication <span class="token function">a</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//使用QStandardPaths获取标准个人程序数据储存目录，需要先设置以下名称</span>
    QCoreApplication<span class="token operator">::</span><span class="token function">setApplicationName</span><span class="token punctuation">(</span><span class="token string">"Log4qtDemo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QCoreApplication<span class="token operator">::</span><span class="token function">setApplicationVersion</span><span class="token punctuation">(</span><span class="token string">"0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QCoreApplication<span class="token operator">::</span><span class="token function">setOrganizationName</span><span class="token punctuation">(</span><span class="token string">"OrgName"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QCoreApplication<span class="token operator">::</span><span class="token function">setOrganizationDomain</span><span class="token punctuation">(</span><span class="token string">"name.org"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/*
    //使用config 配置Log4Qt
    //把源代码目录中的"log4qt.properties"文件复制到编译好的可执行文件所在的目录
    //QString configFileAbsPath = QCoreApplication::applicationFilePath() + QStringLiteral(".log4qt.properties");//配置文件包括应用程序名称
    QString configFileAbsPath  = QCoreApplication::applicationDirPath() +"/"+ QStringLiteral("log4qt.properties");//配置文件不包括应用程序名称
    SetupLog4QtByConfigWithConfigFileAbsPath(configFileAbsPath);
    */</span>

    <span class="token comment">//使用纯代码配置Log4Qt</span>
    QStringList path_list2 <span class="token operator">=</span> QStandardPaths<span class="token operator">::</span><span class="token function">standardLocations</span><span class="token punctuation">(</span>QStandardPaths<span class="token operator">::</span>DataLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QString std_base_path <span class="token operator">=</span>  path_list2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    QString my_log_path <span class="token operator">=</span> std_base_path <span class="token operator">+</span> <span class="token string">"/logs"</span><span class="token punctuation">;</span>
    <span class="token comment">// QString logSavingDirAbsPath  = QCoreApplication::applicationDirPath();</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"my_log_path = "</span> <span class="token operator">&lt;&lt;</span> my_log_path<span class="token punctuation">;</span>
    <span class="token function">SetupLog4QtByCodingWithLogSavingDirAbsPath</span><span class="token punctuation">(</span>my_log_path<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//可以使用以下三种方式编写Log输出条目</span>
    <span class="token comment">//1.log4qt基本的logger输出</span>
    <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"example ####11#####  logger()-&gt;debug()"</span><span class="token punctuation">;</span>
    <span class="token function">logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"example ####11#####  logger()-&gt;error()"</span><span class="token punctuation">;</span>

    <span class="token comment">//2.log4qt基本的宏定义输出</span>
    <span class="token function">l4qError</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"example ####22#####  l4qError() "</span><span class="token punctuation">;</span>
    <span class="token function">l4qError</span><span class="token punctuation">(</span><span class="token function">QStringLiteral</span><span class="token punctuation">(</span><span class="token string">"example ####22#####  l4qError()  %1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//3.使用qt平台的Log库输出，（Log4Qt会监听qt的log的输出，并统一输出到Log文件中）</span>
    <span class="token function">qDebug</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"example ####33#####  qDebug()\n\n\n"</span><span class="token punctuation">;</span>

    DemoDialog w<span class="token punctuation">;</span>
    w<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ret <span class="token operator">=</span>  a<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ShutDownLog4QtByConfig();//exec()执行完成后，才关闭logger</span>
    <span class="token function">ShutDownLog4QtByCoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//exec()执行完成后，才关闭logger</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>




</code></pre> 
<h3><a id="_372"></a>八、获取示例中的源代码</h3> 
<p>源码目录包含的内容如下：</p> 
<ul><li>Log4qtDemo完整代码</li><li>log4qt跨平台模块，在src/third_libs目录中</li><li>log4qt开源库下载下来源代码，用于编译出各个系统平台下的log4qt动态库， 在src/third_libs_src_code目录中<br> <a href="https://github.com/robert1207/UpperComputerProgramingGuideSrc/tree/master/12_4_qt_log4qt_demo">点击此链接获取源代码</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/192280a91ad785dbd38bf08378aee0a3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mybatis-plus一对多分页数据条数不正确处理方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0de59fbd9a6ab612a218ff478e9d7876/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot Shiro免密登录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>