<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java设置session过期时间的几种方法（亲测有效） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java设置session过期时间的几种方法（亲测有效）" />
<meta property="og:description" content="1.基本概念 在Web应用中，Session对象代表了用户从打开浏览器到关闭浏览器的整个访问过程，用于跟踪用户的活动和存储用户特定的数据。Session对象存储了关于用户会话的信息和数据，每当用户访问一个Web应用时，服务器会为该用户创建一个唯一的Session对象。
2.设置Session的过期时间的四种方式 2.1 web容器设置 以tomcat为例，在web.xml配置文件新增或者修改配置项：
&lt;session-config&gt; &lt;session-timeout&gt;30&lt;/session-timeout&gt; &lt;/session-config&gt; 注：时间单位为分钟。tomcat默认session超时时间为30分钟，负数或0为不限制session失效时间。
2.2 普通 java web项目 找到java web项目的web.xml文件，新增或者修改如下配置项：
&lt;session-config&gt; &lt;session-timeout&gt;30&lt;/session-timeout&gt; &lt;/session-config&gt; 注：时间单位为分钟。默认session超时时间为30分钟，负数或0为不限制session失效时间。
2.3 Spring框架设置 3.1 application.properties方式
# 单位为秒，这里设置Session的过期时间为30分钟 server.servlet.session.timeout=1800 3.2 application.yml方式
server: servlet: session: timeout: 1800 # 单位为秒，这里设置Session的过期时间为30分钟 2.4 java代码设置 当然也可以使用java代码动态地设置Session的过期时间：
HttpSession session = request.getSession(); // 设置1800秒后过期，即30分钟 session.setMaxInactiveInterval(1800); 注意：四种方式优先等级：1 &lt; 2 =3 &lt; 4
3.注意事项 3.1 优先级 上述四种方式优先等级为：1 &lt; 2 =3 &lt; 4。简单来说，java代码设置的优先级最高，项目级别设置的其次，容器级别设置的最低。如果设置过期时间使用了多种方式，那么最高优先级的会生效。
3.2 过期时间刷新机制 session有刷新过期时间的机制，如果在过期时间内再次访问了web项目，那么session的过期时间会重置，从头开始计时。
4.session过期的意义 设置Session的过期时间有其必要性。首先，防止会话劫持，限制了非法用户访问或窃取其他用户Session的机会。其次，有效管理服务器资源，当用户长时间无活动时，自动结束Session可以释放服务器资源。最后，提升用户体验，频繁要求用户登录验证可能会影响用户体验。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/fd3c0e76c664fe4f3a5fb0c22b9022b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T23:16:09+08:00" />
<meta property="article:modified_time" content="2024-01-08T23:16:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java设置session过期时间的几种方法（亲测有效）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_0"></a>1.基本概念</h2> 
<p>  在Web应用中，Session对象代表了用户从打开浏览器到关闭浏览器的整个访问过程，用于跟踪用户的活动和存储用户特定的数据。Session对象存储了关于用户会话的信息和数据，每当用户访问一个Web应用时，服务器会为该用户创建一个唯一的Session对象。</p> 
<h2><a id="2Session_2"></a>2.设置Session的过期时间的四种方式</h2> 
<h3><a id="21_web_3"></a>2.1 web容器设置</h3> 
<p>以tomcat为例，在web.xml配置文件新增或者修改配置项：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span> 
</code></pre> 
<p><strong>注：时间单位为分钟。tomcat默认session超时时间为30分钟，负数或0为不限制session失效时间。</strong></p> 
<h3><a id="22__java_web_14"></a>2.2 普通 java web项目</h3> 
<p>找到java web项目的web.xml文件，新增或者修改如下配置项：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>session-timeout</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-timeout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>session-config</span><span class="token punctuation">&gt;</span></span>  
</code></pre> 
<p><strong>注：时间单位为分钟。默认session超时时间为30分钟，负数或0为不限制session失效时间。</strong></p> 
<h3><a id="23_Spring_24"></a>2.3 Spring框架设置</h3> 
<p><strong>3.1 application.properties方式</strong></p> 
<pre><code class="prism language-xml"># 单位为秒，这里设置Session的过期时间为30分钟   
server.servlet.session.timeout=1800 
</code></pre> 
<p><strong>3.2 application.yml方式</strong></p> 
<pre><code class="prism language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token key atrule">session</span><span class="token punctuation">:</span>
      <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">1800</span> <span class="token comment"># 单位为秒，这里设置Session的过期时间为30分钟    </span>
</code></pre> 
<h3><a id="24_java_41"></a>2.4 java代码设置</h3> 
<p>当然也可以使用java代码动态地设置Session的过期时间：</p> 
<pre><code class="prism language-java"><span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置1800秒后过期，即30分钟</span>
session<span class="token punctuation">.</span><span class="token function">setMaxInactiveInterval</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre> 
<p><mark><strong><font color="red">注意：四种方式优先等级：1 &lt; 2 =3 &lt; 4</font></strong></mark></p> 
<h2><a id="3_49"></a>3.注意事项</h2> 
<h3><a id="31__50"></a>3.1 优先级</h3> 
<p>  上述四种方式优先等级为：1 &lt; 2 =3 &lt; 4。简单来说，java代码设置的优先级最高，项目级别设置的其次，容器级别设置的最低。如果设置过期时间使用了多种方式，那么最高优先级的会生效。</p> 
<h3><a id="32__52"></a>3.2 过期时间刷新机制</h3> 
<p>  session有刷新过期时间的机制，如果在过期时间内再次访问了web项目，那么session的过期时间会重置，从头开始计时。</p> 
<h2><a id="4session_55"></a>4.session过期的意义</h2> 
<p>  设置Session的过期时间有其必要性。首先，防止会话劫持，限制了非法用户访问或窃取其他用户Session的机会。其次，有效管理服务器资源，当用户长时间无活动时，自动结束Session可以释放服务器资源。最后，提升用户体验，频繁要求用户登录验证可能会影响用户体验。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9ff923487857e95d00b2b3b6f24b886f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">记录小白Linux服务器被挖矿的处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/372167058cffde534c01b526576d9f85/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">软件工程概论---内聚性和耦合性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>