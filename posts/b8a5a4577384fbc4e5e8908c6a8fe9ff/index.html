<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue3水印（Watermark） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue3水印（Watermark）" />
<meta property="og:description" content="APIs 参数说明类型默认值必传width水印的宽度，默认值为 content 自身的宽度numberundefinedfalseheight水印的高度，默认值为 content 自身的高度numberundefinedfalselayout水印的布局方式：平行布局 parallel; 交替布局 alternate‘parallel’ | ‘alternate’‘alternate’falserotate水印绘制时，旋转的角度，单位 °number-22falsezIndex追加的水印元素的 z-indexnumber9falseimage图片源，建议使用 2 倍或 3 倍图，优先级高于文字stringundefinedfalsecontent水印文字内容string | string[]‘’falsefullscreen是否展示全屏booleanfalsefalsecolor字体颜色string‘rgba(0,0,0,.15)’falsefontSize字体大小，单位pxnumber16falsefontWeight字体粗细‘normal’ | ‘light’ | ‘weight’ | number‘normal’falsefontFamily字体类型string‘sans-serif’falsefontStyle字体样式‘none’ | ‘normal’ | ‘italic’ | ‘oblique’‘normal’falsegap水印之间的间距[number, number][100, 100]falseoffset水印距离容器左上角的偏移量，默认为 gap/2[number, number][50, 50]false 效果如下图：在线预览 创建水印组件Watermark.vue &lt;script setup lang=&#34;ts&#34;&gt; import { unref, shallowRef, computed, watch, onMounted, onBeforeUnmount } from &#39;vue&#39; import type { CSSProperties } from &#39;vue&#39; interface Props { width?: number // 水印的宽度，默认值为 content 自身的宽度 height?: number // 水印的高度，默认值为 content 自身的高度 layout?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/b8a5a4577384fbc4e5e8908c6a8fe9ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-23T15:32:03+08:00" />
<meta property="article:modified_time" content="2024-01-23T15:32:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue3水印（Watermark）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="APIs_0"></a>APIs</h3> 
<table><thead><tr><th>参数</th><th>说明</th><th>类型</th><th>默认值</th><th>必传</th></tr></thead><tbody><tr><td>width</td><td>水印的宽度，默认值为 <code>content</code> 自身的宽度</td><td>number</td><td>undefined</td><td>false</td></tr><tr><td>height</td><td>水印的高度，默认值为 <code>content</code> 自身的高度</td><td>number</td><td>undefined</td><td>false</td></tr><tr><td>layout</td><td>水印的布局方式：平行布局 <code>parallel</code>; 交替布局 <code>alternate</code></td><td>‘parallel’ | ‘alternate’</td><td>‘alternate’</td><td>false</td></tr><tr><td>rotate</td><td>水印绘制时，旋转的角度，单位 <code>°</code></td><td>number</td><td>-22</td><td>false</td></tr><tr><td>zIndex</td><td>追加的水印元素的 <code>z-index</code></td><td>number</td><td>9</td><td>false</td></tr><tr><td>image</td><td>图片源，建议使用 <code>2</code> 倍或 <code>3</code> 倍图，优先级高于文字</td><td>string</td><td>undefined</td><td>false</td></tr><tr><td>content</td><td>水印文字内容</td><td>string | string[]</td><td>‘’</td><td>false</td></tr><tr><td>fullscreen</td><td>是否展示全屏</td><td>boolean</td><td>false</td><td>false</td></tr><tr><td>color</td><td>字体颜色</td><td>string</td><td>‘rgba(0,0,0,.15)’</td><td>false</td></tr><tr><td>fontSize</td><td>字体大小，单位<code>px</code></td><td>number</td><td>16</td><td>false</td></tr><tr><td>fontWeight</td><td>字体粗细</td><td>‘normal’ | ‘light’ | ‘weight’ | number</td><td>‘normal’</td><td>false</td></tr><tr><td>fontFamily</td><td>字体类型</td><td>string</td><td>‘sans-serif’</td><td>false</td></tr><tr><td>fontStyle</td><td>字体样式</td><td>‘none’ | ‘normal’ | ‘italic’ | ‘oblique’</td><td>‘normal’</td><td>false</td></tr><tr><td>gap</td><td>水印之间的间距</td><td>[number, number]</td><td>[100, 100]</td><td>false</td></tr><tr><td>offset</td><td>水印距离容器左上角的偏移量，默认为 <code>gap/2</code></td><td>[number, number]</td><td>[50, 50]</td><td>false</td></tr></tbody></table> 
<h3><a id="httpsthemusecatchergithubiovueamazinguiguidecomponentswatermarkhtml_19"></a>效果如下图：<a href="https://themusecatcher.github.io/vue-amazing-ui/guide/components/watermark.html" rel="nofollow">在线预览</a></h3> 
<p><img src="https://images2.imgbox.com/6a/e6/dvmVCo7T_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e1/6f/wtsRYv3q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e8/21/8Jqe6gtl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/25/86/UAbFvX0b_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e6/c2/d5JGsvix_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Watermarkvue_26"></a>创建水印组件Watermark.vue</h3> 
<pre><code class="prism language-ts"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> unref<span class="token punctuation">,</span> shallowRef<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> onBeforeUnmount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> CSSProperties <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">interface</span> <span class="token class-name">Props</span> <span class="token punctuation">{<!-- --></span>
  width<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 水印的宽度，默认值为 content 自身的宽度</span>
  height<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 水印的高度，默认值为 content 自身的高度</span>
  layout<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'parallel'</span><span class="token operator">|</span><span class="token string">'alternate'</span> <span class="token comment">// 布局方式：平行布局，交替布局</span>
  rotate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 水印绘制时，旋转的角度，单位 °</span>
  zIndex<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 追加的水印元素的 z-index</span>
  image<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 图片源，建议使用 2 倍或 3 倍图，优先级高于文字</span>
  content<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 水印文字内容</span>
  fullscreen<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token comment">// 是否展示全屏</span>
  color<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 字体颜色</span>
  fontSize<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token comment">// 字体大小</span>
  fontWeight<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'normal'</span><span class="token operator">|</span><span class="token string">'light'</span><span class="token operator">|</span><span class="token string">'weight'</span><span class="token operator">|</span><span class="token builtin">number</span> <span class="token comment">// 	字体粗细</span>
  fontFamily<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token comment">// 字体类型</span>
  fontStyle<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token operator">|</span><span class="token string">'normal'</span><span class="token operator">|</span><span class="token string">'italic'</span><span class="token operator">|</span><span class="token string">'oblique'</span> <span class="token comment">// 字体样式</span>
  gap<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token comment">// 水印之间的间距</span>
  offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span> <span class="token comment">// 水印距离容器左上角的偏移量，默认为 gap/2</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token generic-function"><span class="token function">defineProps</span><span class="token generic class-name"><span class="token operator">&lt;</span>Props<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  width<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  height<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  layout<span class="token operator">:</span> <span class="token string">'alternate'</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">22</span><span class="token punctuation">,</span>
  zIndex<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  image<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  fullscreen<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'rgba(0,0,0,.15)'</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
  fontWeight<span class="token operator">:</span> <span class="token string">'normal'</span><span class="token punctuation">,</span>
  fontFamily<span class="token operator">:</span> <span class="token string">'sans-serif'</span><span class="token punctuation">,</span>
  fontStyle<span class="token operator">:</span> <span class="token string">'normal'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">gap</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">offset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> FontGap <span class="token operator">=</span> <span class="token number">3</span>
<span class="token comment">// 和 ref() 不同，浅层 ref 的内部值将会原样存储和暴露，并且不会被深层递归地转为响应式。只有对 .value 的访问是响应式的。</span>
<span class="token keyword">const</span> containerRef <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ref() 的浅层作用形式</span>
<span class="token keyword">const</span> watermarkRef <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> htmlRef <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span> <span class="token comment">// &lt;html&gt;&lt;/html&gt;元素</span>
<span class="token keyword">const</span> stopObservation <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gapX <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>gap<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gapY <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>gap<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gapXCenter <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> gapX<span class="token punctuation">.</span>value <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> gapYCenter <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> gapY<span class="token punctuation">.</span>value <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> offsetLeft <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>offset<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">??</span> gapXCenter<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token keyword">const</span> offsetTop <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>offset<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">??</span> gapYCenter<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token keyword">const</span> BaseSize <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// Base size of the canvas, 1 for parallel layout and 2 for alternate layout</span>
  <span class="token keyword">const</span> layoutMap <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    parallel<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    alternate<span class="token operator">:</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> layoutMap<span class="token punctuation">[</span>props<span class="token punctuation">.</span>layout<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> markStyle <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> markStyle<span class="token operator">:</span> CSSProperties <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    zIndex<span class="token operator">:</span> props<span class="token punctuation">.</span>zIndex <span class="token operator">??</span> <span class="token number">9</span><span class="token punctuation">,</span>
    position<span class="token operator">:</span> <span class="token string">'absolute'</span><span class="token punctuation">,</span>
    left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    top<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    width<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
    height<span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
    pointerEvents<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
    backgroundRepeat<span class="token operator">:</span> <span class="token string">'repeat'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">/** Calculate the style of the offset */</span>
  <span class="token keyword">let</span> positionLeft <span class="token operator">=</span> offsetLeft<span class="token punctuation">.</span>value <span class="token operator">-</span> gapXCenter<span class="token punctuation">.</span>value
  <span class="token keyword">let</span> positionTop <span class="token operator">=</span> offsetTop<span class="token punctuation">.</span>value <span class="token operator">-</span> gapYCenter<span class="token punctuation">.</span>value
  <span class="token keyword">if</span> <span class="token punctuation">(</span>positionLeft <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    markStyle<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>positionLeft<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
    markStyle<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">calc(100% - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>positionLeft<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span>
    positionLeft <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>positionTop <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    markStyle<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>positionTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
    markStyle<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">calc(100% - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>positionTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)</span><span class="token template-punctuation string">`</span></span>
    positionTop <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
  markStyle<span class="token punctuation">.</span>backgroundPosition <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>positionLeft<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>positionTop<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
  <span class="token keyword">return</span> markStyle
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">destroyWatermark</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    watermarkRef<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">appendWatermark</span> <span class="token punctuation">(</span>base64Url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> markWidth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>containerRef<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    stopObservation<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
    watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
      <span class="token string">'style'</span><span class="token punctuation">,</span>
      <span class="token function">getStyleStr</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token operator">...</span>markStyle<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
        backgroundImage<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>base64Url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        backgroundSize<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token punctuation">(</span>gapX<span class="token punctuation">.</span>value <span class="token operator">+</span> markWidth<span class="token punctuation">)</span> <span class="token operator">*</span> BaseSize<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>fullscreen<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      htmlRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'position: relative'</span><span class="token punctuation">)</span>
      htmlRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      containerRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">append</span><span class="token punctuation">(</span>watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Delayed execution</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      stopObservation<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// converting camel-cased strings to be lowercase and link it with Separator</span>
<span class="token keyword">function</span> <span class="token function">toLowercaseSeparator</span> <span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> key<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([A-Z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'-$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getStyleStr</span> <span class="token punctuation">(</span>style<span class="token operator">:</span> CSSProperties<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>style<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token function">toLowercaseSeparator</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>style<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
  Get the width and height of the watermark. The default values are as follows
  Image: [120, 64]; Content: It's calculated by content
*/</span>
<span class="token keyword">function</span> <span class="token function">getMarkSize</span> <span class="token punctuation">(</span>ctx<span class="token operator">:</span> CanvasRenderingContext2D<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> defaultWidth <span class="token operator">=</span> <span class="token number">120</span>
  <span class="token keyword">let</span> defaultHeight <span class="token operator">=</span> <span class="token number">64</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> props<span class="token punctuation">.</span>content
  <span class="token keyword">const</span> image <span class="token operator">=</span> props<span class="token punctuation">.</span>image
  <span class="token keyword">const</span> width <span class="token operator">=</span> props<span class="token punctuation">.</span>width
  <span class="token keyword">const</span> height <span class="token operator">=</span> props<span class="token punctuation">.</span>height
  <span class="token keyword">const</span> fontSize <span class="token operator">=</span> props<span class="token punctuation">.</span>fontSize
  <span class="token keyword">const</span> fontFamily <span class="token operator">=</span> props<span class="token punctuation">.</span>fontFamily
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>image <span class="token operator">&amp;&amp;</span> ctx<span class="token punctuation">.</span>measureText<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token function">Number</span><span class="token punctuation">(</span>fontSize<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>fontFamily<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">?</span> content <span class="token operator">:</span> <span class="token punctuation">[</span>content<span class="token punctuation">]</span>
    <span class="token keyword">const</span> widths <span class="token operator">=</span> contents<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span><span class="token function">measureText</span><span class="token punctuation">(</span>item<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">)</span>
    defaultWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>widths<span class="token punctuation">)</span><span class="token punctuation">)</span>
    defaultHeight <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>fontSize<span class="token punctuation">)</span> <span class="token operator">*</span> contents<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token punctuation">(</span>contents<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> FontGap
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>width <span class="token operator">??</span> defaultWidth<span class="token punctuation">,</span> height <span class="token operator">??</span> defaultHeight<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token keyword">const</span>
<span class="token punctuation">}</span>
<span class="token comment">// Returns the ratio of the device's physical pixel resolution to the css pixel resolution</span>
<span class="token keyword">function</span> <span class="token function">getPixelRatio</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fillTexts</span> <span class="token punctuation">(</span>
  ctx<span class="token operator">:</span> CanvasRenderingContext2D<span class="token punctuation">,</span>
  drawX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  drawY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  drawWidth<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  drawHeight<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> ratio <span class="token operator">=</span> <span class="token function">getPixelRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> props<span class="token punctuation">.</span>content
  <span class="token keyword">const</span> fontSize <span class="token operator">=</span> props<span class="token punctuation">.</span>fontSize
  <span class="token keyword">const</span> fontWeight <span class="token operator">=</span> props<span class="token punctuation">.</span>fontWeight
  <span class="token keyword">const</span> fontFamily <span class="token operator">=</span> props<span class="token punctuation">.</span>fontFamily
  <span class="token keyword">const</span> fontStyle <span class="token operator">=</span> props<span class="token punctuation">.</span>fontStyle
  <span class="token keyword">const</span> color <span class="token operator">=</span> props<span class="token punctuation">.</span>color
  <span class="token keyword">const</span> mergedFontSize <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>fontSize<span class="token punctuation">)</span> <span class="token operator">*</span> ratio
  ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>fontStyle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> normal </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>fontWeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>mergedFontSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>drawHeight<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>fontFamily<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color
  ctx<span class="token punctuation">.</span>textAlign <span class="token operator">=</span> <span class="token string">'center'</span>
  ctx<span class="token punctuation">.</span>textBaseline <span class="token operator">=</span> <span class="token string">'top'</span>
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>drawWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> contents <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">?</span> content <span class="token operator">:</span> <span class="token punctuation">[</span>content<span class="token punctuation">]</span>
  contents<span class="token operator">?.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>item <span class="token operator">??</span> <span class="token string">''</span><span class="token punctuation">,</span> drawX<span class="token punctuation">,</span> drawY <span class="token operator">+</span> index <span class="token operator">*</span> <span class="token punctuation">(</span>mergedFontSize <span class="token operator">+</span> FontGap <span class="token operator">*</span> ratio<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">renderWatermark</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> image <span class="token operator">=</span> props<span class="token punctuation">.</span>image
  <span class="token keyword">const</span> rotate <span class="token operator">=</span> props<span class="token punctuation">.</span>rotate <span class="token operator">??</span> <span class="token operator">-</span><span class="token number">22</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      watermarkRef<span class="token punctuation">.</span>value <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> ratio <span class="token operator">=</span> <span class="token function">getPixelRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>markWidth<span class="token punctuation">,</span> markHeight<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getMarkSize</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span>
    <span class="token keyword">const</span> canvasWidth <span class="token operator">=</span> <span class="token punctuation">(</span>gapX<span class="token punctuation">.</span>value <span class="token operator">+</span> markWidth<span class="token punctuation">)</span> <span class="token operator">*</span> ratio
    <span class="token keyword">const</span> canvasHeight <span class="token operator">=</span> <span class="token punctuation">(</span>gapY<span class="token punctuation">.</span>value <span class="token operator">+</span> markHeight<span class="token punctuation">)</span> <span class="token operator">*</span> ratio
    canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>canvasWidth <span class="token operator">*</span> BaseSize<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    canvas<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>canvasHeight <span class="token operator">*</span> BaseSize<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> drawX <span class="token operator">=</span> <span class="token punctuation">(</span>gapX<span class="token punctuation">.</span>value <span class="token operator">*</span> ratio<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token keyword">const</span> drawY <span class="token operator">=</span> <span class="token punctuation">(</span>gapY<span class="token punctuation">.</span>value <span class="token operator">*</span> ratio<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token keyword">const</span> drawWidth <span class="token operator">=</span> markWidth <span class="token operator">*</span> ratio
    <span class="token keyword">const</span> drawHeight <span class="token operator">=</span> markHeight <span class="token operator">*</span> ratio
    <span class="token keyword">const</span> rotateX <span class="token operator">=</span> <span class="token punctuation">(</span>drawWidth <span class="token operator">+</span> gapX<span class="token punctuation">.</span>value <span class="token operator">*</span> ratio<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token keyword">const</span> rotateY <span class="token operator">=</span> <span class="token punctuation">(</span>drawHeight <span class="token operator">+</span> gapY<span class="token punctuation">.</span>value <span class="token operator">*</span> ratio<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token comment">/** Alternate drawing parameters */</span>
    <span class="token keyword">const</span> alternateDrawX <span class="token operator">=</span> drawX <span class="token operator">+</span> canvasWidth
    <span class="token keyword">const</span> alternateDrawY <span class="token operator">=</span> drawY <span class="token operator">+</span> canvasHeight
    <span class="token keyword">const</span> alternateRotateX <span class="token operator">=</span> rotateX <span class="token operator">+</span> canvasWidth
    <span class="token keyword">const</span> alternateRotateY <span class="token operator">=</span> rotateY <span class="token operator">+</span> canvasHeight
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">rotateWatermark</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> rotateX<span class="token punctuation">,</span> rotateY<span class="token punctuation">,</span> rotate<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>image<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> drawX<span class="token punctuation">,</span> drawY<span class="token punctuation">,</span> drawWidth<span class="token punctuation">,</span> drawHeight<span class="token punctuation">)</span>
        <span class="token comment">/** Draw interleaved pictures after rotation */</span>
        ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token function">rotateWatermark</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> alternateRotateX<span class="token punctuation">,</span> alternateRotateY<span class="token punctuation">,</span> rotate<span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> alternateDrawX<span class="token punctuation">,</span> alternateDrawY<span class="token punctuation">,</span> drawWidth<span class="token punctuation">,</span> drawHeight<span class="token punctuation">)</span>
        <span class="token function">appendWatermark</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> markWidth<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      img<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">'anonymous'</span>
      img<span class="token punctuation">.</span>referrerPolicy <span class="token operator">=</span> <span class="token string">'no-referrer'</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> image
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">fillTexts</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> drawX<span class="token punctuation">,</span> drawY<span class="token punctuation">,</span> drawWidth<span class="token punctuation">,</span> drawHeight<span class="token punctuation">)</span>
      <span class="token comment">/** Fill the interleaved text after rotation */</span>
      ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">rotateWatermark</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> alternateRotateX<span class="token punctuation">,</span> alternateRotateY<span class="token punctuation">,</span> rotate<span class="token punctuation">)</span>
      <span class="token function">fillTexts</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> alternateDrawX<span class="token punctuation">,</span> alternateDrawY<span class="token punctuation">,</span> drawWidth<span class="token punctuation">,</span> drawHeight<span class="token punctuation">)</span>
      <span class="token function">appendWatermark</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> markWidth<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// Rotate with the watermark as the center point</span>
<span class="token keyword">function</span> <span class="token function">rotateWatermark</span><span class="token punctuation">(</span>
  ctx<span class="token operator">:</span> CanvasRenderingContext2D<span class="token punctuation">,</span>
  rotateX<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  rotateY<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token builtin">number</span>
<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>rotateX<span class="token punctuation">,</span> rotateY<span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Number</span><span class="token punctuation">(</span>rotate<span class="token punctuation">)</span><span class="token punctuation">)</span>
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>rotateX<span class="token punctuation">,</span> <span class="token operator">-</span>rotateY<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">renderWatermark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>props<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">renderWatermark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 强制转成深层侦听器</span>
    flush<span class="token operator">:</span> <span class="token string">'post'</span> <span class="token comment">// 在侦听器回调中访问被 Vue 更新之后的 DOM</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
<span class="token comment">// Whether to re-render the watermark</span>
<span class="token keyword">function</span> <span class="token function">reRendering</span> <span class="token punctuation">(</span>mutation<span class="token operator">:</span> MutationRecord<span class="token punctuation">,</span> watermarkElement<span class="token operator">?</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token comment">// Whether to delete the watermark node</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>removedNodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    flag <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>removedNodes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>node <span class="token operator">=&gt;</span> node <span class="token operator">===</span> watermarkElement<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// Whether the watermark dom property value has been modified</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'attributes'</span> <span class="token operator">&amp;&amp;</span> mutation<span class="token punctuation">.</span>target <span class="token operator">===</span> watermarkElement<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    flag <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> flag
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">useMutationObserver</span> <span class="token punctuation">(</span>target<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> callback<span class="token operator">:</span> MutationCallback<span class="token punctuation">,</span> options<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> observer<span class="token operator">:</span> MutationObserver <span class="token operator">|</span> <span class="token keyword">undefined</span>
  <span class="token keyword">const</span> <span class="token function-variable function">cleanup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>observer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      observer<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      observer <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> stopWatch <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">unref</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">,</span>
    el <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>window <span class="token operator">&amp;&amp;</span> el<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
        observer<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">cleanup</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">stopWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    stop
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">destroyWatermark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">onMutate</span> <span class="token punctuation">(</span>mutations<span class="token operator">:</span> MutationRecord<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>stopObservation<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  mutations<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>mutation <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">reRendering</span><span class="token punctuation">(</span>mutation<span class="token punctuation">,</span> watermarkRef<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">destroyWatermark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token function">renderWatermark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 防止用户使用控制台隐藏、修改水印</span>
<span class="token function">useMutationObserver</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>fullscreen <span class="token operator">?</span> htmlRef <span class="token operator">:</span> containerRef<span class="token punctuation">,</span> onMutate<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  subtree<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 监听以 target 为根节点的整个子树</span>
  childList<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 监听 target 节点中发生的节点的新增与删除</span>
  attributes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 观察所有监听的节点属性值的变化</span>
  attributeFilter<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token comment">// 声明哪些属性名会被监听的数组。如果不声明该属性，所有属性的变化都将触发通知。</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token string">"containerRef"</span> style<span class="token operator">=</span><span class="token string">"position: relative;"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_345"></a>在要使用的页面引入</h3> 
<pre><code class="prism language-ts"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> Watermark <span class="token keyword">from</span> <span class="token string">'./Watermark.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> model <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  content<span class="token operator">:</span> <span class="token string">'Vue Amazing UI'</span><span class="token punctuation">,</span>
  layout<span class="token operator">:</span> <span class="token string">'alternate'</span><span class="token punctuation">,</span>
  color<span class="token operator">:</span> <span class="token string">'rgba(0,0,0,.15)'</span><span class="token punctuation">,</span>
  fontSize<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
  fontWeight<span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
  zIndex<span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span>
  rotate<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">22</span><span class="token punctuation">,</span>
  gap<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  offset<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> layoutOptions <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    label<span class="token operator">:</span> <span class="token string">'alternate'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">'alternate'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    label<span class="token operator">:</span> <span class="token string">'parallel'</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token string">'parallel'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Watermark 水印<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mt30 mb10"</span><span class="token operator">&gt;</span>基本使用<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Watermark content<span class="token operator">=</span><span class="token string">"Vue Amazing UI"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height: 360px"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Watermark<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mt30 mb10"</span><span class="token operator">&gt;</span>平行布局水印<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Watermark layout<span class="token operator">=</span><span class="token string">"parallel"</span> content<span class="token operator">=</span><span class="token string">"Vue Amazing UI"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height: 360px"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Watermark<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mt30 mb10"</span><span class="token operator">&gt;</span>多行水印<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mb10"</span><span class="token operator">&gt;</span>通过 content 设置 字符串数组 指定多行文字水印内容。<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Watermark <span class="token operator">:</span>content<span class="token operator">=</span><span class="token string">"['Vue Amazing UI', 'Hello World']"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height: 400px"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Watermark<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mt30 mb10"</span><span class="token operator">&gt;</span>图片水印<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mb10"</span><span class="token operator">&gt;</span>通过 image 指定图片地址。为保证图片高清且不被拉伸，请设置 width 和 height<span class="token punctuation">,</span> 并上传至少两倍的宽高的 logo 图片地址。<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Watermark
      <span class="token operator">:</span>height<span class="token operator">=</span><span class="token string">"30"</span>
      <span class="token operator">:</span>width<span class="token operator">=</span><span class="token string">"130"</span>
      image<span class="token operator">=</span><span class="token string">"https://mdn.alipayobjects.com/huamei_7uahnr/afts/img/A*lkAoRbywo0oAAAAAAAAAAAAADrJ8AQ/original"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"height: 360px"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Watermark<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mt30 mb10"</span><span class="token operator">&gt;</span>全屏幕水印<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Watermark v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"show"</span> fullscreen content<span class="token operator">=</span><span class="token string">"Vue Amazing UI"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Watermark<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Switch v<span class="token operator">-</span>model<span class="token operator">:</span>checked<span class="token operator">=</span><span class="token string">"show"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h2 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mt30 mb10"</span><span class="token operator">&gt;</span>自定义配置<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3 <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"mb10"</span><span class="token operator">&gt;</span>通过自定义参数配置预览水印效果。<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Flex<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Watermark v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"model"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"u-paragraph"</span><span class="token operator">&gt;</span>
          The light<span class="token operator">-</span>speed iteration <span class="token keyword">of</span> the digital world makes products more complex<span class="token punctuation">.</span> However<span class="token punctuation">,</span> human
          consciousness and attention resources are limited<span class="token punctuation">.</span> Facing <span class="token keyword">this</span> design contradiction<span class="token punctuation">,</span> the
          pursuit <span class="token keyword">of</span> natural interaction will be the consistent direction <span class="token keyword">of</span> Ant Design<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"u-paragraph"</span><span class="token operator">&gt;</span>
          Natural user cognition<span class="token operator">:</span> According to cognitive psychology<span class="token punctuation">,</span> about <span class="token number">80</span><span class="token operator">%</span> <span class="token keyword">of</span> external
          information <span class="token keyword">is</span> obtained through visual channels<span class="token punctuation">.</span> The most important visual elements <span class="token keyword">in</span> the
          <span class="token keyword">interface</span> <span class="token class-name">design</span><span class="token punctuation">,</span> including layout<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> illustrations<span class="token punctuation">,</span> icons<span class="token punctuation">,</span> etc<span class="token punctuation">.</span><span class="token punctuation">,</span> should fully
          absorb the laws <span class="token keyword">of</span> nature<span class="token punctuation">,</span> thereby reducing the user<span class="token operator">&amp;</span>apos<span class="token punctuation">;</span>s cognitive cost and bringing
          authentic and smooth feelings<span class="token punctuation">.</span> In some scenarios<span class="token punctuation">,</span> opportunely adding other sensory
          channels such <span class="token keyword">as</span> hearing<span class="token punctuation">,</span> touch can create a richer and more natural product experience<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"u-paragraph"</span><span class="token operator">&gt;</span>
          Natural user behavior<span class="token operator">:</span> In the interaction <span class="token keyword">with</span> the system<span class="token punctuation">,</span> the designer should fully
          understand the relationship between users<span class="token punctuation">,</span> system roles<span class="token punctuation">,</span> and task objectives<span class="token punctuation">,</span> and also
          contextually organize system functions and services<span class="token punctuation">.</span> At the same time<span class="token punctuation">,</span> a series <span class="token keyword">of</span> methods
          such <span class="token keyword">as</span> behavior analysis<span class="token punctuation">,</span> artificial intelligence and sensors could be applied to assist
          users to make effective decisions and reduce extra operations <span class="token keyword">of</span> users<span class="token punctuation">,</span> to save
          users<span class="token operator">&amp;</span>apos<span class="token punctuation">;</span> mental and physical resources and make human<span class="token operator">-</span>computer interaction more
          natural<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img
          style<span class="token operator">=</span><span class="token string">" position: relative; z-index: 1; width: 100%; max-width: 800px;"</span>
          src<span class="token operator">=</span><span class="token string">"https://cdn.jsdelivr.net/gh/themusecatcher/resources@0.0.5/6.jpg"</span>
          alt<span class="token operator">=</span><span class="token string">"示例图片"</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Watermark<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Flex
        style<span class="token operator">=</span>"
          width<span class="token operator">:</span> <span class="token number">25</span><span class="token operator">%</span><span class="token punctuation">;</span>
          flex<span class="token operator">-</span>shrink<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
          border<span class="token operator">-</span>left<span class="token operator">:</span> 1px solid #eee<span class="token punctuation">;</span>
          padding<span class="token operator">-</span>left<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
          margin<span class="token operator">-</span>left<span class="token operator">:</span> 20px<span class="token punctuation">;</span>
        "
        vertical
        gap<span class="token operator">=</span><span class="token string">"middle"</span>
      <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Content<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.content"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Layout<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Radio <span class="token operator">:</span>options<span class="token operator">=</span><span class="token string">"layoutOptions"</span> v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.layout"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Color<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.color"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>FontSize<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Slider v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.fontSize"</span> <span class="token operator">:</span>step<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>FontWeight<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>InputNumber v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.fontWeight"</span> <span class="token operator">:</span>step<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">"1000"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>zIndex<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Slider v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.zIndex"</span> <span class="token operator">:</span>step<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">"100"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Rotate<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Slider v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.rotate"</span> <span class="token operator">:</span>step<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"-180"</span> <span class="token operator">:</span>max<span class="token operator">=</span><span class="token string">"180"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Gap<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Space style<span class="token operator">=</span><span class="token string">"display: flex"</span> align<span class="token operator">=</span><span class="token string">"baseline"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>InputNumber v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.gap[0]"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"0"</span> placeholder<span class="token operator">=</span><span class="token string">"gapX"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>InputNumber v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.gap[1]"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"0"</span> placeholder<span class="token operator">=</span><span class="token string">"gapY"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Offset<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Space style<span class="token operator">=</span><span class="token string">"display: flex"</span> align<span class="token operator">=</span><span class="token string">"baseline"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>InputNumber v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.offset[0]"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"0"</span> placeholder<span class="token operator">=</span><span class="token string">"offsetLeft"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>InputNumber v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"model.offset[1]"</span> <span class="token operator">:</span>min<span class="token operator">=</span><span class="token string">"0"</span> placeholder<span class="token operator">=</span><span class="token string">"offsetTop"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Space<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>u<span class="token operator">-</span>paragraph <span class="token punctuation">{<!-- --></span>
  margin<span class="token operator">-</span>bottom<span class="token operator">:</span> 1em<span class="token punctuation">;</span>
  color<span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.88</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  word<span class="token operator">-</span><span class="token keyword">break</span><span class="token operator">:</span> <span class="token keyword">break</span><span class="token operator">-</span>word<span class="token punctuation">;</span>
  line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">1.5714285714285714</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7cb86b3a39958249a7882c4c45ff62d1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VS2019的安装和使用（也附2022链接）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/285ac9eac272e62b044e9abe5dd3e307/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装miniconda、tensorflow、libcudnn</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>