<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>配置域名访问及Nginx（命令/宝塔） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="配置域名访问及Nginx（命令/宝塔）" />
<meta property="og:description" content="使用宝塔方式开发 1 添加解析 登录云服务器，在云服务器的控制台找到DNS解析，腾讯云可以在上面的云产品中搜DNS，如下
点进去后如下，可以看到这里是空的，因为没有添加任何解析，咱们点击添加解析，然后添加自己的域名
添加后会有一条添加域名信息，点击域名，这里要添加三条记录，以下三条：
注：如果只是要配置自己的网站能够通过域名访问，那就只需要配置下满截图中的第三条二级域名就可以了，但是一般来说，一个服务器不只是通过二级域名访问，还会有直接访问和
@：表示直接解析域名www：解析域名通过www访问xxxx（二级域名）：解析通过二级域名访问，我这里配置的是onestar二级域名 这里添加后如下，记录值为自己服务器的公网IP
添加完成后就可以使用域名进行访问了，But，这样直接访问的话，访问的是服务器默认访问的80端口，而我们项目用的端口是8083，所以这里要将端口进行转发，将8083端口转发到域名，这里就要用到反向代理的技术了。
前提：必须先将项目部署上去和运行，要是不知道怎么部署可以观看：服务器购买与项目部署
接下来就进入正题了，不要走开！
进到到Nginx文件目录中
点击上面的，再点击conf文件夹进入下面页面。打开
include：这是头文件包含，可以看到这里配置了/www/server/nginx/conf/product/*.conf，意思是包含/www/server/nginx/conf/product目录下的所有.conf配置文件，咱们可以在/www/server/nginx/conf/product文件夹下创建后缀为.conf 的文件来添加配置，等会就要用到sever：要修改的就是这个部分了，也就是服务配置，但是一般我们不直接在这里修改，因为一个服务器一般会有很多个服务要跑，如果直接在这里修改的话就不方便拓展，可以看到我这里将server注释了，也就是不用这个server，而是在include另外添加配置文件 注：咱们可以理解为nginx.conf是一个总配置文件，include所包含的是子配置文件，如果要添加一个服务，就可以再/www/server/nginx/conf/product目录下去添加一个子配置文件，这里也是用的这种方式。
解释：（就相当于Nginx配置反向代理是通过sever，如果我们在主文件中修改比较麻烦，也不方便管理，所以就引入子配置文件，只需要包含在主文件中即可！这里的子配置文件自己创建）
我这里是创建在这个位置。
去blog.conf中配置需要映射项目信息。
这里我们了解一下几点就可以了：
listen：监听80端口server_name：转发到哪个地址，也就是前面配置的二级域名地址proxy_pass：代理到哪个地址，也就是要访问的服务器端口地址access_log：表示记录日志信息，会在根目录下创建onestar.newstar.net.cn.access.log日志文件，打印项目的日志信息 重启Nginx：
重启后服务就生效，可以使用域名进行访问了：yq.bingninglyq.cn/
大功告成，✿✿ヽ(°▽°)ノ✿
命令方式配置 这种方式摘抄自ONSTAR
一般来说，一个服务器不止跑一个服务（看自己需求，当然也可以只跑一个），每个服务都是使用一个二级域名来进行访问，所以这里配置二级域名进行访问
1、反向代理 反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。这里使用NGINX反向代理，将80端口转发到8080端口，需要对NGINX进行配置，所以要先下载NGINX
2.1 下载安装NGINX
# 下载NGINX： yum install nginx # 启动nginx： systemctl start nginx # 加入开机启动： systemctl enable nginx # 查看nginx的状态： systemctl status nginx 2.2 配置NGINX
下载后需要对NGINX进行配置，这里的配置文件是nginx.conf，可以使用命令 find / -name “nginx.conf” 进行查找，默认是在 /etc/nginx/nginx.conf，咱们来进行配置：
# 打开nginx.conf配置文件 vim /etc/nginx/nginx.conf 可以看到如下配置，这里只讲解两个地方，也就是框出的部分
include：这是头文件包含，可以看到这里配置了 /etc/nginx/conf.d/*.conf，意思是包含/etc/nginx/conf.d/目录下的所有.conf配置文件，咱们可以在/etc/nginx/conf.d/ 文件夹下创建后缀为." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/55b2aa8e5c2afdf9ee02f376ec5db337/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-08T23:17:45+08:00" />
<meta property="article:modified_time" content="2021-09-08T23:17:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">配置域名访问及Nginx（命令/宝塔）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>使用宝塔方式开发</h2> 
<h3><a id="1__1"></a>1 添加解析</h3> 
<p>登录云服务器，在云服务器的控制台找到DNS解析，腾讯云可以在上面的云产品中搜DNS，如下<br> <img src="https://images2.imgbox.com/91/63/nMPHGzG6_o.png" alt="在这里插入图片描述"></p> 
<p>点进去后如下，可以看到这里是空的，因为没有添加任何解析，咱们点击添加解析，然后添加自己的域名<br> <img src="https://images2.imgbox.com/47/a7/qpN1q1kT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/77/e3/W2lfmmM0_o.png" alt="在这里插入图片描述"><br> 添加后会有一条添加域名信息，点击域名，这里要添加三条记录，以下三条：</p> 
<p>注：如果只是要配置自己的网站能够通过域名访问，那就只需要配置下满截图中的第三条二级域名就可以了，但是一般来说，一个服务器不只是通过二级域名访问，还会有直接访问和</p> 
<ul><li>@：表示直接解析域名</li><li>www：解析域名通过www访问</li><li>xxxx（二级域名）：解析通过二级域名访问，我这里配置的是onestar二级域名</li></ul> 
<p>这里添加后如下，记录值为自己服务器的公网IP<br> <img src="https://images2.imgbox.com/10/4d/15ME9Xg0_o.png" alt="在这里插入图片描述"><br> 添加完成后就可以使用域名进行访问了，But，这样直接访问的话，访问的是服务器默认访问的80端口，而我们项目用的端口是8083，所以这里要将端口进行转发，将8083端口转发到域名，这里就要用到反向代理的技术了。</p> 
<p><strong>前提：必须先将项目部署上去和运行，要是不知道怎么部署可以观看：</strong><a href="https://editor.csdn.net/md/?articleId=120093199" rel="nofollow">服务器购买与项目部署</a></p> 
<p>接下来就进入正题了，不要走开！<br> 进到到Nginx文件目录中<br> <img src="https://images2.imgbox.com/92/fa/6aVLwzOa_o.png" alt="在这里插入图片描述"><br> 点击上面的，再点击conf文件夹进入下面页面。<strong>打开</strong><br> <img src="https://images2.imgbox.com/1c/55/riCV0xxa_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a3/b3/49b7KlSW_o.png" alt="在这里插入图片描述"></p> 
<ul><li>include：这是头文件包含，可以看到这里配置了/www/server/nginx/conf/product/*.conf，意思是包含/www/server/nginx/conf/product目录下的所有.conf配置文件，咱们可以在/www/server/nginx/conf/product文件夹下创建后缀为.conf 的文件来添加配置，等会就要用到</li><li>sever：要修改的就是这个部分了，也就是服务配置，但是一般我们不直接在这里修改，因为一个服务器一般会有很多个服务要跑，如果直接在这里修改的话就不方便拓展，可以看到我这里将server注释了，也就是不用这个server，而是在include另外添加配置文件</li></ul> 
<p><strong>注</strong>：咱们可以理解为nginx.conf是一个总配置文件，include所包含的是子配置文件，如果要添加一个服务，就可以再/www/server/nginx/conf/product目录下去添加一个子配置文件，这里也是用的这种方式。</p> 
<p><strong>解释：（就相当于Nginx配置反向代理是通过sever，如果我们在主文件中修改比较麻烦，也不方便管理，所以就引入子配置文件，只需要包含在主文件中即可！这里的子配置文件自己创建）</strong></p> 
<p><mark>我这里是创建在这个位置。</mark><br> <img src="https://images2.imgbox.com/c1/1e/P1hKAgvj_o.png" alt="在这里插入图片描述"><br> <strong>去blog.conf中配置需要映射项目信息。</strong></p> 
<p><img src="https://images2.imgbox.com/64/30/DyEpJkEy_o.png" alt="在这里插入图片描述"><br> 这里我们了解一下几点就可以了：</p> 
<ul><li>listen：监听80端口</li><li>server_name：转发到哪个地址，也就是前面配置的二级域名地址</li><li>proxy_pass：代理到哪个地址，也就是要访问的服务器端口地址</li><li>access_log：表示记录日志信息，会在根目录下创建</li><li>onestar.newstar.net.cn.access.log日志文件，打印项目的日志信息</li></ul> 
<p><strong>重启Nginx：</strong><br> <img src="https://images2.imgbox.com/08/c2/ArksUCgV_o.png" alt="在这里插入图片描述"><br> <strong>重启后服务就生效</strong>，可以使用域名进行访问了：<a href="http://yq.bingninglyq.cn/" rel="nofollow">yq.bingninglyq.cn/</a></p> 
<p><mark>大功告成，✿✿ヽ(°▽°)ノ✿</mark></p> 
<h2><a id="_58"></a>命令方式配置</h2> 
<p>这种方式摘抄自<a href="https://onestar.blog.csdn.net/article/details/107324173" rel="nofollow">ONSTAR</a><br> 一般来说，一个服务器不止跑一个服务（看自己需求，当然也可以只跑一个），每个服务都是使用一个二级域名来进行访问，所以这里配置二级域名进行访问</p> 
<h3><a id="1_61"></a>1、反向代理</h3> 
<p>反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。这里使用NGINX反向代理，将80端口转发到8080端口，需要对NGINX进行配置，所以要先下载NGINX</p> 
<p>2.1 下载安装NGINX</p> 
<pre><code class="prism language-java"># 下载NGINX：
yum install nginx
 
# 启动nginx：
systemctl start nginx
 
# 加入开机启动：
systemctl enable nginx
 
# 查看nginx的状态：
systemctl status nginx
</code></pre> 
<p>2.2 配置NGINX</p> 
<p>下载后需要对NGINX进行配置，这里的配置文件是nginx.conf，可以使用命令 find / -name “nginx.conf” 进行查找，默认是在 /etc/nginx/nginx.conf，咱们来进行配置：</p> 
<pre><code class="prism language-xml"># 打开nginx.conf配置文件
vim /etc/nginx/nginx.conf
</code></pre> 
<p>可以看到如下配置，这里只讲解两个地方，也就是框出的部分<br> <img src="https://images2.imgbox.com/97/70/JoFJWlQl_o.png" alt="在这里插入图片描述"></p> 
<ul><li>include：这是头文件包含，可以看到这里配置了 /etc/nginx/conf.d/*.conf，意思是包含/etc/nginx/conf.d/目录下的所有.conf配置文件，咱们可以在/etc/nginx/conf.d/ 文件夹下创建后缀为.conf 的文件来添加配置，等会就要用到</li><li>sever：要修改的就是这个部分了，也就是服务配置，但是一般我们不直接在这里修改，因为一个服务器一般会有很多个服务要跑，如果直接在这里修改的话就不方便拓展，可以看到我这里将server注释了，也就是不用这个server，而是在include另外添加配置文件<br> 注：咱们可以理解为nginx.conf是一个总配置文件，include所包含的是子配置文件，如果要添加一个服务，就可以再/etc/nginx/conf.d/目录下去添加一个子配置文件，这里也是用的这种方式</li></ul> 
<p>在/etc/nginx/conf.d/目录下创建*.conf文件，我这里命名为onestar.conf</p> 
<pre><code class="prism language-java"># 创建打开onestar<span class="token punctuation">.</span>conf
vim <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span>onestar<span class="token punctuation">.</span>conf
</code></pre> 
<p>添加如下配置：</p> 
<pre><code class="prism language-java">server <span class="token punctuation">{<!-- --></span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  onestar<span class="token punctuation">.</span>newstar<span class="token punctuation">.</span>net<span class="token punctuation">.</span>cn<span class="token punctuation">;</span>
    location <span class="token operator">/</span> <span class="token punctuation">{<!-- --></span>
        proxy_pass   http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">81.68</span><span class="token number">.734</span><span class="token number">.422</span><span class="token operator">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
        index  index<span class="token punctuation">.</span>html index<span class="token punctuation">.</span>htm<span class="token punctuation">;</span>
        proxy_set_header <span class="token class-name">Host</span> $host<span class="token punctuation">;</span>
        proxy_set_header <span class="token class-name">X</span><span class="token operator">-</span><span class="token class-name">Real</span><span class="token operator">-</span><span class="token class-name">Ip</span> $remote_addr<span class="token punctuation">;</span>
        proxy_set_header <span class="token class-name">X</span><span class="token operator">-</span><span class="token class-name">Forwarded</span><span class="token operator">-</span><span class="token class-name">For</span> $remote_addr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    access_log <span class="token operator">/</span>logs<span class="token operator">/</span>onestar<span class="token punctuation">.</span>newstar<span class="token punctuation">.</span>net<span class="token punctuation">.</span>cn<span class="token punctuation">.</span>access<span class="token punctuation">.</span>log<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这里我们了解一下几点就可以了：</p> 
<ul><li>listen：监听80端口</li><li>server_name：转发到哪个地址，也就是前面配置的二级域名地址</li><li>proxy_pass：代理到哪个地址，也就是要访问的服务器端口地址</li><li>access_log：表示记录日志信息，会在根目录下创建</li><li>onestar.newstar.net.cn.access.log日志文件，打印项目的日志信息</li></ul> 
<p>2.3 重启NGINX</p> 
<pre><code class="prism language-java"># 重启：
nginx <span class="token operator">-</span>s reload
</code></pre> 
<p>重启后服务就生效，可以使用域名进行访问了</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9f61b55e08e33a85d4a7673fb470461/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Echarts 柱状图渐变色设置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7d0bbca357cefc922209f1709102ee74/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端基础知识总结---HTML篇</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>