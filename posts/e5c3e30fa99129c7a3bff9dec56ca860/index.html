<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>shiro用户加密默认方式_SpringBoot Shiro配置自定义密码加密器代码实例 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="shiro用户加密默认方式_SpringBoot Shiro配置自定义密码加密器代码实例" />
<meta property="og:description" content="shiro主要有三大功能模块：
1. Subject：主体，一般指用户。
2. SecurityManager：安全管理器，管理所有Subject，可以配合内部安全组件。(类似于SpringMVC中的DispatcherServlet)
3. Realms：用于进行权限信息的验证，一般需要自己实现。
细分功能
1. Authentication：身份认证/登录(账号密码验证)。
2. Authorization：授权，即角色或者权限验证。
3. Session Manager：会话管理，用户登录后的session相关管理。
4. Cryptography：加密，密码加密等。
5. Web Support：Web支持，集成Web环境。
6. Caching：缓存，用户信息、角色、权限等缓存到如redis等缓存中。
7. Concurrency：多线程并发验证，在一个线程中开启另一个线程，可以把权限自动传播过去。
8. Testing：测试支持；
9. Run As：允许一个用户假装为另一个用户(如果他们允许)的身份进行访问。
10. Remember Me：记住我，登录后，下次再来的话不用登录了。
自定义认证加密方式
/**
* 自定义认证加密方式
*/
public static class CustomCredentialsMatcher extends SimpleCredentialsMatcher {
@Override
public boolean doCredentialsMatch(AuthenticationToken authcToken, AuthenticationInfo info) {
UsernamePasswordToken token = (UsernamePasswordToken) authcToken;
//加密类型，密码，盐值，迭代次数
Object tokenCredentials = new SimpleHash(&#34;md5&#34;, password, username, 2).toHex();
//数据库存储密码
Object accountCredentials = getCredentials(info);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/e5c3e30fa99129c7a3bff9dec56ca860/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-22T10:56:08+08:00" />
<meta property="article:modified_time" content="2020-12-22T10:56:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">shiro用户加密默认方式_SpringBoot Shiro配置自定义密码加密器代码实例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p align="center"><img src="" alt=""></p> 
 <p>shiro主要有三大功能模块：</p> 
 <p>1. Subject：主体，一般指用户。</p> 
 <p>2. SecurityManager：安全管理器，管理所有Subject，可以配合内部安全组件。(类似于SpringMVC中的DispatcherServlet)</p> 
 <p>3. Realms：用于进行权限信息的验证，一般需要自己实现。</p> 
 <p>细分功能</p> 
 <p>1. Authentication：身份认证/登录(账号密码验证)。</p> 
 <p>2. Authorization：授权，即角色或者权限验证。</p> 
 <p>3. Session Manager：会话管理，用户登录后的session相关管理。</p> 
 <p>4. Cryptography：加密，密码加密等。</p> 
 <p>5. Web Support：Web支持，集成Web环境。</p> 
 <p>6. Caching：缓存，用户信息、角色、权限等缓存到如redis等缓存中。</p> 
 <p>7. Concurrency：多线程并发验证，在一个线程中开启另一个线程，可以把权限自动传播过去。</p> 
 <p>8. Testing：测试支持；</p> 
 <p>9. Run As：允许一个用户假装为另一个用户(如果他们允许)的身份进行访问。</p> 
 <p>10. Remember Me：记住我，登录后，下次再来的话不用登录了。</p> 
 <p>自定义认证加密方式</p> 
 <p>/**</p> 
 <p>* 自定义认证加密方式</p> 
 <p>*/</p> 
 <p>public static class CustomCredentialsMatcher extends SimpleCredentialsMatcher {<!-- --></p> 
 <p>@Override</p> 
 <p>public boolean doCredentialsMatch(AuthenticationToken authcToken, AuthenticationInfo info) {<!-- --></p> 
 <p>UsernamePasswordToken token = (UsernamePasswordToken) authcToken;</p> 
 <p>//加密类型，密码，盐值，迭代次数</p> 
 <p>Object tokenCredentials = new SimpleHash("md5", password, username, 2).toHex();</p> 
 <p>//数据库存储密码</p> 
 <p>Object accountCredentials = getCredentials(info);</p> 
 <p>//将密码加密与系统加密后的密码校验，内容一致就返回true,不一致就返回false</p> 
 <p>return equals(tokenCredentials, accountCredentials);</p> 
 <p>}</p> 
 <p>}</p> 
 <p>第一种方式：配置Bean</p> 
 <p>/**</p> 
 <p>* Shiro自带密码管理器</p> 
 <p>*</p> 
 <p>* @return HashedCredentialsMatcher</p> 
 <p>*/</p> 
 <p>@Bean</p> 
 <p>public HashedCredentialsMatcher hashedCredentialsMatcher() {<!-- --></p> 
 <p>//Shiro自带加密</p> 
 <p>HashedCredentialsMatcher credentialsMatcher = new HashedCredentialsMatcher();</p> 
 <p>//散列算法使用md5</p> 
 <p>credentialsMatcher.setHashAlgorithmName("md5");</p> 
 <p>//散列次数，2表示md5加密两次</p> 
 <p>credentialsMatcher.setHashIterations(2);</p> 
 <p>credentialsMatcher.setStoredCredentialsHexEncoded(true);</p> 
 <p>return credentialsMatcher;</p> 
 <p>}</p> 
 <p>/**</p> 
 <p>* 将自己的身份验证器验证方式加入容器</p> 
 <p>*</p> 
 <p>* @return CustomRealm</p> 
 <p>*/</p> 
 <p>@Bean</p> 
 <p>public CustomRealm shiroRealm() {<!-- --></p> 
 <p>CustomRealm shiroRealm = new CustomRealm();</p> 
 <p>//shiroRealm.setCacheManager(cacheManager());</p> 
 <p>//加入密码管理</p> 
 <p>//shiroRealm.setCredentialsMatcher(hashedCredentialsMatcher());//Shiro自带密码管理器</p> 
 <p>shiroRealm.setCredentialsMatcher(new CustomCredentialsMatcher());//自定义密码管理器</p> 
 <p>return shiroRealm;</p> 
 <p>}</p> 
 <p>第二种方式：实现AuthorizingRealm类setCredentialsMatcher方法</p> 
 <p>public class CustomRealm extends AuthorizingRealm {<!-- --></p> 
 <p>...</p> 
 <p>...</p> 
 <p>...</p> 
 <p>/**</p> 
 <p>* 设置自定义认证加密方式</p> 
 <p>*</p> 
 <p>* @param credentialsMatcher 默认加密方式</p> 
 <p>*/</p> 
 <p>@Override</p> 
 <p>public void setCredentialsMatcher(CredentialsMatcher credentialsMatcher) {<!-- --></p> 
 <p>//自定义认证加密方式</p> 
 <p>CustomCredentialsMatcher customCredentialsMatcher = new CustomCredentialsMatcher();</p> 
 <p>// 设置自定义认证加密方式</p> 
 <p>super.setCredentialsMatcher(customCredentialsMatcher);</p> 
 <p>}</p> 
 <p>}</p> 
 <p>以上就是本文的全部内容，希望对大家的学习有所帮助，也希望大家多多支持云海天教程。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/08fb5135e566383e0f2b65e0f069412e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">车子前进档为什么往后退_自动档上坡起步往后退怎么回事</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/38612f248c71f0444f27ff5b06a7d2b5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构与算法Java版：链表每K个节点一组进行翻转</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>