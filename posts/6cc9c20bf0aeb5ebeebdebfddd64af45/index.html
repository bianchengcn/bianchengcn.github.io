<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java中PriorityQueue的排序 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java中PriorityQueue的排序" />
<meta property="og:description" content="PrioriryQueue是Queue接口的一个队列实现类，但它的排序并不是典型的队列式先进先出（FIFO）的方式。
PriorityQueue的排序方式分为两种，一种是自然排序，这是按照加入元素的大小从小到大排序的。第二种是定制排序，是使用comparator类来重写compare(Object o1,Object o2)方法来实现定制排序的。但是这些都不是关键，关键在于PriorityQueue的排序不是普通的排序，而是堆排序，这有什么不同呢？来看下面一段代码：
import java.util.PriorityQueue; public class PriorityQueueTest3 { public static void main(String[] args) { PriorityQueue pq = new PriorityQueue(); pq.offer(6); pq.offer(-3); pq.offer(0); pq.offer(9); System.out.println(pq); } } 输出结果：[-3,6,0,9]
不是说是按从小到大来排序的吗？怎么没排序？
原因是堆排序只会保证第一个元素也就是根节点的元素是当前优先队列里最小（或者最大）的元素，而且每一次变化之后，比如offer()或者poll()之后，都会进行堆重排，所以如果想要按从小到大的顺序取出元素，那么需要用一个for循环，如下：
import java.util.PriorityQueue; public class PriorityQueueTest3 { public static void main(String[] args) { PriorityQueue pq = new PriorityQueue(); pq.offer(6); pq.offer(-3); pq.offer(0); pq.offer(9); int len = pq.size();//这里之所以取出.size()大小，因为每一次poll()之后size大小都会变化，所以不能作为for循环的判断条件 for(int i=0;i&lt;len;i&#43;&#43;){ System.out.print(pq.poll()&#43;&#34; &#34;); } System.out.println(); } } 输出 -3 0 6 9，按照从小到大的顺序输出的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/6cc9c20bf0aeb5ebeebdebfddd64af45/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-06-18T16:46:06+08:00" />
<meta property="article:modified_time" content="2017-06-18T16:46:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java中PriorityQueue的排序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px"> PrioriryQueue是Queue接口的一个队列实现类，但它的排序并不是典型的队列式先进先出（FIFO）的方式。</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px"> PriorityQueue的排序方式分为两种，一种是自然排序，这是按照加入元素的大小从小到大排序的。第二种是定制排序，是使用comparator类来重写compare(Object o1,Object o2)方法来实现定制排序的。但是这些都不是关键，关键在于PriorityQueue的排序不是普通的排序，而是堆排序，这有什么不同呢？来看下面一段代码：</p> 
<p><span style="font-family:Arial; font-size:14px"></span></p> 
<pre><code class="language-java">import java.util.PriorityQueue;  
public class PriorityQueueTest3   
{  
    public static void main(String[] args)   
    {  
        PriorityQueue pq = new PriorityQueue();  
        pq.offer(6);  
        pq.offer(-3);  
        pq.offer(0);  
        pq.offer(9);  
        System.out.println(pq);  
    }  
}  </code></pre> 
<p></p> 
<p><span style="font-family:Arial; font-size:14px">输出结果：[-3,6,0,9]</span></p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px"> </p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px"> 不是说是按从小到大来排序的吗？怎么没排序？</p> 
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px"> 原因是堆排序只会保证第一个元素也就是根节点的元素是当前优先队列里最小（或者最大）的元素，而且每一次变化之后，比如offer()或者poll()之后，都会进行堆重排，所以如果想要按从小到大的顺序取出元素，那么需要用一个for循环，如下：</p> 
<p><span style="font-family:Arial; font-size:14px"></span></p> 
<pre><code class="language-java">import java.util.PriorityQueue;  
public class PriorityQueueTest3   
{  
    public static void main(String[] args)   
    {  
        PriorityQueue pq = new PriorityQueue();  
        pq.offer(6);  
        pq.offer(-3);  
        pq.offer(0);  
        pq.offer(9);  
        int len = pq.size();//这里之所以取出.size()大小，因为每一次poll()之后size大小都会变化，所以不能作为for循环的判断条件  
        for(int i=0;i&lt;len;i++){  
            System.out.print(pq.poll()+" ");  
        }  
        System.out.println();  
    }  
}  </code></pre> 
<p></p> 
<p><span style="font-family:Arial; font-size:14px">输出 -3 0 6 9，按照从小到大的顺序输出的</span></p> 
<p><span style="font-family:Arial; font-size:14px">该篇转载自<a target="_blank" href="http://blog.csdn.net/cyp331203/article/details/25310733" rel="noopener noreferrer">http://blog.csdn.net/cyp331203/article/details/25310733</a></span></p> 
<p><span style="font-family:Arial; font-size:14px">另外：看API：<a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html" rel="nofollow noopener noreferrer">http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html</a></span></p> 
<p><span style="font-family:Arial; font-size:14px"></span></p> 
<h4 style="font-size:1.4em; padding:0px; margin:15px 0px; color:rgb(53,56,51)">Constructor Detail</h4> 
<span style="color:rgb(53,56,51); font-size:12.16px; background-color:rgb(249,249,249)"></span> 
<ul class="blockList" style="margin:10px 0px; padding:0px; color:rgb(53,56,51); font-size:12.16px"><li class="blockList" style="list-style:none; margin-bottom:25px; padding:0px 0px 5px 8px; border-top:none; border-right:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); border-left:1px solid rgb(158,173,192)"> <h5 style="font-size:1.3em; background-color:rgb(222,227,233); border-top:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); margin:0px 0px 6px -8px; padding:2px 5px"> PriorityQueue</h5> <pre style="font-size:1.3em">public PriorityQueue()</pre> 
  <div class="block" style="margin:3px 0px 0px">
    Creates a  
   <code style="font-size:1.2em">PriorityQueue</code> with the default initial capacity (11) that orders its elements according to their  
   <a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html" rel="nofollow noopener noreferrer" title="interface in java.lang" style="color:rgb(76,107,135)">natural ordering</a>. 
  </div> </li></ul> 
<span style="color:rgb(53,56,51); font-size:12.16px; background-color:rgb(249,249,249)"></span> 
<ul class="blockList" style="margin:10px 0px; padding:0px; color:rgb(53,56,51); font-size:12.16px"><li class="blockList" style="list-style:none; margin-bottom:25px; padding:0px 0px 5px 8px; border-top:none; border-right:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); border-left:1px solid rgb(158,173,192)"> <h5 style="font-size:1.3em; background-color:rgb(222,227,233); border-top:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); margin:0px 0px 6px -8px; padding:2px 5px"> PriorityQueue</h5> <pre style="font-size:1.3em">public PriorityQueue(int initialCapacity)</pre> 
  <div class="block" style="margin:3px 0px 0px">
    Creates a  
   <code style="font-size:1.2em">PriorityQueue</code> with the specified initial capacity that orders its elements according to their  
   <a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html" rel="nofollow noopener noreferrer" title="interface in java.lang" style="color:rgb(76,107,135)">natural ordering</a>. 
  </div> 
  <dl> 
    
    <span class="strong">Parameters:</span> 
    
   <dd style="margin:10px 0px 10px 20px"> 
    <code style="font-size:1.2em">initialCapacity</code> - the initial capacity for this priority queue 
   </dd> 
    
    <span class="strong">Throws:</span> 
    
   <dd style="margin:10px 0px 10px 20px"> 
    <code style="font-size:1.2em"><a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html" rel="nofollow noopener noreferrer" title="class in java.lang" style="color:rgb(76,107,135)">IllegalArgumentException</a></code> - if  
    <code style="font-size:1.2em">initialCapacity</code> is less than 1 
   </dd> 
  </dl> </li></ul> 
<span style="color:rgb(53,56,51); font-size:12.16px; background-color:rgb(249,249,249)"></span> 
<ul class="blockList" style="margin:10px 0px; padding:0px; color:rgb(53,56,51); font-size:12.16px"><li class="blockList" style="list-style:none; margin-bottom:25px; padding:0px 0px 5px 8px; border-top:none; border-right:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); border-left:1px solid rgb(158,173,192)"> <h5 style="font-size:1.3em; background-color:rgb(222,227,233); border-top:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); margin:0px 0px 6px -8px; padding:2px 5px"> PriorityQueue</h5> <pre style="font-size:1.3em">public PriorityQueue(int initialCapacity,
             <a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html" rel="nofollow noopener noreferrer" title="interface in java.util" style="color:rgb(76,107,135)">Comparator</a>&lt;? super <a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html" rel="nofollow noopener noreferrer" title="type parameter in PriorityQueue" style="color:rgb(76,107,135)">E</a>&gt; comparator)</pre> 
  <div class="block" style="margin:3px 0px 0px">
    Creates a  
   <code style="font-size:1.2em">PriorityQueue</code> with the specified initial capacity that orders its elements according to the specified comparator. 
  </div> 
  <dl> 
    
    <span class="strong">Parameters:</span> 
    
   <dd style="margin:10px 0px 10px 20px"> 
    <code style="font-size:1.2em">initialCapacity</code> - the initial capacity for this priority queue 
   </dd> 
   <dd style="margin:10px 0px 10px 20px"> 
    <code style="font-size:1.2em">comparator</code> - the comparator that will be used to order this priority queue. If  
    <code style="font-size:1.2em">null</code>, the  
    <a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html" rel="nofollow noopener noreferrer" title="interface in java.lang" style="color:rgb(76,107,135)">natural ordering</a> of the elements will be used. 
   </dd> 
    
    <span class="strong">Throws:</span> 
    
   <dd style="margin:10px 0px 10px 20px"> 
    <code style="font-size:1.2em"><a target="_blank" href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html" rel="nofollow noopener noreferrer" title="class in java.lang" style="color:rgb(76,107,135)">IllegalArgumentException</a></code> - if  
    <code style="font-size:1.2em">initialCapacity</code> is less than 1 
   </dd> 
  </dl> </li></ul> 
<span style="color:rgb(53,56,51); font-size:12.16px; background-color:rgb(249,249,249)"></span> 
<ul class="blockList" style="margin:10px 0px; padding:0px; color:rgb(53,56,51); font-size:12.16px"><li class="blockList" style="list-style:none; margin-bottom:25px; padding:0px 0px 5px 8px; border-top:none; border-right:1px solid rgb(158,173,192); border-bottom:1px solid rgb(158,173,192); border-left:1px solid rgb(158,173,192)"> </li></ul> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2aea499f62b4d430141d838645242e40/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用nc反弹shell真有意思哈哈</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a738673b983f1c65679fe1c2b8ea2aad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">URL路径中的空格处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>