<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>openlayers&#43;vue实现缓冲区 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="openlayers&#43;vue实现缓冲区" />
<meta property="og:description" content="文章目录 前言一、准备二、初始化地图1、创建一个地图容器2、引入必须的类库3、地图初始化4、给地图增加底图 三、创建缓冲区1、引入需要的工具类库2、绘制方法 四、完整代码总结 前言 缓冲区是地理空间目标的一种影响范围或服务范围,是对选中的一组或一类地图要素(点、线或面)按设定的距离条件,围绕其要素而形成一定缓冲区多边形实体,从而实现数据在二维空间得以扩展,后续也可以生成栅格进行叠加分析等。
简单来说，缓冲区就是影响范围，比如想看看自己小区附近10公里范围内有哪些加油站，这个以自己小区为中心，半径10公里的圆，就是一个缓冲区。
一、准备 本文已经预设建好了一个vue项目
接下来需要安装openlayers
npm install openlayers -- save 安装地图工具tur
npm install turf -- save 二、初始化地图 1、创建一个地图容器 &lt;template&gt; &lt;div style=&#34;width: 100vw; height: 100vh&#34;&gt; &lt;div id=&#34;map&#34; style=&#34;height: 100%; width: 100%&#34;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/template&gt; 2、引入必须的类库 &lt;script&gt; // 引入地图库 import Map from &#39;ol/Map&#39; // 引入视图 import View from &#39;ol/View&#39; // 地图控件，例如放大、缩小、比例尺等 import { defaults as defaultControls } from &#39;ol/control&#39; // 地图瓦片 import { Tile as TileLayer } from &#39;ol/layer&#39; // 地图瓦片资源 import { WMTS } from &#39;ol/source&#39; // 地图瓦片网格 import WMTSTileGrid from &#39;ol/tilegrid/WMTS&#39; // 地图投影相关工具 import * as olProj from &#39;ol/proj&#39; // 获取地图范围工具 import { getWidth, getTopLeft } from &#39;ol/extent&#39; &lt;/script&gt; 3、地图初始化 &lt;script&gt; // 引入地图库 import Map from &#39;ol/Map&#39; // 引入视图 import View from &#39;ol/View&#39; // 地图控件，例如放大、缩小、比例尺等 import { defaults as defaultControls } from &#39;ol/control&#39; // 地图瓦片 import { Tile as TileLayer } from &#39;ol/layer&#39; // 地图瓦片资源 import { WMTS } from &#39;ol/source&#39; // 地图瓦片网格 import WMTSTileGrid from &#39;ol/tilegrid/WMTS&#39; // 地图投影相关工具 import * as olProj from &#39;ol/proj&#39; // 获取地图范围工具 import { getWidth, getTopLeft } from &#39;ol/extent&#39; export default { data() { return { // 地图对象 map: null, // 地图中心 center: [117." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/8adfc722696bc6d148548e82af9c71ed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-26T18:16:43+08:00" />
<meta property="article:modified_time" content="2024-01-26T18:16:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">openlayers&#43;vue实现缓冲区</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_4" rel="nofollow">前言</a></li><li><a href="#_10" rel="nofollow">一、准备</a></li><li><a href="#_20" rel="nofollow">二、初始化地图</a></li><li><ul><li><ul><li><a href="#1_21" rel="nofollow">1、创建一个地图容器</a></li><li><a href="#2_29" rel="nofollow">2、引入必须的类库</a></li><li><a href="#3_51" rel="nofollow">3、地图初始化</a></li><li><a href="#4_107" rel="nofollow">4、给地图增加底图</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_230" rel="nofollow">三、创建缓冲区</a></li><li><ul><li><ul><li><a href="#1_231" rel="nofollow">1、引入需要的工具类库</a></li><li><a href="#2_243" rel="nofollow">2、绘制方法</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_330" rel="nofollow">四、完整代码</a></li><li><a href="#_532" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_4"></a>前言</h2> 
<p>缓冲区是地理空间目标的一种影响范围或服务范围,是对选中的一组或一类地图要素(点、线或面)按设定的距离条件,围绕其要素而形成一定缓冲区多边形实体,从而实现数据在二维空间得以扩展,后续也可以生成栅格进行叠加分析等。</p> 
<p>简单来说，缓冲区就是影响范围，比如想看看自己小区附近10公里范围内有哪些加油站，这个以自己小区为中心，半径10公里的圆，就是一个缓冲区。</p> 
<hr> 
<h2><a id="_10"></a>一、准备</h2> 
<p>本文已经预设建好了一个vue项目<br> 接下来需要安装openlayers</p> 
<pre><code class="prism language-c">npm install openlayers <span class="token operator">--</span> save
</code></pre> 
<p>安装地图工具tur</p> 
<pre><code class="prism language-c">npm install turf <span class="token operator">--</span> save
</code></pre> 
<h2><a id="_20"></a>二、初始化地图</h2> 
<h4><a id="1_21"></a>1、创建一个地图容器</h4> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"width: 100vw; height: 100vh"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"map"</span> style<span class="token operator">=</span><span class="token string">"height: 100%; width: 100%"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="2_29"></a>2、引入必须的类库</h4> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 引入地图库</span>
import Map from <span class="token string">'ol/Map'</span>
<span class="token comment">// 引入视图</span>
import View from <span class="token string">'ol/View'</span>
<span class="token comment">// 地图控件，例如放大、缩小、比例尺等</span>
import <span class="token punctuation">{<!-- --></span> defaults as defaultControls <span class="token punctuation">}</span> from <span class="token string">'ol/control'</span>
<span class="token comment">// 地图瓦片</span>
import <span class="token punctuation">{<!-- --></span> Tile as TileLayer <span class="token punctuation">}</span> from <span class="token string">'ol/layer'</span>
<span class="token comment">// 地图瓦片资源</span>
import <span class="token punctuation">{<!-- --></span> WMTS <span class="token punctuation">}</span> from <span class="token string">'ol/source'</span>
<span class="token comment">// 地图瓦片网格</span>
import WMTSTileGrid from <span class="token string">'ol/tilegrid/WMTS'</span>
<span class="token comment">// 地图投影相关工具</span>
import <span class="token operator">*</span> as olProj from <span class="token string">'ol/proj'</span>
<span class="token comment">// 获取地图范围工具</span>
import <span class="token punctuation">{<!-- --></span> getWidth<span class="token punctuation">,</span> getTopLeft <span class="token punctuation">}</span> from <span class="token string">'ol/extent'</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="3_51"></a>3、地图初始化</h4> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 引入地图库</span>
import Map from <span class="token string">'ol/Map'</span>
<span class="token comment">// 引入视图</span>
import View from <span class="token string">'ol/View'</span>
<span class="token comment">// 地图控件，例如放大、缩小、比例尺等</span>
import <span class="token punctuation">{<!-- --></span> defaults as defaultControls <span class="token punctuation">}</span> from <span class="token string">'ol/control'</span>
<span class="token comment">// 地图瓦片</span>
import <span class="token punctuation">{<!-- --></span> Tile as TileLayer <span class="token punctuation">}</span> from <span class="token string">'ol/layer'</span>
<span class="token comment">// 地图瓦片资源</span>
import <span class="token punctuation">{<!-- --></span> WMTS <span class="token punctuation">}</span> from <span class="token string">'ol/source'</span>
<span class="token comment">// 地图瓦片网格</span>
import WMTSTileGrid from <span class="token string">'ol/tilegrid/WMTS'</span>
<span class="token comment">// 地图投影相关工具</span>
import <span class="token operator">*</span> as olProj from <span class="token string">'ol/proj'</span>
<span class="token comment">// 获取地图范围工具</span>
import <span class="token punctuation">{<!-- --></span> getWidth<span class="token punctuation">,</span> getTopLeft <span class="token punctuation">}</span> from <span class="token string">'ol/extent'</span>
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 地图对象</span>
      map<span class="token operator">:</span> null<span class="token punctuation">,</span>
      <span class="token comment">// 地图中心</span>
      center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">117.19637146504114</span><span class="token punctuation">,</span> <span class="token number">39.084235071439096</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建地图实例</span>
    this<span class="token punctuation">.</span>map <span class="token operator">=</span> new <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      target<span class="token operator">:</span> <span class="token string">'map'</span><span class="token punctuation">,</span>
      <span class="token comment">// 地图控件</span>
      controls<span class="token operator">:</span> <span class="token function">defaultControls</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        attributionOptions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> collapsed<span class="token operator">:</span> false <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 是否可旋转角度</span>
        rotate<span class="token operator">:</span> false
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 视图</span>
      view<span class="token operator">:</span> new <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 视图中心默认定位到哪里</span>
        center<span class="token operator">:</span> this<span class="token punctuation">.</span>center<span class="token punctuation">,</span>
        <span class="token comment">// 地图投影</span>
        projection<span class="token operator">:</span> <span class="token string">'EPSG:4326'</span><span class="token punctuation">,</span>
        <span class="token comment">// 缩放级别</span>
        zoom<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
        minZoom<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        maxZoom<span class="token operator">:</span> <span class="token number">18</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<h4><a id="4_107"></a>4、给地图增加底图</h4> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 引入地图库</span>
import Map from <span class="token string">'ol/Map'</span>
<span class="token comment">// 引入视图</span>
import View from <span class="token string">'ol/View'</span>
<span class="token comment">// 地图控件，例如放大、缩小、比例尺等</span>
import <span class="token punctuation">{<!-- --></span> defaults as defaultControls <span class="token punctuation">}</span> from <span class="token string">'ol/control'</span>
<span class="token comment">// 地图瓦片</span>
import <span class="token punctuation">{<!-- --></span> Tile as TileLayer <span class="token punctuation">}</span> from <span class="token string">'ol/layer'</span>
<span class="token comment">// 地图瓦片资源</span>
import <span class="token punctuation">{<!-- --></span> WMTS <span class="token punctuation">}</span> from <span class="token string">'ol/source'</span>
<span class="token comment">// 地图瓦片网格</span>
import WMTSTileGrid from <span class="token string">'ol/tilegrid/WMTS'</span>
<span class="token comment">// 地图投影相关工具</span>
import <span class="token operator">*</span> as olProj from <span class="token string">'ol/proj'</span>
<span class="token comment">// 获取地图范围工具</span>
import <span class="token punctuation">{<!-- --></span> getWidth<span class="token punctuation">,</span> getTopLeft <span class="token punctuation">}</span> from <span class="token string">'ol/extent'</span>
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 地图对象</span>
      map<span class="token operator">:</span> null<span class="token punctuation">,</span>
      <span class="token comment">// 地图中心</span>
      center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">117.19637146504114</span><span class="token punctuation">,</span> <span class="token number">39.084235071439096</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 底图，本文实例用的是天地图免费图层，tk为天地图官网注册的key，大家自行注册</span>
      basicLayer<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 影像底图</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 具体可看https://openlayers.org/en/v6.15.1/apidoc/module-ol_source_WMTS-WMTS.html</span>
          url<span class="token operator">:</span> `http<span class="token operator">:</span><span class="token comment">//t3.tianditu.gov.cn/img_c/wmts?tk=key`, // 服务地址</span>
          layer<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token comment">// 图层名称</span>
          matrixSet<span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token comment">// 矩阵集</span>
          format<span class="token operator">:</span> <span class="token string">'tiles'</span><span class="token punctuation">,</span> <span class="token comment">// 格式化成瓦片</span>
          wrapX<span class="token operator">:</span> true <span class="token comment">// 在水平方向上无限循环显示瓦片</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 影像注记，地图中的地点名称由此图层渲染</span>
        <span class="token punctuation">{<!-- --></span>
          url<span class="token operator">:</span> `http<span class="token operator">:</span><span class="token comment">//t3.tianditu.gov.cn/cia_c/wmts?tk=key`,</span>
          layer<span class="token operator">:</span> <span class="token string">'cia'</span><span class="token punctuation">,</span>
          matrixSet<span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
          format<span class="token operator">:</span> <span class="token string">'tiles'</span><span class="token punctuation">,</span>
          wrapX<span class="token operator">:</span> true
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 增加图层到地图</span>
    <span class="token function">addLayerToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      this<span class="token punctuation">.</span>basicLayer<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span><span class="token function">initLayers</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 初始化图层对象</span>
    <span class="token function">initLayers</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> projection <span class="token operator">=</span> olProj<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'EPSG:4326'</span><span class="token punctuation">)</span>
      <span class="token comment">// 默认比例尺等相关配置</span>
      <span class="token keyword">const</span> projectionExtent <span class="token operator">=</span> projection<span class="token punctuation">.</span><span class="token function">getExtent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span>projectionExtent<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">256</span>
      <span class="token keyword">const</span> resolutions <span class="token operator">=</span> new <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> matrixIds <span class="token operator">=</span> new <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>let z <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> z <span class="token operator">&lt;</span> <span class="token number">19</span><span class="token punctuation">;</span> <span class="token operator">++</span>z<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        resolutions<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> size <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">)</span>
        matrixIds<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> z
      <span class="token punctuation">}</span>
      let gridConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        origin<span class="token operator">:</span> <span class="token function">getTopLeft</span><span class="token punctuation">(</span>projectionExtent<span class="token punctuation">)</span><span class="token punctuation">,</span>
        resolutions<span class="token punctuation">,</span>
        matrixIds
      <span class="token punctuation">}</span>
      <span class="token comment">// 网格</span>
      <span class="token keyword">const</span> tileGrid <span class="token operator">=</span> new <span class="token function">WMTSTileGrid</span><span class="token punctuation">(</span>gridConfig<span class="token punctuation">)</span>
      <span class="token comment">// 创建瓦片资源</span>
      let source <span class="token operator">=</span> new <span class="token function">WMTS</span><span class="token punctuation">(</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
          <span class="token punctuation">{<!-- --></span>
            crossOrigin<span class="token operator">:</span> <span class="token string">'anonymous'</span><span class="token punctuation">,</span>
            projection<span class="token punctuation">,</span>
            tileGrid
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          config
        <span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// 创建图层对象</span>
      <span class="token keyword">return</span> new <span class="token function">TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        source<span class="token punctuation">,</span>
        projection<span class="token punctuation">,</span>
        layerName<span class="token operator">:</span> config<span class="token punctuation">.</span>layer<span class="token punctuation">,</span>
        index
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建地图实例</span>
    this<span class="token punctuation">.</span>map <span class="token operator">=</span> new <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      target<span class="token operator">:</span> <span class="token string">'map'</span><span class="token punctuation">,</span>
      <span class="token comment">// 地图控件</span>
      controls<span class="token operator">:</span> <span class="token function">defaultControls</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        attributionOptions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> collapsed<span class="token operator">:</span> false <span class="token punctuation">}</span><span class="token punctuation">,</span>
        zoom<span class="token operator">:</span> false<span class="token punctuation">,</span>
        rotate<span class="token operator">:</span> false
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      view<span class="token operator">:</span> new <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        center<span class="token operator">:</span> this<span class="token punctuation">.</span>center<span class="token punctuation">,</span>
        projection<span class="token operator">:</span> <span class="token string">'EPSG:4326'</span><span class="token punctuation">,</span>
        zoom<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
        minZoom<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        maxZoom<span class="token operator">:</span> <span class="token number">18</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    this<span class="token punctuation">.</span><span class="token function">addLayerToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<p>到此地图就算初始化成功<br> 运行代码：<br> <img src="https://images2.imgbox.com/db/36/6QwKisoC_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_230"></a>三、创建缓冲区</h2> 
<h4><a id="1_231"></a>1、引入需要的工具类库</h4> 
<pre><code class="prism language-c"><span class="token comment">// 格式化GeoJSON</span>
import <span class="token punctuation">{<!-- --></span> GeoJSON <span class="token punctuation">}</span> from <span class="token string">'ol/format'</span>
<span class="token comment">// 矢量图层资源</span>
import <span class="token punctuation">{<!-- --></span> Vector as VectorSource <span class="token punctuation">}</span> from <span class="token string">'ol/source'</span>
<span class="token comment">// 矢量图层</span>
import <span class="token punctuation">{<!-- --></span> Vector as VectorLayer <span class="token punctuation">}</span> from <span class="token string">'ol/layer'</span>
<span class="token comment">// 地图计算分析工具，例如绘制缓冲区、计算相交面、获取多边形中心等等</span>
import <span class="token operator">*</span> as turf from <span class="token string">'@turf/turf'</span>
</code></pre> 
<h4><a id="2_243"></a>2、绘制方法</h4> 
<pre><code class="prism language-c"><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      let options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
      	<span class="token comment">// 缓冲区的粒度</span>
        steps<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        <span class="token comment">// 缓冲区单位</span>
        units<span class="token operator">:</span> <span class="token string">'meters'</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 这里第一个参数为缓冲区的中心，第二参数为缓冲区的半径，第三个参数为缓冲区的生成参数</span>
      let drawFeature <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>center<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
      <span class="token comment">//创建缓冲区</span>
      let buffered <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span>drawFeature<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        units<span class="token operator">:</span> <span class="token string">'kilometers'</span><span class="token punctuation">,</span>
        steps<span class="token operator">:</span> <span class="token number">5</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">//创建数据geojson对象和数据源对象</span>
      let format <span class="token operator">=</span> new <span class="token function">GeoJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      let source <span class="token operator">=</span> new <span class="token function">VectorSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">//读取geojson数据</span>
      let a <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">readFeature</span><span class="token punctuation">(</span>drawFeature<span class="token punctuation">)</span>
      <span class="token comment">// 将数据添加数据源的</span>
      source<span class="token punctuation">.</span><span class="token function">addFeature</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
      <span class="token comment">// 设置缓冲区样式</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>buffered<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        let b <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">readFeature</span><span class="token punctuation">(</span>buffered<span class="token punctuation">)</span>
        source<span class="token punctuation">.</span><span class="token function">addFeature</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
       <span class="token comment">// 将缓冲区移入视图，padding为边距 this.map.getView().fit(b.getGeometry().getExtent(), { padding: [10, 10, 10, 10] })</span>
      <span class="token punctuation">}</span>
      <span class="token comment">//添加图层</span>
      let bufferLayer <span class="token operator">=</span> new <span class="token function">VectorLayer</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        source<span class="token operator">:</span> source<span class="token punctuation">,</span>
        layerName<span class="token operator">:</span> <span class="token string">'bufferLayer'</span><span class="token punctuation">,</span>
        zIndex<span class="token operator">:</span> <span class="token number">3</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      this<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>bufferLayer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>还可以给缓冲区增加样式</p> 
<pre><code class="prism language-c">在头部需要引入
<span class="token comment">// 地图样式相关，例如绘制圆形、设置笔触、多边形颜色、字体颜色等等</span>
import <span class="token punctuation">{<!-- --></span> Circle as CircleStyle<span class="token punctuation">,</span> Fill<span class="token punctuation">,</span> Stroke<span class="token punctuation">,</span> Style <span class="token punctuation">}</span> from <span class="token string">'ol/style'</span>

<span class="token comment">// 在createBuffer方法中增加样式</span>
     let a <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">readFeature</span><span class="token punctuation">(</span>drawFeature<span class="token punctuation">)</span>
      <span class="token comment">// 样式设置</span>
      a<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>
        new <span class="token function">Style</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          stroke<span class="token operator">:</span> new <span class="token function">Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'rgba(255, 0, 0, 0.8)'</span><span class="token punctuation">,</span>
            width<span class="token operator">:</span> <span class="token number">3</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          fill<span class="token operator">:</span> new <span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'rgba(255, 0, 0, 0.5)'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          image<span class="token operator">:</span> new <span class="token function">CircleStyle</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 点的颜色</span>
            fill<span class="token operator">:</span> new <span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              color<span class="token operator">:</span> <span class="token string">'rgba(255, 0, 0, 0.8)'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 圆形半径</span>
            radius<span class="token operator">:</span> <span class="token number">5</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// 设置缓冲区样式</span>
      let b <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">readFeature</span><span class="token punctuation">(</span>buffered<span class="token punctuation">)</span>
      b<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>
        new <span class="token function">Style</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          stroke<span class="token operator">:</span> new <span class="token function">Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'#2491ff'</span><span class="token punctuation">,</span>
            lineDash<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            width<span class="token operator">:</span> <span class="token number">3</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          fill<span class="token operator">:</span> new <span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'rgba(176, 202, 241, 0.5)'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
</code></pre> 
<p>效果如下：<br> <img src="https://images2.imgbox.com/51/8d/iWDoZmh8_o.png" alt="![在这里插入图片描述](https://img-blog.csdnimg.cn/direct/c8d46a7a3327439cae40879050232bf4.png"></p> 
<h2><a id="_330"></a>四、完整代码</h2> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">"width: 100vw; height: 100vh"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"map"</span> style<span class="token operator">=</span><span class="token string">"height: 100%; width: 100%"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 引入地图库</span>
import Map from <span class="token string">'ol/Map'</span>
<span class="token comment">// 引入视图</span>
import View from <span class="token string">'ol/View'</span>
<span class="token comment">// 地图控件，例如放大、缩小、比例尺等</span>
import <span class="token punctuation">{<!-- --></span> defaults as defaultControls <span class="token punctuation">}</span> from <span class="token string">'ol/control'</span>
<span class="token comment">// 地图瓦片</span>
import <span class="token punctuation">{<!-- --></span> Tile as TileLayer <span class="token punctuation">}</span> from <span class="token string">'ol/layer'</span>
<span class="token comment">// 地图瓦片资源</span>
import <span class="token punctuation">{<!-- --></span> WMTS <span class="token punctuation">}</span> from <span class="token string">'ol/source'</span>
<span class="token comment">// 地图瓦片网格</span>
import WMTSTileGrid from <span class="token string">'ol/tilegrid/WMTS'</span>
<span class="token comment">// 地图投影相关工具</span>
import <span class="token operator">*</span> as olProj from <span class="token string">'ol/proj'</span>
<span class="token comment">// 获取地图范围工具</span>
import <span class="token punctuation">{<!-- --></span> getWidth<span class="token punctuation">,</span> getTopLeft <span class="token punctuation">}</span> from <span class="token string">'ol/extent'</span>
<span class="token comment">// 格式化GeoJSON</span>
import <span class="token punctuation">{<!-- --></span> GeoJSON <span class="token punctuation">}</span> from <span class="token string">'ol/format'</span>
<span class="token comment">// 矢量图层资源</span>
import <span class="token punctuation">{<!-- --></span> Vector as VectorSource <span class="token punctuation">}</span> from <span class="token string">'ol/source'</span>
<span class="token comment">// 矢量图层</span>
import <span class="token punctuation">{<!-- --></span> Vector as VectorLayer <span class="token punctuation">}</span> from <span class="token string">'ol/layer'</span>
<span class="token comment">// 地图样式相关，例如绘制圆形、设置笔触、多边形颜色、字体颜色等等</span>
import <span class="token punctuation">{<!-- --></span> Circle as CircleStyle<span class="token punctuation">,</span> Fill<span class="token punctuation">,</span> Stroke<span class="token punctuation">,</span> Style <span class="token punctuation">}</span> from <span class="token string">'ol/style'</span>
<span class="token comment">// 地图计算分析工具，例如绘制缓冲区、计算相交面、获取多边形中心等等</span>
import <span class="token operator">*</span> as turf from <span class="token string">'@turf/turf'</span>
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 地图对象</span>
      map<span class="token operator">:</span> null<span class="token punctuation">,</span>
      <span class="token comment">// 地图中心</span>
      center<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">117.19637146504114</span><span class="token punctuation">,</span> <span class="token number">39.084235071439096</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 底图，本文实例用的是天地图免费图层，tk为天地图官网注册的key，大家自行注册</span>
      basicLayer<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 影像底图</span>
        <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 具体可看https://openlayers.org/en/v6.15.1/apidoc/module-ol_source_WMTS-WMTS.html</span>
          url<span class="token operator">:</span> `http<span class="token operator">:</span><span class="token comment">//t3.tianditu.gov.cn/img_c/wmts?tk=key`, // 服务地址</span>
          layer<span class="token operator">:</span> <span class="token string">'img'</span><span class="token punctuation">,</span> <span class="token comment">// 图层名称</span>
          matrixSet<span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token comment">// 矩阵集</span>
          format<span class="token operator">:</span> <span class="token string">'tiles'</span><span class="token punctuation">,</span> <span class="token comment">// 格式化成瓦片</span>
          wrapX<span class="token operator">:</span> true <span class="token comment">// 在水平方向上无限循环显示瓦片</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 影像注记，地图中的地点名称由此图层渲染</span>
        <span class="token punctuation">{<!-- --></span>
          url<span class="token operator">:</span> `http<span class="token operator">:</span><span class="token comment">//t3.tianditu.gov.cn/cia_c/wmts?tk=key`,</span>
          layer<span class="token operator">:</span> <span class="token string">'cia'</span><span class="token punctuation">,</span>
          matrixSet<span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
          format<span class="token operator">:</span> <span class="token string">'tiles'</span><span class="token punctuation">,</span>
          wrapX<span class="token operator">:</span> true
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 增加图层到地图</span>
    <span class="token function">addLayerToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      this<span class="token punctuation">.</span>basicLayer<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        this<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span><span class="token function">initLayers</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 初始化图层对象</span>
    <span class="token function">initLayers</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> projection <span class="token operator">=</span> olProj<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'EPSG:4326'</span><span class="token punctuation">)</span>
      <span class="token comment">// 默认比例尺等相关配置</span>
      <span class="token keyword">const</span> projectionExtent <span class="token operator">=</span> projection<span class="token punctuation">.</span><span class="token function">getExtent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span>projectionExtent<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">256</span>
      <span class="token keyword">const</span> resolutions <span class="token operator">=</span> new <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> matrixIds <span class="token operator">=</span> new <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>let z <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> z <span class="token operator">&lt;</span> <span class="token number">19</span><span class="token punctuation">;</span> <span class="token operator">++</span>z<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        resolutions<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> size <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> z<span class="token punctuation">)</span>
        matrixIds<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> z
      <span class="token punctuation">}</span>
      let gridConfig <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        origin<span class="token operator">:</span> <span class="token function">getTopLeft</span><span class="token punctuation">(</span>projectionExtent<span class="token punctuation">)</span><span class="token punctuation">,</span>
        resolutions<span class="token punctuation">,</span>
        matrixIds
      <span class="token punctuation">}</span>
      <span class="token comment">// 网格</span>
      <span class="token keyword">const</span> tileGrid <span class="token operator">=</span> new <span class="token function">WMTSTileGrid</span><span class="token punctuation">(</span>gridConfig<span class="token punctuation">)</span>
      let source <span class="token operator">=</span> new <span class="token function">WMTS</span><span class="token punctuation">(</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>
          <span class="token punctuation">{<!-- --></span>
            crossOrigin<span class="token operator">:</span> <span class="token string">'anonymous'</span><span class="token punctuation">,</span>
            projection<span class="token punctuation">,</span>
            tileGrid
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          config
        <span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token keyword">return</span> new <span class="token function">TileLayer</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        source<span class="token punctuation">,</span>
        projection<span class="token punctuation">,</span>
        layerName<span class="token operator">:</span> config<span class="token punctuation">.</span>layer<span class="token punctuation">,</span>
        index
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 创建缓冲区
     * shape: Point Line Square Circle Polygon
     * distance: 缓冲区距离，单位是千米
     * polygon: 根据已绘制的图形创建缓冲区
     * maxArea: 最大创建范围，超出后不再进行缓冲区查询
     */</span>
    <span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      let options <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        steps<span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
        units<span class="token operator">:</span> <span class="token string">'meters'</span>
      <span class="token punctuation">}</span>
      let drawFeature <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>this<span class="token punctuation">.</span>center<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span>
      <span class="token comment">//创建缓冲区</span>
      let buffered <span class="token operator">=</span> turf<span class="token punctuation">.</span><span class="token function">buffer</span><span class="token punctuation">(</span>drawFeature<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        units<span class="token operator">:</span> <span class="token string">'kilometers'</span><span class="token punctuation">,</span>
        steps<span class="token operator">:</span> <span class="token number">5</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">//创建数据geojson对象和数据源对象</span>
      let format <span class="token operator">=</span> new <span class="token function">GeoJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      let source <span class="token operator">=</span> new <span class="token function">VectorSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">//读取geojson数据</span>
      let a <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">readFeature</span><span class="token punctuation">(</span>drawFeature<span class="token punctuation">)</span>
      <span class="token comment">// 样式设置</span>
      a<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>
        new <span class="token function">Style</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          stroke<span class="token operator">:</span> new <span class="token function">Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'rgba(255, 0, 0, 0.8)'</span><span class="token punctuation">,</span>
            width<span class="token operator">:</span> <span class="token number">3</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          fill<span class="token operator">:</span> new <span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'rgba(255, 0, 0, 0.5)'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          image<span class="token operator">:</span> new <span class="token function">CircleStyle</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 点的颜色</span>
            fill<span class="token operator">:</span> new <span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              color<span class="token operator">:</span> <span class="token string">'rgba(255, 0, 0, 0.8)'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// 圆形半径</span>
            radius<span class="token operator">:</span> <span class="token number">5</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// 设置缓冲区样式</span>
      let b <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">readFeature</span><span class="token punctuation">(</span>buffered<span class="token punctuation">)</span>
      b<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>
        new <span class="token function">Style</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          stroke<span class="token operator">:</span> new <span class="token function">Stroke</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'#2491ff'</span><span class="token punctuation">,</span>
            lineDash<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            width<span class="token operator">:</span> <span class="token number">3</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          fill<span class="token operator">:</span> new <span class="token function">Fill</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            color<span class="token operator">:</span> <span class="token string">'rgba(176, 202, 241, 0.5)'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// 将数据添加数据源的</span>
      source<span class="token punctuation">.</span><span class="token function">addFeature</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
      source<span class="token punctuation">.</span><span class="token function">addFeature</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
      <span class="token comment">// 将缓冲区移入视图，padding为边距this.map.getView().fit(b.getGeometry().getExtent(), { padding: [10, 10, 10, 10] })</span>
      <span class="token comment">//添加图层</span>
      let bufferLayer <span class="token operator">=</span> new <span class="token function">VectorLayer</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        source<span class="token operator">:</span> source<span class="token punctuation">,</span>
        layerName<span class="token operator">:</span> <span class="token string">'bufferLayer'</span><span class="token punctuation">,</span>
        zIndex<span class="token operator">:</span> <span class="token number">3</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      this<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">addLayer</span><span class="token punctuation">(</span>bufferLayer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 创建地图实例</span>
    this<span class="token punctuation">.</span>map <span class="token operator">=</span> new <span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      target<span class="token operator">:</span> <span class="token string">'map'</span><span class="token punctuation">,</span>
      controls<span class="token operator">:</span> <span class="token function">defaultControls</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        attributionOptions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> collapsed<span class="token operator">:</span> false <span class="token punctuation">}</span><span class="token punctuation">,</span>
        zoom<span class="token operator">:</span> false<span class="token punctuation">,</span>
        rotate<span class="token operator">:</span> false
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      view<span class="token operator">:</span> new <span class="token function">View</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        center<span class="token operator">:</span> this<span class="token punctuation">.</span>center<span class="token punctuation">,</span>
        projection<span class="token operator">:</span> <span class="token string">'EPSG:4326'</span><span class="token punctuation">,</span>
        zoom<span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
        minZoom<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        maxZoom<span class="token operator">:</span> <span class="token number">18</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    this<span class="token punctuation">.</span><span class="token function">addLayerToMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    this<span class="token punctuation">.</span><span class="token function">createBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<h2><a id="_532"></a>总结</h2> 
<p>需要创建缓冲区首先需要初始化一个地图，一个地图需要有容器、控件（可选）、视图、图层来构成。</p> 
<p>绘制缓冲区，这里借助工具turf.buffer来创建。<br> 缓冲区的中心、半径和样式可以完全自定义，其中中心和半径，可以直接在创建时传入参数，自定义样式需要用到ol/style中的类，需要单独引入使用</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e0f66d3f1f95dc80a697f90bf66e96c9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">chatGPT辅助写硕士毕业论文</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/93cf35d0e1955ea7e7084322f2ee3fef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js的使用总结（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>