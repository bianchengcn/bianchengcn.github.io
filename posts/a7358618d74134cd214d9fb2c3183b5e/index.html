<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>编译原理 实验5《LR(1)分析法设计与实现》 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="编译原理 实验5《LR(1)分析法设计与实现》" />
<meta property="og:description" content="实验5《LR(1)分析法设计与实现》 一、实验目的 构造LR(1)分析程序，利用它进行语法分析，判断给出的符号串是否为该文法识别的句子，了解LR（K）分析方法是严格的从左向右扫描，和自底向上的语法分析方法。
二、实验内容 程序输入/输出示例（以下仅供参考）：
对下列文法，用LR（1）分析法对任意输入的符号串进行分析：
（1）E-E&#43;T （2）E-E—T （3）T-T*F （4）T-T/F （5）F-(E) （6）F-i 输出的格式如下：
(1)LR（1）分析程序，编制人：姓名，学号，班级
(2)输入一个以#结束的符号串(包括&#43;—*/（）i#)：在此位置输入符号串
(3)输出过程如下：
步骤状态栈符号栈剩余输入串动作10#i&#43;i*i#移进 (4)输入符号串为非法符号串(或者为合法符号串)
备注：
1.在“所用产生式”一列中如果对应有推导则写出所用产生式；如果为匹配终结符则写明匹配的终结符；如分析异常出错则写为“分析出错”；若成功结束则写为“分析成功”。
2.在此位置输入符号串为用户自行输入的符号串。
注意：
1.表达式中允许使用运算符（±*/）、分割符（括号）、字符i，结束符#；
2.如果遇到错误的表达式，应输出错误提示信息（该信息越详细越好）；
3.对学有余力的同学，测试用的表达式事先放在文本文件中，一行存放一个表达式，同时以分号分割。同时将预期的输出结果写在另一个文本文件中，以便和输出进行对照。
三、实验方法 1．实验采用C&#43;&#43;程序语言进行设计，文法写入程序中，用户可以自定义输入语句；
2．实验开发工具为Visual Studio Code。
四、实验步骤 1．定义LR(1)分析法实验设计思想及算法
①若ACTION[sm , ai] = s则将s移进状态栈，并把输入符号加入符号栈，则三元式变成为：(s0s1…sm s , #X1X2…Xm ai , ai&#43;1…an#)；
②若ACTION[sm , ai] = rj则将第j个产生式A-&gt;β进行归约。此时三元式变为(s0s1…sm-r s , #X1X2…Xm-rA , aiai&#43;1…an#)；
③若ACTION[sm , ai]为“接收”，则三元式不再变化，变化过程终止，宣布分析成功；
④若ACTION[sm , ai]为“报错”，则三元式的变化过程终止，报告错误。
2．定义语法构造的代码，与主代码分离，写为头文件LR.h。
3．编写主程序利用上文描述算法实现本实验要求。
五、实验结果 1. 实验文法为程序既定的文法，写在头文件LR.h中，运行程序，用户可以自由输入测试语句。
2. 实验测试结果：
测试结果符合预期结果，程序能够对用户的语句利用LR（1）分析法构建分析表，利用分析栈进行正误分析。实验截图如下所示：
六、实验结论 1．实验利用自定义的源程序进行测试，结果正确，符合预期结果，测试源码及结果截图和说明如上所示。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a7358618d74134cd214d9fb2c3183b5e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-12T19:29:39+08:00" />
<meta property="article:modified_time" content="2023-02-12T19:29:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">编译原理 实验5《LR(1)分析法设计与实现》</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="5LR1_0"></a>实验5《LR(1)分析法设计与实现》</h5> 
<h6><a id="_1"></a>一、实验目的</h6> 
<p>  构造LR(1)分析程序，利用它进行语法分析，判断给出的符号串是否为该文法识别的句子，了解LR（K）分析方法是严格的从左向右扫描，和自底向上的语法分析方法。</p> 
<h6><a id="_4"></a>二、实验内容</h6> 
<p>  程序输入/输出示例（以下仅供参考）：<br>   对下列文法，用LR（1）分析法对任意输入的符号串进行分析：</p> 
<pre><code class="prism language-cpp">（<span class="token number">1</span>）E<span class="token operator">-</span>E<span class="token operator">+</span>T
（<span class="token number">2</span>）E<span class="token operator">-</span>E—T
（<span class="token number">3</span>）T<span class="token operator">-</span>T<span class="token operator">*</span>F
（<span class="token number">4</span>）T<span class="token operator">-</span>T<span class="token operator">/</span>F
（<span class="token number">5</span>）F<span class="token operator">-</span><span class="token punctuation">(</span>E<span class="token punctuation">)</span>
（<span class="token number">6</span>）F<span class="token operator">-</span>i
</code></pre> 
<p>  输出的格式如下：<br>   (1)LR（1）分析程序，<strong>编制人：姓名，学号，班级</strong><br>   (2)输入一个以#结束的符号串(包括+—*/（）i#)：<strong>在此位置输入符号串</strong><br>   (3)输出过程如下：</p> 
<table><thead><tr><th>步骤</th><th>状态栈</th><th>符号栈</th><th>剩余输入串</th><th>动作</th></tr></thead><tbody><tr><td>1</td><td>0</td><td>#</td><td>i+i*i#</td><td>移进</td></tr></tbody></table> 
<p>  (4)<strong>输入符号串</strong>为非法符号串(或者为合法符号串)<br>   备注：<br>   1.在“<strong>所用产生式</strong>”一列中如果对应有推导则写出所用产生式；如果为匹配终结符则写明匹配的终结符；如分析异常出错则写为“分析出错”；若成功结束则写为“分析成功”。<br>   2.<strong>在此位置输入符号串</strong>为用户自行输入的符号串。<br>   注意：<br>   1.表达式中允许使用运算符（±*/）、分割符（括号）、字符i，结束符#；<br>   2.如果遇到错误的表达式，应输出错误提示信息（该信息越详细越好）；<br>   3.对学有余力的同学，测试用的表达式事先放在文本文件中，一行存放一个表达式，同时以分号分割。同时将预期的输出结果写在另一个文本文件中，以便和输出进行对照。</p> 
<h6><a id="_33"></a>三、实验方法</h6> 
<p>  1．实验采用C++程序语言进行设计，文法写入程序中，用户可以自定义输入语句；<br>   2．实验开发工具为Visual Studio Code。</p> 
<h6><a id="_37"></a>四、实验步骤</h6> 
<p>  1．定义LR(1)分析法实验设计思想及算法<br>   ①若ACTION[sm , ai] = s则将s移进状态栈，并把输入符号加入符号栈，则三元式变成为：(s0s1…sm s , #X1X2…Xm ai , ai+1…an#)；<br>   ②若ACTION[sm , ai] = rj则将第j个产生式A-&gt;β进行归约。此时三元式变为(s0s1…sm-r s , #X1X2…Xm-rA , aiai+1…an#)；<br>   ③若ACTION[sm , ai]为“接收”，则三元式不再变化，变化过程终止，宣布分析成功；<br>   ④若ACTION[sm , ai]为“报错”，则三元式的变化过程终止，报告错误。<br>   2．定义语法构造的代码，与主代码分离，写为头文件LR.h。<br>   3．编写主程序利用上文描述算法实现本实验要求。</p> 
<h6><a id="_46"></a>五、实验结果</h6> 
<p>  1. 实验文法为程序既定的文法，写在头文件LR.h中，运行程序，用户可以自由输入测试语句。<br>   2. 实验测试结果：<br>   测试结果符合预期结果，程序能够对用户的语句利用LR（1）分析法构建分析表，利用分析栈进行正误分析。实验截图如下所示：<br> <img src="https://images2.imgbox.com/52/ae/cwAAbGOJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c7/63/QnXcD3JK_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_53"></a>六、实验结论</h6> 
<p>  1．实验利用自定义的源程序进行测试，结果正确，符合预期结果，测试源码及结果截图和说明如上所示。<br>   2．实验源码码分为头文件（LR.h）和主文件（test5.cpp）。均如下所示：<br>   <strong>LR.h</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">_LR_</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_LR_</span></span>
 
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
 
<span class="token keyword">class</span> <span class="token class-name">Grammar</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment">//产生式的个数</span>
    <span class="token keyword">int</span> grammarNum <span class="token punctuation">;</span>
    <span class="token comment">//定义产生式数组</span>
    string formula<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">" "</span><span class="token punctuation">,</span><span class="token string">"E-&gt;E+T"</span><span class="token punctuation">,</span><span class="token string">"E-&gt;T"</span><span class="token punctuation">,</span><span class="token string">"T-&gt;T*F"</span><span class="token punctuation">,</span><span class="token string">"T-&gt;F"</span><span class="token punctuation">,</span><span class="token string">"F-&gt;(E)"</span><span class="token punctuation">,</span><span class="token string">"F-&gt;i"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 
    <span class="token function">Grammar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        grammarNum <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//定义LR文法的分析表</span>
<span class="token keyword">class</span> <span class="token class-name">LRAnalyseTable</span><span class="token punctuation">{<!-- --></span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">char</span> terminalChar<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token char">'i'</span><span class="token punctuation">,</span><span class="token char">'+'</span><span class="token punctuation">,</span><span class="token char">'*'</span><span class="token punctuation">,</span><span class="token char">'('</span><span class="token punctuation">,</span><span class="token char">')'</span><span class="token punctuation">,</span><span class="token char">'#'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//定义终结符的个数</span>
    <span class="token keyword">int</span> terNum <span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> nonTerminalChar<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token char">'E'</span><span class="token punctuation">,</span><span class="token char">'T'</span><span class="token punctuation">,</span><span class="token char">'F'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//定义非终结符的个数</span>
    <span class="token keyword">int</span> nonTerNum <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token comment">//定义状态数</span>
    <span class="token keyword">int</span> statusNum <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
    string action<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"s5"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s4"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s6"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"acc"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r2"</span><span class="token punctuation">,</span><span class="token string">"s7"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r2"</span><span class="token punctuation">,</span><span class="token string">"r2"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r4"</span><span class="token punctuation">,</span><span class="token string">"r4"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r4"</span><span class="token punctuation">,</span><span class="token string">"r4"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"s5"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s4"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r6"</span><span class="token punctuation">,</span><span class="token string">"r6"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r6"</span><span class="token punctuation">,</span><span class="token string">"r6"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"s5"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s4"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">}</span>
    <span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"s5"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s4"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s6"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"s11"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r1"</span><span class="token punctuation">,</span><span class="token string">"s7"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r1"</span><span class="token punctuation">,</span><span class="token string">"r1"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r3"</span><span class="token punctuation">,</span><span class="token string">"r3"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r3"</span><span class="token punctuation">,</span><span class="token string">"r3"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r5"</span><span class="token punctuation">,</span><span class="token string">"r5"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">,</span><span class="token string">"r5"</span><span class="token punctuation">,</span><span class="token string">"r5"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> goTo<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token comment">//获取终结符的索引</span>
    <span class="token keyword">int</span> <span class="token function">getTerminalIndex</span><span class="token punctuation">(</span><span class="token keyword">char</span> var<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>terNum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>terminalChar<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> var<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//获取非终结符的索引</span>
    <span class="token keyword">int</span> <span class="token function">getNonTerminalIndex</span><span class="token punctuation">(</span><span class="token keyword">char</span> var<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>nonTerNum<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>nonTerminalChar<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> var<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token keyword">return</span> i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
 
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// _LR_</span></span>
</code></pre> 
<p>  <strong>test5.cpp</strong></p> 
<pre><code class="prism language-cpp"><span class="token comment">/**************************
Compiler Principle
test5 LR(1)分析法设计与实现
author:zz
vs code
2019.05.14
***************************/</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;cstring&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"LR.h"</span></span>
 
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
 
<span class="token comment">//定义状态栈</span>
vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> status<span class="token punctuation">;</span>
<span class="token comment">//定义符号栈</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> sign<span class="token punctuation">;</span>
<span class="token comment">//定义输入的字符串</span>
vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> inputStr<span class="token punctuation">;</span>
<span class="token comment">//记录输入的字符串</span>
string inputVal<span class="token punctuation">;</span>
<span class="token comment">//定义文法</span>
Grammar grammar<span class="token punctuation">;</span>
<span class="token comment">//定义LR分析表</span>
LRAnalyseTable analyseTable<span class="token punctuation">;</span>
<span class="token comment">//读取输入的字符串</span>
<span class="token keyword">void</span> <span class="token function">readStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//对栈容器进行输出,i=0,返回status中的字符串,i=1,返回sign中的字符串，i=2返回inputStr</span>
string <span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//总控，对输入的字符串进行分析</span>
<span class="token keyword">void</span> <span class="token function">LRAnalyse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">readStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">LRAnalyse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//读取输入的字符串</span>
<span class="token keyword">void</span> <span class="token function">readStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> ch<span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"LR（1）分析程序，编制人：xxx"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"请输入分析的字符串："</span><span class="token punctuation">;</span>
    cin<span class="token operator">&gt;&gt;</span>ch<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span> ch <span class="token operator">!=</span> <span class="token char">'#'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        inputVal <span class="token operator">+=</span> ch<span class="token punctuation">;</span>
        inputStr<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
        cin<span class="token operator">&gt;&gt;</span>ch<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
   <span class="token comment">//把#加入容器</span>
   inputStr<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token char">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   inputVal <span class="token operator">+=</span> <span class="token char">'#'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//对栈容器进行输出,i=0,返回status中的字符串,i=1,返回sign中的字符串，i=2返回inputStr中的字符串</span>
string <span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//输出状态栈</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span>status<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将数字转化为字符串</span>
        string str<span class="token punctuation">,</span>tempStr<span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>it<span class="token punctuation">;</span>it<span class="token operator">!=</span> status<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            stringstream ss<span class="token punctuation">;</span>
            ss <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it<span class="token punctuation">;</span>
            ss <span class="token operator">&gt;&gt;</span> tempStr<span class="token punctuation">;</span>
            str<span class="token operator">+=</span>tempStr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//输出符号栈</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> sign<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>it <span class="token punctuation">;</span> it <span class="token operator">!=</span> sign<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            buf<span class="token punctuation">[</span>count<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">*</span>it<span class="token punctuation">;</span>
            count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//输出待分析的字符串</span>
    <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
        vector<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> inputStr<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>it <span class="token punctuation">;</span> it <span class="token operator">!=</span> inputStr<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            buf<span class="token punctuation">[</span>count<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">*</span>it<span class="token punctuation">;</span>
            count<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    buf<span class="token punctuation">[</span>count<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
    string <span class="token function">str</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//总控，对输入的字符串进行分析</span>
<span class="token keyword">void</span> <span class="token function">LRAnalyse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//步骤</span>
    <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">//把状态0入栈</span>
    status<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//把#加入符号栈</span>
    sign<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token char">'#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//输出初始栈状态</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"步骤"</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"状态栈"</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"符号栈"</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"输入串"</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"动作说明"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token comment">//初始状态</span>
    <span class="token keyword">int</span> s <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">//保存之前的状态</span>
    <span class="token keyword">int</span> oldStatus<span class="token punctuation">;</span>
    <span class="token comment">//获取初始符号</span>
    <span class="token keyword">char</span> ch <span class="token operator">=</span> inputStr<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//如果action[s][ch] =="acc" ，则分析成功</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>analyseTable<span class="token punctuation">.</span>action<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>analyseTable<span class="token punctuation">.</span><span class="token function">getTerminalIndex</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"acc"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//获取字符串</span>
        string str <span class="token operator">=</span> analyseTable<span class="token punctuation">.</span>action<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">[</span>analyseTable<span class="token punctuation">.</span><span class="token function">getTerminalIndex</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">//如果str为空，报错并返回</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token string">"出错"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            cout<span class="token operator">&lt;&lt;</span>inputVal<span class="token operator">&lt;&lt;</span><span class="token string">"为非法符号串"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//获取r或s后面的数字</span>
        stringstream ss<span class="token punctuation">;</span>
        ss <span class="token operator">&lt;&lt;</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ss <span class="token operator">&gt;&gt;</span> s<span class="token punctuation">;</span>
        <span class="token comment">//如果是移进</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"s"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>step<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"A"</span><span class="token operator">&lt;&lt;</span><span class="token string">"CTION["</span><span class="token operator">&lt;&lt;</span>status<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span>ch<span class="token operator">&lt;&lt;</span><span class="token string">"]=S"</span><span class="token operator">&lt;&lt;</span>s<span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span><span class="token string">"状态"</span><span class="token operator">&lt;&lt;</span>s<span class="token operator">&lt;&lt;</span><span class="token string">"入栈"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token comment">//输入符号入栈</span>
            sign<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
            inputStr<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>inputStr<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//将状态数字入栈</span>
            status<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//如果是归约</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//获取第S个产生式</span>
            string formu <span class="token operator">=</span> grammar<span class="token punctuation">.</span>formula<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">//cout&lt;&lt;s&lt;&lt;endl;</span>
            <span class="token keyword">int</span> strSize <span class="token operator">=</span> formu<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//将产生式转化为字符数组</span>
            <span class="token keyword">char</span> buf<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">strcpy</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span>formu<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//获取产生式的首字符</span>
            <span class="token keyword">char</span> nonTerCh <span class="token operator">=</span> buf<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">//获取符号栈的出栈次数</span>
            <span class="token keyword">int</span> popCount <span class="token operator">=</span> strSize <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span>
            <span class="token comment">//反向迭代</span>
            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>reverse_iterator rit <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> i<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span>rit<span class="token punctuation">;</span>rit <span class="token operator">!=</span> status<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>rit<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                i<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> popCount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    oldStatus <span class="token operator">=</span> <span class="token operator">*</span> rit<span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">int</span> r <span class="token operator">=</span> s<span class="token punctuation">;</span>
            <span class="token comment">//修改s</span>
            s <span class="token operator">=</span> analyseTable<span class="token punctuation">.</span>goTo<span class="token punctuation">[</span>oldStatus<span class="token punctuation">]</span><span class="token punctuation">[</span>analyseTable<span class="token punctuation">.</span><span class="token function">getNonTerminalIndex</span><span class="token punctuation">(</span>nonTerCh<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            cout<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>step<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"r"</span><span class="token operator">&lt;&lt;</span>r<span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token string">":"</span><span class="token operator">+</span>grammar<span class="token punctuation">.</span>formula<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token string">"归约,GOTO{"</span><span class="token operator">&lt;&lt;</span>oldStatus<span class="token operator">&lt;&lt;</span><span class="token string">","</span><span class="token operator">&lt;&lt;</span>nonTerCh<span class="token operator">&lt;&lt;</span><span class="token string">")="</span><span class="token operator">&lt;&lt;</span>s<span class="token operator">&lt;&lt;</span><span class="token string">"入栈"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
            <span class="token comment">//对符号栈进行出栈和状态栈进行出栈</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">&lt;</span> popCount<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                sign<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                status<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//再对产生式的开始符号入栈</span>
            sign<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nonTerCh<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//再把新的状态入栈</span>
            status<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
           <span class="token comment">//什么都不处理</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//步骤数加1</span>
        step<span class="token operator">++</span><span class="token punctuation">;</span>
 
        <span class="token comment">//获取栈顶状态</span>
        s <span class="token operator">=</span> status<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取输入的字符</span>
        ch <span class="token operator">=</span> inputStr<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>step<span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">vectTrancStr</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">"A"</span><span class="token operator">&lt;&lt;</span><span class="token string">"cc:分析成功"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    cout<span class="token operator">&lt;&lt;</span>inputVal<span class="token operator">&lt;&lt;</span><span class="token string">"为合法符号串"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_297"></a>七、实验小结</h6> 
<p>  1．本次实验是利用LR（1）分析法进行语法分析，通过代码实现后更加了解了LR（K）分析方法是严格的从左向右扫描，和自底向上的语法分析方法。<br>   2．LR分析法小结：<br>    LR(0)构造的DFA，但是由LR（0）的DFA来构造分析表往往是不可行的，也就是说很少有语言是LR(0)的。<br>    如果LR(0)的冲突可以根据当前输入的字符来解决，则构造的分析表为SLR分析表，SLR分析表跟LR(0)的dfa是相同的。<br>    LR(1)构造的DFA考虑当前输入的字符，所以构造的DFA中存在的冲突比较少，也就是说它接受的语言就比较多。构造分析表时，不用额外的约束，因为它在构造dfa时就已经考虑了当前的输入字符。<br>    考虑到LR(1)的dfa包含的状态太多，而且许多状态的不同仅仅是因为预测符的不同而已。通过合并不会产生冲突的状态，可以减少dfa的状态数，这就产生了LALR分析法。所以说LALR分析法只是对LR(1)的一种简化：通过合并同心集。<br>    分析法的分析能力比较：LR(1)&gt;LALR&gt;SLR(1)&gt;LR(0)。</p> 
<p>参考文章：【1】<a href="https://blog.csdn.net/qq_39559641/article/details/84103000">LR(1)分析法的总控的实现（C++实现）</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/35210ebc86dd907ee5b3d1f3e90284da/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第五届字节跳动青训营寒假 —— 前端专场</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0303a8049b85cc876faaef64b04eda3c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">redux的hooks改写步骤</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>