<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【性能测试】四、jmeter——编写脚本 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【性能测试】四、jmeter——编写脚本" />
<meta property="og:description" content="jmeter编写脚本 一、准备事项 项目环境接口文档 http请求包括哪些部分 请求行
&#43; 请求方法，请求地址URI请求头
Content-Type
cookie
User-Agent空一行请求体
参数： 表单
消息体数据： json 、xml 二、写脚本 一个最简单的jmeter脚本，包括，线程组、取样器、监听器：
测试计划上右键， 添加 线程组线程组上右键，添加 取样器&gt; http请求 （http协议簇）线程组上右键，添加 监听器 &gt; 查看结果树 线程组： 性能测试中用于场景设计的，写脚本阶段不用改动
取样器： 根据不同的协议，编写不同的脚本。 填空
监听器： 调试脚本时使用，性能测试执行时，禁用
​ 不管哪种监听器，都是对结果数据进行不同维度的展示，这些展示，是需要消耗本地资源的
8080端口，是tomcat的默认端口
http协议的默认端口：80
https协议默认端口: 443
jmeter的默认保存路径，jmeter的bin文件夹
三、注意事项 1. 请求头 当请求体为json， 一定要有请求头 Content-Type：application/json
2. json格式 3. 协议 协议： 当协议为http时，可以不写，如果是https，那就必须写
4. 服务器 服务器名称或IP：不能带有/
5. 路径： 不要带域名或ip，和端口 路径开头，用/
不要带有空格， 带有空格请求URL %20 urlencoded编码
URI 资源地址
URL： 带domain
6. 内容编码：utf8 请求内容出现乱码处理方法：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/dcb924c1dd10954250c4396903d60430/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-04T20:52:23+08:00" />
<meta property="article:modified_time" content="2022-09-04T20:52:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【性能测试】四、jmeter——编写脚本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="jmeter_0"></a>jmeter编写脚本</h2> 
<h3><a id="_2"></a>一、准备事项</h3> 
<ul><li>项目环境</li><li>接口文档</li></ul> 
<blockquote> 
 <ul><li>http<strong>请求</strong>包括哪些部分 
   <ul><li>请求行<br> + 请求方法，请求地址URI</li><li>请求头<br> Content-Type<br> cookie<br> User-Agent</li><li>空一行</li><li>请求体<br> 参数： 表单<br> 消息体数据： json 、xml</li></ul> </li></ul> 
</blockquote> 
<h3><a id="_20"></a>二、写脚本</h3> 
<p>一个最简单的jmeter脚本，包括，线程组、取样器、监听器：</p> 
<ol><li>测试计划上右键， 添加 <strong>线程组</strong></li><li>线程组上右键，添加 <strong>取样器</strong>&gt; http请求 （http协议簇）</li><li>线程组上右键，添加 监听器 &gt; <strong>查看结果树</strong></li></ol> 
<blockquote> 
 <p>线程组： 性能测试中用于场景设计的，写脚本阶段不用改动<br> 取样器： 根据不同的协议，编写不同的脚本。 填空<br> 监听器： 调试脚本时使用，<strong>性能测试执行时</strong>，<strong>禁用</strong></p> 
</blockquote> 
<p>​ 不管哪种监听器，都是对结果数据进行不同维度的展示，这些展示，是需要消耗本地资源的</p> 
<blockquote> 
 <p>8080端口，是tomcat的默认端口<br> http协议的默认端口：80<br> https协议默认端口: 443<br> jmeter的默认保存路径，jmeter的bin文件夹</p> 
</blockquote> 
<h3><a id="_39"></a>三、注意事项</h3> 
<p><img src="https://images2.imgbox.com/8b/65/WamxImMg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1__42"></a>1. 请求头</h4> 
<p>当请求体为json， 一定要有请求头 Content-Type：application/json</p> 
<h4><a id="2_json_45"></a>2. json格式</h4> 
<h4><a id="3__47"></a>3. 协议</h4> 
<p>协议： 当协议为http时，可以不写，如果是<strong>https</strong>，那就必须写</p> 
<h4><a id="4__49"></a>4. 服务器</h4> 
<p>服务器名称或IP：不能带有/</p> 
<h4><a id="5__ip_51"></a>5. 路径： 不要带域名或ip，和端口</h4> 
<ul><li> <p>路径开头，用/</p> </li><li> <p>不要带有空格， 带有空格请求URL %20 urlencoded编码</p> </li><li> <p>URI 资源地址</p> </li><li> <p>URL： 带domain</p> </li></ul> 
<h4><a id="6_utf8_57"></a>6. 内容编码：utf8</h4> 
<ul><li> <p>请求内容出现乱码处理方法：</p> 
  <ul><li> <p>内容编码： utf8</p> </li><li> <p>请求头，;charset=utf-8<br> <img src="https://images2.imgbox.com/c8/32/nAjRCC3S_o.png" alt="在这里插入图片描述"></p> </li><li> <p>请求体为<strong>参数</strong>类型：勾选参数“编码”<br> 编码：urlencoded编码；<br> 在参数值为 非字符(<strong>汉字、特殊符号</strong>) 都需要勾选编码；<br> 建议： 参数值，不管什么类型，都建议勾选编码</p> </li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/3b/42/WzXt8bK8_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>响应内容出现乱码</strong>处理方法：</li></ul> 
<p>​ 需求修改jmeter.properties中sampler.result.encoding</p> 
<p>​ 不是简单的设置为utf8、 gbk、gb2312、big5，而是需要去尝试修改为以上几种，去尝试匹配被测系统的编码方式</p> 
<ul><li>同一个接口，用postmen请求，响应是正常，用jmeter请求响应中文乱码？原因是： jmeter的编码是根据操作系统编码。</li></ul> 
<blockquote> 
 <p>在国内，中文windows系统的字符集编码是gbk 936， mac系统中文编码utf8</p> 
</blockquote> 
<h4><a id="7_83"></a>7.请求体类型选择</h4> 
<p>​ <strong>消息体数据</strong>：当我们的请求接口文档中说，请求体为json格式，那么我们就选择用消息体数据，来写json， soap=http+xml</p> 
<p>​ <strong>参数</strong>： 我们的请求体，form-data<br> ​ Content-Type: application/x-www-form-urlencoded 或者不指明请求体类型，get</p> 
<h4><a id="8_91"></a>8、重定向</h4> 
<ul><li>自动重定向：不会显示中间重定向过程，无法从过程中，提取信息</li><li>跟随重定向：会自动显示重定向过程，<strong>能从过程中</strong>，提取想要信息，用于后面接口请求</li><li>使用keepAlive：保持连接， 长连接，<br> 因为现在用http协议版本为1.1 就是长连接，所以，默认勾选keepAlive，但是在性能测试中，我们会根据需要，去掉这个勾。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69ee61f38e2368706a024abe84aaacb2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小功能⭐️解决Unity无法对一个物体上的所有材质球进行更改</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7af4eae14a66d00b46037b27478469bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue版本与vuex版本之间的对应关系</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>