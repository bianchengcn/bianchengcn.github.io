<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySql进阶使用之视图、索引（详解） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySql进阶使用之视图、索引（详解）" />
<meta property="og:description" content="Mysql进阶使用（详细讲解） 文章目录 Mysql进阶使用（详细讲解）前言1.视图1.1 什么是视图1.2 视图与数据库表的区别1.3 视图的优点1.4 视图的使用语法语法说明案例结果显示创建视图结果查看视图结果 注意事项：显示结果 2. 索引2.1 什么是索引2.2 为什么要使用索引2.3 索引的优缺点优点缺点 2.4 什么时候使用索引2.5 索引什么情况下会失效2.6 索引的分类2.6.1 普通索引创建语法修改表结构方式添加索引删除索引案例 2.6.2.唯一索引2.6.3.主键索引2.6.4.组合索引2.6.5.全文索引 3. 数据备份与还原3.1 什么是数据备份与还原3.2 为什么要数据备份与还原3.3 数据备份与还原的操作3.3.1 导出3.3.2 导入 结束语 前言 今天给大家带来分享有关MySql进阶使用的知识分享，希望能给大家带来帮助，请认真阅读。接下来跟着我们的思维导图一起来看看吧。
1.视图 1.1 什么是视图 视图（View）是在数据库中创建的虚拟表，它基于查询的结果集。它是通过使用存储在数据库中的数据来动态生成的，但在物理存储上并不保留数据。视图可以被视为一个存储了特定数据的虚拟表，类似于物理表，但实际上并不存储任何数据。
视图可以由一个或多个表的列组成，并且可以根据需求进行筛选、过滤、排序和聚合等操作。它提供了一种简化和抽象的方式来访问和处理数据库中的数据。
使用视图可以为用户隐藏复杂的数据模型和查询，只暴露所需的数据和字段，从而简化数据访问和操作。视图还可以提供数据安全性，限制用户对敏感数据的访问权限。
通过创建视图，可以避免重复编写复杂的查询语句，提高查询的效率和可重用性。视图还可以用作其他视图的基础，实现更复杂的数据操作和分析。
1.2 视图与数据库表的区别 数据存储：数据库表是物理存储的实体，它在数据库中占据一定的存储空间，直接存储数据记录。而视图只是一个虚拟的、基于查询结果集的表，不直接存储数据，它只存储了查询定义和规则。数据内容：数据库表存储了完整的数据记录，包括每个字段的值和行之间的关系。视图是基于表或其他视图的查询结果集，它只包含符合查询条件的部分数据或经过筛选、聚合、计算等操作后得到的结果。数据维护：表是可以直接修改、插入和删除数据的实体，对表的操作会直接影响存储在其中的数据。视图是只读或有限可写的，对视图进行的操作会间接地对底层的表或数据进行修改。数据结构：表有自己的列和行，定义了数据的结构和关系。视图可以由一个或多个表的列、行和数据关系组成，它是基于表结构和查询条件来动态生成的。数据访问：表可以直接被用户查询、更新和操作，用户可以直接访问表中的数据。而视图通常用于提供简化、安全和抽象的数据访问层，用户可以通过视图来查询和操作数据，而对于底层的表结构和数据的具体细节可以隐藏起来。 1.3 视图的优点 简化数据访问：视图提供了对数据的简化和抽象访问方式。通过创建视图，可以隐藏复杂的查询语句和数据模型，用户可以直接从视图中查询、过滤和操作数据，无需了解底层表的结构和关系。数据安全性：视图可以用于实现数据安全性和权限控制。通过视图，可以限制用户只能访问特定的列、行或满足特定条件的数据，从而保护敏感数据的安全性，并确保用户只能获取其所需的数据。数据简化与聚合：视图可以对底层表执行复杂的查询、筛选、排序和聚合操作，从而简化了用户对数据的操作。用户可以通过视图获取已经聚合或计算好的结果，而不需要自己编写复杂的查询语句。逻辑数据独立性：通过使用视图，可以实现逻辑数据独立性。当数据库的表结构发生变化时，只需要修改视图的定义，而不需要修改使用这些视图的应用程序或查询。查询重用：视图提供了查询的重用性。可以创建基础视图，然后在其他视图或查询中使用它们，从而避免重复编写复杂的查询语句，并提高查询的效率和可维护性。数据逻辑封装：视图可以将复杂的数据逻辑封装在一个虚拟的表中。这样，应用程序和用户只需要与视图交互，而无需了解底层数据模型和具体的计算逻辑，提高了数据的抽象和封装程度。 1.4 视图的使用 语法 CREATE VIEW &lt;视图名&gt; AS &lt;SELECT语句&gt; 语法说明 &lt;视图名&gt;：指定视图的名称。该名称在数据库中必须是唯一的，不能与其他表或视图同名。&lt;SELECT语句&gt;：指定创建视图的 SELECT 语句，可用于查询多个基础表或源视图。 对于创建视图中的 SELECT 语句的指定存在以下限制：
用户除了拥有 CREATE VIEW 权限外，还具有操作中涉及的基础表和其他视图的相关权限。SELECT 语句不能引用系统或用户变量。SELECT 语句不能包含 FROM 子句中的子查询。SELECT 语句不能引用预处理语句参数。 案例 --创建视图 CREATE view v_student_score as select s." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/61e23deed77abf917b046e74b465bdb7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-09T21:47:27+08:00" />
<meta property="article:modified_time" content="2023-07-09T21:47:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySql进阶使用之视图、索引（详解）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Mysql_0"></a>Mysql进阶使用（详细讲解）</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Mysql_0" rel="nofollow">Mysql进阶使用（详细讲解）</a></li><li><ul><li><a href="#_3" rel="nofollow">前言</a></li><li><a href="#1_15" rel="nofollow">1.视图</a></li><li><ul><li><a href="#11__17" rel="nofollow">1.1 什么是视图</a></li><li><a href="#12__27" rel="nofollow">1.2 视图与数据库表的区别</a></li><li><a href="#13__35" rel="nofollow">1.3 视图的优点</a></li><li><a href="#14__44" rel="nofollow">1.4 视图的使用</a></li><li><ul><li><a href="#_46" rel="nofollow">语法</a></li><li><a href="#_52" rel="nofollow">语法说明</a></li><li><a href="#_64" rel="nofollow">案例</a></li><li><a href="#_85" rel="nofollow">结果显示</a></li><li><ul><li><a href="#_87" rel="nofollow">创建视图结果</a></li><li><a href="#_92" rel="nofollow">查看视图结果</a></li></ul> 
     </li><li><a href="#_97" rel="nofollow">注意事项：</a></li><li><ul><li><a href="#_126" rel="nofollow">显示结果</a></li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#2__131" rel="nofollow">2. 索引</a></li><li><ul><li><a href="#21__133" rel="nofollow">2.1 什么是索引</a></li><li><a href="#22__145" rel="nofollow">2.2 为什么要使用索引</a></li><li><a href="#23__169" rel="nofollow">2.3 索引的优缺点</a></li><li><ul><li><a href="#_171" rel="nofollow">优点</a></li><li><a href="#_179" rel="nofollow">缺点</a></li></ul> 
    </li><li><a href="#24__187" rel="nofollow">2.4 什么时候使用索引</a></li><li><a href="#25__195" rel="nofollow">2.5 索引什么情况下会失效</a></li><li><a href="#26__213" rel="nofollow">2.6 索引的分类</a></li><li><ul><li><a href="#261__217" rel="nofollow">2.6.1 普通索引</a></li><li><ul><li><a href="#_219" rel="nofollow">创建语法</a></li><li><a href="#_225" rel="nofollow">修改表结构方式添加索引</a></li><li><a href="#_231" rel="nofollow">删除索引</a></li><li><a href="#_237" rel="nofollow">案例</a></li></ul> 
     </li><li><a href="#262_272" rel="nofollow">2.6.2.唯一索引</a></li><li><a href="#263_282" rel="nofollow">2.6.3.主键索引</a></li><li><a href="#264_296" rel="nofollow">2.6.4.组合索引</a></li><li><a href="#265_306" rel="nofollow">2.6.5.全文索引</a></li></ul> 
    </li><li><a href="#3__322" rel="nofollow">3. 数据备份与还原</a></li><li><ul><li><a href="#31__324" rel="nofollow">3.1 什么是数据备份与还原</a></li><li><a href="#32__336" rel="nofollow">3.2 为什么要数据备份与还原</a></li><li><a href="#33__344" rel="nofollow">3.3 数据备份与还原的操作</a></li><li><ul><li><a href="#331__346" rel="nofollow">3.3.1 导出</a></li><li><a href="#332__397" rel="nofollow">3.3.2 导入</a></li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#_436" rel="nofollow">结束语</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_3"></a>前言</h3> 
<p>今天给大家带来分享有关MySql进阶使用的知识分享，希望能给大家带来帮助，请认真阅读。接下来跟着我们的思维导图一起来看看吧。</p> 
<p><img src="https://images2.imgbox.com/b3/26/qEpuBNJl_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/5b/7c/oiRSHGeg_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="1_15"></a>1.视图</h3> 
<h4><a id="11__17"></a>1.1 什么是视图</h4> 
<p>视图（View）是在数据库中创建的虚拟表，它基于查询的结果集。它是通过使用存储在数据库中的数据来动态生成的，但在物理存储上并不保留数据。视图可以被视为一个存储了特定数据的虚拟表，类似于物理表，但实际上并不存储任何数据。</p> 
<p>视图可以由一个或多个表的列组成，并且可以根据需求进行筛选、过滤、排序和聚合等操作。它提供了一种简化和抽象的方式来访问和处理数据库中的数据。</p> 
<p>使用视图可以为用户隐藏复杂的数据模型和查询，只暴露所需的数据和字段，从而简化数据访问和操作。视图还可以提供数据安全性，限制用户对敏感数据的访问权限。</p> 
<p>通过创建视图，可以避免重复编写复杂的查询语句，提高查询的效率和可重用性。视图还可以用作其他视图的基础，实现更复杂的数据操作和分析。</p> 
<h4><a id="12__27"></a>1.2 视图与数据库表的区别</h4> 
<ol><li>数据存储：数据库表是物理存储的实体，它在数据库中占据一定的存储空间，直接存储数据记录。而视图只是一个虚拟的、基于查询结果集的表，不直接存储数据，它只存储了查询定义和规则。</li><li>数据内容：数据库表存储了完整的数据记录，包括每个字段的值和行之间的关系。视图是基于表或其他视图的查询结果集，它只包含符合查询条件的部分数据或经过筛选、聚合、计算等操作后得到的结果。</li><li>数据维护：表是可以直接修改、插入和删除数据的实体，对表的操作会直接影响存储在其中的数据。视图是只读或有限可写的，对视图进行的操作会间接地对底层的表或数据进行修改。</li><li>数据结构：表有自己的列和行，定义了数据的结构和关系。视图可以由一个或多个表的列、行和数据关系组成，它是基于表结构和查询条件来动态生成的。</li><li>数据访问：表可以直接被用户查询、更新和操作，用户可以直接访问表中的数据。而视图通常用于提供简化、安全和抽象的数据访问层，用户可以通过视图来查询和操作数据，而对于底层的表结构和数据的具体细节可以隐藏起来。</li></ol> 
<h4><a id="13__35"></a>1.3 视图的优点</h4> 
<ol><li>简化数据访问：视图提供了对数据的简化和抽象访问方式。通过创建视图，可以隐藏复杂的查询语句和数据模型，用户可以直接从视图中查询、过滤和操作数据，无需了解底层表的结构和关系。</li><li>数据安全性：视图可以用于实现数据安全性和权限控制。通过视图，可以限制用户只能访问特定的列、行或满足特定条件的数据，从而保护敏感数据的安全性，并确保用户只能获取其所需的数据。</li><li>数据简化与聚合：视图可以对底层表执行复杂的查询、筛选、排序和聚合操作，从而简化了用户对数据的操作。用户可以通过视图获取已经聚合或计算好的结果，而不需要自己编写复杂的查询语句。</li><li>逻辑数据独立性：通过使用视图，可以实现逻辑数据独立性。当数据库的表结构发生变化时，只需要修改视图的定义，而不需要修改使用这些视图的应用程序或查询。</li><li>查询重用：视图提供了查询的重用性。可以创建基础视图，然后在其他视图或查询中使用它们，从而避免重复编写复杂的查询语句，并提高查询的效率和可维护性。</li><li>数据逻辑封装：视图可以将复杂的数据逻辑封装在一个虚拟的表中。这样，应用程序和用户只需要与视图交互，而无需了解底层数据模型和具体的计算逻辑，提高了数据的抽象和封装程度。</li></ol> 
<h4><a id="14__44"></a>1.4 视图的使用</h4> 
<h5><a id="_46"></a>语法</h5> 
<pre><code class="prism language-mysql">CREATE VIEW &lt;视图名&gt; AS &lt;SELECT语句&gt;
</code></pre> 
<h5><a id="_52"></a>语法说明</h5> 
<ul><li><code>&lt;视图名&gt;</code>：指定视图的名称。该名称在数据库中必须是唯一的，不能与其他表或视图同名。</li><li><code>&lt;SELECT语句&gt;</code>：指定创建视图的 SELECT 语句，可用于查询多个基础表或源视图。</li></ul> 
<p><strong>对于创建视图中的 SELECT 语句的指定存在以下限制：</strong></p> 
<ul><li>用户除了拥有 CREATE VIEW 权限外，还具有操作中涉及的基础表和其他视图的相关权限。</li><li>SELECT 语句不能引用系统或用户变量。</li><li>SELECT 语句不能包含 FROM 子句中的子查询。</li><li>SELECT 语句不能引用预处理语句参数。</li></ul> 
<h5><a id="_64"></a>案例</h5> 
<pre><code class="prism language-sql"><span class="token comment">--创建视图</span>
<span class="token keyword">CREATE</span> <span class="token keyword">view</span> v_student_score <span class="token keyword">as</span>
<span class="token keyword">select</span>
	s<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span>cid<span class="token punctuation">,</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">,</span>c<span class="token punctuation">.</span>cname<span class="token punctuation">,</span>t<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">from</span>
t_mysql_student s<span class="token punctuation">,</span>
t_mysql_score sc<span class="token punctuation">,</span>
t_mysql_course c<span class="token punctuation">,</span>
t_mysql_teacher t
<span class="token keyword">where</span> 
s<span class="token punctuation">.</span>sid <span class="token operator">=</span> sc<span class="token punctuation">.</span>sid
<span class="token operator">and</span> sc<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>cid
<span class="token operator">and</span> c<span class="token punctuation">.</span>tid <span class="token operator">=</span> t<span class="token punctuation">.</span>tid<span class="token punctuation">;</span>

<span class="token comment">--查看视图</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> v_student_score
</code></pre> 
<h5><a id="_85"></a>结果显示</h5> 
<h6><a id="_87"></a>创建视图结果</h6> 
<p><img src="https://images2.imgbox.com/b1/71/pgbPFx0W_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_92"></a>查看视图结果</h6> 
<p><img src="https://images2.imgbox.com/e4/61/AO7Okoc2_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_97"></a>注意事项：</h5> 
<ol><li>数据完整性：创建视图时，要确保视图的查询逻辑和条件是正确的，并且能够返回所需的数据。对于涉及多个表的视图，要确保表之间的连接和关系是正确的，以避免查询结果不准确或丢失数据。</li><li>性能考虑：创建视图时，要考虑查询的性能。如果视图查询复杂或涉及大量的数据，可能会影响查询的性能。可以使用索引、优化查询语句和限制返回的数据量等方法来提高性能。</li><li>数据安全性：在创建视图时，要注意设置适当的权限和访问控制，以确保只有具有权限的用户能够访问和修改视图。可以使用数据库的权限管理功能来控制对视图的访问权限。</li><li>视图的命名：选择一个有意义和描述性的视图名称，以便于理解和维护。命名应该与视图所表示的数据逻辑和用途相关联，并遵循命名约定或规范。</li><li>视图的更新性：需要根据业务需求和实际情况考虑视图的更新性。视图通常是只读的，不允许直接修改底层的表数据。然而，有些情况下可能需要对视图进行可更新操作，这需要谨慎处理并确保数据的一致性和完整性。</li><li>视图的维护：需要定期检查和维护视图，确保它们与底层表的结构和数据保持同步。如果底层表发生了变化，可能需要相应地修改视图的定义或重新生成视图。</li></ol> 
<p><strong>例如</strong>：</p> 
<pre><code class="prism language-sql"><span class="token comment">--下面是这是一个错误示范，创建视图是要避免字段重复的问题，否则会创建失败</span>

<span class="token keyword">CREATE</span> <span class="token keyword">view</span> v_student_score <span class="token keyword">as</span>
<span class="token keyword">select</span>
	<span class="token operator">*</span>
<span class="token keyword">from</span>
t_mysql_student s<span class="token punctuation">,</span>
t_mysql_score sc<span class="token punctuation">,</span>
t_mysql_course c<span class="token punctuation">,</span>
t_mysql_teacher t
<span class="token keyword">where</span> 
s<span class="token punctuation">.</span>sid <span class="token operator">=</span> sc<span class="token punctuation">.</span>sid
<span class="token operator">and</span> sc<span class="token punctuation">.</span>cid <span class="token operator">=</span> c<span class="token punctuation">.</span>cid
<span class="token operator">and</span> c<span class="token punctuation">.</span>tid <span class="token operator">=</span> t<span class="token punctuation">.</span>tid

</code></pre> 
<h6><a id="_126"></a>显示结果</h6> 
<p><img src="https://images2.imgbox.com/59/4d/Ne22n3Xc_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__131"></a>2. 索引</h3> 
<h4><a id="21__133"></a>2.1 什么是索引</h4> 
<p>数据库索引是一种数据结构，用于提高数据库中数据表的查询性能。它是根据一个或多个列的值创建的，以便快速定位和访问数据行。</p> 
<p>索引的作用类似于书籍的目录，它可以帮助数据库快速找到存储在表中特定列或组合列上的数据。通过使用索引，数据库可以避免全表扫描，而是根据索引的值快速定位到目标数据行，从而提高查询效率。</p> 
<p>索引可以根据列的值排序，从而支持排序和范围查询。它还可以提供数据的唯一性检查，防止重复数据的插入。索引通常是在创建表的时候定义的，但也可以在表创建完成后添加和修改。</p> 
<p>然而，索引也会增加数据库的存储空间和写操作的开销。当数据经常需要更新或插入时，索引的维护成本也会增加。因此，在创建索引时需要权衡查询性能和数据修改的频率，并根据实际情况进行优化和调整。</p> 
<p>常见的索引类型包括聚集索引、非聚集索引、唯一索引、组合索引等。每种索引类型都有其适用的场景和性能特点，根据具体的查询需求和数据访问模式选择合适的索引策略非常重要。</p> 
<h4><a id="22__145"></a>2.2 为什么要使用索引</h4> 
<p>索引就是根据表中的一列或若干列按照一定顺序建立的列值与记录行之间的对应关系表，实质上是一张描述索引列的列值与原表中记录行之间一 一对应关系的有序表。</p> 
<p>索引是 MySQL 中十分重要的数据库对象，是数据库性能调优技术的基础，常用于实现数据的快速检索。</p> 
<p>在 MySQL 中，通常有以下两种方式访问数据库表的行数据：</p> 
<p><strong>1) 顺序访问</strong></p> 
<p>顺序访问是在表中实行全表扫描，从头到尾逐行遍历，直到在无序的行数据中找到符合条件的目标数据。</p> 
<p>顺序访问实现比较简单，但是当表中有大量数据的时候，效率非常低下。例如，在几千万条数据中查找少量的数据时，使用顺序访问方式将会遍历所有的数据，花费大量的时间，显然会影响数据库的处理性能。</p> 
<p><strong>2) 索引访问</strong></p> 
<p>索引访问是通过遍历索引来直接访问表中记录行的方式。</p> 
<p>使用这种方式的前提是对表建立一个索引，在列上创建了索引之后，查找数据时可以直接根据该列上的索引找到对应记录行的位置，从而快捷地查找到数据。索引存储了指定列数据值的指针，根据指定的排序顺序对这些指针排序。</p> 
<blockquote> 
 <p>简而言之，不使用索引，MySQL 就必须从第一条记录开始读完整个表，直到找出相关的行。表越大，查询数据所花费的时间就越多。如果表中查询的列有一个索引，MySQL 就能快速到达一个位置去搜索数据文件，而不必查看所有数据，这样将会节省很大一部分时间。</p> 
</blockquote> 
<h4><a id="23__169"></a>2.3 索引的优缺点</h4> 
<h5><a id="_171"></a>优点</h5> 
<ol><li>提高查询性能：索引可以减少数据查询的时间复杂度，通过快速定位到具有特定值的数据行，而不需要扫描整个数据表。索引使得数据库可以更快地响应查询请求，提高了查询的效率。</li><li>加快排序和范围查询：索引可以根据列的值进行排序，从而加速排序操作。它还可以通过定位到某个范围内的数据行，使得范围查询更加高效。</li><li>降低系统资源消耗：通过使用索引，数据库可以减少执行查询所需的资源消耗，例如CPU计算时间和磁盘I/O操作次数。这样可以让数据库系统更有效地利用资源，提高整体性能和吞吐量。</li><li>提供唯一性约束：索引可以用于实施唯一性约束，防止重复数据的插入。通过在唯一索引上添加约束，可以保证数据的一致性和完整性。</li><li>改善并发性能：索引可以提供更细粒度的数据访问控制，减少并发操作之间的竞争，从而提高数据库的并发性能。例如，在查询条件中使用索引，可以减少锁冲突和阻塞情况的发生。</li></ol> 
<h5><a id="_179"></a>缺点</h5> 
<ol><li>提高查询性能：索引可以减少数据查询的时间复杂度，通过快速定位到具有特定值的数据行，而不需要扫描整个数据表。索引使得数据库可以更快地响应查询请求，提高了查询的效率。</li><li>加快排序和范围查询：索引可以根据列的值进行排序，从而加速排序操作。它还可以通过定位到某个范围内的数据行，使得范围查询更加高效。</li><li>降低系统资源消耗：通过使用索引，数据库可以减少执行查询所需的资源消耗，例如CPU计算时间和磁盘I/O操作次数。这样可以让数据库系统更有效地利用资源，提高整体性能和吞吐量。</li><li>提供唯一性约束：索引可以用于实施唯一性约束，防止重复数据的插入。通过在唯一索引上添加约束，可以保证数据的一致性和完整性。</li><li>改善并发性能：索引可以提供更细粒度的数据访问控制，减少并发操作之间的竞争，从而提高数据库的并发性能。例如，在查询条件中使用索引，可以减少锁冲突和阻塞情况的发生。</li></ol> 
<h4><a id="24__187"></a>2.4 什么时候使用索引</h4> 
<ol><li>提高查询性能：索引可以减少数据查询的时间复杂度，通过快速定位到具有特定值的数据行，而不需要扫描整个数据表。索引使得数据库可以更快地响应查询请求，提高了查询的效率。</li><li>加快排序和范围查询：索引可以根据列的值进行排序，从而加速排序操作。它还可以通过定位到某个范围内的数据行，使得范围查询更加高效。</li><li>降低系统资源消耗：通过使用索引，数据库可以减少执行查询所需的资源消耗，例如CPU计算时间和磁盘I/O操作次数。这样可以让数据库系统更有效地利用资源，提高整体性能和吞吐量。</li><li>提供唯一性约束：索引可以用于实施唯一性约束，防止重复数据的插入。通过在唯一索引上添加约束，可以保证数据的一致性和完整性。</li><li>改善并发性能：索引可以提供更细粒度的数据访问控制，减少并发操作之间的竞争，从而提高数据库的并发性能。例如，在查询条件中使用索引，可以减少锁冲突和阻塞情况的发生。</li></ol> 
<h4><a id="25__195"></a>2.5 索引什么情况下会失效</h4> 
<ul><li> <p>like以通配符%开头索引失效</p> </li><li> <p>当全表扫描比走索引查询的快的时候，会使用全表扫描，而不走索引</p> </li><li> <p>字符串不加单引号索引会失效</p> </li><li> <p>where中索引列使用了函数（例如substring字符串截取函数）</p> </li><li> <p>where中索引列有运算（用了&lt; or &gt; 右边的索引会失效，用&lt;= or &gt;= 索引不会失效）</p> </li><li> <p>is null可以走索引，is not null无法使用索引（取决于某一列的具体情况）</p> </li><li> <p>复合索引没有用到左列字段（最左前缀法则，如果没用用到最左列索引，或中间跳过了某列有索引的列，索引会部分失效）</p> </li><li> <p>条件中有or，前面的列有索引，后面的列没有，索引会失效。想让索引生效，只能将or条件中的每个列都加上索引</p> </li></ul> 
<h4><a id="26__213"></a>2.6 索引的分类</h4> 
<p>MySQL索引分为普通索引、唯一索引、主键索引、组合索引、全文索引。索引不会包含有null值的列，索引项可以为null（唯一索引、组合索引等），但是只要列中有null值就不会被包含在索引中。</p> 
<h5><a id="261__217"></a>2.6.1 普通索引</h5> 
<h6><a id="_219"></a>创建语法</h6> 
<pre><code class="prism language-sql"> <span class="token keyword">create</span> <span class="token keyword">index</span> index_name <span class="token keyword">on</span> <span class="token keyword">table</span><span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span>；
</code></pre> 
<h6><a id="_225"></a>修改表结构方式添加索引</h6> 
<pre><code class="prism language-sql"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="_231"></a>删除索引</h6> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> <span class="token keyword">table</span>
</code></pre> 
<h6><a id="_237"></a>案例</h6> 
<p>我事先创建了一个t_log表，并插入了18000多条数据</p> 
<p>未使用索引前查询</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_log <span class="token keyword">where</span> moduleid<span class="token operator">=</span><span class="token string">'200001'</span>
</code></pre> 
<p>结果</p> 
<p><img src="https://images2.imgbox.com/75/9b/jxrbpamv_o.png" alt="在这里插入图片描述"></p> 
<p>创建索引</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_moduleid <span class="token keyword">on</span> t_log<span class="token punctuation">(</span>moduleid<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d6/14/DL1bfhZ9_o.png" alt="在这里插入图片描述"></p> 
<p>创建索引后的查询</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_log <span class="token keyword">where</span> moduleid<span class="token operator">=</span><span class="token string">'200001'</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/59/b8/rqsQ5vkC_o.png" alt="在这里插入图片描述"></p> 
<p><strong>总结</strong>：创建索引前后的一个查询速度明显有差距，明显创建索引后的速度更快，但是我们不能忽略创建索引的时间</p> 
<h5><a id="262_272"></a>2.6.2.唯一索引</h5> 
<p>唯一索引与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。</p> 
<pre><code>CREATE UNIQUE INDEX indexName ON table(column(length))
</code></pre> 
<h5><a id="263_282"></a>2.6.3.主键索引</h5> 
<p>主键索引是一种特殊的唯一索引，一个表只能有一个主键，不允许有空值。简单来说：主键索引是加速查询 + 列值唯一（不可以有null）+ 表中只有一个。</p> 
<pre><code>CREATE TABLE mytable( 
	ID INT NOT NULL, 
	username VARCHAR(16) NOT NULL, 
	PRIMARY KEY(ID) 
);
</code></pre> 
<h5><a id="264_296"></a>2.6.4.组合索引</h5> 
<p>组合索引指在多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。使用组合索引时遵循最左前缀集合。</p> 
<pre><code>ALTER TABLE `table` ADD INDEX name_city_age (name,city,age);
</code></pre> 
<h5><a id="265_306"></a>2.6.5.全文索引</h5> 
<ul><li><strong>概念</strong></li></ul> 
<p>​ 全文索引主要用来查找文本中的关键字，而不是直接与索引中的值相比较。fulltext索引跟其它索引大不相同，它更像是一个搜索引擎，而不是简单的where语句的参数匹配。</p> 
<p>fulltext索引配合match against操作使用，而不是一般的where语句加like。它可以在create table，alter table ，create index使用，不过目前只有char、varchar，text 列上可以创建全文索引。</p> 
<p>值得一提的是，在数据量较大时候，现将数据放入一个没有全局索引的表中，然后再用CREATE index创建fulltext索引，要比先为一张表建立fulltext然后再将数据写入的速度快很多。</p> 
<ul><li><strong>版本支持</strong></li></ul> 
<p>Mysql 5.6之前版本，只有MyISAM支持全文索引，5.6之后，Innodb和MyISAM均支持全文索引。另外，只有字段的数据类型为 char、varchar、text 及其系列才可以建全文索引。</p> 
<h4><a id="3__322"></a>3. 数据备份与还原</h4> 
<h5><a id="31__324"></a>3.1 什么是数据备份与还原</h5> 
<p>数据备份与还原是指将重要数据从一个存储设备复制到另一个存储设备，并在需要时将备份的数据恢复到原始设备的过程。</p> 
<p>数据备份是为了防止意外数据丢失或数据损坏而采取的预防措施。通过备份，可以创建数据的副本，以便在发生以下情况时进行恢复：</p> 
<ol><li>硬件故障：当计算机硬件（如硬盘、SSD）发生故障时，备份文件可以用来恢复数据。</li><li>数据丢失或意外删除：当用户不小心删除了重要文件或数据丢失时，可以从备份中恢复数据。</li><li>恶意软件攻击：恶意软件（如病毒、勒索软件）可能会损坏或删除数据，备份可以保护数据免受这些攻击。</li></ol> 
<p>数据还原是指将备份的数据恢复到原始设备的过程。当原始数据丢失或损坏时，可以使用备份数据还原到相同的设备，以便恢复丢失的文件和数据。</p> 
<h5><a id="32__336"></a>3.2 为什么要数据备份与还原</h5> 
<ol><li>数据恢复：数据备份提供了一种紧急恢复数据的手段。当数据丢失、受损、被删除或遭受其他意外事件时，可以通过还原备份数据来恢复原始数据，避免因此造成的数据丢失和业务中断。</li><li>硬件故障应对：备份数据可以在硬件故障时提供保护，例如当硬盘崩溃、SSD损坏或服务器发生故障时，可以使用备份数据来恢复丢失的文件和数据。</li><li>恶意攻击应对：备份数据可以作为应对恶意软件（如病毒、勒索软件）攻击的重要手段。如果数据被感染、加密或破坏，可以通过还原备份数据来恢复原始数据并恢复受损的系统。</li><li>人为错误恢复：当用户不小心删除重要文件或者数据受到意外修改时，备份数据可以提供一个补救措施，让用户可以轻松恢复被删除或修改的数据。</li><li>数据迁移：备份数据可以用于数据迁移或转移。当需要更换或升级计算机设备、迁移到新的服务器、更换存储介质等时，备份数据可以方便地将数据迁移到新设备或存储介质上。</li></ol> 
<h5><a id="33__344"></a>3.3 数据备份与还原的操作</h5> 
<h6><a id="331__346"></a>3.3.1 导出</h6> 
<ul><li>选择导出的数据表或数据库右击，选择转储SQL文件，在选择结构和数据</li></ul> 
<p><img src="https://images2.imgbox.com/19/a8/WUGfTqin_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/cd/f7/jkLYJYrm_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/50/20/l05MrpwV_o.png" alt="在这里插入图片描述"></p> 
<ul><li>使用DOM命令实现数据导出</li></ul> 
<p>找到安装mysql的文件夹下的bin文件夹，在该文件目录下输入cmd以管理员的身份运行终端，输入指定代码实现数据导出。</p> 
<p><img src="https://images2.imgbox.com/c7/97/UFgFx72v_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/3b/63/oJORlCzn_o.png" alt="在这里插入图片描述"></p> 
<p>这种导出的速度1s不到，速度更快。</p> 
<ul><li>使用sql语句</li></ul> 
<p>语句</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'&lt;文件路径&gt;'</span>
</code></pre> 
<p>案例</p> 
<pre><code class="prism language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_log <span class="token keyword">into</span> <span class="token keyword">outfile</span> <span class="token string">'C：123456.sql'</span>
</code></pre> 
<p>这种方式和上面那种速度一样</p> 
<p>执行前</p> 
<p><img src="https://images2.imgbox.com/25/66/7BkpJdYw_o.png" alt="在这里插入图片描述"></p> 
<p>执行后</p> 
<p><img src="https://images2.imgbox.com/9b/53/fJAn9pYC_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="332__397"></a>3.3.2 导入</h6> 
<ul><li>先创建对应好的数据库和数据表再导入数据</li></ul> 
<p><img src="https://images2.imgbox.com/d1/1d/c4pgEZKm_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/2e/cd/MW2MstsM_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/2e/ef/D9udPHBB_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/42/d7/g8HIe83a_o.png" alt="在这里插入图片描述"></p> 
<p>这种导入方式如果数据量很大的话会影响效率</p> 
<ul><li>使用DOM命令子在终端实现数据导入</li></ul> 
<p><img src="https://images2.imgbox.com/9b/4e/eaUe6lFW_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/cd/81/DBavn6Ka_o.png" alt="在这里插入图片描述"></p> 
<p>这种方式比上面的那种方式更快捷</p> 
<ul><li>使用sql语句</li></ul> 
<pre><code class="prism language-sql">
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">infile</span> <span class="token string">''</span><span class="token operator">&lt;</span>文件路径<span class="token operator">&gt;</span>' <span class="token keyword">into</span> <span class="token keyword">table</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>ip<span class="token punctuation">,</span>userid<span class="token punctuation">,</span>moduleid<span class="token punctuation">,</span>content<span class="token punctuation">,</span>createdate<span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">--字段名</span>
</code></pre> 
<h3><a id="_436"></a>结束语</h3> 
<p>希望对大家有帮助，感谢老铁三连。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8f584494f6d7bbfd573bcbf64b522eb4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">jquery和php json字符串转数组对象 和 数组对象转json字符串</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/245bc26e74e30ef08cc383e19358ebd4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nvidia-smi命令详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>