<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>react-native 遇到的错误 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="react-native 遇到的错误" />
<meta property="og:description" content="ReferenceError: Can&#39;t find variable: __fbBatchedBridge... react-native启动用来做JavaScript的代码的服务，是本地的服务，App默认访问的host地址是localhost,运行到真实的设备上面的时候无法访问react-native服务,因此会出现上面的错误。
Android解决方案: 对adb的server设置反向代理
adb reverse tcp:8081 tcp:8081
更改App内的服务地址 * 摇晃手机
* 点击菜单键 * 在电脑上面运行命令 &gt;adb shell input keyevent 82
在dev setting里面即可设置。 ios解决方案: 在AppDelegate.m中修改jsCodeLocation： ` ..... jsCodeLocation = [NSURL URLWithString:@&#34;http://192.168.31.191:8081/index.ios.bundle?platform=ios&amp;dev=true&#34;]; .... `
react-native start 错误 错误信息：
ERROR: Unknown option --no-pretty ERROR: Unknown option --no-pretty Watchman: watchman--no-pretty get-sockname returned with exit code 1 ERROR: Unknown option --no-pretty ERROR watchman--no-pretty get-sockname returned with exit code 1 ERROR: Unknown option --no-pretty Error: watchman--no-pretty get-sockname returned with exit code 1 ERROR: Unknown option --no-pretty at ChildProcess." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/5fe396090591bf20a6c81f113207813e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-07-14T10:16:51+08:00" />
<meta property="article:modified_time" content="2017-07-14T10:16:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">react-native 遇到的错误</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="articleHeader0" style="font-weight:500; line-height:1.2; color:rgb(51,51,51); margin:1.5em 0px 0px; font-size:1.75em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); padding-bottom:10px; orphans:2; widows:2"> ReferenceError: Can't find variable: __fbBatchedBridge...</h3> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> react-native启动用来做JavaScript的代码的服务，是本地的服务，App默认访问的host地址是<code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>localhost</code>,运行到真实的设备上面的时候无法访问react-native服务,因此会出现上面的错误。</p> 
<h6 style="font-weight:500; line-height:1.2; color:rgb(51,51,51); margin:1.5em 0px; font-size:1em; orphans:2; widows:2"> Android解决方案:</h6> 
<ol style="margin:1.5em 0px 1.5em 3em; padding-left:0px; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"><li style="margin:0.3em 0px"> <p style="margin-top:0px; margin-bottom:0px">对adb的server设置反向代理</p> </li></ol> 
<blockquote style="padding:10px 20px; margin:1.5em 0px; font-size:14px; border-left-width:2px; border-left-style:solid; border-left-color:rgb(0,154,97); background-color:rgb(246,246,246); color:rgb(85,85,85); orphans:2; widows:2"> 
 <p style="margin-top:0px; margin-bottom:0px">adb reverse tcp:8081 tcp:8081</p> 
</blockquote> 
<ol style="margin:1.5em 0px 1.5em 3em; padding-left:0px; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"><li style="margin:0.3em 0px"> <p style="margin-top:0px; margin-bottom:0px">更改App内的服务地址 * 摇晃手机</p> </li></ol> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2">  * 点击菜单键<br style="">  * 在电脑上面运行命令<br style="">    &gt;adb shell input keyevent 82</p> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 在<code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>dev setting</code>里面即可设置。<br style="">    </p> 
<h6 style="font-weight:500; line-height:1.2; color:rgb(51,51,51); margin:1.5em 0px; font-size:1em; orphans:2; widows:2">  ios解决方案:</h6> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2">  在<code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>AppDelegate.m</code>中修改<code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>jsCodeLocation</code>：<br style="">  <code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>`</code><br style="">  .....<br style="">  jsCodeLocation = [NSURL URLWithString:@"http://192.168.31.191:8081/index.ios.bundle?platform=ios&amp;dev=true"];<br style="">  ....<br style="">  <code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>`</code></p> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2">  </p> 
<h3 id="articleHeader1" style="font-weight:500; line-height:1.2; color:rgb(51,51,51); margin:1.5em 0px 0px; font-size:1.75em; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(238,238,238); padding-bottom:10px; orphans:2; widows:2"> react-native start 错误</h3> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 错误信息：</p> 
<pre class="hljs http" style="overflow:auto; font-family:'Source Code Pro',Consolas,Menlo,Monaco,'Courier New',monospace; font-size:0.93em; padding:1em; margin-bottom:1.5em; line-height:1.45; word-break:break-all; word-wrap:break-word; color:rgb(51,51,51); border:none; max-height:35em; position:relative; orphans:2; widows:2; margin-top:0px!important"><code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:1em; padding:0px; color:inherit; background:none; white-space:inherit'><span class="hljs-attribute" style="color:rgb(0,0,128)">ERROR</span>: Unknown option --no-pretty

<span class="http" style=""><span class="hljs-attribute" style="color:rgb(0,0,128)">ERROR</span>: Unknown option --no-pretty

<span class="dsconfig" style=""><span class="hljs-string" style="color:rgb(221,17,68)">Watchman:</span>  <span class="hljs-string" style="color:rgb(221,17,68)">watchman-</span>-<span class="hljs-string" style="color:rgb(221,17,68)">no-pretty </span><span class="hljs-built_in" style="color:rgb(0,134,179)">get-sockname</span> <span class="hljs-string" style="color:rgb(221,17,68)">returned </span><span class="hljs-string" style="color:rgb(221,17,68)">with </span><span class="hljs-string" style="color:rgb(221,17,68)">exit </span><span class="hljs-string" style="color:rgb(221,17,68)">code </span>1 <span class="hljs-string" style="color:rgb(221,17,68)">ERROR:</span> <span class="hljs-string" style="color:rgb(221,17,68)">Unknown </span><span class="hljs-string" style="color:rgb(221,17,68)">option </span><span class="hljs-built_in" style="color:rgb(0,134,179)">--no-pretty</span>

 <span class="hljs-string" style="color:rgb(221,17,68)">ERROR </span> <span class="hljs-string" style="color:rgb(221,17,68)">watchman-</span>-<span class="hljs-string" style="color:rgb(221,17,68)">no-pretty </span><span class="hljs-built_in" style="color:rgb(0,134,179)">get-sockname</span> <span class="hljs-string" style="color:rgb(221,17,68)">returned </span><span class="hljs-string" style="color:rgb(221,17,68)">with </span><span class="hljs-string" style="color:rgb(221,17,68)">exit </span><span class="hljs-string" style="color:rgb(221,17,68)">code </span>1 <span class="hljs-string" style="color:rgb(221,17,68)">ERROR:</span> <span class="hljs-string" style="color:rgb(221,17,68)">Unknown </span><span class="hljs-string" style="color:rgb(221,17,68)">option </span><span class="hljs-built_in" style="color:rgb(0,134,179)">--no-pretty</span>

<span class="hljs-string" style="color:rgb(221,17,68)">Error:</span> <span class="hljs-string" style="color:rgb(221,17,68)">watchman-</span>-<span class="hljs-string" style="color:rgb(221,17,68)">no-pretty </span><span class="hljs-built_in" style="color:rgb(0,134,179)">get-sockname</span> <span class="hljs-string" style="color:rgb(221,17,68)">returned </span><span class="hljs-string" style="color:rgb(221,17,68)">with </span><span class="hljs-string" style="color:rgb(221,17,68)">exit </span><span class="hljs-string" style="color:rgb(221,17,68)">code </span>1 <span class="hljs-string" style="color:rgb(221,17,68)">ERROR:</span> <span class="hljs-string" style="color:rgb(221,17,68)">Unknown </span><span class="hljs-string" style="color:rgb(221,17,68)">option </span><span class="hljs-built_in" style="color:rgb(0,134,179)">--no-pretty</span>

    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">ChildProcess.</span>&lt;<span class="hljs-string" style="color:rgb(221,17,68)">anonymous&gt;</span> (.../<span class="hljs-string" style="color:rgb(221,17,68)">fb-watchman/</span><span class="hljs-string" style="color:rgb(221,17,68)">index.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:198:</span><span class="hljs-string" style="color:rgb(221,17,68)">18)</span>
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">emitTwo </span>(<span class="hljs-string" style="color:rgb(221,17,68)">events.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:106:</span><span class="hljs-string" style="color:rgb(221,17,68)">13)</span>
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">ChildProcess.</span><span class="hljs-string" style="color:rgb(221,17,68)">emit </span>(<span class="hljs-string" style="color:rgb(221,17,68)">events.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:191:</span>7)
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">maybeClose </span>(<span class="hljs-string" style="color:rgb(221,17,68)">internal/</span><span class="hljs-string" style="color:rgb(221,17,68)">child_process.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:852:</span><span class="hljs-string" style="color:rgb(221,17,68)">16)</span>
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">Socket.</span>&lt;<span class="hljs-string" style="color:rgb(221,17,68)">anonymous&gt;</span> (<span class="hljs-string" style="color:rgb(221,17,68)">internal/</span><span class="hljs-string" style="color:rgb(221,17,68)">child_process.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:323:</span><span class="hljs-string" style="color:rgb(221,17,68)">11)</span>
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">emitOne </span>(<span class="hljs-string" style="color:rgb(221,17,68)">events.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:96:</span><span class="hljs-string" style="color:rgb(221,17,68)">13)</span>
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">Socket.</span><span class="hljs-string" style="color:rgb(221,17,68)">emit </span>(<span class="hljs-string" style="color:rgb(221,17,68)">events.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:188:</span>7)
    <span class="hljs-string" style="color:rgb(221,17,68)">at </span><span class="hljs-string" style="color:rgb(221,17,68)">Pipe.</span><span class="hljs-string" style="color:rgb(221,17,68)">_handle.</span><span class="hljs-string" style="color:rgb(221,17,68)">close </span>[<span class="hljs-string" style="color:rgb(221,17,68)">as </span><span class="hljs-string" style="color:rgb(221,17,68)">_onclose]</span> (<span class="hljs-string" style="color:rgb(221,17,68)">net.</span><span class="hljs-string" style="color:rgb(221,17,68)">js:492:</span><span class="hljs-string" style="color:rgb(221,17,68)">12)</span></span></span></code></pre> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 解决方法：<br style=""> <code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>npm</code>下面的包也有watchman,如果安装了先卸载</p> 
<blockquote style="padding:10px 20px; margin:1.5em 0px; font-size:14px; border-left-width:2px; border-left-style:solid; border-left-color:rgb(0,154,97); background-color:rgb(246,246,246); color:rgb(85,85,85); orphans:2; widows:2"> 
 <p style="margin-top:0px; margin-bottom:0px">npm r -g watchman </p> 
</blockquote> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 重新安装<code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>watchman</code>:</p> 
<pre class="hljs mipsasm" style="overflow:auto; font-family:'Source Code Pro',Consolas,Menlo,Monaco,'Courier New',monospace; font-size:0.93em; padding:1em; margin-bottom:1.5em; line-height:1.45; word-break:break-all; word-wrap:break-word; color:rgb(51,51,51); border:none; max-height:35em; position:relative; orphans:2; widows:2; margin-top:0px!important"><code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:1em; padding:0px; color:inherit; background:none; white-space:inherit'><span class="hljs-keyword" style="font-weight:bold">brew </span>uninstall watchman 
<span class="hljs-keyword" style="font-weight:bold">brew </span>link pcre 
<span class="hljs-keyword" style="font-weight:bold">brew </span><span class="hljs-keyword" style="font-weight:bold">install </span>--HEAD watchman</code></pre> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 如果出现下面的提示错误:</p> 
<pre class="hljs subunit" style="overflow:auto; font-family:'Source Code Pro',Consolas,Menlo,Monaco,'Courier New',monospace; font-size:0.93em; padding:1em; margin-bottom:1.5em; line-height:1.45; word-break:break-all; word-wrap:break-word; color:rgb(51,51,51); border:none; max-height:35em; position:relative; orphans:2; widows:2; margin-top:0px!important"><code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:1em; padding:0px; color:inherit; background:none; white-space:inherit'><span class="hljs-keyword" style="font-weight:bold">Error: </span>The `brew link` step did not complete successfully
brew link --overwrite watchman
......</code></pre> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 直接运行命令:</p> 
<blockquote style="padding:10px 20px; margin:1.5em 0px; font-size:14px; border-left-width:2px; border-left-style:solid; border-left-color:rgb(0,154,97); background-color:rgb(246,246,246); color:rgb(85,85,85); orphans:2; widows:2"> 
 <p style="margin-top:0px; margin-bottom:0px">brew link --overwrite watchman</p> 
</blockquote> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 出现<span style="">Linking</span>创建的信息:</p> 
<pre class="hljs awk" style="overflow:auto; font-family:'Source Code Pro',Consolas,Menlo,Monaco,'Courier New',monospace; font-size:0.93em; padding:1em; margin-bottom:1.5em; line-height:1.45; word-break:break-all; word-wrap:break-word; color:rgb(51,51,51); border:none; max-height:35em; position:relative; orphans:2; widows:2; margin-top:0px!important"><code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:1em; padding:0px; color:inherit; background:none; white-space:initial; word-break:break-word'>Linking <span class="hljs-regexp" style="color:rgb(0,153,38)">/usr/</span>local<span class="hljs-regexp" style="color:rgb(0,153,38)">/Cellar/</span>watchman<span class="hljs-regexp" style="color:rgb(0,153,38)">/HEAD-bbd5957... 4 symlinks created</span></code></pre> 
<p style="margin-top:1.5em; margin-bottom:1.5em; color:rgb(51,51,51); font-size:14px; orphans:2; widows:2"> 如果出现权限不足的情况,可以运行命令:</p> 
<blockquote style="padding:10px 20px; margin:1.5em 0px; font-size:14px; border-left-width:2px; border-left-style:solid; border-left-color:rgb(0,154,97); background-color:rgb(246,246,246); color:rgb(85,85,85); orphans:2; widows:2"> 
 <p style="margin-top:0px; margin-bottom:0px">sudo chown -R <code style='font-family:"Source Code Pro",Consolas,Menlo,Monaco,"Courier New",monospace; font-size:0.93em; padding:2px 4px; color:rgb(199,37,78); background-color:rgb(249,242,244)'>whoami</code> /usr/local</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/88738f71fd63f927448512b4f433fff6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ffmpeg查看视频信息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ab20bcec6bcc01ac68142caf5c6846aa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">乐观锁和悲观锁介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>