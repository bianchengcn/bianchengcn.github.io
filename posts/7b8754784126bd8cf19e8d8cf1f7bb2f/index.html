<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Visual Studio （2022）安装配置pthread.h多线程库 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Visual Studio （2022）安装配置pthread.h多线程库" />
<meta property="og:description" content="各位好，之前尝试用DEVC&#43;&#43;编写多线程库问题时遇到报错，然后发现解决不了后转战Visual Studio。顺带分享一下安装方法。
首先是pthread的下载网站：https://www.mirrorservice.org/sites/sourceware.org/pub/pthreads-win32/
选择最新的（最下面）那个版本下载。
Windows选下面那个 解压完成后我们会得到三个文件夹，这里我们只用到第一个（Pre-built.2）。
接着我们打开Visual Studio，新建一个项目，然后再新建项目的解决方案资源管理器中对应的项目那里点击右键-&gt;属性。
然后再配置属性-&gt;VC&#43;&#43;目录-&gt;常规中的包含目录和库目录中，分别添加我们刚才解压出来文件（Pre-built.2）中的include和lib目录地址。（包含目录添加include，库目录添加lib）具体操作如下：
库目录与包含目录的操作是一致的，这里不再演示，但要注意lib中含有两个文件夹，分别是X64和X86，这个要看自己电脑实际情况。
然后在链接器-&gt;输入-&gt;附加依赖项一栏中和刚才一样打开，在上面一栏中填入pthreadVC2.lib，然后确定。
这里我运行程序报了两个错，一是提示找不到pthreadVC2.dll，二是提示timespec”;”struct”类型重定义。我们一个一个解决。
一的问题在pthreadVC2.dll文件的定位，为了方便我们直接把pthreadVC2.dll复制到项目的Debug文件夹中。（pthreadVC2.dll位于pthreads-w32-2-9-1-release\Pre-built.2\dll\x64，这里也要根据自己电脑选择x86还是x64）
Debug位于你创建的项目文件夹中。
Debug位置 第二个问题解决起来很简单，我们先在源程序中添加头文件#include &lt;pthread.h&gt;然后按住Ctrl鼠标左键单击&lt;pthread.h&gt;（这个头文件会变成一个超链接，我们就可以进入到头文件代码段）
然后在pthread.h加入这段代码：
#define HAVE_STRUCT_TIMESPEC
完成就可以成功运行啦。
以上，谢谢阅读，感谢你的时间。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/7b8754784126bd8cf19e8d8cf1f7bb2f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-26T20:22:36+08:00" />
<meta property="article:modified_time" content="2023-06-26T20:22:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Visual Studio （2022）安装配置pthread.h多线程库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="172" src="https://images2.imgbox.com/4a/6d/mUklksrk_o.png" width="172"></p> 
<hr> 
<p>各位好，之前尝试用DEVC++编写多线程库问题时遇到报错，然后发现解决不了后转战Visual Studio。顺带分享一下安装方法。</p> 
<p>首先是pthread的下载网站：<a href="https://www.mirrorservice.org/sites/sourceware.org/pub/pthreads-win32/" rel="nofollow" title="https://www.mirrorservice.org/sites/sourceware.org/pub/pthreads-win32/">https://www.mirrorservice.org/sites/sourceware.org/pub/pthreads-win32/</a></p> 
<p>选择最新的（最下面）那个版本下载。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="61" src="https://images2.imgbox.com/fd/e7/E9mEuHPM_o.png" width="492"> 
  <figcaption>
    Windows选下面那个 
  </figcaption> 
 </figure> 
</div> 
<p> 解压完成后我们会得到三个文件夹，这里我们只用到第一个（Pre-built.2）。</p> 
<p class="img-center"><img alt="" height="111" src="https://images2.imgbox.com/a1/5c/82J81NtM_o.png" width="556"></p> 
<p> 接着我们打开Visual Studio，新建一个项目，然后再新建项目的解决方案资源管理器中对应的项目那里点击右键-&gt;属性。</p> 
<p class="img-center"><img alt="" height="557" src="https://images2.imgbox.com/9a/f2/lu1XBVi8_o.png" width="407"></p> 
<p>然后再配置属性-&gt;VC++目录-&gt;常规中的包含目录和库目录中，分别添加我们刚才解压出来文件（Pre-built.2）中的include和lib目录地址。（<span style="color:#fe2c24;"><strong>包含目录添加include，库目录添加lib</strong></span>）具体操作如下：</p> 
<p class="img-center"><img alt="" height="398" src="https://images2.imgbox.com/fb/5e/1Eld3Gzx_o.png" width="583"></p> 
<p class="img-center"><img alt="" height="58" src="https://images2.imgbox.com/76/d9/7ekOAMEB_o.png" width="515"></p> 
<p class="img-center"><img alt="" height="319" src="https://images2.imgbox.com/27/03/aDySB8Ly_o.png" width="366"></p> 
<p class="img-center"><img alt="" height="325" src="https://images2.imgbox.com/e2/e7/0ScUo7yn_o.png" width="494"></p> 
<p>库目录与包含目录的操作是一致的，这里不再演示，但要注意lib中含有两个文件夹，分别是X64和X86，这个要看自己电脑实际情况。</p> 
<p>然后在链接器-&gt;输入-&gt;附加依赖项一栏中和刚才一样打开，在上面一栏中填入pthreadVC2.lib，然后确定。</p> 
<p class="img-center"><img alt="" height="427" src="https://images2.imgbox.com/e9/de/E3BAO6Wf_o.png" width="612"></p> 
<p class="img-center"><img alt="" height="295" src="https://images2.imgbox.com/21/d1/9ukgqzTG_o.png" width="329"></p> 
<p>这里我运行程序报了两个错，一是提示找不到pthreadVC2.dll，二是提示timespec”;”struct”类型重定义。我们一个一个解决。</p> 
<p>一的问题在pthreadVC2.dll文件的定位，为了方便我们直接把pthreadVC2.dll复制到项目的Debug文件夹中。（pthreadVC2.dll位于pthreads-w32-2-9-1-release\Pre-built.2\dll\x64，这里也要根据自己电脑选择x86还是x64）</p> 
<p>Debug位于你创建的项目文件夹中。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="236" src="https://images2.imgbox.com/83/45/NVA1hKeT_o.png" width="469"> 
  <figcaption>
    Debug位置 
  </figcaption> 
 </figure> 
</div> 
<p> 第二个问题解决起来很简单，我们先在源程序中添加头文件#include &lt;pthread.h&gt;然后按住Ctrl鼠标左键单击&lt;pthread.h&gt;（这个头文件会变成一个超链接，我们就可以进入到头文件代码段）</p> 
<p> 然后在pthread.h加入这段代码：</p> 
<blockquote> 
 <p>#define HAVE_STRUCT_TIMESPEC</p> 
</blockquote> 
<p><img alt="" height="153" src="https://images2.imgbox.com/93/77/G4MlvAdh_o.png" width="987"></p> 
<p> 完成就可以成功运行啦。</p> 
<hr> 
<p>以上，谢谢阅读，感谢你的时间。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cb32835f2e4c9a6009a2e0f09d549b50/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring创建Bean源码 - 解析配置类(一)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2cd45c5239a547ead205998a85e42042/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STM32单片机（二）STM32环境搭建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>