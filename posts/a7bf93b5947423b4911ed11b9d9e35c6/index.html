<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>手把手教你用VUE写个例子访问后端WebApi的接口获取数据并显示出来 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="手把手教你用VUE写个例子访问后端WebApi的接口获取数据并显示出来" />
<meta property="og:description" content="本文接着上文《手把手叫你用VS2019写个WebApi（可以供网页、手机、电脑三端连接使用）从网页访问后端并在后端通过EF获取sqlserver中的数据》
https://blog.csdn.net/weixin_43935474/article/details/132497256?spm=1001.2014.3001.5501
上文中介绍了如何创建一个WebApi后端接口的例子，现在来写个网页端访问这个后端接口的例子。
开发环境：Visual Studio Code
先打开VS Code，新建终端，在下方终端内先输入
cd E:\WebCode\FirstVueApp\ 表示我将在上述路径下创建项目。然后输入
npm create vue@latest 表示我要创建一个vue框架的项目，然后输入项目名，默认叫“vue-project”,也可以在此处输入自己取的项目名称
然后按下回车，会提示是否添加一些可选功能，我的选择如下：
然后点击资源管理器（界面左上角第一个菜单），点击“打开文件夹”，打开刚才创建项目的目录E:\WebCode\FirstVueApp\vue-project，即可显示项目相关的文件。
然后在终端输入npm install按下回车，再输入npm run dev按下回车，按住Ctrl键再点击Local:右侧的网址，即可打开浏览器显示这个vue项目的网站显示效果，
如下：
接些来，我们把网站页面上显示的内容改掉，换成从webapi后端访问接口拿到的数据，具体操作如下：
先关闭上述网页，然后在VS Code的终端按下Ctrl&#43;C，结束命令。
然后输入
npm install axios 安装axios，用于访问后端接口。
然后把App.vue文件里面的内容换成如下代码：
&lt;script&gt; import { ref, onMounted } from &#39;vue&#39; import axios from &#39;axios&#39; export default { setup() { const data = ref(&#39;&#39;) const fetchData = async () =&gt; { try { const response = await axios.get(&#39;https://localhost:44364/api/GetUserData&#39;) data.value = response.data } catch (error) { console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a7bf93b5947423b4911ed11b9d9e35c6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-05T17:22:19+08:00" />
<meta property="article:modified_time" content="2023-09-05T17:22:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">手把手教你用VUE写个例子访问后端WebApi的接口获取数据并显示出来</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>本文接着上文《手把手叫你用VS2019写个WebApi（可以供网页、手机、电脑三端连接使用）从网页访问后端并在后端通过EF获取sqlserver中的数据》</p> 
<p><a href="https://blog.csdn.net/weixin_43935474/article/details/132497256?spm=1001.2014.3001.5501" title="https://blog.csdn.net/weixin_43935474/article/details/132497256?spm=1001.2014.3001.5501">https://blog.csdn.net/weixin_43935474/article/details/132497256?spm=1001.2014.3001.5501</a></p> 
<p>上文中介绍了如何创建一个WebApi后端接口的例子，现在来写个网页端访问这个后端接口的例子。</p> 
<p>开发环境：Visual Studio Code</p> 
<p>先打开VS Code，新建终端，在下方终端内先输入</p> 
<pre><code class="language-javascript">cd E:\WebCode\FirstVueApp\</code></pre> 
<p>表示我将在上述路径下创建项目。然后输入</p> 
<pre><code class="language-javascript">npm create vue@latest</code></pre> 
<p>表示我要创建一个vue框架的项目，然后输入项目名，默认叫“vue-project”,也可以在此处输入自己取的项目名称</p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/fc/f9/YmT8GUWw_o.png" width="1200"></p> 
<p> 然后按下回车，会提示是否添加一些可选功能，我的选择如下：</p> 
<p><img alt="" height="579" src="https://images2.imgbox.com/d3/a6/olfz0YgY_o.png" width="701"></p> 
<p> 然后点击资源管理器（界面左上角第一个菜单），点击“打开文件夹”，打开刚才创建项目的目录E:\WebCode\FirstVueApp\vue-project，即可显示项目相关的文件。</p> 
<p>然后在终端输入npm install按下回车，再输入npm run dev按下回车，按住Ctrl键再点击Local:右侧的网址，即可打开浏览器显示这个vue项目的网站显示效果，</p> 
<p>如下：</p> 
<p><img alt="" height="1080" src="https://images2.imgbox.com/9d/7e/Slcdw4dL_o.png" width="1200"></p> 
<p>接些来，我们把网站页面上显示的内容改掉，换成从webapi后端访问接口拿到的数据，具体操作如下：</p> 
<p>先关闭上述网页，然后在VS Code的终端按下Ctrl+C，结束命令。</p> 
<p>然后输入</p> 
<pre><code class="language-javascript">npm install axios</code></pre> 
<p>安装axios，用于访问后端接口。</p> 
<p>然后把App.vue文件里面的内容换成如下代码：</p> 
<pre><code class="language-javascript">&lt;script&gt;
import { ref, onMounted } from 'vue'
import axios from 'axios'
export default {
  setup() {
    const data = ref('')
    const fetchData = async () =&gt; {
      try {
        const response = await axios.get('https://localhost:44364/api/GetUserData')
        data.value = response.data
      } catch (error) {
        console.error(error)
      }
    }
    onMounted(() =&gt; {
      fetchData()
    })
    return {
      data
    }
  }
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="greetings"&gt;
  &lt;h1&gt;恭喜你与后端webapi链接成功并从后端获取到数如下据：&lt;/h1&gt;
  &lt;h1&gt;{<!-- -->{ data }}&lt;/h1&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre> 
<p>注意：上述axios.get('https://localhost:44364/api/GetUserData')里面的网址是WebApi1项目启动后的服务器网址，你们的可能和我不一样，自己改一下。</p> 
<p>然后我们用VS打开前一篇文章里面介绍的WebApi1项目，运行起来，如下图：</p> 
<p><img alt="" height="953" src="https://images2.imgbox.com/cc/b8/pja5xcSI_o.png" width="1200"></p> 
<p> 然后回到VS Code，在终端输入npm run dev回车，启动前端。打开Local:右侧的网址，即可如下显示：</p> 
<p><img alt="" height="983" src="https://images2.imgbox.com/d9/6d/YzkWhcQw_o.png" width="1200"></p> 
<p>可以发现并没有从后端拿到数据！那我们按下F12，再按F5刷新网页，来查看问题，发现访问后端数据的请求被拦截了，如下：</p> 
<p><img alt="" height="985" src="https://images2.imgbox.com/7d/a8/SVoAwk6v_o.png" width="1200"></p> 
<p> 这是因为当我们用启动前端的时候，vue会自己启动一个端口号是5173的服务器（我的端口是5173，你们的端口可能不是这个，要根据实际情况来看），然后我们的webapi1的服务器端口是44364，那么，前端要访问44364这个端口就是跨域访问，这种情况是被后端禁止的。</p> 
<p>解决方法如下：</p> 
<p><img alt="" height="793" src="https://images2.imgbox.com/ec/21/1ZguDY7i_o.png" width="1200"></p> 
<p>在WebApi1的Web.config文件的&lt;system.webServer&gt;&lt;/system.webServer&gt;节点中添加如下代码：</p> 
<pre><code class="language-html">	&lt;httpProtocol&gt;
		&lt;customHeaders&gt;
			&lt;add name="Access-Control-Allow-Origin" value="*" /&gt;
			&lt;add name="Access-Control-Allow-Headers" value="Content-Type" /&gt;
			&lt;add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" /&gt;
		&lt;/customHeaders&gt;
	&lt;/httpProtocol&gt;</code></pre> 
<p>然后重启WebApi1项目，然后刷新前端，即可看到数据：</p> 
<p><img alt="" height="924" src="https://images2.imgbox.com/51/8c/FZrf0ucK_o.png" width="1200"></p> 
<p>搞定！</p> 
<p>然后现在我觉得显示数据的时候很丑，我想用一个比较好看的表格来显示，可以用element-plus包，这个饿了么开发的网页端组件，很漂亮，具体操作如下：</p> 
<p>在终端输入npm install element-plus --save按回车</p> 
<pre><code class="hljs">npm install element-plus --save</code></pre> 
<p>然后main.ts文件添加如下代码：</p> 
<pre><code class="hljs">import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
import App from './App.vue'


app.use(ElementPlus)</code></pre> 
<p>App.vue文件里面的&lt;template&gt;节点改成如下：</p> 
<pre><code class="hljs">&lt;template&gt;
  &lt;div class="greetings"&gt;
  &lt;h1&gt;恭喜你与后端webapi链接成功并从后端获取到数如下据：&lt;/h1&gt;
  &lt;el-table :data="data" stripe style="width: 100%"&gt;
    &lt;el-table-column prop="JobNumber" label="工号" width="180" /&gt;
    &lt;el-table-column prop="WorkeName" label="姓名" width="180" /&gt;
    &lt;el-table-column prop="Sex" label="性别" /&gt;
  &lt;/el-table&gt;
  &lt;/div&gt;
&lt;/template&gt;</code></pre> 
<p>然候npm run dev回车，就可以看到下面的效果：</p> 
<p><img alt="" height="775" src="https://images2.imgbox.com/d7/1d/CqaJBaU6_o.png" width="981"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f06ea111ba3c9d7efbe3f731f0058c7b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序隐私协议相关接口实际使用方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/60272a358643212b2b5c469722f7ae48/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Geotools对geojson的解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>