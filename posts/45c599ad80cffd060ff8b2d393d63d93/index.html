<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C Sharp编写缓和曲线计算应用程序 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C Sharp编写缓和曲线计算应用程序" />
<meta property="og:description" content="上期分享了编写C Sharp圆曲线的应用程序，那么缓和曲线计算也是必不可缺的。
与圆曲线计算一样，缓和曲线的计算依然是定义参数，计算，检核，输出；但是需要注意缓和曲线有特殊点：HY and YH两点。
计算公式：
Thyx = Xzh &#43; (Hd - Hd * Hd * Hd / (40 * R * R)); Thyy = Yzh &#43; (Hd * Hd) / (6 * R) - (Hd * Hd * Hd) / (336 * R * R * R); 依旧需要角度和弧度的相互转换（上期已经给出代码结构，这里就不作赘述。）
Console.WriteLine(&#34;请输入缓和曲线长：&#34;); double Hd = double.Parse(Console.ReadLine()); 此处定义的double HD就是我们计算中的L0。
多出的参数m,p,wet的计算公式这里也已给出。
桩位的任一点
ZH的x坐标：
ZH的y坐标：
下面是主程序：
namespace 缓和曲线计算 { class Program { public struct AtH1 { public double AtH2(double ang) { int fuhao = (int)(ang / Math." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/45c599ad80cffd060ff8b2d393d63d93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-03T21:32:42+08:00" />
<meta property="article:modified_time" content="2022-10-03T21:32:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C Sharp编写缓和曲线计算应用程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>上期分享了编写C Sharp圆曲线的应用程序，那么缓和曲线计算也是必不可缺的。</p> 
<p>与圆曲线计算一样，缓和曲线的计算依然是定义参数，计算，检核，输出；但是需要注意缓和曲线有特殊点：HY and YH两点。</p> 
<p>计算公式：</p> 
<pre><code class="language-cs">Thyx = Xzh + (Hd - Hd * Hd * Hd / (40 * R * R));
Thyy = Yzh + (Hd * Hd) / (6 * R) - (Hd * Hd * Hd) / (336 * R * R * R);</code></pre> 
<p>依旧需要角度和弧度的相互转换（上期已经给出代码结构，这里就不作赘述。）</p> 
<pre><code class="language-cs">Console.WriteLine("请输入缓和曲线长：");
double Hd = double.Parse(Console.ReadLine());</code></pre> 
<p>此处定义的double HD就是我们计算中的L0。</p> 
<p>多出的参数<span style="color:#0d0016;"><strong>m,p,wet</strong></span>的计算公式这里也已给出。</p> 
<p><img alt="m = L0/2-L0^3/240*R^3" class="mathcode" src="https://images2.imgbox.com/c4/0f/9L5Q2ng1_o.png"></p> 
<p><img alt="P = L0^2/24*R" class="mathcode" src="https://images2.imgbox.com/19/34/fhszrmvM_o.png"></p> 
<p><img alt="\beta = L0/2*R" class="mathcode" src="https://images2.imgbox.com/8e/93/5fjEWHsH_o.png"></p> 
<p>桩位的任一点</p> 
<p>ZH的x坐标：</p> 
<p><img alt="X = L0-L0^5/40*R^2*Ls^2" class="mathcode" src="https://images2.imgbox.com/4a/cb/ZzmyZgP9_o.png"></p> 
<p>ZH的y坐标：</p> 
<p><img alt="Y = L0^3/6*R*Ls-L0^7/336*R^3*Ls^3" class="mathcode" src="https://images2.imgbox.com/62/eb/LPOWzWeV_o.png"></p> 
<p>下面是主程序：</p> 
<pre><code class="language-cs">namespace 缓和曲线计算
{
    class Program
    {
        public struct AtH1  
        {
            public double AtH2(double ang)
            {
                int fuhao = (int)(ang / Math.Abs(ang));
                ang = Math.Abs(ang);
                int d = (int)ang;
                int m = ((int)(ang * 100)) - d * 100;
                double s = ang * 10000 - m * 100 - d * 10000;
                return ((d + m / 60.0 + s / 3600.0) * fuhao) / 180.0 * Math.PI;
            }
        }
        static void Main(string[] args)
        {
            double m;
            double p;
            double Thyx;
            double Thyy;
            double T;
            double L;
            double E;
            double q;
            double Kqz;
            double Tx;
            double Ty;
            double Kzh;
            double Khy;
            double Kyh;
            double Khz;
            double wet;
            AtH1 A;
            Console.WriteLine("请输入交点里程（需要输入里程与小数）：");
            double Kjd = double.Parse(Console.ReadLine());
            Console.WriteLine("请输入转角值：");
            double Aef = A.AtH2(double.Parse(Console.ReadLine()));
            Console.WriteLine("请输入曲线半径值：");
            double R = double.Parse(Console.ReadLine());
            Console.WriteLine("请输入直缓点的X坐标：");
            double Xzh = double.Parse(Console.ReadLine());
            Console.WriteLine("请输入直缓点的Y坐标：");
            double Yzh = double.Parse(Console.ReadLine());
            Console.WriteLine("请输入ZY-JD方位角：");
            double Wt = A.AtH2(double.Parse(Console.ReadLine()));
            Console.WriteLine("请输入缓和曲线长：");
            double Hd = double.Parse(Console.ReadLine());

            m = Hd / 2 - (Hd * Hd * Hd / 240 / R / R / R);
            Console.WriteLine(m);
            p = Hd * Hd / 24 / R;
            Console.WriteLine(p);
            wet = Hd * A.AtH2(180) / 2 / R / Math.PI;
            Console.WriteLine(wet);
            Console.ReadKey();
            T = (R + p) * Math.Tan(Aef / 2) + m;
            Console.WriteLine("T ={0}", T);
            L = Math.PI * R * (Aef - 2 * wet) / A.AtH2(180) + 2 * Hd;
            Console.WriteLine("L ={0}", L);
            E = (R + p) / Math.Cos(Aef / 2) - R;
            Console.WriteLine("E = {0}", E);
            q = 2 * T - L;
            Console.WriteLine("q = {0}", q);

            Kzh = Kjd - T;
            Console.WriteLine("Kzh = {0}", Kzh);
            Khy = Kzh + Hd;
            Console.WriteLine("Khy = {0}", Khy);
            Kqz = Kzh + L / 2;
            Console.WriteLine("Kqz = {0}", Kqz);
            Kyh = Kqz + L / 2;
            Console.WriteLine("Kyh = {0}", Kyh);
            Khz = Kzh + L;
            Console.WriteLine("Khz = {0}", Khz);


            Console.WriteLine("检校值{0}", Kqz + q / 2 - Kjd);
            Console.WriteLine("请输入整桩点间隔值：");
            double ZZD = double.Parse(Console.ReadLine());
            double Kjd1 = 0;
            List&lt;double&gt; 存里程 = new List&lt;double&gt;();
            for (double i = 0; i &lt; Khy; i += ZZD)
            {
                if (i &gt; Kzh)
                {
                    Kjd1 = i;
                    存里程.Count();
                }

            }
            Console.WriteLine("左幅缓和曲线共有{0}个整装点，输入计算点号", 存里程.Count);
            Console.ReadKey();
            int co = int.Parse(Console.ReadLine());
            Kjd1 = 存里程[co - 1];
            if (Kqz + q / 2 - Kjd == 0) 
            {
                Tx = Xzh + (Hd - (Hd * Hd * Hd * Hd * Hd) / (40 * R * R * (Kjd1 - Kzh)));
                Console.WriteLine("Tx(第{0}桩) = {1}", co, Tx);
                Ty = Yzh + (Hd * Hd * Hd) / (6 * R * (Kjd1 - Kzh)) - (Hd * Hd * Hd * Hd * Hd * Hd * Hd) / (336 * R * R * R * ((Kjd1 - Kzh) * (Kjd1 - Kzh) * (Kjd1 - Kzh)));
                Console.WriteLine("Ty(第{0}桩) = {1}", co, Ty);
                Console.ReadKey();
            }
            else
            {
                Console.WriteLine("里程不符合，计算超限");
                Console.ReadKey();
            }
            Thyx = Xzh + (Hd - Hd * Hd * Hd / (40 * R * R));
            Console.WriteLine("Thyx(缓圆点X)={0}", Thyx);
            Thyy = Yzh + (Hd * Hd) / (6 * R) - (Hd * Hd * Hd) / (336 * R * R * R);
            Console.WriteLine("Thyy(缓圆点X)={0}", Thyy);
            Console.ReadKey();
        }
    }
}</code></pre> 
<p>下面是结果：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/fa/b6/KZicmd6N_o.jpg"></p> 
<p>本程序由吉林建筑科技学院梁*杰老师教学授课，小编经梁*杰老师传授，进行一系列整理希望能帮助到各位测绘同学！（如有侵权请告知！！！） </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d64c0509f9808996dee11a192b47aae8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">765. 情侣牵手</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/40636559d40653cba43e601f05d834f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Maven项目中如何导入外部包（IDEA）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>