<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Discuz论坛搭建：Linux宝塔面板一键部署，固定地址畅享公网访问 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Discuz论坛搭建：Linux宝塔面板一键部署，固定地址畅享公网访问" />
<meta property="og:description" content="🌈个人主页：聆风吟
🔥系列专栏：网络奇遇记、Cpolar杂谈
🔖少年有梦不应止于心动，更要付诸行动。
文章目录 📋前言一. 安装基础环境二. 一键部署Discuz三. 安装cpolar工具四. 配置域名访问Discuz五. 固定域名公网地址六. 配置Discuz论坛📝结语 📋前言 Crossday Discuz! Board（以下简称 Discuz!）是一套通用的社区论坛软件系统，用户可以在不需要任何编程的基础上，通过简单的设置和安装，在互联网上搭建起具备完善功能、很强负载能力和可高度定制的论坛服务。
下面我们在Linux上使用宝塔面板&#43;Discuz&#43;cpolar内网穿透工具结合,搭建一套发布到互联网环境的论坛服务，无需公网IP服务器、也无需设置路由器。
一. 安装基础环境 安装PHP版本,由于Discuz支持的最高PHP7.4版本环境,我们在面板中安装PHP7.0版本,搜索PHP,即可看到,然后点击安装即可
安装一个数据库,如果已经安装,可以跳过,点击面板上数据库,点击安装
然后修改一下数据库密码,改成自己能记住的密码,用户名为root
二. 一键部署Discuz 在面板中搜索一下关键字Discuz,然后点击一键部署
设置参数,域名设置本机域名127.0.0.1,端口号可以自定义,然后设置数据库账号密码,数据库用户名和密码自己设置,点击提交,然后等待下载完成
然后我们点击面板中的网站,即可看到我们刚刚部署的站点,
接下来在面板中开放一个端口:8089
打开浏览器,使用Linux 局域网ip&#43;:8090(上面设置的端口号)进行访问,出现安装向导界面表示成功
三. 安装cpolar工具 打开宝塔终端命令窗口,使用cpolar一件安装脚本:
curl -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh | sudo bash token认证
登录cpolar官网www.cpolar.com,点击左侧的验证，查看自己的认证token，之后将token贴在命令行里
cpolar authtoken xxxxxxx 向系统添加服务
sudo systemctl enable cpolar 启动cpolar服务
sudo systemctl start cpolar 在宝塔面板中选择安全.然后开放9200端口
然后数据Linux局域网ip&#43;:9200端口即可出现cpolar管理界面
输入官网注册的账号登陆即可对隧道进行操作.
四. 配置域名访问Discuz 我们在cpolar管理界面创建一个随机的8089的隧道:
隧道名称：可自定义，注意不要重复协议：http本地地址：8089端口类型：随机域名地区：China vip 点击创建
然后打开在线隧道列表,查看创建隧道的公网地址,复制地址
打开浏览器,使用上面的公网地址访问,既然出现了欢迎页,表示成功
五. 固定域名公网地址 需升级至基础套餐或以上才支持配置固定域名
登录cpolar官网后台，点击左侧仪表盘的预留，找到保留二级子域名，为http隧道保留一个二级子域名。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f369bcf52587a0eaf4917557f7d4820d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-27T11:14:00+08:00" />
<meta property="article:modified_time" content="2024-01-27T11:14:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Discuz论坛搭建：Linux宝塔面板一键部署，固定地址畅享公网访问</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/ca/61/n0TyftuI_o.png" alt="在这里插入图片描述" width="80" height="80"><br> <font color="#2B04AD"><strong>🌈个人主页：</strong></font><a href="https://blog.csdn.net/2301_80026901?spm=1011.2415.3001.5343">聆风吟</a><br> <font color="#FF0000"><strong>🔥系列专栏：</strong></font><a href="https://blog.csdn.net/2301_80026901/category_12489432.html">网络奇遇记</a>、<a href="https://blog.csdn.net/2301_80026901/category_12495933.html">Cpolar杂谈</a><br> <font color="#16C4B4"><strong>🔖少年有梦不应止于心动，更要付诸行动。</strong></font></p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_11" rel="nofollow">📋前言</a></li><li><a href="#__20" rel="nofollow">一. 安装基础环境</a></li><li><a href="#_Discuz_37" rel="nofollow">二. 一键部署Discuz</a></li><li><a href="#_cpolar_65" rel="nofollow">三. 安装cpolar工具</a></li><li><a href="#_Discuz_115" rel="nofollow">四. 配置域名访问Discuz</a></li><li><a href="#__140" rel="nofollow">五. 固定域名公网地址</a></li><li><a href="#_Discuz_184" rel="nofollow">六. 配置Discuz论坛</a></li><li><a href="#_213" rel="nofollow">📝结语</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_11"></a>📋前言</h2> 
<p>Crossday Discuz! Board（以下简称 Discuz!）是一套通用的社区论坛软件系统，用户可以在不需要任何编程的基础上，通过简单的设置和安装，在互联网上搭建起具备完善功能、很强负载能力和可高度定制的论坛服务。</p> 
<p>下面我们在Linux上使用宝塔面板+Discuz+cpolar内网穿透工具结合,搭建一套发布到互联网环境的论坛服务，无需公网IP服务器、也无需设置路由器。</p> 
<hr> 
<br> 
<h2><a id="__20"></a>一. 安装基础环境</h2> 
<p>安装PHP版本,由于Discuz支持的最高PHP7.4版本环境,我们在面板中安装PHP7.0版本,搜索PHP,即可看到,然后点击安装即可</p> 
<p><img src="https://images2.imgbox.com/d0/cd/dUX6DPjM_o.png" alt="image-20230315114812470"></p> 
<p>安装一个数据库,如果已经安装,可以跳过,点击面板上数据库,点击安装</p> 
<p><img src="https://images2.imgbox.com/40/97/uaQrevn4_o.png" alt="image-20230314180023904"></p> 
<p>然后修改一下数据库密码,改成自己能记住的密码,用户名为root</p> 
<p><img src="https://images2.imgbox.com/2c/73/47itHHZi_o.png" alt="image-20230314180357402"></p> 
<hr> 
<br> 
<h2><a id="_Discuz_37"></a>二. 一键部署Discuz</h2> 
<p>在面板中搜索一下关键字Discuz,然后点击一键部署</p> 
<p><img src="https://images2.imgbox.com/79/3d/RC17Xq4f_o.png" alt="image-20230315132925646"></p> 
<p>设置参数,域名设置本机域名127.0.0.1,端口号可以自定义,然后设置数据库账号密码,数据库用户名和密码自己设置,点击提交,然后等待下载完成</p> 
<p><img src="https://images2.imgbox.com/89/6a/JZnjZs6X_o.png" alt="image-20230315141442776"></p> 
<p>然后我们点击面板中的网站,即可看到我们刚刚部署的站点,</p> 
<p><img src="https://images2.imgbox.com/1e/ae/qrPsJEsy_o.png" alt="image-20230315140745617"></p> 
<p>接下来在面板中开放一个端口:8089</p> 
<p><img src="https://images2.imgbox.com/d2/77/aA4YxpsZ_o.png" alt="image-20230315141732450"></p> 
<p>打开浏览器,使用Linux 局域网ip+:8090(上面设置的端口号)进行访问,出现安装向导界面表示成功</p> 
<p><img src="https://images2.imgbox.com/ec/78/fVctTtUh_o.png" alt="image-20230315141848464"></p> 
<hr> 
<br> 
<h2><a id="_cpolar_65"></a>三. 安装cpolar工具</h2> 
<p>打开宝塔终端命令窗口,使用cpolar一件安装脚本:</p> 
<pre><code class="prism language-shell"><span class="token function">curl</span> -L https://www.cpolar.com/static/downloads/install-release-cpolar.sh <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">bash</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/10/d2/Lz9CwqVM_o.png" alt="image-20230303183721806"></p> 
<p>token认证</p> 
<p>登录cpolar官网www.cpolar.com,点击左侧的<code>验证</code>，查看自己的认证token，之后将token贴在命令行里</p> 
<pre><code class="prism language-shell">cpolar authtoken xxxxxxx
</code></pre> 
<p><img src="https://images2.imgbox.com/22/ce/w4M8KbC5_o.png" alt="20230111103532"></p> 
<p>向系统添加服务</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> cpolar
</code></pre> 
<p>启动cpolar服务</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> systemctl start cpolar
</code></pre> 
<p>在宝塔面板中选择安全.然后开放9200端口</p> 
<p><img src="https://images2.imgbox.com/d7/00/Z33PnKq1_o.png" alt="image-20230303184430176"></p> 
<p>然后数据Linux局域网ip+:9200端口即可出现cpolar管理界面</p> 
<p><img src="https://images2.imgbox.com/39/8d/RlYE9Whw_o.png" alt="image-20230303184618711"></p> 
<p>输入官网注册的账号登陆即可对隧道进行操作.</p> 
<p><img src="https://images2.imgbox.com/43/c7/u3lMlO1x_o.png" alt=""></p> 
<hr> 
<br> 
<h2><a id="_Discuz_115"></a>四. 配置域名访问Discuz</h2> 
<p>我们在cpolar管理界面创建一个随机的8089的隧道:</p> 
<ul><li>隧道名称：可自定义，注意不要重复</li><li>协议：http</li><li>本地地址：8089</li><li>端口类型：随机域名</li><li>地区：China vip</li></ul> 
<p>点击创建</p> 
<p><img src="https://images2.imgbox.com/57/8e/tMODAKTF_o.png" alt="image-20230315144256453"></p> 
<p>然后打开在线隧道列表,查看创建隧道的公网地址,复制地址</p> 
<p><img src="https://images2.imgbox.com/86/92/tvwMxVpj_o.png" alt=""></p> 
<p>打开浏览器,使用上面的公网地址访问,既然出现了欢迎页,表示成功</p> 
<p><img src="https://images2.imgbox.com/fe/a7/ZKYezA5u_o.png" alt="image-20230315144954997"></p> 
<hr> 
<br> 
<h2><a id="__140"></a>五. 固定域名公网地址</h2> 
<blockquote> 
 <p>需升级至基础套餐或以上才支持配置固定域名</p> 
</blockquote> 
<p>登录<a href="https://dashboard.cpolar.com/" rel="nofollow">cpolar官网后台</a>，点击左侧仪表盘的<code>预留</code>，找到<code>保留二级子域名</code>，为http隧道保留一个二级子域名。</p> 
<ul><li><em>地区：选择服务器地区</em></li><li><em>名称：填写您想要保留的二级子域名（可自定义）</em></li><li><em>描述：即备注，可自定义填写</em></li></ul> 
<p><img src="https://images2.imgbox.com/09/88/dGB8r53O_o.png" alt="image-20230315150417685"></p> 
<p>本例保留一个名称为<code>DiscuzTest</code>的二级子域名。子域名保留成功后，我们将子域名复制下来，接下来需要将其配置绑定到隧道中去。</p> 
<p><img src="https://images2.imgbox.com/52/48/qWNZIiP2_o.png" alt="image-20230315150447911"></p> 
<p>登录cpolar web ui管理界面。点击左侧仪表盘的<code>隧道管理</code>——<code>隧道列表</code>，找到需要配置二级子域名的隧道（本例中为Discuz隧道），点击右侧的<code>编辑</code></p> 
<p><img src="https://images2.imgbox.com/8e/90/mtvAMePe_o.png" alt="image-20230315145802386"></p> 
<p>修改隧道信息，将二级子域名配置到隧道中：</p> 
<ul><li><em>域名类型：改为选择<code>二级子域名</code></em></li><li><em>Sub Domain：填写我们刚刚所保留的二级子域名（本例为<code>typechoTest</code>）</em></li></ul> 
<p>修改完成后，点击<code>更新</code></p> 
<p><img src="https://images2.imgbox.com/9c/17/d5t6iktO_o.png" alt="image-20230315150653173"></p> 
<p>隧道更新成功后，点击左侧仪表盘的<code>状态</code>——<code>在线隧道列表</code>，可以看到DiscuzTest隧道的公网地址，已经更新为二级子域名了，将公网地址复制下来。</p> 
<p><img src="https://images2.imgbox.com/d1/41/MNNsQMiR_o.png" alt="image-20230315150728034"></p> 
<p>打开浏览器，我们来测试一下访问配置成功的二级子域名，出现安装向导界面表示成功,可以正常访问。现在，我们全网唯一的私有二级子域名，就创建好了。</p> 
<p><img src="https://images2.imgbox.com/e0/ab/fhjjQfp0_o.png" alt="image-20230315151503791"></p> 
<hr> 
<br> 
<h2><a id="_Discuz_184"></a>六. 配置Discuz论坛</h2> 
<p>点击我同意后,出现提示信息说版本太老,取消即可继续安装</p> 
<p><img src="https://images2.imgbox.com/ad/76/l4EZuf3Q_o.png" alt="image-20230315151647274"></p> 
<p>点击下一步</p> 
<p><img src="https://images2.imgbox.com/e9/7a/mnzn6IS9_o.png" alt="image-20230315151742613"></p> 
<p>选择全新安装</p> 
<p><img src="https://images2.imgbox.com/f7/31/XdxnPi74_o.png" alt="image-20230315151912495"></p> 
<p>然后需要配置数据库,我们填写数据库root用户名和root的密码,然后设置管理员密码,点击下一步</p> 
<p><img src="https://images2.imgbox.com/0f/11/UyUBQgVb_o.png" alt="image-20230315152402908"></p> 
<p>然后就安装完成啦,点击访问</p> 
<p><img src="https://images2.imgbox.com/74/1f/r0Z3v6pO_o.png" alt="image-20230315152500793"></p> 
<p>然后我们已经搭建好了Discuz论坛,并且结合了cpolar映射的公网域名地址,可以远程访问啦,不受局域网络限制</p> 
<p><img src="https://images2.imgbox.com/ea/44/uyWTD6Uq_o.png" alt="image-20230315152701056"></p> 
<hr> 
<br> 
<h2><a id="_213"></a>📝结语</h2> 
<p>     今天的干货分享到这里就结束啦！如果觉得文章还可以的话，希望能给个三连支持一下，<a href="https://blog.csdn.net/2301_80026901?spm=1011.2415.3001.5343">聆风吟的主页</a>还有很多有趣的文章，欢迎小伙伴们前去点评，您的支持就是作者前进的最大动力！<br> <img src="https://images2.imgbox.com/d6/45/BYhjfNMW_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9aa52641674cb713efcf6817b13bf51b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GWAS——Genome-Wide Association Study</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0abd8f0640686925a166a5d99762e7c6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">利用python代码获取金价查询 API接口</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>