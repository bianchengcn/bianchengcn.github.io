<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java小项目实训——扑克牌 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java小项目实训——扑克牌" />
<meta property="og:description" content="项目要求： 一个窗口实现无序发放52张扑克牌；另一个窗口实现记录打出的扑克牌 Poke类 public class Poke { String name[] = { &#34;fang&#34;, &#34;hong&#34;, &#34;mei&#34;, &#34;hei&#34; }; String a[] = new String[52]; String b[] = new String[52]; String c[] = new String[13]; String d[] = new String[13]; String e[] = new String[52]; public void 生成牌() { int k = 0; for (int i = 0; i &lt; 4; i&#43;&#43;) { for (int j = 1; j &lt;= 13; j&#43;&#43;) { a[k] = name[i] &#43; j; k&#43;&#43;; } } } public void 打印牌(String[] p) { int cout = 0; for (int i = 0; i &lt; p." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/9652a33dfc8e535d1b93a18573826b77/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-09T20:55:15+08:00" />
<meta property="article:modified_time" content="2022-11-09T20:55:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java小项目实训——扑克牌</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 id="%C2%A0%E9%A1%B9%E7%9B%AE%E8%A6%81%E6%B1%82%EF%BC%9A">项目要求：</h3> 
<h3 id="%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%97%A0%E5%BA%8F%E5%8F%91%E6%94%BE52%E5%BC%A0%E6%89%91%E5%85%8B%E7%89%8C%EF%BC%9B%E5%8F%A6%E4%B8%80%E4%B8%AA%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E8%AE%B0%E5%BD%95%E6%89%93%E5%87%BA%E7%9A%84%E6%89%91%E5%85%8B%E7%89%8C">一个窗口实现无序发放52张扑克牌；另一个窗口实现记录打出的扑克牌</h3> 
<hr id="hr-toc"> 
<p style="text-align:center;"><img alt="" height="1027" src="https://images2.imgbox.com/b5/78/hIAek8jd_o.png" width="1200"></p> 
<p> <img alt="" height="1026" src="https://images2.imgbox.com/b1/d0/S1ehJOVz_o.png" width="1200"></p> 
<h3> Poke类</h3> 
<pre><code class="language-java">
public class Poke {
	String name[] = { "fang", "hong", "mei", "hei" };
	String a[] = new String[52];
	String b[] = new String[52];
	String c[] = new String[13];
	String d[] = new String[13];
	String e[] = new String[52];

	public void 生成牌() {
		int k = 0;
		for (int i = 0; i &lt; 4; i++) {
			for (int j = 1; j &lt;= 13; j++) {
				a[k] = name[i] + j;
				k++;
			}
		}
	}

	public void 打印牌(String[] p) {
		int cout = 0;
		for (int i = 0; i &lt; p.length; i++) {
			System.out.print(p[i]+"	");
			cout++;
			if (cout % 13 == 0 &amp;&amp; cout != 0) {
				System.out.println(" ");
			}
		}
	}

	public void 打乱牌() {
		int m, n;
		String flag[]= {"0"};
		System.arraycopy(a, 0, b, 0, a.length);
		for (int i = 0; i &lt; 100; i++) {
			m = (int) (Math.random() * 52);
			n = (int) (Math.random() * 52);	
			//生成随机数
			flag[0] = b[m];
			b[m] = b[n];
			b[n] = flag[0];
			//交换两个值
		}
	}

	public void 抽取牌(int startnum,int endnum) {
		for(int i=startnum,k=0;i&lt;=endnum&amp;&amp;k&lt;=12;i++,k++) {
			c[k]=b[i];
			//k的定义是为了覆盖原来c数组的内容，因为c数组的长度只有13
		}
	}

	public void 排序牌() {
		int flagk=0;
		for(int i=0;i&lt;52;i++) {
			for(int j=0;j&lt;13;j++) {
				if(a[i]==c[j]) {
					d[flagk++]=a[i];
				}	
			}
		}
	}
	
	public String[] 组合牌() {
        int flag1=0;
        int flag2=0;
        int flag3=0;
        int flag4=0;
        //因为d数组长度只有13，所以每次调用需要覆盖原来的数组
        
		抽取牌(0,12);
		排序牌();
		for(int i=0;i&lt;=12;i++) {
			e[i]=d[flag1++];
		}
		//第一次
		
		抽取牌(13,25);
		排序牌();
		for(int i=13;i&lt;=25;i++) {
			e[i]=d[flag2++];
		}	
		//第二次
		
		抽取牌(26,38);
		排序牌();
		for(int i=26;i&lt;=38;i++) {
			e[i]=d[flag3++];
		}	
		//第三次
		
		抽取牌(39,51);
		排序牌();
		for(int i=39;i&lt;=51;i++) {
			e[i]=d[flag4++];
		}
		//第四次
		return e;//返回数组
	}
	
	public static void main(String[] args) {
		Poke poke = new Poke();
		poke.生成牌();
		poke.打乱牌();
		poke.组合牌();
		poke.打印牌(poke.e);
	}
}
</code></pre> 
<h3> PokeFrame类</h3> 
<pre><code class="language-java">
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class PokeFrame extends JInternalFrame {

    JLayeredPane jp;
    JLabel jl;
    Toolkit tk;
    JButton[] jb = new JButton[13];
    JButton cp;
    int xx, yy;
    int ps = 13;
    int ceng = 2;
    int ph, pw, px, py, zw, pxd;
    String[] s = new String[52];
    String s1;
    PlayBuffer pb1;
    int index;

    public PokeFrame(int w, int h, int k, String[] f, PlayBuffer pb) {
        ImageIcon bj;
        tk = Toolkit.getDefaultToolkit();
        bj = new ImageIcon("img/bj.jpg");
        JLabel jl = new JLabel(bj);
        jl.setSize(w, h);
        jp = this.getLayeredPane();
        jp.add(jl, new Integer(-100));
        this.添加牌(w, h, 0.8, 0.6, 0.2, k, f);
        System.arraycopy(f, 0, s, 0, f.length);
        pb1 = pb;
        index = k;//记录窗口对应的玩家
    }

    public void 添加牌(int cw, int ch, double r1, double r2, double r3, int k, String[] f) {
        //r1为13张扑克牌所占窗口比例
        //r2为扑克牌的显示部分占单个牌的比例
        //r3为扑克牌上端至窗口上端的高度占窗口的比例

        double r = 134d / 201d;
        zw = (int) (cw * r1);//扑克牌占窗口的长度
        pw = (int) (zw / (r2 * 12 + 1));//单个扑克牌的宽度
        ph = (int) (pw / r);
        px = (int) (cw * (1 - r1) / 2);
        py = (int) (ch - ph - ch * r3);
        pxd = (int) (pw * r2);
        xx = (int) (cw / 2);
        yy = (int) (ch / 2);

        监听器 jt = new 监听器();
        cp = new JButton("出牌");
        cp.setBounds(50, yy - 100, 80, 50);
        jp.add(cp, new Integer(1));
        cp.setVisible(false);
        cp.addActionListener(jt);
        for (int i = 0; i &lt; 13; i++) {
            Image img = tk.getImage("img/" + f[k * 13 + i] + ".jpg");//从MyFrame类传入参数k
            img = img.getScaledInstance(pw, ph, Image.SCALE_SMOOTH);
            ImageIcon pkimg = new ImageIcon(img);
            jb[i] = new JButton(pkimg);
            jb[i].setBounds(px + pxd * i, py, pw, ph);
            jb[i].setName(f[k * 13 + i]);
            jp.add(jb[i], new Integer(i));
            jb[i].addActionListener(jt);
        }
    }

    class 监听器 implements ActionListener {

        JButton clickButton, selectButton = null;
        int n;
        int x, y, w, h;
        int x1, y1;

        public void actionPerformed(ActionEvent e) {

            if (e.getSource() == cp) {
                selectButton.setBounds(xx, yy - h, w, h);
                jp.add(selectButton, new Integer(ceng));
                selectButton = null;
                for (int i = n; i &lt; ps - 1; i++) {
                    jb[i] = jb[i + 1];
                    jb[i].setBounds(px + pxd * i, py, pw, ph);
                }
                ps--;
                ceng++;
                System.out.println("index=" + index);
                pb1.reciverPlayerNum(index);//必须先传入玩家的序号即index，若与下列reciver函数调换顺序则会出现错误
                pb1.reciver(clickButton.getName());//将点击的牌传回PlayeBuffer中
                pb1.compareNum();//比较当前回合四张牌的大小
            } else {
                if (pb1.returnNum() == index) {
                    点击牌(e);
                }//当窗口玩家与轮到的玩家相对应时才能点牌
            }
        }

        public void 点击牌(ActionEvent e) {

            for (int i = 0; i &lt; 13; i++) {
                if (e.getSource() == jb[i]) {
                    n = i;
                    clickButton = jb[i];
                    break;
                }
            }
            x = clickButton.getX();
            y = clickButton.getY();
            w = clickButton.getWidth();
            h = clickButton.getHeight();
            if (clickButton == selectButton) {
                clickButton.setBounds(x, y + 30, w, h);
                selectButton = null;
                cp.setVisible(false);
            } else {
                if (selectButton == null) {
                    clickButton.setBounds(x, y - 30, w, h);
                    selectButton = clickButton;
                    cp.setVisible(true);
                } else {
                    clickButton.setBounds(x, y - 30, w, h);
                    x1 = selectButton.getX();
                    y1 = selectButton.getY();
                    selectButton.setBounds(x1, y1 + 30, w, h);
                    selectButton = clickButton;
                    cp.setVisible(true);
                }
            }
        }
    }
}
</code></pre> 
<h3>PlayBuffer类</h3> 
<pre><code class="language-java">
import javax.swing.*;
import java.awt.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class PlayBuffer {

    JFrame jf1;
    JButton[][] jb = new JButton[14][4];
    int Player;
    int player1 = 1, player2 = 1, player3 = 1, player4 = 1;
    int flag = 0;
    int num[][] = new int[14][4];
    int rand = 0;
    boolean pd = false;

    public PlayBuffer() {
        jf1 = new JFrame("记录窗口");
        jf1.setExtendedState(JFrame.MAXIMIZED_BOTH);
        jf1.setLayout(new GridLayout(14, 4));
        jf1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Font f = new Font("宋体", Font.BOLD, 36);
        for (int i = 0; i &lt; 14; i++) {
            for (int j = 0; j &lt; 4; j++) {
                jb[i][j] = new JButton();
                jb[i][j].setFont(f);
                jf1.add(jb[i][j]);
            }
        }
        for (int j = 0; j &lt; 4; j++) {
            jb[0][j].setText("玩家" + (j + 1));
        }
        jf1.setVisible(true);
    }

    public void reciverPlayerNum(int index) {//得到当前对应的玩家
        Player = index;
        System.out.println("Player=" + Player);
    }

    public void reciver(String s) {

        if (Player == 0) {
            jb[player1++][Player].setText(s);
            System.out.println("reciverPlayer=" + Player);
        } else if (Player == 1) {
            jb[player2++][Player].setText(s);
            System.out.println("reciverPlayer=" + Player);
        } else if (Player == 2) {
            jb[player3++][Player].setText(s);
            System.out.println("reciverPlayer=" + Player);
        } else if (Player == 3) {
            jb[player4++][Player].setText(s);
            System.out.println("reciverPlayer=" + Player);
        }
        this.PokeNum(s);
        if (Player == 3) {
            pd = true;
            System.out.println("pd=" + pd);
            rand++;
        }
        flag = (flag + 1) % 4;
    }

    public int returnNum() {
        return flag;
    }

    public int PokeNum(String poke) {//将牌中的数字提取出来
        String k;
        int x;
        String regEx = "[^0-9]";
        Pattern p = Pattern.compile(regEx);
        Matcher m = p.matcher(poke);
        k = m.replaceAll("").trim();
        x = Integer.parseInt(k);
        return x;
    }

    public void compareNum() {//比较四张牌的大小
        int max = 0;
        int maxNum = 0;
        int minNum = 0;
        if (pd == true) {
            System.out.println("rand=" + rand);
            for (int i = 0; i &lt; 4; i++) {
                System.out.print(PokeNum(jb[rand][i].getText()) + " ");
                minNum = PokeNum(jb[rand][i].getText());
                if (maxNum &lt; minNum) {
                    maxNum = minNum;
                    max = i;
                }
            }
            jb[rand][max].setBackground(Color.PINK);
            System.out.println(" ");
        }
        pd = false;
    }
}
</code></pre> 
<h3>Mframe类</h3> 
<pre><code class="language-java">//主类
import java.awt.*;
import javax.swing.*;

public class MyFrame {

    JFrame jf;
    Toolkit tk;
    int w, h;
    int sw, sh;
    PokeFrame[] jif = new PokeFrame[4];
    String a[] = new String[52];
    String b[] = new String[13];
    PlayBuffer pb = new PlayBuffer();

    public void 得到牌() {
        Poke pk = new Poke();//同包不同类的调用
        pk.生成牌();
        pk.打乱牌();
        a = pk.组合牌();
        pk.打印牌(a);
        System.arraycopy(a, 0, b, 0, 13);
    }

    public MyFrame() {
        this.得到牌();//在主函数内调用得到牌函数，避免对象重复调用
        jf = new JFrame("扑克窗体");
        tk = Toolkit.getDefaultToolkit();
        w = tk.getScreenSize().width;
        h = tk.getScreenSize().height;
        sw = (int) (w / 2);
        sh = (int) (h / 2);
        jf.setSize(w, h);
        jf.setLayout(new GridLayout(2, 2));
        for (int i = 0; i &lt; 4; i++) {
            jif[i] = new PokeFrame(sw, sh, i, a, pb);
            jif[i].setTitle("玩家" + (i + 1));
            jif[i].setVisible(true);
            jf.add(jif[i]);
        }

        jf.setVisible(true);
    }

    public static void main(String[] args) {
        MyFrame mf1 = new MyFrame();
    }
}
</code></pre> 
<h3>效果实现：</h3> 
<p><img alt="" height="1035" src="https://images2.imgbox.com/2b/5e/13juspqO_o.png" width="1200"></p> 
<p> <img alt="" height="992" src="https://images2.imgbox.com/20/29/4xnA3DtU_o.png" width="1200"></p> 
<blockquote> 
 <p>扑克牌及背景图片链接：</p> 
 <p><a class="link-info" href="https://pan.baidu.com/s/1I7uo6T_eryZwpoDfD7XMqw" rel="nofollow" title="phttps://pan.baidu.com/s/1I7uo6T_eryZwpoDfD7XMqw">phttps://pan.baidu.com/s/1I7uo6T_eryZwpoDfD7XMqw</a></p> 
 <p>提取码：1a1a</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e852447014e650a486d50edd6dc52d54/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">虚拟机与window互传文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5fd0460dc3c3e946616d2f066af3de11/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">excel提取技巧：单元格部分内容提取的三种方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>