<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>路由表包含哪些信息？如何配置浮动路由？ - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="路由表包含哪些信息？如何配置浮动路由？" />
<meta property="og:description" content="什么是路由？ 路由表包含哪些信息？ 如何配置浮动路由？ 一、 什么是路由 网络中的各个节点，处在不同网段，路由器收到1个数据包，要将这个数据包送往目的地。
路由器转发数据包的依据，就是路由表。
二、 路由表包含哪些信息 路由表中最关键的信息，是去往每个目标网段的下一跳和出接口
如图，对于这台路由器，根据路由表就能知道，去往10.1.1.0/24的数据包，应该从g0/0/0接口发出，下一跳的地址是1.1.1.2。
可能会想，只要有出接口，就能判断数据如何转发了，为什么还要下一跳的地址？
因为数据包必须经过以太网封装才能发出，而以太网封装必须写上目标mac，这个下一跳地址，就是为了完成目标mac的封装，只要查一下下一跳地址的ARP记录，就知道了对应的mac地址。
一条完整的路由条目，除了目标网段，出接口，下一跳外，还有很多其他信息。以下图华为的路由器的路由表为例
Destination/Mask：表示此路由的目的网络地址与网络掩码。
Proto（Protocol）：该路由的协议类型，也即路由器是通过什么协议获知该路由的，上图可以看出是一条ospf路由
Pre（Preference）：表示此路由的路由协议优先级。针对同一目的地，可能存在不同下一跳、出接口等多条路由，这些不同的路由可能是由不同的路由协议发现的（如OSPF和RIP），不同路由协议有不同的优先级。pre数值最小者将成为当前的最优路由。 Cost：路由开销。当到达同一目的地的多条路由具有相同的路由优先级时（如都是OSPF产生的），路由开销最小的将成为当前的最优路由。
NextHop：表示对于本路由器而言，到达该路由指向的目的网络的下一跳地址。该字段指明了数据转发的下一个设备。
Interface：表示此路由的出接口。指明数据将从本路由器的哪个接口转发出去。
ps：如果你需要以下资料，或更多网工资料，可以找我要~
三、 浮动路由配置举例 上图中，AR1去往6.6.6.6有两条路径，希望通过路由的配置，实现主路径走1.1.1.1，备路径走2.2.2.2，可以通过路由的pre值来实现
[Huawei]ip route-static 6.6.6.6 32 1.1.1.1 preference 60
[Huawei]ip route-static 6.6.6.6 32 2.2.2.2 preference 61
小思考：本实验如果使用OSPF，如何实现主备路由的控制？" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/a687a711183a06374be70205234e3083/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-20T17:06:52+08:00" />
<meta property="article:modified_time" content="2021-12-20T17:06:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">路由表包含哪些信息？如何配置浮动路由？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin-left:.0001pt;text-align:left;"><strong><strong>什么是路由？</strong></strong></h3> 
<h3 style="margin-left:.0001pt;text-align:left;"><strong><strong>路由表包含哪些信息？ </strong></strong></h3> 
<h3 style="margin-left:.0001pt;text-align:left;"><strong><strong>如何配置浮动路由？</strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<h2 style="margin-left:21pt;text-align:justify;"><strong><strong><span style="color:#ff0000;"><strong>一、</strong></span></strong><strong> </strong><strong><span style="color:#ff0000;"><strong>什么是路由</strong></span></strong></strong></h2> 
<p style="text-align:center;"><strong><strong><span style="color:#ff0000;"><strong><img alt="" height="325" src="https://images2.imgbox.com/12/ef/PF4P6RFU_o.png" width="464"></strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>网络中的各个节点，处在不同网段，路由器收到1个数据包，要将这个数据包送往目的地。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>路由器转发数据包的依据，就是路由表。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<h2 style="margin-left:21pt;text-align:justify;"><strong><strong><span style="color:#ff0000;"><strong>二、</strong></span></strong><strong> </strong><strong><span style="color:#ff0000;"><strong>路由表包含哪些信息</strong></span></strong></strong></h2> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>路由表中最关键的信息，是去往每个目标网段的下一跳和出接口</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"><strong><strong><img alt="" height="358" src="https://images2.imgbox.com/8c/53/PgWxOZf3_o.png" width="461"></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>如图，对于这台路由器，根据路由表就能知道，去往1</strong></strong><strong><strong>0</strong></strong><strong><strong>.</strong></strong><strong><strong>1</strong></strong><strong><strong>.1.</strong></strong><strong><strong>0/24</strong></strong><strong><strong>的数据包，应该从g</strong></strong><strong><strong>0/0/0</strong></strong><strong><strong>接口发出，下一跳的地址是1.</strong></strong><strong><strong>1</strong></strong><strong><strong>.</strong></strong><strong><strong>1</strong></strong><strong><strong>.</strong></strong><strong><strong>2</strong></strong><strong><strong>。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>可能会想，只要有出接口，就能判断数据如何转发了，为什么还要下一跳的地址？</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>因为数据包必须经过以太网封装才能发出，而以太网封装必须写上目标mac，这个下一跳地址，就是为了完成目标mac的封装，只要查一下下一跳地址的ARP记录，就知道了对应的mac地址。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>一条完整的路由条目，除了目标网段，出接口，下一跳外，还有很多其他信息。以下图华为的路由器的路由表为例</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/bc/6e/euwv4N0x_o.png"></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>Destination/Mask：</strong></span></strong><strong><strong>表示此路由的目的网络地址与网络掩码。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>Proto（Protocol）：</strong></span></strong><strong><strong>该路由的协议类型，也即路由器是通过什么协议获知该路由的，上图可以看出是一条ospf路由</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>Pre（Preference）：</strong></span></strong><strong><strong>表示此路由的路由协议优先级。针对同一目的地，可能存在不同下一跳、出接口等多条路由，这些不同的路由可能是由不同的路由协议发现的（如OSPF和RIP），不同路由协议有不同的优先级。pre数值最小者将成为当前的最优路由。 </strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>Cost：</strong></span></strong><strong><strong>路由开销。当到达同一目的地的多条路由具有相同的路由优先级时（如都是OSPF产生的），路由开销最小的将成为当前的最优路由。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>NextHop：</strong></span></strong><strong><strong>表示对于本路由器而言，到达该路由指向的目的网络的下一跳地址。该字段指明了数据转发的下一个设备。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#ff0000;"><strong>Interface：</strong></span></strong><strong><strong>表示此路由的出接口。指明数据将从本路由器的哪个接口转发出去。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">ps：如果你需要以下资料，或更多网工资料，可以找我要~</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" height="448" src="https://images2.imgbox.com/8c/54/w5oE2k6E_o.png" width="542"></p> 
<p></p> 
<h2 style="margin-left:21pt;text-align:justify;"><strong><strong><span style="color:#ff0000;"><strong>三、</strong></span></strong><strong> </strong><strong><span style="color:#ff0000;"><strong>浮动路由配置举例</strong></span></strong></strong></h2> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/65/d2/Oj0BcYbg_o.png"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>上图中，AR</strong></strong><strong><strong>1</strong></strong><strong><strong>去往6.</strong></strong><strong><strong>6</strong></strong><strong><strong>.</strong></strong><strong><strong>6</strong></strong><strong><strong>.</strong></strong><strong><strong>6</strong></strong><strong><strong>有两条路径，希望通过路由的配置，实现主路径走1.</strong></strong><strong><strong>1</strong></strong><strong><strong>.</strong></strong><strong><strong>1</strong></strong><strong><strong>.</strong></strong><strong><strong>1</strong></strong><strong><strong>，备路径走2.</strong></strong><strong><strong>2</strong></strong><strong><strong>.</strong></strong><strong><strong>2</strong></strong><strong><strong>.</strong></strong><strong><strong>2</strong></strong><strong><strong>，可以通过路由的pre值来实现</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>[Huawei]ip route-static 6.6.6.6 32 1.1.1.1</strong></strong><strong><span style="color:#ff0000;"><strong> preference 60</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>[Huawei]ip route-static 6.6.6.6 32 2.2.2.2</strong></strong><strong><span style="color:#ff0000;"><strong> preference 61</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>小思考：本实验如果使用OSPF，如何实现主备路由的控制？</strong></strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/862e2cc5f51cce32452e1ed51b0623b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python学习笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/82a896dffa24f7d790eec441682c7cfe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序新版canvas画圆形进度条</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>