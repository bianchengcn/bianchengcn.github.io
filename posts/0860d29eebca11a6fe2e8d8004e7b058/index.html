<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库安全性 &amp; 完整性 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库安全性 &amp; 完整性" />
<meta property="og:description" content="01、安全性 专有名词解释 1.数据库管理员：拥有所有对象的所有权限，根据实际情况不同的权限授予不同的用户
2.用户：拥有自己建立的对象的全部的操作权限，可以使用GRANT，把权限授予其他用户
3.角色：数据库角色是权限的集合。可以为一组具有相同权限的用户创建一个角色（例如学生成绩管理系统，同时具有修改/更新/删除/查询学生成绩权限的角色是老师），使用角色来管理数据库权限可以简化授权的过程。
4.审计：启用一个专用的审计日志（Audit Log），将用户对数据库的所有操作记录在上面；审计员利用审计日志监控数据库中的各种行为，找出非法存取数据的人、时间和内容。
审计很费时间和空间
DBA可以根据应用对安全性的要求，灵活地打开或关闭审计功能
审计功能主要用于安全性要求较高的部门
用户标识与鉴别（Identification &amp; Authentication） 即由系统提供一定的方式让用户标识自己的名字或身份，每次用户要求进入系统时，由系统进行核对，通过鉴定后才提供机器使用权。如连接数据库时输入的用户名和密码。
存取控制 存取控制机制主要包括两部分：
1.定义用户权限，并将用户权限登记到数据字典中
2.合法权限检查：每当用户发出存取数据库的操作请求后，DBMS查找数据字典，根据安全规则进行合法权限检查。
自主存取控制（Discretionary Access Control，DAC）：用户对于不同的数据库对象有不同的存取权限，不同的用户对同一对象也有不同的权限，而且用户还可以将其拥有的存取权限转授给其他用户。非常灵活。主要通过SQL的GRANT语句和REVOKE语句来实现。
强制存取控制（Mandatory Access Control，MAC）：每一个数据库对象被标以一定的密级，每一个用户也被授予某一个级别的许可证。对于任意一个对象，只有具有合法许可证的用户才可以存取。较为严格。
授权sql语句：
GRANT &lt;权限&gt;[,&lt;权限&gt;]... ON &lt;对象类型&gt; &lt;对象名&gt;[,&lt;对象类型&gt; &lt;对象名&gt;]… TO &lt;用户&gt;[,&lt;用户&gt;]... [WITH GRANT OPTION]; 语义：将对指定操作对象的指定操作权限授予指定的用户。发出该GRANT语句的可以是DBA(数据库管理员)，也可以是数据库对象创建者，也可以是已经拥有该权限的用户。
如果指定了WITH GRANT OPTION 子句，则获得某种权限的用户还可以把这种权限再授予其他的用户。但是不允许循环授权
GRANT SELECT ON TABLE Student TO U1; /* 把查询Student表的权限授予用户U1 */ REVOKE &lt;权限&gt;[,&lt;权限&gt;]... ON &lt;对象类型&gt; &lt;对象名&gt;[,&lt;对象类型&gt; &lt;对象名&gt;]… FROM &lt;用户&gt;[,&lt;用户&gt;]...[CASCADE|RESTRICT]; REVOKE UPDATE(Sno) ON TABLE Student FROM U4; /*回收用户U4修改学生学号的权限*/ 强制存取控制 保证更高程度的安全性" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/0860d29eebca11a6fe2e8d8004e7b058/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-10T11:03:26+08:00" />
<meta property="article:modified_time" content="2023-03-10T11:03:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库安全性 &amp; 完整性</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h3 style="text-align:left;">01、安全性</h3> 
 <h5 style="text-align:left;">专有名词解释</h5> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">1.数据库管理员</span>：拥有所有对象的所有<span class="kdocs-bold" style="font-weight:bold;">权限</span>，根据实际情况不同的权限授予不同的用户</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">2.用户：拥有自己建立的对象的全部的操作权限，可以使用GRANT</span>，把权限授予其他用户</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">3.角色：数据库角色是权限的集合。可以为一组具有相同权限的用户创建一个角色（例如学生成绩管理系统，同时具有修改/更新/删除/查询学生成绩权限的角色是老师）</span>，使用角色来管理数据库权限可以简化授权的过程。</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">4.审计：启用一个专用的审计日志</span>（Audit Log），将用户对数据库的所有操作记录在上面；审计员利用审计日志监控数据库中的各种行为，找出非法存取数据的人、时间和内容。</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>审计很费时间和空间</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>DBA可以根据应用对安全性的要求，灵活地打开或关闭审计功能</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>审计功能主要用于<span class="kdocs-bold" style="font-weight:bold;">安全性要求较高</span>的部门</p></li></ul> 
 <h5 style="text-align:left;">用户标识与鉴别（Identification &amp; Authentication）</h5> 
 <p style="">即由系统提供一定的方式让用户<span class="kdocs-bold" style="font-weight:bold;">标识</span>自己的<span class="kdocs-bold" style="font-weight:bold;">名字或身份</span>，每次用户要求进入系统时，由系统进行核对，通过鉴定后才提供机器使用权。如<span class="kdocs-bold" style="font-weight:bold;">连接数据库时输入的用户名和密码</span>。</p> 
 <h5 style="text-align:left;">存取控制</h5> 
 <p style="">存取控制机制主要包括两部分：</p> 
 <p style="">1.定义用户权限，并将用户权限登记到数据字典中</p> 
 <p style="">2.合法权限检查：每当用户发出存取数据库的操作请求后，DBMS查找数据字典，根据安全规则进行合法权限检查。</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">自主存取控制（Discretionary Access Control，DAC）</span>：用户对于不同的数据库对象有不同的存取权限，不同的用户对同一对象也有不同的权限，而且<span class="kdocs-bold" style="font-weight:bold;">用户还可以将其拥有的存取权限转授给其他用户</span>。非常灵活。主要通过SQL的GRANT语句和REVOKE语句来实现。</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">强制存取控制（Mandatory Access Control，MAC）：每一个数据库对象被标以一定的密级</span>，每一个用户也被授予某<span class="kdocs-bold" style="font-weight:bold;">一个级别的许可证</span>。对于任意一个对象，<span class="kdocs-bold" style="font-weight:bold;">只有具有合法许可证的用户才可以存取</span>。较为严格。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:555px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:45.765766%;height:0;"> 
    <img src="https://images2.imgbox.com/19/a3/2crX9KXt_o.png" style="margin-left:;display:block;width:555px;margin-top:-45.765766%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">授权sql语句：</span></p> 
 <pre class="kdocs-sql"><code class="language-sql">GRANT &lt;权限&gt;[,&lt;权限&gt;]...
ON &lt;对象类型&gt; &lt;对象名&gt;[,&lt;对象类型&gt; &lt;对象名&gt;]…
TO &lt;用户&gt;[,&lt;用户&gt;]...
[WITH GRANT OPTION];</code></pre> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">语义</span>：将对指定操作对象的指定操作权限授予指定的用户。发出该GRANT语句的可以是<span class="kdocs-bold" style="font-weight:bold;">DBA(数据库管理员)</span>，也可以是数据库对象创建者，也可以是已经拥有该权限的用户。</p> 
 <p style="">如果指定了<span class="kdocs-bold" style="font-weight:bold;">WITH GRANT OPTION 子句</span>，则获得某种权限的用户还可以把这种权限再授予其他的用户。<span class="kdocs-bold" style="font-weight:bold;">但是不允许循环授权</span></p> 
 <p style=""></p> 
 <pre class="kdocs-sql"><code class="language-sql">GRANT SELECT ON TABLE Student TO U1; /* 把查询Student表的权限授予用户U1 */
REVOKE &lt;权限&gt;[,&lt;权限&gt;]...
ON &lt;对象类型&gt; &lt;对象名&gt;[,&lt;对象类型&gt; &lt;对象名&gt;]…
FROM &lt;用户&gt;[,&lt;用户&gt;]...[CASCADE|RESTRICT];
REVOKE UPDATE(Sno) ON TABLE Student FROM U4; /*回收用户U4修改学生学号的权限*/</code></pre> 
 <h5 style="text-align:left;">强制存取控制</h5> 
 <p style="">保证更高程度的安全性</p> 
 <p style="">用户不能直接感知或进行控制</p> 
 <p style="">适用于对数据有严格而固定密级分类的部门(例如：<span class="kdocs-bold" style="font-weight:bold;">军队、银行的保密等级</span>)</p> 
 <p style="">在<span class="kdocs-bold" style="font-weight:bold;">强制存取控制</span>中，数据库管理系统所管理的全部实体被分为<span class="kdocs-bold" style="font-weight:bold;">主体</span>和<span class="kdocs-bold" style="font-weight:bold;">客体</span>两大类：</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">主体</span>是系统中的活动实体，如：<span class="kdocs-bold" style="font-weight:bold;">DBMS所管理的实际用户，代表用户的各进程</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">客体</span>是系统中的被动实体，受主体操纵，如：<span class="kdocs-bold" style="font-weight:bold;">文件、基表、索引、视图</span></p></li></ul> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">敏感度标记（Label）</span>：对于<span class="kdocs-bold" style="font-weight:bold;">主体</span>和<span class="kdocs-bold" style="font-weight:bold;">客体</span>，DBMS为它们每个实例（值）指派一个敏感度标记（Label）敏感度标记分成若干级别</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">绝密（Top Secret，TS）</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">机密（Secret，S）</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">可信（Confidential，C）</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">公开（Public，P）</span></p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">TS&gt;=S&gt;=C&gt;=P</span></p></li></ul> 
 <p style="">主体的敏感度标记称为<span class="kdocs-bold" style="font-weight:bold;">许可证级别</span>（Clearance Level）</p> 
 <p style="">客体的敏感度标记称为<span class="kdocs-bold" style="font-weight:bold;">密级</span>（Classification Level）</p> 
 <p style="">当一个用户以标记label注册入系统时，系统要求他对任何客体的存取必须遵循如下规则：</p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>仅当<span class="kdocs-bold" style="font-weight:bold;">主体的许可证级别大于或等于客体的密级</span>时，该主体才能读取相应的客体</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>仅当<span class="kdocs-bold" style="font-weight:bold;">主体的许可证级别小于或等于客体的密级</span>时，该主体才能写相应的客体</p></li></ul> 
 <blockquote class="kdocs-blockquote" style="text-align:left;"> 
  <span class="kdocs-bold" style="font-weight:bold;">注意第2点，即用户可以写入数据但是不能再读取自己写入的数据。</span> 
 </blockquote> 
 <h3 style="text-align:left;">02、完整性</h3> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">数据库完整性</span>是指数据的<span class="kdocs-bold" style="font-weight:bold;">正确性和相容性</span>。完整性是为了防止数据库中存在不符合语义的数据，即<span class="kdocs-bold" style="font-weight:bold;">防止数据库中存在不正确的数据</span>。</p> 
 <p style="">为了维护数据库的完整性，DBMS必须能够：</p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>提供<span class="kdocs-bold" style="font-weight:bold;">定义完整性约束条件的机制</span>：完整性一般由SQL的**DDL（数据库定义语言）**语句来实现，它们作为数据库模式的一部分存入数据字典中。</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>提供<span class="kdocs-bold" style="font-weight:bold;">完整性检查的方法</span>：检查数据是否满足完整性约束条件的机制</p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">违约处理</span>：若用户违背了完整性约束条件，应该采取的动作</p></li></ol> 
 <h5 style="text-align:left;">实体完整性</h5> 
 <p style="">关系模型的实体完整性在CREATE TABLE中用PRIMARY KEY定义。一种是定义为<span class="kdocs-bold" style="font-weight:bold;">列级约束条件</span>，另一种是定义为<span class="kdocs-bold" style="font-weight:bold;">表级约束条件</span></p> 
 <pre class="kdocs-sql"><code class="language-sql">   CREATE TABLE Student (
   Sno CHAR(9) PRIMARY KEY, /*在列级定义主码*/
   Sname CHAR(20) NOT NULL,
   Ssex CHAR(2),  Sage SMALLINT,  Sdept CHAR(20)
   );</code></pre> 
 <pre class="kdocs-sql"><code class="language-sql">   CREATE TABLE Student 
   Sno CHAR(9) ,
   Sname CHAR(20) NOT NULL,   Ssex CHAR(2),   Sage SMALLINT,   Sdept CHAR(20)
   PRIMARY KEY(Sno)  /*在表级定义主码*/
   );</code></pre> 
 <pre class="kdocs-sql"><code class="language-sql">   CREATE TABLE Student (
   Sno CHAR(9) ,Sname CHAR(20) NOT NULL,  Ssex CHAR(2),
   Sage SMALLINT,  Sdept CHAR(20)
   PRIMARY KEY(Sno,Sname)  /*属性组定义为主码，只能在表级定义*/
   );</code></pre> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">违约处理：</span></p> 
 <p style="">当用户程序对基本表插入一条记录或对主码列进行更新操作时，会进行如下检查</p> 
 <p style="">（1）检查<span class="kdocs-bold" style="font-weight:bold;">主码值是否唯一</span>，如果不唯一则拒绝插入或修改</p> 
 <p style="">（2）检查主码的<span class="kdocs-bold" style="font-weight:bold;">各个属性是否为空</span>，只要有一个为空就拒绝插入或修改</p> 
 <h5 style="text-align:left;">参照完整性</h5> 
 <p style="">关系模型的参照完整性在<span class="kdocs-bold" style="font-weight:bold;">CREATE TABLE</span>中用<span class="kdocs-bold" style="font-weight:bold;">FOREIGN KEY</span>短语定义哪些列为外码，用REFERENCES短语指明这些外码参照哪些表的主码。</p> 
 <p style="">例如，关系SC中一个元组表示一个学生选修的某门课程的成绩，（Sno,Cno）是主码。Sno、Cno分别参照引用Student表的主码和Course表的主码</p> 
 <pre class="kdocs-sql"><code class="language-sql">   CREATE TABLE SC (
   Sno CHAR(9) NOT NULL,
   Cno CHAR(4) NOT NULL,
   Grade SMALLINT,
   PRIMARY KEY(Sno, Cno),
   FOREIGN KEY(Sno) REFERENCES Student(Sno),
   FOREIGN KEY(Cno) REFERENCES Course(Cno)    /*在表级定义参照完整性*/
   );</code></pre> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">违约检查：</span></p> 
 <p style="">对被参照表和参照表进行增删改操作时都会进行检查</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:355px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:41.40845%;height:0;"> 
    <img src="https://images2.imgbox.com/3b/38/YtRc61Pq_o.png" style="margin-left:;display:block;width:355px;margin-top:-41.40845%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">当不一致发生时，系统可以采用如下策略处理：</p> 
 <p style="">（1）<span class="kdocs-bold" style="font-weight:bold;">拒绝(NO ACTION)执行</span>：不允许该操作执行，该策略一般设置为默认策略</p> 
 <p style="">（2）<span class="kdocs-bold" style="font-weight:bold;">级联(CASCADE)操作</span>：当删除或修改被参照表的一个元组导致与参照表（SC）的不一致时，删除或修改参照表中的所有导致不一致的元组。</p> 
 <p style="">（3）<span class="kdocs-bold" style="font-weight:bold;">设置为空值</span>：当删除或修改被参照表的一个元组时造成了不一致，则将参照表中所有造成不一致的元组的对应属性设置为空值。</p> 
 <p style="">如果要采取非默认策略需要显式地加以说明，如：</p> 
 <p style="">ON DELETE NO ACTION</p> 
 <p style="">ON UPDATE CASCADE</p> 
 <h5 style="text-align:left;">用户自定义完整性</h5> 
 <p style="">1.属性上的约束条件的定义</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">NULL/NOT NULL、DEFAULT，UNIQUE、CHECK</span></p> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>列值非空（NOT NULL）</p></li></ul> 
 <ul><li style="margin-left:1.4em;list-style-type:disc;text-indent:0;"><p>列值唯一（UNIQUE）</p></li></ul> 
 <p style="">2.元组上的约束条件</p> 
 <p style="">使用CHECK短语定义元组上的约束条件，如下：</p> 
 <pre class="kdocs-sql"><code class="language-sql">   CREATE TABLE SC (
   Sno CHAR(9) NOT NULL,
   Cno CHAR(4) NOT NULL,
   Grade SMALLINT,
   PRIMARY KEY(Sno, Cno),
   CHECK(Sno='x' OR Cno NOT LIKE 'MS.%')
   );</code></pre> 
 <p style="">违约处理：拒绝执行</p> 
 <h5 style="text-align:left;">触发器（Trigger）</h5> 
 <p style="">触发器是用户定义在关系表上的一类<span class="kdocs-bold" style="font-weight:bold;">由事件驱动的特殊过程</span>，其不仅可以用于数据库完整性检查，也可以用来实现数据库的其他功能，包括<span class="kdocs-bold" style="font-weight:bold;">数据库安全性</span>，以及一些业务流程和控制流程。</p> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">定义触发器：</span></p> 
 <pre class="kdocs-sql"><code class="language-sql">CREATE TRIGGER &lt;触发器名&gt;    /*每当触发事件发生时，该触发器被激活*/
{BEFORE | AFTER} &lt;触发事件&gt; ON &lt;表名&gt; /*指明触发器激活的时间是在执行触发事件前或后*/
REFERENCING NEW|OLD ROW AS &lt;变量&gt; /*REFERENCING 指出引用的变量*/
FOR EACH {ROW | STATEMENT}             /*定义触发器的类型，指明动作体执行的频率*/
[WHEN &lt;触发条件&gt; ]                         /*仅当触发条件为真时才执行触发动作体*/
&lt;触发动作体&gt;  </code></pre> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">要点:</span></p> 
 <ol start="1"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>只有<span class="kdocs-bold" style="font-weight:bold;">创建表的用户才可以在表上创建触发器</span>，并且一个表上只能创建一定数量的触发器</p></li></ol> 
 <ol start="2"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">触发器名唯一</span></p></li></ol> 
 <ol start="3"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>触发器<span class="kdocs-bold" style="font-weight:bold;">只能定义在基本表上，不能定义在视图上</span></p></li></ol> 
 <ol start="4"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>触发事件可以是INSERT DELETE 或 UPDATE，也可以是这几个事件的组合，如INSERT OR DELETE等，还可以是UPDATE OF &lt;触发列, …&gt;<span class="kdocs-bold" style="font-weight:bold;">指明修改哪些列时激活触发器</span>。</p></li></ol> 
 <ol start="5"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>AFTER / BEFORE 是触发的时机，AFTER表示在触发事件的操作执行之后激活触发器。</p></li></ol> 
 <ol start="6"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p>触发器类型：FOR EACH ROW（行级触发器）和FOR EACH STATEMENT（语句触发器），假设表TEACHAR 有1000行，行级触发器将执行1000次，而语句触发器只执行1次</p></li></ol> 
 <ol start="7"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">触发条件</span>：触发器被激活时，只有当触发条件为真时触发动作体才执行；否则触发动作体不执行。如果省略WHEN触发条件，则触发动作体在触发器激活后立即执行。</p></li></ol> 
 <ol start="8"><li style="margin-left:1.4em;list-style-type:decimal;text-indent:0;"><p><span class="kdocs-bold" style="font-weight:bold;">触发动作体</span>：在过程体中可以使用NEW和OLD来引用UPDATE/INSERT事件之后的新值和之前的旧值，如果是语句级触发器则不能使用NEW或OLD引用。</p></li></ol> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">多个执行语句的触发器：</span></p> 
 <pre class="kdocs-sql"><code class="language-sql">CREATE TRIGGER 触发器名 BEFORE|AFTER 触发事件
ON 表名 FOR EACH ROW
BEGIN
执行语句列表
END

CREATE TRIGGER Insert_Or_Update_Sal
  BEFORE INSERT OR UPDATE ON Teacher
  FOR EACH ROW
  AS BEGIN
 IF (new.Job = ‘教授’) AND (new.Sal &lt; 4000) THEN
 new.Sal := 4000;
   END IF;
  END;</code></pre> 
 <blockquote class="kdocs-blockquote" style="text-align:left;"> 
  <span class="kdocs-bold" style="font-weight:bold;">删除触发器</span>：DROP TRIGGER &lt;触发器名&gt; ON &lt;表名&gt; 
 </blockquote> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/602a52bd37ad4eaead2cd25d4156403e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">边框四周有切角</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e9d24215ac5781cbf72794f616d10d2a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IOS wireshark抓包</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>