<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用unity实现大转盘 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用unity实现大转盘" />
<meta property="og:description" content="转盘这个东西在游戏中见多了 抽奖啥的都可以用到 我们也可能被它坑过好多次
这篇博客带大家用unity实现一下转盘
1.创建场景 首先整一个转盘的模型 （图片即可）
然后把它弄进unity的相关文件夹中 修改一下格式 改成Sprite（UI and 2D）
用UGUI创建一个Image 把它贴上去 即可
然后创建一个指针类型的图片
2.实现转盘的旋转 我的思路是让转盘旋转 也可以让指针旋转
对于旋转 我们在游戏中见到的转盘都是 开始速度比较大 然后慢慢停下来的
我们就用速度的随着时间的递减来实现，也可以用时间来限制
我们创建一个按钮来点击的时候 转盘开始旋转
private float RotateSpeed;//旋转速度 private void Start() { RotateSpeed = 0; } private void Update() { RotateSpeed -= Time.deltaTime * 100;//随着时间递减 transform.Rotate(Vector3.forward * Time.deltaTime * RotateSpeed); if (RotateSpeed &lt;= 0) { RotateSpeed = 0; Time.timeScale = 0;//为了实现旋转速度为0之后不再乱动 } } public void StartButton()//开始按钮 { RotateSpeed = Random." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/b7b2d2498b5a30bd1ce7ea2033ce653b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-13T16:11:26+08:00" />
<meta property="article:modified_time" content="2019-12-13T16:11:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用unity实现大转盘</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>转盘这个东西在游戏中见多了 抽奖啥的都可以用到 我们也可能被它坑过好多次<br> 这篇博客带大家用unity实现一下转盘</p> 
<h3><a id="1_2"></a>1.创建场景</h3> 
<p>首先整一个转盘的模型 （图片即可）<br> <img src="https://images2.imgbox.com/1a/7d/couZNPB0_o.png" alt="在这里插入图片描述"><br> 然后把它弄进unity的相关文件夹中 修改一下格式 改成Sprite（UI and 2D）<br> 用UGUI创建一个Image 把它贴上去 即可<br> 然后创建一个指针类型的图片</p> 
<h3><a id="2_9"></a>2.实现转盘的旋转</h3> 
<p>我的思路是让转盘旋转 也可以让指针旋转<br> 对于旋转 我们在游戏中见到的转盘都是 开始速度比较大 然后慢慢停下来的<br> 我们就用速度的随着时间的递减来实现，也可以用时间来限制<br> 我们创建一个按钮来点击的时候 转盘开始旋转</p> 
<pre><code class="prism language-csharp"> <span class="token keyword">private</span> <span class="token keyword">float</span> RotateSpeed<span class="token punctuation">;</span><span class="token comment">//旋转速度</span>
  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        RotateSpeed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token punctuation">{<!-- --></span>
        RotateSpeed <span class="token operator">-</span><span class="token operator">=</span> Time<span class="token punctuation">.</span>deltaTime <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span><span class="token comment">//随着时间递减</span>
        transform<span class="token punctuation">.</span><span class="token function">Rotate</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>forward <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime <span class="token operator">*</span> RotateSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
       
        <span class="token keyword">if</span> <span class="token punctuation">(</span>RotateSpeed <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            RotateSpeed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//为了实现旋转速度为0之后不再乱动</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">StartButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//开始按钮</span>
    <span class="token punctuation">{<!-- --></span>
        RotateSpeed <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> 
<p>上边的StartButton（）是给unity中的一个按钮注册的事件<br> 这应该是比较简单的<br> 添加上上边的脚本后 就可以实现点击转盘开始旋转</p> 
<h3><a id="3_45"></a>3.检测获奖类型</h3> 
<p>这个效果比较难实现 因为其中的transform.rotation是四元数类型的<br> 直接赋值产生错误<br> 然后我百般搜寻 找到一个可以吧四元数转换成Vector3类型的方法</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token class-name">Vector3</span> <span class="token function">GetInspectorRotationValueMethod</span><span class="token punctuation">(</span><span class="token class-name">Transform</span> transform<span class="token punctuation">)</span><span class="token comment">//把四元数转换成为Vector3类型的参数</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取原生值</span>
        <span class="token class-name">System<span class="token punctuation">.</span>Type</span> transformType <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PropertyInfo</span> m_propertyInfo_rotationOrder <span class="token operator">=</span> transformType<span class="token punctuation">.</span><span class="token function">GetProperty</span><span class="token punctuation">(</span><span class="token string">"rotationOrder"</span><span class="token punctuation">,</span> BindingFlags<span class="token punctuation">.</span>Instance <span class="token operator">|</span> 		BindingFlags<span class="token punctuation">.</span>NonPublic<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">object</span> m_OldRotationOrder <span class="token operator">=</span> m_propertyInfo_rotationOrder<span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span>transform<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MethodInfo</span> m_methodInfo_GetLocalEulerAngles <span class="token operator">=</span> transformType<span class="token punctuation">.</span><span class="token function">GetMethod</span><span class="token punctuation">(</span><span class="token string">"GetLocalEulerAngles"</span><span class="token punctuation">,</span> BindingFlags<span class="token punctuation">.</span>Instance <span class="token operator">|</span> BindingFlags<span class="token punctuation">.</span>NonPublic<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">object</span> <span class="token keyword">value</span> <span class="token operator">=</span> m_methodInfo_GetLocalEulerAngles<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>transform<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span> m_OldRotationOrder <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">string</span> temp <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将字符串第一个和最后一个去掉</span>
        temp <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        temp <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//用‘，’号分割</span>
        <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tempVector3<span class="token punctuation">;</span>
        tempVector3 <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将分割好的数据传给Vector3</span>
        <span class="token class-name">Vector3</span> vector3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>tempVector3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token keyword">float</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>tempVector3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>tempVector3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> vector3<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>然后我的思路是记录下来停止的时候转盘旋转的角度<br> 然后根据角度来判断获奖的类型<br> 首先从创建一个枚举类型来创建几个奖品的类型</p> 
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token keyword">enum</span> PrizeType<span class="token comment">//几种获奖状态</span>
<span class="token punctuation">{<!-- --></span>
    SuperPrize<span class="token punctuation">,</span>
    FirstPrize<span class="token punctuation">,</span>
    SecondPrize<span class="token punctuation">,</span>
    ThirdPrize<span class="token punctuation">,</span>
    ThankYou
<span class="token punctuation">}</span>
</code></pre> 
<p>更新获奖的状态 在update中检测 下面的角度都是在unity中试出来的</p> 
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">UpdateAngle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//更新状态</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">float</span> angle <span class="token operator">=</span> AngleZ<span class="token punctuation">;</span><span class="token comment">//临时变量来处理角度的超出范围的问题</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;</span> <span class="token number">360</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            angle <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">331.2f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            angle <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">31.7f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token number">32.6f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>FirstPrize<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">91.1f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">31.7f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>SuperPrize<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">149.5f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">91.1f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>ThankYou<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">210f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">149.5f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>ThirdPrize<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">269f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">210f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>SecondPrize <span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">331.2f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">269f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>ThankYou<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>更新获奖之后UI的提示效果 在update中检测</p> 
<pre><code class="prism language-csharp"> <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">UpdatePrize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//更新奖品</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>FirstPrize <span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得一等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>SecondPrize <span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得二等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>ThirdPrize<span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得三等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>SuperPrize<span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得特等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>ThankYou <span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"感谢参与！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4_152"></a>4.完整代码</h3> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Reflection<span class="token punctuation">;</span>
<span class="token keyword">using</span> UnityEngine<span class="token punctuation">;</span>
<span class="token keyword">using</span> UnityEngine<span class="token punctuation">.</span>EventSystems<span class="token punctuation">;</span>
<span class="token keyword">using</span> UnityEngine<span class="token punctuation">.</span>UI<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">enum</span> PrizeType<span class="token comment">//几种获奖状态</span>
<span class="token punctuation">{<!-- --></span>
    SuperPrize<span class="token punctuation">,</span>
    FirstPrize<span class="token punctuation">,</span>
    SecondPrize<span class="token punctuation">,</span>
    ThirdPrize<span class="token punctuation">,</span>
    ThankYou
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">:</span> MonoBehaviour
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> RotateSpeed<span class="token punctuation">;</span><span class="token comment">//旋转速度</span>
    <span class="token keyword">private</span>  <span class="token class-name">Vector3</span>   PauseAngle<span class="token punctuation">;</span><span class="token comment">//获取转变的Vector3类型</span>
    <span class="token keyword">private</span>  <span class="token keyword">float</span> AngleZ<span class="token punctuation">;</span><span class="token comment">//z轴</span>

    <span class="token keyword">private</span> <span class="token keyword">string</span> Text<span class="token punctuation">;</span><span class="token comment">//提示文字</span>
    <span class="token keyword">public</span> <span class="token class-name">Text</span> TextUI<span class="token punctuation">;</span><span class="token comment">//提示文字UI</span>
    <span class="token keyword">private</span> <span class="token keyword">bool</span> enable <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span><span class="token comment">//控制UI出现的bool值</span>
    
    <span class="token keyword">public</span>  <span class="token class-name">PrizeType</span> type<span class="token punctuation">;</span><span class="token comment">//奖品类型</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        RotateSpeed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        TextUI<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token punctuation">{<!-- --></span>
        <span class="token function">UpdateAngle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//更新角度</span>
        <span class="token function">UpdatePrize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//更新奖品</span>
        RotateSpeed <span class="token operator">-</span><span class="token operator">=</span> Time<span class="token punctuation">.</span>deltaTime <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
        TextUI<span class="token punctuation">.</span>text <span class="token operator">=</span> Text<span class="token punctuation">;</span>
        transform<span class="token punctuation">.</span><span class="token function">Rotate</span><span class="token punctuation">(</span>Vector3<span class="token punctuation">.</span>forward <span class="token operator">*</span> Time<span class="token punctuation">.</span>deltaTime <span class="token operator">*</span> RotateSpeed<span class="token punctuation">)</span><span class="token punctuation">;</span>
       

        <span class="token keyword">if</span> <span class="token punctuation">(</span>RotateSpeed <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            RotateSpeed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            PauseAngle <span class="token operator">=</span> <span class="token function">GetInspectorRotationValueMethod</span><span class="token punctuation">(</span>transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
            AngleZ <span class="token operator">=</span> PauseAngle<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>enable<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                TextUI<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
       
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">StartButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//开始按钮</span>
    <span class="token punctuation">{<!-- --></span>
        RotateSpeed <span class="token operator">=</span> Random<span class="token punctuation">.</span><span class="token function">Range</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Time<span class="token punctuation">.</span>timeScale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        enable <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">UpdateAngle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//更新状态</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">float</span> angle <span class="token operator">=</span> AngleZ<span class="token punctuation">;</span><span class="token comment">//临时变量来处理角度的超出范围的问题</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;</span> <span class="token number">360</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            angle <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">331.2f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            angle <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">31.7f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token number">32.6f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>FirstPrize<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">91.1f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">31.7f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>SuperPrize<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">149.5f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">91.1f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>ThankYou<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">210f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">149.5f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>ThirdPrize<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">269f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">210f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>SecondPrize <span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>angle <span class="token operator">&gt;=</span> <span class="token operator">-</span><span class="token number">331.2f</span> <span class="token operator">&amp;&amp;</span> angle <span class="token operator">&lt;</span> <span class="token operator">-</span><span class="token number">269f</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            type <span class="token operator">=</span> PrizeType<span class="token punctuation">.</span>ThankYou<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">Vector3</span> <span class="token function">GetInspectorRotationValueMethod</span><span class="token punctuation">(</span><span class="token class-name">Transform</span> transform<span class="token punctuation">)</span><span class="token comment">//把四元数转换成为Vector3类型的参数</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取原生值</span>
        <span class="token class-name">System<span class="token punctuation">.</span>Type</span> transformType <span class="token operator">=</span> transform<span class="token punctuation">.</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">PropertyInfo</span> m_propertyInfo_rotationOrder <span class="token operator">=</span> transformType<span class="token punctuation">.</span><span class="token function">GetProperty</span><span class="token punctuation">(</span><span class="token string">"rotationOrder"</span><span class="token punctuation">,</span> BindingFlags<span class="token punctuation">.</span>Instance <span class="token operator">|</span> BindingFlags<span class="token punctuation">.</span>NonPublic<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">object</span> m_OldRotationOrder <span class="token operator">=</span> m_propertyInfo_rotationOrder<span class="token punctuation">.</span><span class="token function">GetValue</span><span class="token punctuation">(</span>transform<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">MethodInfo</span> m_methodInfo_GetLocalEulerAngles <span class="token operator">=</span> transformType<span class="token punctuation">.</span><span class="token function">GetMethod</span><span class="token punctuation">(</span><span class="token string">"GetLocalEulerAngles"</span><span class="token punctuation">,</span> BindingFlags<span class="token punctuation">.</span>Instance <span class="token operator">|</span> BindingFlags<span class="token punctuation">.</span>NonPublic<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">object</span> <span class="token keyword">value</span> <span class="token operator">=</span> m_methodInfo_GetLocalEulerAngles<span class="token punctuation">.</span><span class="token function">Invoke</span><span class="token punctuation">(</span>transform<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token keyword">object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span> m_OldRotationOrder <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">string</span> temp <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将字符串第一个和最后一个去掉</span>
        temp <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        temp <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>temp<span class="token punctuation">.</span>Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//用‘，’号分割</span>
        <span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tempVector3<span class="token punctuation">;</span>
        tempVector3 <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将分割好的数据传给Vector3</span>
        <span class="token class-name">Vector3</span> vector3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector3</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>tempVector3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
            <span class="token keyword">float</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>tempVector3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>tempVector3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> vector3<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">UpdatePrize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//更新奖品</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>FirstPrize <span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得一等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>SecondPrize <span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得二等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>ThirdPrize<span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得三等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>SuperPrize<span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"恭喜你获得特等奖！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> PrizeType<span class="token punctuation">.</span>ThankYou <span class="token punctuation">:</span>
                Text <span class="token operator">=</span> <span class="token string">"感谢参与！"</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>其中有一些关于UI最最简单的操作 我就没有详细写<br> 就这样就实现了一个转盘的效果</p> 
<h3><a id="5_306"></a>5.实现每次抽到都是三等奖或是感谢参与</h3> 
<p>这样做是比较坏的 哈哈<br> 但是游戏中很多时候都是 先氪金或充值才能抽到很好的装备等<br> 我们可以在如果在特等奖或一等奖的时候 转盘的速度稍微加上一个合适的值（一定要小 让人看不出来）<br> 然后就慢慢滑到了谢谢参与上或者三等奖上边<br> 然后检测到氪金之后<br> 可以正常抽奖<br> 本人热爱交友 qq 1149293885</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2f94b4b248f3ddfbe9689b908912e228/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">快速入门c语言</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/82a43eac2fc634bc5df95246ba22e369/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Linux】wget 下载文件怎样保持文件名不变？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>