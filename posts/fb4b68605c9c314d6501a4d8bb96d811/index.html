<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>spring mvc ajax json post,Ajax POST call to Spring MVC - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="spring mvc ajax json post,Ajax POST call to Spring MVC" />
<meta property="og:description" content="As the only answer says that we need to return json from Controller not ModelAndView. So the question is
what can be done to return ModelAndView ?
How the page will be rendered:-
will it have to be handled in success section of ajax call
Or Spring Controller will return the page as usually it does in Spring MVC
How the post data from ajax can be read in Controller." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/fb4b68605c9c314d6501a4d8bb96d811/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T12:17:28+08:00" />
<meta property="article:modified_time" content="2021-08-05T12:17:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">spring mvc ajax json post,Ajax POST call to Spring MVC</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>As the only answer says that we need to return json from Controller not ModelAndView. So the question is</p> 
 <p>what can be done to return ModelAndView ?</p> 
 <p>How the page will be rendered:-</p> 
 <p>will it have to be handled in success section of ajax call</p> 
 <p>Or Spring Controller will return the page as usually it does in Spring MVC</p> 
 <p>How the post data from ajax can be read in Controller.</p> 
 <p>Update 1:</p> 
 <p>As explained, I tried example. here is my code.</p> 
 <p>@Controller</p> 
 <p>public class AppController</p> 
 <p>{<!-- --></p> 
 <p>@RequestMapping(value="/greeting",method=RequestMethod.POST)</p> 
 <p>@ResponseBody</p> 
 <p>public ModelAndView getGreeting(@RequestBody String json) throws IOException</p> 
 <p>{<!-- --></p> 
 <p>JSONObject inputjsonObject = new JSONObject(json);</p> 
 <p>String name = inputjsonObject.getString("name");</p> 
 <p>ModelAndView modelAndView = new ModelAndView();</p> 
 <p>String result = "Hi "+name;</p> 
 <p>modelAndView.addObject("testdata", result);</p> 
 <p>modelAndView.addObject("user", getPrincipal());</p> 
 <p>modelAndView.setViewName("greetingHtmlPage");</p> 
 <p>return modelAndView;</p> 
 <p>}</p> 
 <p>// other stuff</p> 
 <p>}</p> 
 <p>In above controller method i can get data sucessfully. This method is called from a javascript on home.html. Below is javascript function</p> 
 <p>function callGreeting(){<!-- --></p> 
 <p>var nameData={<!-- --></p> 
 <p>name : document.getElementById("name").value</p> 
 <p>}</p> 
 <p>var dataInJson = JSON.stringify(nameData);</p> 
 <p>var csrf_token = document.getElementById("token").value;</p> 
 <p>$.ajax({<!-- --></p> 
 <p>type: 'POST',</p> 
 <p>url: "greeting",</p> 
 <p>data: dataInJson,</p> 
 <p>cache:false,</p> 
 <p>beforeSend: function(xhr) {<!-- --></p> 
 <p>xhr.setRequestHeader('X-CSRF-Token', csrf_token);</p> 
 <p>xhr.setRequestHeader("Accept", "application/json");</p> 
 <p>xhr.setRequestHeader("Content-Type", "application/json");</p> 
 <p>},</p> 
 <p>success: function (response) {<!-- --></p> 
 <p>document.open();</p> 
 <p>document.write(response);</p> 
 <p>document.close();</p> 
 <p>},</p> 
 <p>error: function (data) {<!-- --></p> 
 <p>alert("failed response");</p> 
 <p>}</p> 
 <p>}); }</p> 
 <p>I have the page rendered successfully. But the url of application does not changes from AjaxSpringMVC:8080/home to AjaxSpringMVC:8080/greeting even after new page was loaded. This happens by itself in Spring MVC if using without Ajax.</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eb1401f56f23eae538aefe3e238788a8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">诛仙3服务器正在维护中,《诛仙3》3月21日全服停机更新维护公告</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ba7e5a4a87f63f46cd404c629280a083/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">win10系统进不了服务器失败,Win10最新更新安装失败进不去系统问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>