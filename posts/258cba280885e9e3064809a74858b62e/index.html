<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python二进制创建写模式_Python 2和3 csv模块文本二进制模式向后兼容 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python二进制创建写模式_Python 2和3 csv模块文本二进制模式向后兼容" />
<meta property="og:description" content="在python3上打开要与模块csv一起使用的文件时，always应该添加newline=&#34;&#34;open语句：import sys
mode = &#39;w&#39;
if sys.version_info[0] &lt; 3:
mode = &#39;wb&#39;
# python 3 write
with open(&#34;somefile.txt&#34;, mode, newline=&#34;&#34;) as f:
pass # do something with f
python2中不存在newline参数，但如果在python3中跳过它，则会在windows上得到变形错误的csv输出，其中有额外的空行。在If csvfile is a file object, it should be opened with newline=&#39;&#39;. If newline=&#39;&#39; is not specified, newlines embedded inside quoted fields will not be interpreted correctly, and on platforms that use \r\n linendings on write an extra \r will be added." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/258cba280885e9e3064809a74858b62e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-12T03:03:56+08:00" />
<meta property="article:modified_time" content="2021-01-12T03:03:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python二进制创建写模式_Python 2和3 csv模块文本二进制模式向后兼容</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>在python3上打开要与模块csv一起使用的文件时，always应该添加newline=""open语句：import sys</p> 
 <p>mode = 'w'</p> 
 <p>if sys.version_info[0] &lt; 3:</p> 
 <p>mode = 'wb'</p> 
 <p># python 3 write</p> 
 <p>with open("somefile.txt", mode, newline="") as f:</p> 
 <p>pass # do something with f</p> 
 <p>python2中不存在newline参数，但如果在python3中跳过它，则会在windows上得到变形错误的csv输出，其中有额外的空行。在If csvfile is a file object, it should be opened with newline=''. If newline='' is not specified, newlines embedded inside quoted fields will not be interpreted correctly, and on platforms that use \r\n linendings on write an extra \r will be added. It should always be safe to specify newline='', since the csv module does its own (universal) newline handling.</p> 
 <p>您还应该使用contextmanaging with：</p> 
 <p>^{pr2}$</p> 
 <p>即使遇到某种异常，也要关闭文件句柄。这是python 2的安全-请参见Methods of file objects：It is good practice to use the with keyword when dealing with file objects. This has the advantage that the file is properly closed after its suite finishes, even if an exception is raised on the way. It is also much shorter than writing equivalent try-finally blocks.</p> 
 <p>你的解决方案-丑陋但有效：import sys</p> 
 <p>python3 = sys.version_info[0] &gt;= 3</p> 
 <p>if python3:</p> 
 <p>with open("somefile.txt","w",newline="") as f:</p> 
 <p>pass</p> 
 <p>else:</p> 
 <p>with open("somefile.txt","wb") as f:</p> 
 <p>pass</p> 
 <p>问题是python2中不存在参数newline。要解决这个问题，您必须包装/monkypathopen(..)，包括contextmanagement。在</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fd03451222241cd56b8e5dd5b765e164/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">spring boot整合支付宝支付(沙箱环境)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4db197dcd64f16dff261bc58a18ef874/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">加载卡顿_为什么你电脑卡，加载速度慢，7个小技巧让你告别卡顿</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>