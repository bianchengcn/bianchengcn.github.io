<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Redis -- hash哈希 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Redis -- hash哈希" />
<meta property="og:description" content="马行软地易失蹄，人贪安逸易失志。
目录
关于Redis的hash
hash命令
hset hget
hexists
hdel
hkeys
hvals hgetall
hmget
hlen
hsetnx
hash计数
hincrby
hincrbyfloat
小结
关于Redis的hash 几乎所有的主流编程语言都提供了哈希（hash）类型，它们的叫法可能是哈希、字典、关联数组、映射。在 Redis 中，哈希类型是指值本身又是一个键值对结构，形如 key = &#34;key&#34;，value = { {field1, value1 }, ..., {fieldN, valueN } }，Redis 键值对和哈希类型二者的关系可以用图 2-15 来表示。
redis自身本来就是键值对结构了，自身的键值对就是通过hash的方式来组织的。
到了value这一层，value又可以是很多种类型，其中这节要讲的就是hash类型，同样是hash的形式来表示value。
hash命令 hset 设置 hash 中指定的字段（field）的值（value）。
语法：HSET key field value [field value ...]
返回值：添加的字段的个数。
可以添加多个字段，多个字段之间使用空格间隔。
示例：
将一个key设置为hash，然后添加两个属性域：
想要一个hset设置多个field和value，就可以直接写多个field和value，多个filed和value之间使用空格隔开：
hget 既然可以设置hash，那么必然也可以查找hash。获取 hash 中指定字段的值。
语法：hget key filed
时间复杂度：O(1)
返回值：字段对应的值或者 nil。
示例：
设置一个key的一个域名为field，也可以叫属性名，其值为test" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/ed4408ea24966108ce440bd1b7fa9309/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-01T16:56:12+08:00" />
<meta property="article:modified_time" content="2024-02-01T16:56:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Redis -- hash哈希</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><em>马行软地易失蹄，人贪安逸易失<span style="color:#fe2c24;">志</span>。</em></p> 
<hr> 
<p> <strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">关于Redis的hash</a></p> 
<p id="hash%E5%91%BD%E4%BB%A4-toc" style="margin-left:0px;"><a href="#hash%E5%91%BD%E4%BB%A4" rel="nofollow">hash命令</a></p> 
<p id="hset%C2%A0-toc" style="margin-left:40px;"><a href="#hset%C2%A0" rel="nofollow">hset </a></p> 
<p id="hget-toc" style="margin-left:40px;"><a href="#hget" rel="nofollow">hget</a></p> 
<p id="hexists-toc" style="margin-left:40px;"><a href="#hexists" rel="nofollow">hexists</a></p> 
<p id="hdel-toc" style="margin-left:40px;"><a href="#hdel" rel="nofollow">hdel</a></p> 
<p id="hkeys-toc" style="margin-left:40px;"><a href="#hkeys" rel="nofollow">hkeys</a></p> 
<p id="hvals%C2%A0%C2%A0-toc" style="margin-left:40px;"><a href="#hvals%C2%A0%C2%A0" rel="nofollow">hvals  </a></p> 
<p id="hgetall-toc" style="margin-left:40px;"><a href="#hgetall" rel="nofollow">hgetall</a></p> 
<p id="hmget-toc" style="margin-left:40px;"><a href="#hmget" rel="nofollow">hmget</a></p> 
<p id="hlen-toc" style="margin-left:40px;"><a href="#hlen" rel="nofollow">hlen</a></p> 
<p id="hsetnx-toc" style="margin-left:40px;"><a href="#hsetnx" rel="nofollow">hsetnx</a></p> 
<p id="hash%E8%AE%A1%E6%95%B0-toc" style="margin-left:0px;"><a href="#hash%E8%AE%A1%E6%95%B0" rel="nofollow">hash计数</a></p> 
<p id="hincrby-toc" style="margin-left:40px;"><a href="#hincrby" rel="nofollow">hincrby</a></p> 
<p id="hincrbyfloat-toc" style="margin-left:40px;"><a href="#hincrbyfloat" rel="nofollow">hincrbyfloat</a></p> 
<p id="%E5%B0%8F%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E5%B0%8F%E7%BB%93" rel="nofollow">小结</a></p> 
<hr id="hr-toc"> 
<p class="img-center"><img alt="" height="60" src="https://images2.imgbox.com/70/49/EN8sFgm4_o.png" width="120"></p> 
<h2 id="%E5%89%8D%E8%A8%80" style="background-color:transparent;">关于Redis的hash</h2> 
<p>        几乎所有的主流编程语言都提供了哈希（hash）类型，它们的叫法可能是哈希、字典、关联数组、映射。在 Redis 中，哈希类型是指值本身又是一个键值对结构，形如 key = "key"，value = { {field1, value1 }, ..., {fieldN, valueN } }，Redis 键值对和哈希类型二者的关系可以用图 2-15 来表示。</p> 
<p class="img-center"><img alt="" height="305" src="https://images2.imgbox.com/23/47/csgaPgM1_o.png" width="442"></p> 
<p>         redis自身本来就是键值对结构了，自身的键值对就是通过hash的方式来组织的。</p> 
<p>        到了value这一层，value又可以是很多种类型，其中这节要讲的就是hash类型，同样是hash的形式来表示value。</p> 
<h2 id="hash%E5%91%BD%E4%BB%A4" style="background-color:transparent;">hash命令</h2> 
<h3 id="hset%C2%A0" style="background-color:transparent;">hset </h3> 
<p>        设置 hash 中指定的字段（field）的值（value）。</p> 
<p><span style="color:#be191c;"><strong>语法</strong></span>：HSET key field value  [field value ...]</p> 
<p>        返回值：添加的字段的个数。</p> 
<p>        可以添加多个字段，多个字段之间使用空格间隔。</p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/6c/d4/VBj4VTqv_o.png" width="552"></p> 
<p><span style="color:#b95514;"><strong>示例</strong></span>：</p> 
<p>        将一个key设置为hash，然后添加两个属性域：</p> 
<p><img alt="" height="125" src="https://images2.imgbox.com/a0/e6/jlZUSXkJ_o.png" width="545"></p> 
<p>        想要一个hset设置多个field和value，就可以直接写多个field和value，多个filed和value之间使用空格隔开：</p> 
<p><img alt="" height="60" src="https://images2.imgbox.com/49/62/xJbcCDPw_o.png" width="839"></p> 
<h3 id="hget">hget</h3> 
<p>        既然可以设置hash，那么必然也可以查找hash。获取 hash 中指定字段的值。</p> 
<p><span style="color:#b95514;"><strong>语法</strong></span>：hget  key  filed</p> 
<p>        时间复杂度：O(1)<br>         返回值：字段对应的值或者 nil。</p> 
<p>示例：</p> 
<p>        设置一个key的一个域名为field，也可以叫属性名，其值为test</p> 
<p><img alt="" height="69" src="https://images2.imgbox.com/6f/c6/9vaGOMy8_o.png" width="545"></p> 
<p>        使用hget获取这个值：</p> 
<p><img alt="" height="61" src="https://images2.imgbox.com/0a/a8/FehTgGs1_o.png" width="443"></p> 
<hr> 
<p>        除了get和set，当然也有exists呀，那么hash的exists就是hexists。</p> 
<hr> 
<h3 id="hexists">hexists</h3> 
<p>        判断hash中是否有指定<strong><span style="color:#fe2c24;">字段</span></strong></p> 
<p><span style="color:#be191c;"><strong>语法</strong></span>：hexists key field</p> 
<p>        返回值：1表示存在，0表示不存在</p> 
<p>        时间复杂度O（1）</p> 
<p><span style="color:#b95514;"><strong>示例</strong></span>：</p> 
<p><img alt="" height="249" src="https://images2.imgbox.com/3d/8e/KQRFHAy6_o.png" width="528"></p> 
<p>        field1存在于key，所以返回1，field2不存在于key，所以返回0。</p> 
<hr> 
<p>        有get，set，eixsts。那么必然也有del，对于hash的del那么就是hdel</p> 
<h3 id="hdel">hdel</h3> 
<p>        删除hash中指定key的指定字段。而不是删除key本身。删除key本身是使用del key。</p> 
<p><span style="color:#b95514;"><strong>语法</strong></span>：hdel key field  [field ... ]</p> 
<p>        可以一次性输入多个field，多个field之间使用空格隔开。</p> 
<p>        返回值：返回顺利被删除的field的个数。</p> 
<p><span style="color:#fe2c24;"><strong>示例</strong></span>：</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/c1/52/9DhYMrjI_o.png" width="458"></p> 
<p>        删除一个不存在的field时候，返回0.</p> 
<p>        直接del key将会删除整个hash 表。</p> 
<hr> 
<p>        学习了hget，你就会发现，我每次都去hget某一个key，而且每一次只能获取一个字段，但是如果我想要获取整个字段集合呢？？那么hget就有点力不从心了。所以下面这个命令就是解决这个问题。</p> 
<hr> 
<h3 id="hkeys">hkeys</h3> 
<p>         把对应hash的key，然后将其key全部列出来。</p> 
<p><span style="color:#fe2c24;"><strong>语法</strong></span>：hkeys key</p> 
<p>        时间复杂度：O（N），其中N表示此hash中key的个数。</p> 
<p><strong><span style="color:#ff9900;">演示</span></strong>：</p> 
<p><img alt="" height="186" src="https://images2.imgbox.com/ba/6a/crghGqO1_o.png" width="581"></p> 
<h3 id="hvals%C2%A0%C2%A0">hvals  </h3> 
<p>        获取hash key中的所有的value</p> 
<p><span style="color:#fe2c24;"><strong>语法</strong></span>：hvals key</p> 
<p>        时间复杂度O（N），N表示field的个数。</p> 
<p>        返回值：所有的key对应的value值</p> 
<p><strong><span style="color:#be191c;">示例</span></strong>：</p> 
<p>        设置三个域：</p> 
<p><img alt="" height="69" src="https://images2.imgbox.com/c5/a5/kVJlej4g_o.png" width="599"></p> 
<p>        获取他们的value：</p> 
<p><img alt="" height="132" src="https://images2.imgbox.com/07/62/QEopJPkZ_o.png" width="375"></p> 
<hr> 
<p>        虽然有hkeys和hvals，但是所有的key和value都不“同窗”，不会在一个命令中全部显示出来，这个怎么处理？下面的命令就解决了这个问题。</p> 
<hr> 
<h3 id="hgetall" style="background-color:transparent;">hgetall</h3> 
<p>        获取hash中所有的值。</p> 
<p><span style="color:#be191c;"><strong>语法</strong></span>：hgetall key</p> 
<p>        时间复杂度：O(N), N 为 field 的个数。</p> 
<p>        返回值：所有的值，他们两两成对出现。</p> 
<p><strong><span style="color:#ff9900;">示例</span></strong>：</p> 
<p><img alt="" height="213" src="https://images2.imgbox.com/93/2e/FPC9e90L_o.png" width="436"></p> 
<hr> 
<h3 id="hmget">hmget</h3> 
<p>        一次性获取多个hash key的field。</p> 
<p><span style="color:#fe2c24;"><strong>语法</strong></span>：hmget key field1 field2 ......</p> 
<p>        此处返回值为对应的field的值，多个value的顺序是和输入的field顺序相一致。</p> 
<p><strong><span style="color:#9c8ec1;">示例</span></strong>：</p> 
<p><img alt="" height="124" src="https://images2.imgbox.com/02/fe/VST91b2d_o.png" width="468"></p> 
<hr> 
<p><span style="color:#fe2c24;"><strong>注意</strong></span>：redis也有hmset，但是hmset的功能hset已经提供，这里不再赘述。</p> 
<p>        同时，上述的命令：hvals，hkeys，hgetall，都是 存在一定风险的命令，hash的域太多，执行会消耗较长的时间，从而阻塞redis。redsi提供了一个额外的命令处理这种问题：hscan，敲一次遍历一个，连续敲多次就可以全部遍历完成。</p> 
<hr> 
<h3 id="hlen">hlen</h3> 
<p>        获取 hash 中的所有字段的个数。</p> 
<p>语法：HLEN key<br>         返回值：此key中的字段的个数。</p> 
<p>示例：</p> 
<p>        有如下这个hashkey：</p> 
<p><img alt="" height="217" src="https://images2.imgbox.com/0d/62/WeMKxxbr_o.png" width="418"></p> 
<p>        我们查看其字段个数：<br><img alt="" height="65" src="https://images2.imgbox.com/e1/91/llCwNw5T_o.png" width="339"></p> 
<h3 id="hsetnx" style="background-color:transparent;">hsetnx</h3> 
<p>        在字段不存在的情况下，设置 hash 中的字段和值。</p> 
<p>语法：HSETNX key field value</p> 
<p>        时间复杂度：O(1)。</p> 
<p>        返回值：1 表示设置成功，0 表示失败。</p> 
<p>示例：</p> 
<p><img alt="" height="61" src="https://images2.imgbox.com/a8/4b/8IOwl9O8_o.png" width="495"></p> 
<p>        因为当前的key的fi字段不存在，所以设置成功返回1，如果再次hsetnx key f1就会失败：</p> 
<p><img alt="" height="65" src="https://images2.imgbox.com/ca/4b/u7hIRe3p_o.png" width="479"></p> 
<h2 id="hash%E8%AE%A1%E6%95%B0">hash计数</h2> 
<h3 id="hincrby">hincrby</h3> 
<p>        将 hash 中字段对应的数值添加指定的值。</p> 
<p><span style="color:#1c7331;"><strong>语法</strong></span>：HINCRBY  key field increment</p> 
<p>        返回值为计算之后的结果。</p> 
<p>        时间复杂度O（1）</p> 
<p><span style="color:#fe2c24;"><strong>示例</strong></span>：</p> 
<p><img alt="" height="186" src="https://images2.imgbox.com/51/c0/7okbw9Hd_o.png" width="455"></p> 
<h3 id="hincrbyfloat">hincrbyfloat</h3> 
<p>        HINCRBY 的浮点数版本。这里不再赘述。</p> 
<h2 id="%E5%B0%8F%E7%BB%93" style="background-color:transparent;">小结</h2> 
<p><img alt="" height="720" src="https://images2.imgbox.com/2f/8d/4d4DOwOy_o.png" width="1200"><img alt="" height="765" src="https://images2.imgbox.com/57/1c/fDO1nKpp_o.png" width="1200"><img alt="" height="78" src="https://images2.imgbox.com/bc/58/zwXlIdaD_o.png" width="1200"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/28dd0055b9af0bda05b1e887d6bec105/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">FileZilla 425 无法连接FTP的解决方法(阿里云服务器)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e8eb3d630e3bf46fe1030c6a90567f8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java安全之SnakeYaml漏洞分析与利用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>