<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Node.js】fs与path模块的基础使用 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Node.js】fs与path模块的基础使用" />
<meta property="og:description" content="文章目录 前言一、什么叫做模块二、fs模块2.1 fs模块是干什么的？2.2 fs模块的使用导入fs模块读取文件的内容写入文件内容处理路径问题path路径模块 总结 前言 在Node.js中，fs模块（文件系统模块）是一个重要的核心模块，它提供了对文件系统进行各种操作的能力。无论是读取文件内容、写入文件，还是创建、删除目录，fs模块都是不可或缺的工具之一。本文将深入探讨fs模块的基础使用，帮助开发者更好地理解如何在Node.js环境中进行文件操作，从而为构建文件处理相关的应用打下坚实基础。
一、什么叫做模块 在Node.js中，模块是一种组织和封装代码的机制，用于将应用程序拆分为独立且可维护的部分。每个模块都有自己的作用域，可以包含变量、函数、类等，这样可以有效地避免全局作用域的污染和命名冲突。
二、fs模块 2.1 fs模块是干什么的？ fs 模块是 Node.js 中的一个核心模块，用于处理文件系统操作。它提供了一系列的方法，使得你可以对文件和目录进行读取、写入、更新、删除等操作。以下是一些常见的 fs 模块的功能：
文件读写操作： fs 模块提供了读取和写入文件的方法，可以同步或异步地进行操作。这包括了文本文件和二进制文件的读写。
目录操作： 可以创建、删除、读取目录，以及获取目录下的文件列表等。
文件和目录信息： 提供了获取文件和目录信息的方法，如文件大小、创建时间、修改时间等。
文件重命名和删除： 可以通过 fs.rename() 方法进行文件重命名，通过 fs.unlink() 方法删除文件。
文件流操作： fs 模块支持使用文件流进行读写操作，这对于处理大型文件或流式数据非常有用。
文件权限操作： 可以设置和获取文件的权限信息，以及判断当前用户对文件的权限。
符号链接操作： 提供了创建、读取和删除符号链接的方法。
总的来说，fs 模块为 Node.js 提供了丰富的文件系统操作功能，使得开发者可以轻松地进行文件和目录的处理，适用于各种应用场景，从简单的文件读写到复杂的文件系统操作。通过这个模块，Node.js 可以方便地与本地文件系统进行交互，是构建文件处理和文件管理应用的重要工具。
2.2 fs模块的使用 导入fs模块 我们可以使用require函数导入指定的模块
参数填我们要导入的模块名称，我们可以通过使用返回值操作这个模块
const fs = require(&#39;fs&#39;) 读取文件的内容 语法格式：
fs.readFile(path[，options]，callback) 用中括号表示是可选的参数
参数解读
参数1:必选参数，字符串，表示文件的路径。
参数2:可选参数，表示以什么编码格式来读取文件
参数3:必选参数，文件读取完成后，通过回调函数拿到读取的结果
示例代码：
const fs = require(&#39;fs&#39;) fs.readFile(&#39;./fsTest.txt&#39;,&#39;utf8&#39;,(err,data)=&gt;{ console.log(data) console.log(&#39;--------------------------------&#39;) console.log(err) }) 中间的就是我们的可选参数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/7be913ae1f421e7158f79f345197522e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-30T10:50:01+08:00" />
<meta property="article:modified_time" content="2024-01-30T10:50:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Node.js】fs与path模块的基础使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">前言</a></li><li><a href="#_10" rel="nofollow">一、什么叫做模块</a></li><li><a href="#fs_13" rel="nofollow">二、fs模块</a></li><li><ul><li><a href="#21_fs_14" rel="nofollow">2.1 fs模块是干什么的？</a></li><li><a href="#22_fs_33" rel="nofollow">2.2 fs模块的使用</a></li><li><ul><li><a href="#fs_34" rel="nofollow">导入fs模块</a></li><li><a href="#_41" rel="nofollow">读取文件的内容</a></li><li><a href="#_75" rel="nofollow">写入文件内容</a></li><li><a href="#_123" rel="nofollow">处理路径问题</a></li><li><a href="#path_131" rel="nofollow">path路径模块</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_152" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_5"></a>前言</h2> 
<p>在Node.js中，fs模块（文件系统模块）是一个重要的核心模块，它提供了对文件系统进行各种操作的能力。无论是读取文件内容、写入文件，还是创建、删除目录，fs模块都是不可或缺的工具之一。本文将深入探讨fs模块的基础使用，帮助开发者更好地理解如何在Node.js环境中进行文件操作，从而为构建文件处理相关的应用打下坚实基础。</p> 
<hr> 
<h2><a id="_10"></a>一、什么叫做模块</h2> 
<p>在Node.js中，模块是一种组织和封装代码的机制，用于将应用程序拆分为独立且可维护的部分。每个模块都有自己的作用域，可以包含变量、函数、类等，这样可以有效地避免全局作用域的污染和命名冲突。</p> 
<h2><a id="fs_13"></a>二、fs模块</h2> 
<h3><a id="21_fs_14"></a>2.1 fs模块是干什么的？</h3> 
<p>fs 模块是 Node.js 中的一个核心模块，用于处理文件系统操作。它提供了一系列的方法，使得你可以对文件和目录进行读取、写入、更新、删除等操作。以下是一些常见的 fs 模块的功能：</p> 
<p>文件读写操作： fs 模块提供了读取和写入文件的方法，可以同步或异步地进行操作。这包括了文本文件和二进制文件的读写。</p> 
<p>目录操作： 可以创建、删除、读取目录，以及获取目录下的文件列表等。</p> 
<p>文件和目录信息： 提供了获取文件和目录信息的方法，如文件大小、创建时间、修改时间等。</p> 
<p>文件重命名和删除： 可以通过 fs.rename() 方法进行文件重命名，通过 fs.unlink() 方法删除文件。</p> 
<p>文件流操作： fs 模块支持使用文件流进行读写操作，这对于处理大型文件或流式数据非常有用。</p> 
<p>文件权限操作： 可以设置和获取文件的权限信息，以及判断当前用户对文件的权限。</p> 
<p>符号链接操作： 提供了创建、读取和删除符号链接的方法。</p> 
<p>总的来说，fs 模块为 Node.js 提供了丰富的文件系统操作功能，使得开发者可以轻松地进行文件和目录的处理，适用于各种应用场景，从简单的文件读写到复杂的文件系统操作。通过这个模块，Node.js 可以方便地与本地文件系统进行交互，是构建文件处理和文件管理应用的重要工具。</p> 
<h3><a id="22_fs_33"></a>2.2 fs模块的使用</h3> 
<h4><a id="fs_34"></a>导入fs模块</h4> 
<p>我们可以使用require函数导入指定的模块<br> 参数填我们要导入的模块名称，我们可以通过使用返回值操作这个模块</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_41"></a>读取文件的内容</h4> 
<p>语法格式：</p> 
<pre><code class="prism language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">[</span>，options<span class="token punctuation">]</span>，callback<span class="token punctuation">)</span>
</code></pre> 
<p>用中括号表示是可选的参数<br> 参数解读<br> 参数1:必选参数，字符串，表示文件的路径。<br> 参数2:可选参数，表示以什么编码格式来读取文件<br> 参数3:必选参数，文件读取完成后，通过回调函数拿到读取的结果</p> 
<p>示例代码：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./fsTest.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'--------------------------------'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>中间的就是我们的可选参数</p> 
<p><img src="https://images2.imgbox.com/61/fe/tSnXJhyK_o.png" alt="在这里插入图片描述"><br> 这样我们就把文件里面的东西读出来了。<br> 回调函数的第一个参数是<code>判断是否有错误的</code>如果成功则返回null，如果读取失败，则 err 的值为 错误对象，<br> data 的值为 undefined、第二个参数是<code>文件里面的数据</code></p> 
<p>err可以通过message打印里面的错误信息</p> 
<h4><a id="_75"></a>写入文件内容</h4> 
<p>语法格式：</p> 
<pre><code class="prism language-javascript">fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span>， callback<span class="token punctuation">)</span>
</code></pre> 
<p>参数解读:<br> 参数1:必选参数，需要指定一个文件路径的字符串，表示文件的存放路径<br> 参数2:必选参数，表示要写入的内容<br> 参数3:可选参数，表示以什么格式写入文件内容，默认值是 utf8。<br> 参数4:必选参数，文件写入完成后的回调函数。</p> 
<p>示例代码：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./fsTest.txt'</span><span class="token punctuation">,</span><span class="token string">'Hello Write File'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>回调函数的第一个参数是<code>判断是否有错误的</code>如果成功则返回null，如果读取失败，则 err 的值为 错误对象，err可以通过message打印里面的错误信息<br> <img src="https://images2.imgbox.com/34/a5/WmaDjDBk_o.png" alt="在这里插入图片描述"><br> 除了上面这个还有一个尾添加的函数，上面那个写了会把原来的覆盖，如果你不想覆盖可以使用下面这个：</p> 
<pre><code class="prism language-javascript">fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
</code></pre> 
<p>示例代码：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> filePath <span class="token operator">=</span> <span class="token string">'example.txt'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newData <span class="token operator">=</span> <span class="token string">'This data will be appended to the file.'</span><span class="token punctuation">;</span>

<span class="token comment">// 使用 fs.appendFile 追加数据到文件</span>
fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> newData<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error appending to file:'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Data appended to file successfully.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h4><a id="_123"></a>处理路径问题</h4> 
<p>为什么会出现这个问题：<br> 在使用 fs 模块操作文件时，如果提供的操作路径是以 ./或 …/ 开头的相对路径时，很容易出现路径动态拼接错误的问题.<br> 原因:代码在运行的时候，会以执行 node 命令时所处的目录，动态拼接出被操作文件的完整路径.</p> 
<p>面对这个问题，我们可以提供完整的路径，但是这个方法可维护性不好<br> node.js提供了一个变量，表示当前文件的路径<code>__dirname</code>我们可以使用它来解决</p> 
<h4><a id="path_131"></a>path路径模块</h4> 
<p>Node.js 中的 path 模块用于处理文件路径和目录路径，提供了一些实用的方法来操作路径字符串。path 模块是 Node.js 核心模块之一，因此无需额外安装即可使用。</p> 
<p>路径的拼接：</p> 
<pre><code class="prism language-javascript">path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>使用示例：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> str <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">,</span><span class="token string">'/b/c'</span><span class="token punctuation">,</span><span class="token string">'../'</span><span class="token punctuation">,</span><span class="token string">'./d'</span><span class="token punctuation">,</span><span class="token string">'e'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/fe/f4/OV5C9pWJ_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_152"></a>总结</h2> 
<p>通过本文，我们对Node.js中的fs模块有了基础的了解，并学会了如何读取文件、写入文件，以及进行简单的目录操作。文件系统操作是Node.js应用中常见的任务之一，熟练使用fs模块将使开发者能够更高效地处理文件相关操作，提升应用的文件管理能力。在实际项目中，深入学习和灵活运用fs模块将成为打造强大Node.js应用的重要一环。希望本文能够为你在Node.js文件系统操作方面的学习提供帮助，愿你在Node.js的世界中编程愉快！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad3041051b7c64ee2d6aa20239300196/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何利用Java的ServiceLoader机制来动态加载插件类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/16e1e44c945474c8126318bb34bae5df/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何理解Anaconda自带了许多用于科学计算的库？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>