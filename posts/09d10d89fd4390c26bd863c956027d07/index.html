<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>结构体的使用 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="结构体的使用" />
<meta property="og:description" content="结构体struct 1.结构体的基本用法 1.1 定义 结构体是由一批数据组合而成的结构型数据。组成结构型数据的每个数据称为结构型数据的“成员” ，其描述了一块内存区间的大小及解释意义。
1.2 定义格式 struct 结构体名
{
数据类型 成员变量1;
数据类型 成员变量2;
数据类型 成员变量3;
…
};
举例：构造一个新的数据类型叫student,用来描述学生。
struct student
{
char name[32];
int age;
float score;
};
1.3 结构体变量 1.3.1 概念 通过结构体数据类型定义的变量
1.3.2 格式 struct 结构体名 变量名;
1.3.3 定义结构体变量 (1)先定义结构体，再定义结构体变量。
struct 结构体名
{
成员变量;
};
struct 结构体名 变量名;
例如：
struct student
{
char name[32];
int age;
float score;
};
struct student s1;
(2)定义结构体的同时，定义结构体变量。
struct 结构体名
{" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/09d10d89fd4390c26bd863c956027d07/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-11T21:55:59+08:00" />
<meta property="article:modified_time" content="2023-05-11T21:55:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">结构体的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="struct_0"></a>结构体struct</h3> 
<h2><a id="1_2"></a>1.结构体的基本用法</h2> 
<h3><a id="11__3"></a>1.1 定义</h3> 
<p>结构体是由一批数据组合而成的结构型数据。组成结构型数据的每个数据称为结构型数据的“成员” ，其描述了一块内存区间的大小及解释意义。</p> 
<h3><a id="12__6"></a>1.2 定义格式</h3> 
<blockquote> 
 <p>struct 结构体名<br> {<!-- --><br> 数据类型 成员变量1;<br> 数据类型 成员变量2;<br> 数据类型 成员变量3;<br> …<br> };</p> 
</blockquote> 
<p>举例：构造一个新的数据类型叫student,用来描述学生。</p> 
<blockquote> 
 <p>struct student<br> {<!-- --><br> char name[32];<br> int age;<br> float score;<br> };</p> 
</blockquote> 
<h3><a id="13__24"></a>1.3 结构体变量</h3> 
<h4><a id="131__25"></a>1.3.1 概念</h4> 
<p>通过结构体数据类型定义的变量</p> 
<h4><a id="132__28"></a>1.3.2 格式</h4> 
<blockquote> 
 <p>struct 结构体名 变量名;</p> 
</blockquote> 
<h4><a id="133__31"></a>1.3.3 定义结构体变量</h4> 
<p><strong>(1)先定义结构体，再定义结构体变量。</strong></p> 
<blockquote> 
 <p>struct 结构体名<br> {<!-- --><br> 成员变量;<br> };</p> 
</blockquote> 
<p>struct 结构体名 变量名;<br> 例如：</p> 
<blockquote> 
 <p>struct student<br> {<!-- --><br> char name[32];<br> int age;<br> float score;<br> };<br> struct student s1;</p> 
</blockquote> 
<p><strong>(2)定义结构体的同时，定义结构体变量。</strong></p> 
<blockquote> 
 <p>struct 结构体名<br> {<!-- --><br> 成员变量;<br> } 变量名;</p> 
</blockquote> 
<p>例如：</p> 
<blockquote> 
 <p>struct person<br> {<!-- --><br> char name[32];<br> int age;<br> } per1;</p> 
</blockquote> 
<p>也可以缺省结构体名定义结构体变量：</p> 
<blockquote> 
 <p>struct<br> {<!-- --><br> 成员变量;<br> } 变量名;</p> 
</blockquote> 
<h4><a id="134__69"></a>1.3.4 结构体变量赋值</h4> 
<p>先定义一个结构体：</p> 
<blockquote> 
 <p>struct student<br> {<!-- --><br> int id;<br> char name[32];<br> int age;<br> };</p> 
</blockquote> 
<p><strong>(1)定义结构体变量时直接用花括号赋值：</strong></p> 
<blockquote> 
 <p>struct student stu1 ={1,“xiaofang”, 18};</p> 
</blockquote> 
<p><strong>(2)定义结构体变量时直接用点等法赋值:</strong></p> 
<blockquote> 
 <p>struct student stu2 ={<!-- --><br> .id = 2,<br> .name = “xiaoming”,<br> .age = 42<br> };</p> 
</blockquote> 
<p><strong>(3)定义结构体变量时未初始化，需要挨个单独赋值:</strong></p> 
<blockquote> 
 <p>struct student stu3;<br> stu3.id = 3;<br> stu3.age = 69;<br> strcpy(stu3.name,“laowang”); 注意字符串以这种方式赋值的话，需要用strcpy</p> 
</blockquote> 
<h4><a id="135__97"></a>1.3.5 访问结构体成员变量</h4> 
<p>通过.访问： <strong>结构体变量名.结构体成员变量名。</strong></p> 
<blockquote> 
 <p>struct student stu4;<br> scanf(“%d %s %d”,&amp;stu4.id,stu4.name,&amp;stu4.age);<br> printf(“%d %s %d\n”,stu4.id,stu4.name,stu4.age);</p> 
</blockquote> 
<p><strong>练习</strong>：创建一个名为student的结构体，包含姓名，学号，班级, 从终端输入学生的信息并打印。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">student</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">int</span> class<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">struct</span> <span class="token class-name">student</span> stu1<span class="token punctuation">;</span>
   <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s %d %d"</span><span class="token punctuation">,</span>stu1<span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token operator">&amp;</span>stu1<span class="token punctuation">.</span>id<span class="token punctuation">,</span><span class="token operator">&amp;</span>stu1<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d %d\n"</span><span class="token punctuation">,</span>stu1<span class="token punctuation">.</span>name<span class="token punctuation">,</span>stu1<span class="token punctuation">.</span>id<span class="token punctuation">,</span>stu1<span class="token punctuation">.</span>class<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="136__typedef_123"></a>1.3.6 重定义 typedef</h4> 
<p>给语句另起一个名字<br> 例如：<br> <strong>typedef int size_t;</strong><br> 此时int a; 也可以写成 size_t a;<br> <em><em>typedef int</em> int_pointer;</em>*<br> int a;<br> 此时int* p=&amp;a; 可以写成 int_pointer p=&amp;a;</p> 
<p><strong>(1)定义结构体的同时重定义</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">flower</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> type<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> size<span class="token punctuation">;</span>
    <span class="token keyword">char</span> color<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> flo<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    flo f1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"rose"</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d %s\n"</span><span class="token punctuation">,</span>f1<span class="token punctuation">.</span>type<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>size<span class="token punctuation">,</span>f1<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>(2)先定义结构体，再进行重定义。</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">struct</span> <span class="token class-name">animal</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> type<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> class<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> wight<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">animal</span> ANIMAL<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ANIMAL an1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"dog"</span><span class="token punctuation">,</span><span class="token string">"buru"</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %d\n"</span><span class="token punctuation">,</span>an1<span class="token punctuation">.</span>type<span class="token punctuation">,</span>an1<span class="token punctuation">.</span>class<span class="token punctuation">,</span>an1<span class="token punctuation">.</span>wight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>练习</strong>：创建一个描述手机的结构体叫phone, 包含品牌，型号，颜色，价格。从终端输入你自己手机的信息并打印。</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">phone</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> brand<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> typde<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> color<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span> pho<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    pho ph1<span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s %s %s %d"</span><span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>brand<span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>typde<span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>color<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ph1<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %s %d\n"</span><span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>brand<span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>typde<span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>color<span class="token punctuation">,</span> ph1<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="2_189"></a>2.结构体数组</h2> 
<h3><a id="21__190"></a>2.1 概念</h3> 
<p>结构体类型相同的变量组成的数组</p> 
<h3><a id="22__192"></a>2.2 定义格式</h3> 
<p><strong>（1）定义结构体同时定义结构体数组</strong></p> 
<blockquote> 
 <p>struct student<br> {<!-- --><br> int id;<br> int age;<br> float score;<br> } stu[5];</p> 
</blockquote> 
<p><strong>(2)先定义结构体，再定义结构体数组。</strong></p> 
<blockquote> 
 <p>struct student<br> {<!-- --><br> int id;<br> int age;<br> float score;<br> };<br> struct student stu[5];</p> 
</blockquote> 
<h3><a id="23__210"></a>2.3 初始化和赋值</h3> 
<p><strong>（1）定义结构体数组的同时赋值</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">hero</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> postion<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill1<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill2<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill3<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill4<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">hero</span> h<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"ali"</span><span class="token punctuation">,</span><span class="token string">"fashi"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"2"</span><span class="token punctuation">,</span><span class="token string">"3"</span><span class="token punctuation">,</span><span class="token string">"4"</span><span class="token punctuation">,</span><span class="token number">4300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"shitou"</span><span class="token punctuation">,</span><span class="token string">"tanke"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">,</span><span class="token string">"2"</span><span class="token punctuation">,</span><span class="token string">"3"</span><span class="token punctuation">,</span><span class="token string">"4"</span><span class="token punctuation">,</span><span class="token number">3150</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %s %s %s %s %d\n"</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>postion<span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>skill1<span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>skill2<span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>skill3<span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>skill4<span class="token punctuation">,</span> h<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>(2)先定义结构体数组，在对数组内每个元素分别赋值。</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">hero</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> postion<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill1<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill2<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill3<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> skill4<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">hero</span> he<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">strcpy</span><span class="token punctuation">(</span>he<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span><span class="token string">"namei"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">strcpy</span><span class="token punctuation">(</span>he<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>postion<span class="token punctuation">,</span><span class="token string">"fashi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    he<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>price <span class="token operator">=</span> <span class="token number">6300</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %d\n"</span><span class="token punctuation">,</span> he<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> he<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>postion<span class="token punctuation">,</span>he<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="24__265"></a>2.4 结构体数组输入输出（通过循环）</h3> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">hero</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">char</span> postion<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> life<span class="token punctuation">;</span>
    <span class="token keyword">int</span> magic<span class="token punctuation">;</span>
    <span class="token keyword">float</span> speed<span class="token punctuation">;</span>
    <span class="token keyword">int</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">hero</span> h<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"ali"</span><span class="token punctuation">,</span> <span class="token string">"magicer"</span><span class="token punctuation">,</span> <span class="token number">596</span><span class="token punctuation">,</span> <span class="token number">481</span><span class="token punctuation">,</span> <span class="token number">53.04</span><span class="token punctuation">,</span> <span class="token number">6300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"gailun"</span><span class="token punctuation">,</span> <span class="token string">"tank"</span><span class="token punctuation">,</span> <span class="token number">700</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">55.04</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"jee"</span><span class="token punctuation">,</span> <span class="token string">"ad"</span><span class="token punctuation">,</span> <span class="token number">596</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">55.04</span><span class="token punctuation">,</span> <span class="token number">6300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"cat"</span><span class="token punctuation">,</span> <span class="token string">"helfer"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">6300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{<!-- --></span><span class="token string">"ez"</span><span class="token punctuation">,</span> <span class="token string">"adc"</span><span class="token punctuation">,</span> <span class="token number">550</span><span class="token punctuation">,</span> <span class="token number">450</span><span class="token punctuation">,</span> <span class="token number">53.04</span><span class="token punctuation">,</span> <span class="token number">6300</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %d %d %f %d\n"</span><span class="token punctuation">,</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>postion<span class="token punctuation">,</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>life<span class="token punctuation">,</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>magic<span class="token punctuation">,</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>speed
<span class="token punctuation">,</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="25__298"></a>2.5 结构体大小</h3> 
<p>（1）结构体类型大小*元素个数<br> （2）用sizeof(struct 结构体名) 或者sizeof(结构体变量名)<br> 例如接着上面的练习：<br> printf(“struct hero:%d %d\n”,sizeof(struct hero),sizeof(h));//80 400</p> 
<h2><a id="3_305"></a>3.结构体大小以及对齐原则</h2> 
<h3><a id="31_sizeof_306"></a>3.1 结构体大小用sizeof计算</h3> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">st</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> a<span class="token punctuation">;</span>
    <span class="token keyword">char</span> b<span class="token punctuation">;</span>
    <span class="token keyword">int</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">s</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> a<span class="token punctuation">;</span>
    <span class="token keyword">int</span> b<span class="token punctuation">;</span>
    <span class="token keyword">char</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">st</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//8</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">s</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//12</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="32__334"></a>3.2 字节对齐原则</h3> 
<p>（1）第一个成员在相对于结构体变量起始位置偏移量为0的地址处<br> （通俗点来说，就是第一个成员变量的地址与结构体起始位置的地址是相同的）如下图所示：<br> <img src="https://images2.imgbox.com/e5/f9/BNWHWkJe_o.png" alt="在这里插入图片描述"></p> 
<p>（2）用结构体成员里面最大的数据类型的大小和字节进行比较，然后按照字节数小的为单位开辟空间。例如上图例子，每个成员都要给他以4字节为单位开辟空间。</p> 
<p>用结构体成员里面最大的数据类型的大小和字节进行比较，然后按照字节数小的为单位开辟空间。 通俗来说，结构体将结构体内最大的数据类型与4字节比较，<strong>以小的为基准</strong>。结构体是以4字节为单位进行存储的，相同类型的可以合并4字节存储起来，如</p> 
<blockquote> 
 <p>char a<br> char b<br> int c</p> 
</blockquote> 
<p><strong>是两个char占用4字节，加Int是八字节</strong><br> <strong>如果5个char占用8字节。</strong></p> 
<blockquote> 
 <p>char a[29]<br> char b[29]<br> int c</p> 
</blockquote> 
<p>以4字节为基准，两个字符数组60字节。29+29=58&lt;60（60/4=12）再加4,总的是64字节。</p> 
<h3><a id="33__354"></a>3.3 节省空间原则</h3> 
<p>为了减少空间浪费，把占用空间小的成员集中到一起。<br> <img src="https://images2.imgbox.com/9a/07/AGdJCv77_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4_359"></a>4.结构体指针</h2> 
<h3><a id="41__360"></a>4.1 概念</h3> 
<p>指向结构体变量的指针</p> 
<h3><a id="42__362"></a>4.2 定义格式</h3> 
<p>*<em>struct 结构体名 <em>结构体指针名；</em></em><br> 例如：</p> 
<blockquote> 
 <p>struct student<br> {<!-- --><br> int id;<br> char name[32];<br> }s1,s2;<br> struct work<br> {<!-- --><br> int id;<br> int age;<br> }w1,w2;<br> struct student *sp = &amp;s1;<br> //struct student *p=&amp;w1; //错误，结构体类型不同</p> 
</blockquote> 
<h3><a id="43__380"></a>4.3 结构体指针成员变量赋值</h3> 
<p><strong>格式：指针变量名-&gt;成员变量名</strong><br> 或者：(*指针变量名).成员变量名<br> <strong>注意</strong> 在对数组中元素赋值是，第二种要用：<strong>指针变量名[i].成员变量名，即p[i].name,</strong></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>
<span class="token keyword">struct</span> <span class="token class-name">student</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>s1<span class="token punctuation">,</span>s2<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">struct</span> <span class="token class-name">student</span> <span class="token operator">*</span>sp <span class="token operator">=</span> <span class="token operator">&amp;</span>s1<span class="token punctuation">;</span>
    <span class="token function">strcpy</span><span class="token punctuation">(</span>sp<span class="token operator">-&gt;</span>name<span class="token punctuation">,</span><span class="token string">"xiaoming"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sp<span class="token operator">-&gt;</span>id<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d\n"</span><span class="token punctuation">,</span>s1<span class="token punctuation">.</span>name<span class="token punctuation">,</span>s1<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d\n"</span><span class="token punctuation">,</span>sp<span class="token operator">-&gt;</span>name<span class="token punctuation">,</span>sp<span class="token operator">-&gt;</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结构体指针大小：4字节，因为本质还是指针。</p> 
<h3><a id="44__408"></a>4.4 结构体内结构体</h3> 
<p>如果结构体内成员本身属于另一种结构体，得用若干个成员运算符一级级找到最低级的成员变量。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h&gt;</span></span>

<span class="token keyword">struct</span> <span class="token class-name">work</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> ip<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">student</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">int</span> age<span class="token punctuation">;</span>
    <span class="token keyword">struct</span> <span class="token class-name">work</span> w1<span class="token punctuation">;</span>
<span class="token punctuation">}</span> stu1<span class="token punctuation">,</span> stu2<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    stu1<span class="token punctuation">.</span>w1<span class="token punctuation">.</span>ip <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    stu1<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    stu1<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d %d %d\n"</span><span class="token punctuation">,</span> stu1<span class="token punctuation">.</span>w1<span class="token punctuation">.</span>ip<span class="token punctuation">,</span> stu1<span class="token punctuation">.</span>id<span class="token punctuation">,</span> stu1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>结构体总结：</strong><br> 1.不能把结构体类型变量作为整体引用，只能对结构体内变量中的各个成员分别引用。<br> 2.如果成员本身属于另一种结构体类型，要用若干个成员运算符.一级级找到最低级成员变量。<br> 3.可以把成员变量当成普通变量运算<br> 4.在数组中，成员之间不能彼此赋值，但是结构体变量可以互相赋值。</p> 
<p><strong>练习</strong>：创建一个结构体数组，数组名为book，结构体成员包含编号，书名，售价（数据类型自己设定）。写一个函数，包含两个形参，分别接收结构体数组的首地址和一个指定的售价，函数的功能为打印结构体数组中售价大于指定售价的书的信息。<br> #include &lt;stdio.h&gt;<br> #include &lt;string.h&gt;</p> 
<p>typedef struct book<br> {<!-- --><br> int number;<br> char name[32];<br> int price;<br> } BOOK;<br> BOOK b[5]={<!-- --><br> {1,“santi”,25},<br> {2,“hongloumeng”,45},<br> {3,“jinpingmei”,50},<br> {4,“xiyouji”,87},<br> {5,“sanguo”,67}<br> };</p> 
<p>void book_Pri(BOOK *p, int n)<br> {<!-- --><br> for(int i=0;i&lt;5;i++)<br> {<!-- --><br> if(p-&gt;price &gt;= n)<br> printf(“%d %s %d\n”,p-&gt;number,p-&gt;name,p-&gt;price);<br> p++;<br> }<br> }<br> int main()<br> {<!-- --><br> book_Pri(b,50);<br> return 0;<br> }</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/de29b5a3102bfa47f229555a36b307ef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JavaScript基础语法篇超详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d4b0a388cc9f7f0ec37ef2053e28c987/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【C语言】扫雷游戏</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>