<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NodeJs-fs模块 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NodeJs-fs模块" />
<meta property="og:description" content="目录 一、fs简介二、文件写入2.1 writeFile 异步写入2.2 writeFileSync 同步写入2.3 appendFile / appendFileSync 追加写入2.4 createWriteStream 流式写入 三、文件读取3.1 readFile 异步读取3.2 readFileSync 同步读取3.3 createReadStream 流式读取 四、文件移动与重命名五、文件删除六、文件夹操作6.1 mkdir创建文件夹6.2 readdir 读取文件夹6.3 rmdir 删除文件夹 七、查看资源状态八、__dirname 和 path8.1 __dirname8.2 path 模块 一、fs简介 ~~~~~~ fs 全称为 file system ，称之为 文件系统 ，是 Node.js 中的 内置模块 ，可以对计算机中的磁盘进行操作。
主要介绍如下几个操作：
文件写入文件读取文件移动与重命名文件删除文件夹操作查看资源状态 二、文件写入 文件写入就是将 数据 保存到 文件 中，我们可以使用如下几个方法来实现该效果
方法说明writeFile异步写入writeFileSync同步写入appendFile /appendFileSync追加写入createWriteStream流式写入 2.1 writeFile 异步写入 语法： fs.writeFile(file, data[, options], callback)
参数说明：
file 文件名data 待写入的数据options 选项设置 （可选）callback 写入回调 返回值： undefined" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/990d09793588c48182175e29180f761a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-31T09:25:01+08:00" />
<meta property="article:modified_time" content="2023-08-31T09:25:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NodeJs-fs模块</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#fs_1" rel="nofollow">一、fs简介</a></li><li><a href="#_13" rel="nofollow">二、文件写入</a></li><li><ul><li><a href="#21_writeFile__23" rel="nofollow">2.1 writeFile 异步写入</a></li><li><a href="#22_writeFileSync__49" rel="nofollow">2.2 writeFileSync 同步写入</a></li><li><a href="#23_appendFile__appendFileSync__71" rel="nofollow">2.3 appendFile / appendFileSync 追加写入</a></li><li><a href="#24_createWriteStream__100" rel="nofollow">2.4 createWriteStream 流式写入</a></li></ul> 
  </li><li><a href="#_126" rel="nofollow">三、文件读取</a></li><li><ul><li><a href="#31_readFile__135" rel="nofollow">3.1 readFile 异步读取</a></li><li><a href="#32_readFileSync__157" rel="nofollow">3.2 readFileSync 同步读取</a></li><li><a href="#33_createReadStream__169" rel="nofollow">3.3 createReadStream 流式读取</a></li></ul> 
  </li><li><a href="#_194" rel="nofollow">四、文件移动与重命名</a></li><li><a href="#_221" rel="nofollow">五、文件删除</a></li><li><a href="#_257" rel="nofollow">六、文件夹操作</a></li><li><ul><li><a href="#61_mkdir_266" rel="nofollow">6.1 mkdir创建文件夹</a></li><li><a href="#62_readdir__297" rel="nofollow">6.2 readdir 读取文件夹</a></li><li><a href="#63_rmdir__321" rel="nofollow">6.3 rmdir 删除文件夹</a></li></ul> 
  </li><li><a href="#_350" rel="nofollow">七、查看资源状态</a></li><li><a href="#__dirname__path_388" rel="nofollow">八、__dirname 和 path</a></li><li><ul><li><a href="#81___dirname_389" rel="nofollow">8.1 __dirname</a></li><li><a href="#82_path__403" rel="nofollow">8.2 path 模块</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="fs_1"></a>一、fs简介</h2> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
                
        
       
      
        ~~~~~~ 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0em;"></span><span class="mspace nobreak"> </span><span class="mspace nobreak"> </span><span class="mspace nobreak"> </span><span class="mspace nobreak"> </span><span class="mspace nobreak"> </span><span class="mspace nobreak"> </span></span></span></span></span>fs 全称为 file system ，称之为 文件系统 ，是 Node.js 中的 内置模块 ，可以对计算机中的磁盘进行操作。</p> 
<p>主要介绍如下几个操作：</p> 
<ol><li>文件写入</li><li>文件读取</li><li>文件移动与重命名</li><li>文件删除</li><li>文件夹操作</li><li>查看资源状态</li></ol> 
<h2><a id="_13"></a>二、文件写入</h2> 
<p>文件写入就是将 数据 保存到 文件 中，我们可以使用如下几个方法来实现该效果</p> 
<table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>writeFile</td><td>异步写入</td></tr><tr><td>writeFileSync</td><td>同步写入</td></tr><tr><td>appendFile /appendFileSync</td><td>追加写入</td></tr><tr><td>createWriteStream</td><td>流式写入</td></tr></tbody></table> 
<h3><a id="21_writeFile__23"></a>2.1 writeFile 异步写入</h3> 
<p>语法： <code>fs.writeFile(file, data[, options], callback)</code><br> 参数说明：</p> 
<ul><li>file 文件名</li><li>data 待写入的数据</li><li>options 选项设置 （可选）</li><li>callback 写入回调</li></ul> 
<p>返回值： undefined</p> 
<p>代码示例:</p> 
<pre><code class="prism language-js"><span class="token comment">//1.导入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.写入文件（writeFile异步写入）</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./file/writeFile.txt'</span><span class="token punctuation">,</span><span class="token string">'三人行，则必有我师焉'</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//如果写入失败，则回调函数调用时，会传入错误对象，如写入成功，会传入 null</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="22_writeFileSync__49"></a>2.2 writeFileSync 同步写入</h3> 
<p>语法: <code>fs.writeFileSync(file, data[, options])</code></p> 
<p>参数与 fs.writeFile 大体一致，只是没有 callback 参数</p> 
<p>返回值： undefined</p> 
<p>代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//写入文件，writeFileSync同步写入,没用回调函数</span>
<span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
    fs<span class="token punctuation">.</span><span class="token function">writeFileSync</span><span class="token punctuation">(</span><span class="token string">'./file/writeFileSync.txt'</span><span class="token punctuation">,</span><span class="token string">'你好啊世界'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p>Node.js 中的磁盘操作是由其他 线程 完成的，结果的处理有两种模式：</p> 
<ul><li>同步处理 JavaScript 主线程 会等待 其他线程的执行结果，然后再继续执行主线程的代码，效率较低</li><li>异步处理 JavaScript 主线程 不会等待 其他线程的执行结果，直接执行后续的主线程代码，效率较好</li></ul> 
<hr> 
<h3><a id="23_appendFile__appendFileSync__71"></a>2.3 appendFile / appendFileSync 追加写入</h3> 
<p>appendFile 作用是在文件尾部追加内容，appendFile 语法与 writeFile 语法完全相同<br> 语法:</p> 
<ul><li><code>fs.appendFile(file, data[, options], callback)</code></li><li><code>fs.appendFileSync(file, data[, options])</code></li></ul> 
<p>返回值： 二者都为 undefined</p> 
<p>实例代码：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.导入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2.appendFile异步追加写入</span>
fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./file/appendFile.txt'</span><span class="token punctuation">,</span><span class="token string">'异步追加写入,nodejs'</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'异步追加成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.appendFileSync同步追加写入</span>
fs<span class="token punctuation">.</span><span class="token function">appendFileSync</span><span class="token punctuation">(</span><span class="token string">'./file/appendFileSync.txt'</span><span class="token punctuation">,</span><span class="token string">'同步追加写入,nodejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4.writeFile实现追加写入</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./file/writeFile.txt'</span><span class="token punctuation">,</span><span class="token string">',love love'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">flag</span><span class="token operator">:</span><span class="token string">'a'</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'异步追加成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="24_createWriteStream__100"></a>2.4 createWriteStream 流式写入</h3> 
<p>语法： <code>fs.createWriteStream(path[, options])</code><br> 参数说明：</p> 
<ul><li>path 文件路径</li><li>options 选项配置（ 可选 ）</li></ul> 
<p>返回值： Object<br> 代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.导入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.创建写入流对象</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span><span class="token string">'./file/stream.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.write写入</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'你好啊'</span><span class="token punctuation">)</span>
ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'手机接'</span><span class="token punctuation">)</span>

<span class="token comment">//4.关闭通道</span>
ws<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<blockquote> 
 <p>程序打开一个文件是需要消耗资源的 ，流式写入可以减少打开关闭文件的次数。<br> 流式写入方式适用于 大文件写入或者频繁写入 的场景, writeFile 适合于 写入频率较低的场景</p> 
</blockquote> 
<hr> 
<h2><a id="_126"></a>三、文件读取</h2> 
<p>文件读取顾名思义，就是通过程序从文件中取出其中的数据，我们可以使用如下几种方式：</p> 
<table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>readFile</td><td>异步读取</td></tr><tr><td>readFileSync</td><td>同步读取</td></tr><tr><td>createReadStream</td><td>流式读取</td></tr></tbody></table> 
<h3><a id="31_readFile__135"></a>3.1 readFile 异步读取</h3> 
<p>语法： <code>fs.readFile(path[, options], callback)</code><br> 参数说明：</p> 
<ul><li>path 文件路径</li><li>options 选项配置</li><li>callback 回调函数</li></ul> 
<p>返回值： undefined<br> 代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.异步读取</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./file/appendFile.txt'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"读取失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="32_readFileSync__157"></a>3.2 readFileSync 同步读取</h3> 
<p>语法： <code>fs.readFileSync(path[, options])</code><br> 参数说明：</p> 
<ul><li>path 文件路径</li><li>options 选项配置</li></ul> 
<p>返回值： string | Buffer<br> 代码示例：</p> 
<pre><code class="prism language-js"><span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./座右铭.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data2 <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'./座右铭.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="33_createReadStream__169"></a>3.3 createReadStream 流式读取</h3> 
<p>语法： <code>fs.createReadStream(path[, options])</code><br> 参数说明：</p> 
<ul><li>path 文件路径</li><li>options 选项配置</li></ul> 
<p>返回值： Object<br> 代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.创建fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.流式读取</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">'./file/appendFile.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//3.每次取出 64k 数据只执行一次 data 回调</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4.读取完毕后, 执行 end 回调</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_194"></a>四、文件移动与重命名</h2> 
<p>在 Node.js 中，我们可以使用 rename 或 renameSync 来移动或重命名 文件或文件夹<br> 语法：</p> 
<ul><li><code>fs.rename(oldPath, newPath, callback)</code></li><li><code>fs.renameSync(oldPath, newPath)</code></li></ul> 
<p>参数说明：</p> 
<ul><li>oldPath 文件当前的路径</li><li>newPath 文件新的路径</li><li>callback 操作后的回调</li></ul> 
<p>代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2.文件重命名rename renameSync(同步)</span>
fs<span class="token punctuation">.</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token string">'./file/test.txt'</span><span class="token punctuation">,</span><span class="token string">'./file/hello.txt'</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'操作成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//3.文件移动</span>
fs<span class="token punctuation">.</span><span class="token function">renameSync</span><span class="token punctuation">(</span><span class="token string">'./file/hello.txt'</span><span class="token punctuation">,</span><span class="token string">'./hello.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_221"></a>五、文件删除</h2> 
<p>在 Node.js 中，我们可以使用 unlink 或 unlinkSync 来删除文件<br> 语法：</p> 
<ul><li><code>fs.unlink(path, callback)</code></li><li><code>fs.unlinkSync(path)</code></li></ul> 
<p>参数说明：</p> 
<ul><li>path 文件路径</li><li>callback 操作后的回调</li></ul> 
<p>代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.可以使用 unlink 或 unlinkSync 来删除文件</span>
fs<span class="token punctuation">.</span><span class="token function">unlink</span><span class="token punctuation">(</span><span class="token string">'./file/test.txt'</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//fs.unlinkSync('./test2.txt');</span>


<span class="token comment">//3.还可以调用14.4版本新出的rm和rmSync来删除文件</span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">'./file/test.txt'</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_257"></a>六、文件夹操作</h2> 
<p>借助 Node.js 的能力，我们可以对文件夹进行 创建 、 读取 、 删除 等操作</p> 
<table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td>mkdir / mkdirSync</td><td>创建文件夹</td></tr><tr><td>readdir / readdirSync</td><td>读取文件夹</td></tr><tr><td>rmdir / rmdirSync</td><td>删除文件夹</td></tr></tbody></table> 
<h3><a id="61_mkdir_266"></a>6.1 mkdir创建文件夹</h3> 
<p>在 Node.js 中，我们可以使用 mkdir 或 mkdirSync 来创建文件夹<br> 语法：</p> 
<ul><li><code>fs.mkdir(path[, options], callback)</code></li><li><code>fs.mkdirSync(path[, options])</code></li></ul> 
<p>参数说明：</p> 
<ul><li>path 文件夹路径</li><li>options 选项配置（ 可选 ）</li><li>callback 操作后的回调</li></ul> 
<p>示例代码：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.可以使用 mkdir 或 mkdirSync 来创建文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'./file'</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'创建成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//递归异步创建</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token string">'./a/b/c'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'创建成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//递归同步创建</span>
fs<span class="token punctuation">.</span><span class="token function">mkdirSync</span><span class="token punctuation">(</span><span class="token string">'./c/b/a'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="62_readdir__297"></a>6.2 readdir 读取文件夹</h3> 
<p>在 Node.js 中，我们可以使用 readdir 或 readdirSync 来读取文件夹<br> 语法：</p> 
<ul><li><code>fs.readdir(path[, options], callback)</code></li><li><code>fs.readdirSync(path[, options])</code></li></ul> 
<p>参数说明：</p> 
<ul><li>path 文件夹路径</li><li>options 选项配置（ 可选 ）</li><li>callback 操作后的回调</li></ul> 
<p>示例代码：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.可以使用 readdir 或 readdirSync 来读取文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">'./file'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//3.同步读取</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readdirSync</span><span class="token punctuation">(</span><span class="token string">'./file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="63_rmdir__321"></a>6.3 rmdir 删除文件夹</h3> 
<p>在 Node.js 中，我们可以使用 rmdir 或 rmdirSync 来删除文件夹<br> 语法：</p> 
<ul><li><code>fs.rmdir(path[, options], callback)</code></li><li><code>fs.rmdirSync(path[, options])</code></li></ul> 
<p>参数说明：</p> 
<ul><li>path 文件夹路径</li><li>options 选项配置（ 可选 ）</li><li>callback 操作后的回调</li></ul> 
<p>示例代码：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.可以使用 rmdir 或 rmdirSync 来删除文件</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span><span class="token string">'./a'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//3.现在版本可以用rm代替rmdir</span>
fs<span class="token punctuation">.</span><span class="token function">rm</span><span class="token punctuation">(</span><span class="token string">'./a'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'删除成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//4.同步删除文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">rmdirSync</span><span class="token punctuation">(</span><span class="token string">'./c'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">recursive</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_350"></a>七、查看资源状态</h2> 
<p>在 Node.js 中，我们可以使用 stat 或 statSync 来查看资源的详细信息<br> 语法：</p> 
<ul><li>fs.stat(path[, options], callback)</li><li>fs.statSync(path[, options])</li></ul> 
<p>参数说明：</p> 
<ul><li>path 文件夹路径</li><li>options 选项配置（ 可选 ）</li><li>callback 操作后的回调</li></ul> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.可以使用 stat 或 statSync 来查看资源的详细信息</span>
<span class="token comment">//异步获取状态</span>
fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span><span class="token string">'./file'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//同步获取状态</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">statSync</span><span class="token punctuation">(</span><span class="token string">'./file/test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
size 文件体积
birthtime 创建时间
mtime 最后修改时间
isFile 检测是否为文件
isDirectory 检测是否为文件夹
*/</span>
</code></pre> 
<p>结果值对象结构：</p> 
<ul><li>size 文件体积</li><li>birthtime 创建时间</li><li>mtime 最后修改时间</li><li>isFile 检测是否为文件</li><li>isDirectory 检测是否为文件夹</li><li>…</li></ul> 
<h2><a id="__dirname__path_388"></a>八、__dirname 和 path</h2> 
<h3><a id="81___dirname_389"></a>8.1 __dirname</h3> 
<p>__dirname 与 require 类似，都是 Node.js 环境中的’全局’变量<br> __dirname 保存着 当前文件所在目录的绝对路径 ，可以使用 __dirname 与文件名拼接成绝对路径<br> 代码示例：</p> 
<pre><code class="prism language-js"><span class="token comment">//1.引入fs模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.__dirname 保存着 当前文件所在目录的绝对路径 ，可以使用 __dirname 与文件名拼接成绝对路径</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//读取文件</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname<span class="token operator">+</span><span class="token string">'\\file\\test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<hr> 
<h3><a id="82_path__403"></a>8.2 path 模块</h3> 
<p>可以使用path模块进行路径的拼接,path 模块提供了 操作路径 的功能，我们将介绍如下几个较为常用的几个 API：</p> 
<table><thead><tr><th>API</th><th>说明</th></tr></thead><tbody><tr><td>path.resolve</td><td>拼接规范的绝对路径 常用</td></tr><tr><td>path.sep</td><td>获取操作系统的路径分隔符</td></tr><tr><td>path.parse</td><td>解析路径并返回对象</td></tr><tr><td>path.basename</td><td>获取路径的基础名称</td></tr><tr><td>path.dirname</td><td>获取路径的目录名</td></tr><tr><td>path.extname</td><td>获得路径的扩展名</td></tr></tbody></table> 
<p>代码示例：</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取路径分隔符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>sep<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//拼接绝对路径</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//解析路径</span>
<span class="token keyword">let</span> pathname <span class="token operator">=</span> <span class="token string">'D:/program file/nodejs/node.exe'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取路径基础名称</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//获取路径的目录名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取路径的扩展名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41d00445a7f7381771b2729088daad7b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言的数据类型简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1d38a62671660bbc72c71d2214963987/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Integer底层原理探究</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>