<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>笔记&amp;代码 | 统计学——基于R（第四版） 第一章 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="笔记&amp;代码 | 统计学——基于R（第四版） 第一章" />
<meta property="og:description" content="1.1数据与统计学 统计学的含义，数据及其分类和来源
1.1.1 什么是统计学 收集数据
数据分析
描述统计：利用图表，计算简单统计量推断统计：根据样本判断总体（参数估计和假设检验） 1.1.2 变量与数据 变量
数据
变量的观测结果就是数据变量的基本分类
1.1.3 数据的来源 总体
样本
样本量
概率抽样
简单随机抽样分层抽样系统抽样整群抽样 1.2 R语言的初步使用 1.2.1 R软件的下载、安装与更新 install.packages(&#34;installr&#34;)	#先安装包“installr” library(installr)	#加载包 updateR()	#更新 1.2.2 对象赋值与运行 sum(x)	#计算对象x总和 mean(x)	#计算对象x平均数 barplot(x)	#绘制对象x条形图 1.2.3 编写代码脚本 R代码最好是在脚本文件中编写
R控制台-&gt;文件-&gt;新建程序脚本命令，弹出R编辑器
编写完成后，选中输入的代码右键“运行当前行或所选代码”
1.2.4 查看帮助文档 help(sum)	#弹出sum函数具体说明 ?plotmath	#效果与上同 help(package=&#34;stats&#34;)	#state包具体说明 var	#直接输入函数名，看该函数源代码 1.2.5 包的安装与加载 显示已安装包的名称
#显示已安装包的名称 .packages(all.available=TRUE) 安装 加载 卸载 解除 包
install.packages(&#34;car&#34;)#安装包car install.packages(c(&#34;car&#34;,&#34;vcd&#34;)#同时安装几个包 library(car)#加载包car require(car)#效果与上同 remove.packages(&#34;vcd&#34;)#从R中彻底删除vcd包 detach(&#34;vcd&#34;)#解除（非删除）加载到R界面中的vcd包 本书例题习题用到的所有包" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/641046d05833632b2c8cdc36c6e7c29e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-18T17:47:53+08:00" />
<meta property="article:modified_time" content="2022-03-18T17:47:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">笔记&amp;代码 | 统计学——基于R（第四版） 第一章</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="11_1"></a>1.1数据与统计学</h2> 
<p>统计学的含义，数据及其分类和来源</p> 
<h3><a id="111__3"></a>1.1.1 什么是统计学</h3> 
<p>收集数据<br> 数据分析</p> 
<ul><li>描述统计：利用图表，计算简单统计量</li><li>推断统计：根据样本判断总体（参数估计和假设检验）</li></ul> 
<h3><a id="112__8"></a>1.1.2 变量与数据</h3> 
<p>变量<br> 数据</p> 
<ul><li>变量的观测结果就是数据</li><li>变量的基本分类<br> <img src="https://images2.imgbox.com/c3/35/HEhm3CTr_o.png" alt="变量的基本分类"></li></ul> 
<h3><a id="113__14"></a>1.1.3 数据的来源</h3> 
<p>总体<br> 样本<br> 样本量<br> 概率抽样</p> 
<ul><li>简单随机抽样</li><li>分层抽样</li><li>系统抽样</li><li>整群抽样</li></ul> 
<h2><a id="12_R_24"></a>1.2 R语言的初步使用</h2> 
<h3><a id="121_R_25"></a>1.2.1 R软件的下载、安装与更新</h3> 
<pre><code class="prism language-r">install.packages<span class="token punctuation">(</span><span class="token string">"installr"</span><span class="token punctuation">)</span>	<span class="token comment">#先安装包“installr”</span>
library<span class="token punctuation">(</span>installr<span class="token punctuation">)</span>				<span class="token comment">#加载包</span>
updateR<span class="token punctuation">(</span><span class="token punctuation">)</span>						<span class="token comment">#更新</span>
</code></pre> 
<h3><a id="122__32"></a>1.2.2 对象赋值与运行</h3> 
<pre><code class="prism language-r">sum<span class="token punctuation">(</span>x<span class="token punctuation">)</span>		<span class="token comment">#计算对象x总和</span>
mean<span class="token punctuation">(</span>x<span class="token punctuation">)</span>		<span class="token comment">#计算对象x平均数</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">)</span>	<span class="token comment">#绘制对象x条形图</span>
</code></pre> 
<h3><a id="123__39"></a>1.2.3 编写代码脚本</h3> 
<p>R代码最好是在脚本文件中编写<br> R控制台-&gt;文件-&gt;新建程序脚本命令，弹出R编辑器<br> 编写完成后，选中输入的代码右键“运行当前行或所选代码”</p> 
<h3><a id="124__43"></a>1.2.4 查看帮助文档</h3> 
<pre><code class="prism language-r">help<span class="token punctuation">(</span>sum<span class="token punctuation">)</span>		<span class="token comment">#弹出sum函数具体说明</span>
?plotmath		<span class="token comment">#效果与上同</span>
help<span class="token punctuation">(</span>package<span class="token operator">=</span><span class="token string">"stats"</span><span class="token punctuation">)</span>	<span class="token comment">#state包具体说明</span>
var		<span class="token comment">#直接输入函数名，看该函数源代码</span>
</code></pre> 
<h3><a id="125__51"></a>1.2.5 包的安装与加载</h3> 
<p>显示已安装包的名称</p> 
<pre><code class="prism language-r"><span class="token comment">#显示已安装包的名称</span>
.packages<span class="token punctuation">(</span>all.available<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>
</code></pre> 
<p>安装 加载 卸载 解除 包</p> 
<pre><code class="prism language-r">install.packages<span class="token punctuation">(</span><span class="token string">"car"</span><span class="token punctuation">)</span><span class="token comment">#安装包car</span>
install.packages<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"car"</span><span class="token punctuation">,</span><span class="token string">"vcd"</span><span class="token punctuation">)</span><span class="token comment">#同时安装几个包</span>
library<span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token comment">#加载包car</span>
require<span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token comment">#效果与上同</span>
remove.packages<span class="token punctuation">(</span><span class="token string">"vcd"</span><span class="token punctuation">)</span><span class="token comment">#从R中彻底删除vcd包</span>
detach<span class="token punctuation">(</span><span class="token string">"vcd"</span><span class="token punctuation">)</span><span class="token comment">#解除（非删除）加载到R界面中的vcd包</span>
</code></pre> 
<p>本书例题习题用到的所有包</p> 
<pre><code class="prism language-r">install.packages<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"agricolae"</span><span class="token punctuation">,</span><span class="token string">"aplpack"</span><span class="token punctuation">,</span><span class="token string">"BSDA"</span><span class="token punctuation">,</span>
<span class="token string">"car"</span><span class="token punctuation">,</span><span class="token string">"corrgram"</span><span class="token punctuation">,</span><span class="token string">"DescTools"</span><span class="token punctuation">,</span><span class="token string">"doBy"</span><span class="token punctuation">,</span><span class="token string">"e1071"</span><span class="token punctuation">,</span><span class="token string">"fmsb"</span>
<span class="token punctuation">,</span><span class="token string">"forecast"</span><span class="token punctuation">,</span><span class="token string">"ggplot2"</span><span class="token punctuation">,</span><span class="token string">"gmodels"</span><span class="token punctuation">,</span><span class="token string">"gplots"</span><span class="token punctuation">,</span><span class="token string">"gridExtra"</span><span class="token punctuation">,</span>
<span class="token string">"HH"</span><span class="token punctuation">,</span><span class="token string">"Hmisc"</span><span class="token punctuation">,</span><span class="token string">"lm.beta"</span><span class="token punctuation">,</span><span class="token string">"lsr"</span><span class="token punctuation">,</span><span class="token string">"pastecs"</span><span class="token punctuation">,</span><span class="token string">"plotrix"</span><span class="token punctuation">,</span><span class="token string">"plyr"</span><span class="token punctuation">,</span>
<span class="token string">"psych"</span><span class="token punctuation">,</span><span class="token string">"reshape"</span><span class="token punctuation">,</span><span class="token string">"scatterplot3d"</span><span class="token punctuation">,</span><span class="token string">"sm"</span><span class="token punctuation">,</span><span class="token string">"TeachingDemos"</span><span class="token punctuation">,</span>
<span class="token string">"vcd"</span><span class="token punctuation">,</span><span class="token string">"vioplot"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="13_R_77"></a>1.3 R语言数据处理</h2> 
<p>R软件自带数据集，输入名称可查看该数据集，help函数查看详细信息</p> 
<ul><li>查看数据集</li></ul> 
<pre><code class="prism language-r">help<span class="token punctuation">(</span>Titanic<span class="token punctuation">)</span><span class="token comment">#查看泰坦尼克号的数据</span>
?Titanic<span class="token comment">#与上同</span>
</code></pre> 
<h3><a id="131_R_84"></a>1.3.1 创建R格式数据</h3> 
<p>数据基本类型</p> 
<ul><li>向量vector</li><li>矩阵martrix</li><li>数组array</li><li>数据框dataframe</li><li>因子factor</li><li>列表list</li></ul> 
<h4><a id="1____93"></a>1. 向量 矩阵 数组</h4> 
<ol><li>向量：一维数组<br> 录入向量用c函数，seq函数，rep函数<br> 元素只能是同一类型数据</li></ol> 
<ul><li>创建 访问向量</li></ul> 
<pre><code class="prism language-r"><span class="token comment"># 用c函数创建向量</span>
a<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token comment"># 数值型向量</span>
b<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"甲"</span><span class="token punctuation">,</span><span class="token string">"乙"</span><span class="token punctuation">,</span><span class="token string">"丙"</span><span class="token punctuation">,</span><span class="token string">"丁"</span><span class="token punctuation">)</span> <span class="token comment"># 字符型向量</span>
c<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"TRUE"</span><span class="token punctuation">,</span><span class="token string">"FALSE"</span><span class="token punctuation">,</span><span class="token string">"FALSE"</span><span class="token punctuation">,</span><span class="token string">"TRUE"</span><span class="token punctuation">)</span> <span class="token comment"># 逻辑值向量</span>
<span class="token comment"># 创建向量其他方法</span>
v1<span class="token operator">&lt;-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">6</span> <span class="token comment"># 产生1~6的等差数列</span>
v2<span class="token operator">&lt;-</span>seq<span class="token punctuation">(</span>from<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>to<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>by<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment"># 在2~4之间产生步长为0.5的等差数列</span>
v3<span class="token operator">&lt;-</span>rep<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>times<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment"># 将1~3的向量重复3次</span>
v4<span class="token operator">&lt;-</span>rep<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>each<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>   <span class="token comment"># 将1~3的向量中每个元素重复3次</span>
v1<span class="token punctuation">;</span>v2<span class="token punctuation">;</span>v3<span class="token punctuation">;</span>v4 <span class="token comment"># 运行向量v1,v2,v3,v4</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2.0</span> <span class="token number">2.5</span> <span class="token number">3.0</span> <span class="token number">3.5</span> <span class="token number">4.0</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">3</span> <span class="token number">3</span>

a<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
a<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token number">5</span> <span class="token number">9</span>
</code></pre> 
<ol start="2"><li>矩阵：二维数组<br> 每个元素类型相同<br> 创建：matrix函数<br> 添加行名：rownames函数<br> 添加列名：colnames函数<br> 转置：t函数</li></ol> 
<ul><li>创建 添名 转置 矩阵</li></ul> 
<pre><code class="prism language-r"><span class="token comment"># 用matrix函数创建矩阵</span>
a<span class="token operator">&lt;-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">6</span>      	<span class="token comment"># 生成1到6的数值向量</span>
mat<span class="token operator">&lt;-</span>matrix<span class="token punctuation">(</span>a<span class="token punctuation">,</span>  <span class="token comment"># 创建向量a的矩阵</span>
  nrow<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>ncol<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>    <span class="token comment"># 矩阵行数为2，列数为3</span>
  byrow<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span>       <span class="token comment"># 按行填充矩阵的元素</span>
<span class="token comment"># 用rownames，colnames函数添加行名和列名</span>
rownames<span class="token punctuation">(</span>mat<span class="token punctuation">)</span><span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"甲"</span><span class="token punctuation">,</span><span class="token string">"乙"</span><span class="token punctuation">)</span>    <span class="token comment"># 添加行名</span>
colnames<span class="token punctuation">(</span>mat<span class="token punctuation">)</span><span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">)</span>   <span class="token comment"># 添加行名</span>
<span class="token comment"># 用t函数对矩阵转置</span>
t<span class="token punctuation">(</span>mat<span class="token punctuation">)</span>                    <span class="token comment"># 矩阵转置</span>
</code></pre> 
<ul><li>数组<br> 数组与矩阵相似，但维度可&gt;2<br> 创建：array函数</li></ul> 
<h4><a id="2__143"></a>2. 数据框</h4> 
<p>表格结构的数据，类似excel中数据表</p> 
<ul><li>创建：data.frame函数</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 写入姓名和分数向量</span>
<span class="token operator">&gt;</span> names<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"刘文涛"</span><span class="token punctuation">,</span><span class="token string">"王宇翔"</span><span class="token punctuation">,</span><span class="token string">"田思雨"</span><span class="token punctuation">,</span><span class="token string">"徐丽娜"</span><span class="token punctuation">,</span><span class="token string">"丁文斌"</span><span class="token punctuation">)</span> <span class="token comment"># 写入姓名向量</span>
<span class="token operator">&gt;</span> stat<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token number">68</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">63</span><span class="token punctuation">)</span>  <span class="token comment"># 写入各门课程分数向量</span>
<span class="token operator">&gt;</span> math<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">,</span><span class="token number">74</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token number">82</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> econ<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">,</span><span class="token number">63</span><span class="token punctuation">,</span><span class="token number">61</span><span class="token punctuation">,</span><span class="token number">49</span><span class="token punctuation">,</span><span class="token number">89</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> 
<span class="token operator">&gt;</span> <span class="token comment"># 将向量组织成数据框形式</span>
<span class="token operator">&gt;</span> table1_1<span class="token operator">&lt;-</span>data.frame<span class="token punctuation">(</span>学生姓名<span class="token operator">=</span>names<span class="token punctuation">,</span>统计学<span class="token operator">=</span>stat<span class="token punctuation">,</span>数学<span class="token operator">=</span>math<span class="token punctuation">,</span>经济学<span class="token operator">=</span>econ<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token comment"># 将数据组织成数据框形式，并储存在对象table1_1中</span>
<span class="token operator">&gt;</span> 
<span class="token operator">&gt;</span> table1_1
  学生姓名 统计学 数学 经济学
<span class="token number">1</span>   刘文涛     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span>   王宇翔     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span>   田思雨     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span>   徐丽娜     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span>   丁文斌     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
</code></pre> 
<ul><li>查看：<br> 输入数据名称显示全部数据<br> head：默认显示前6行，head(table,3)显示table前3行<br> tail：默认显示后6行，tail(table,3)显示table后3行<br> class：查看数据类型<br> nrow：查看行数<br> ncol：查看列数<br> dim：同时查看行数列数<br> str：数据量大时查看数据的结构</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> table1_1      <span class="token comment"># 显示table1_1中的数据</span>
  学生姓名 统计学 数学 经济学
<span class="token number">1</span>   刘文涛     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span>   王宇翔     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span>   田思雨     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span>   徐丽娜     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span>   丁文斌     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
<span class="token operator">&gt;</span> head<span class="token punctuation">(</span>table1_1<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>tail<span class="token punctuation">(</span>table1_1<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>   <span class="token comment"># 查看前3行和后3行</span>
  学生姓名 统计学 数学 经济学
<span class="token number">1</span>   刘文涛     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span>   王宇翔     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span>   田思雨     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
  学生姓名 统计学 数学 经济学
<span class="token number">3</span>   田思雨     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span>   徐丽娜     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span>   丁文斌     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
<span class="token operator">&gt;</span> <span class="token comment"># 查看数据框的行数和列数</span>
<span class="token operator">&gt;</span> nrow<span class="token punctuation">(</span>table1_1<span class="token punctuation">)</span>       <span class="token comment"># 查看table1_1的行数</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5</span>
<span class="token operator">&gt;</span> ncol<span class="token punctuation">(</span>table1_1<span class="token punctuation">)</span>       <span class="token comment"># 查看table1_1的行数</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4</span>
<span class="token operator">&gt;</span> dim<span class="token punctuation">(</span>table1_1<span class="token punctuation">)</span>        <span class="token comment"># 同时查看行数和列数</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5</span> <span class="token number">4</span>
<span class="token operator">&gt;</span> <span class="token comment"># 查看数据的类型</span>
<span class="token operator">&gt;</span> class<span class="token punctuation">(</span>table1_1<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"data.frame"</span>

</code></pre> 
<p>str函数能显示什么：table是一个数据框，有4个变量，每个变量有5个观测值，$后是数值变量。<br> 当数据量较大时，会省略很多数据。</p> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 查看数据结构</span>
<span class="token operator">&gt;</span> str<span class="token punctuation">(</span>table1_1<span class="token punctuation">)</span>        <span class="token comment"># 查看tabe1_1的数据结构</span>
<span class="token string">'data.frame'</span><span class="token operator">:</span>	<span class="token number">5</span> obs. of  <span class="token number">4</span> variables<span class="token operator">:</span>
 <span class="token operator">$</span> 学生姓名<span class="token operator">:</span> chr  <span class="token string">"刘文涛"</span> <span class="token string">"王宇翔"</span> <span class="token string">"田思雨"</span> <span class="token string">"徐丽娜"</span> <span class="token ellipsis">...</span>
 <span class="token operator">$</span> 统计学  <span class="token operator">:</span> num  <span class="token number">68</span> <span class="token number">85</span> <span class="token number">74</span> <span class="token number">88</span> <span class="token number">63</span>
 <span class="token operator">$</span> 数学    <span class="token operator">:</span> num  <span class="token number">85</span> <span class="token number">91</span> <span class="token number">74</span> <span class="token number">100</span> <span class="token number">82</span>
 <span class="token operator">$</span> 经济学  <span class="token operator">:</span> num  <span class="token number">84</span> <span class="token number">63</span> <span class="token number">61</span> <span class="token number">49</span> <span class="token number">89</span>
</code></pre> 
<ul><li> <p>"$"符号<br> 指定分析的变量<br> 分析多个变量可写方括号[ ]</p> </li><li> <p>合并<br> rbind：按行合并数据框（列变量必须相同）<br> cbind：按列合并数据框（行变量必须相同）</p> </li><li> <p>排序<br> sort：默认升序排列 decreasing=FALSE<br> 需要降序时设置参数decreasing=TRUE<br> order：base包 排序结果扩散整个表格区域<br> arrange：dplyr包 默认升序， 降序设置参数desc(变量名)<br> -筛选 重命名 汇总<br> select：dplyr包 变量筛选或重命名<br> summarise：数据汇总</p> </li></ul> 
<h4><a id="3___234"></a>3. 因子 列表</h4> 
<ul><li>因子：类别变量<br> 水平：因子取值<br> factor：将向量编码为因子<br> as.numeric：将因子转换为数值</li></ul> 
<pre><code class="prism language-r"><span class="token comment">#  将无序因子转换为数值</span>
a<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"金融"</span><span class="token punctuation">,</span><span class="token string">"地产"</span><span class="token punctuation">,</span><span class="token string">"医药"</span><span class="token punctuation">,</span><span class="token string">"医药"</span><span class="token punctuation">,</span><span class="token string">"金融"</span><span class="token punctuation">,</span><span class="token string">"医药"</span><span class="token punctuation">)</span>      <span class="token comment"># 向量a</span>
f1<span class="token operator">&lt;-</span>factor<span class="token punctuation">(</span>a<span class="token punctuation">)</span>                                                           <span class="token comment"># 将向量a编码为因子</span>
as.numeric<span class="token punctuation">(</span>f1<span class="token punctuation">)</span>                                                         <span class="token comment"># 将因子转换为数值</span>

<span class="token comment"># 将无序因子转换为有序因子或数值</span>
b<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"很好"</span><span class="token punctuation">,</span><span class="token string">"好"</span><span class="token punctuation">,</span><span class="token string">"一般"</span><span class="token punctuation">,</span><span class="token string">"差"</span><span class="token punctuation">,</span><span class="token string">"很差"</span><span class="token punctuation">)</span>    <span class="token comment"># 向量b</span>
<span class="token comment"># 将向量b编码为有序因子</span>
f2<span class="token operator">&lt;-</span>factor<span class="token punctuation">(</span>b<span class="token punctuation">,</span>ordered<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">,</span>levels<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"很好"</span><span class="token punctuation">,</span><span class="token string">"好"</span><span class="token punctuation">,</span><span class="token string">"一般"</span><span class="token punctuation">,</span><span class="token string">"差"</span><span class="token punctuation">,</span><span class="token string">"很差"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
as.numeric<span class="token punctuation">(</span>f2<span class="token punctuation">)</span>     <span class="token comment"># 将因子转换为数值</span>
</code></pre> 
<ul><li>列表：一些对象的集合<br> list：创建列表<br> 一个列表中可能包含若干向量、矩阵、数据框等</li></ul> 
<h3><a id="132__254"></a>1.3.2 数据读取和保存</h3> 
<p>read.csv：读取csv格式，默认包含标题header=FALSE<br> write.csv：保存csv格式在指定路径中<br> save：保存R格式在指定路径中</p> 
<pre><code class="prism language-r"><span class="token comment"># 读取包含标题的csv格式数据</span>
 table1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/table1_1.csv"</span><span class="token punctuation">)</span> 
 <span class="token comment"># 读取不包含标题的csv格式数据</span>
 table1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/table1_1.csv"</span><span class="token punctuation">,</span>header<span class="token operator">=</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span>
<span class="token comment">#  将tablel_1存为csv格式文件</span>
  write.csv<span class="token punctuation">(</span>table1_1<span class="token punctuation">,</span>file<span class="token operator">=</span><span class="token string">"C:/mydata/chap01/table1_1.csv"</span><span class="token punctuation">)</span>
<span class="token comment">#  将tablel_1存为R格式文件</span>
  save<span class="token punctuation">(</span>table1_1<span class="token punctuation">,</span>file<span class="token operator">=</span><span class="token string">"C:/mydata/chap01/table1_1.RData"</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="133__269"></a>1.3.3 随机数和数据抽样</h3> 
<ol><li>生成随机数<br> 在相应分布函数前加字母r<br> set.seed()：设定随机种子，使每次运行产生相同一组随机数</li></ol> 
<ul><li>随机的正态、均匀、卡方分布</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 生成随机数</span>
<span class="token operator">&gt;</span> rnorm<span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>mean<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>sd<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>      <span class="token comment"># 产生20个标准正态分布随机数</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">0.19924726</span> <span class="token operator">-</span><span class="token number">0.14862256</span> <span class="token operator">-</span><span class="token number">0.14541055</span>  <span class="token number">0.02397014</span>  <span class="token number">2.05726569</span>  <span class="token number">0.54070243</span>
 <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token number">1.52293849</span> <span class="token operator">-</span><span class="token number">2.67969794</span> <span class="token operator">-</span><span class="token number">0.69149187</span> <span class="token operator">-</span><span class="token number">0.08224751</span>  <span class="token number">0.02491882</span>  <span class="token number">0.54702979</span>
<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token number">1.40102709</span>  <span class="token number">1.15944832</span>  <span class="token number">0.83127697</span>  <span class="token number">0.69801977</span> <span class="token operator">-</span><span class="token number">0.85458047</span>  <span class="token number">0.68958163</span>
<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token number">2.28993715</span>  <span class="token number">0.17042557</span>
<span class="token operator">&gt;</span> set.seed<span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>                              <span class="token comment"># 设定随机数种子</span>
<span class="token operator">&gt;</span> rnorm<span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>mean<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>sd<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>    <span class="token comment"># 产生20个均值为50、标准差为5的正态分布随机数</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">51.29411</span> <span class="token number">59.15560</span> <span class="token number">48.30191</span> <span class="token number">54.48599</span> <span class="token number">52.44008</span> <span class="token number">43.72307</span> <span class="token number">50.11394</span> <span class="token number">55.45387</span>
 <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token number">49.33939</span> <span class="token number">44.62499</span> <span class="token number">54.27505</span> <span class="token number">48.17510</span> <span class="token number">50.82777</span> <span class="token number">43.78608</span> <span class="token number">57.29644</span> <span class="token number">49.98194</span>
<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> <span class="token number">49.89558</span> <span class="token number">50.16053</span> <span class="token number">44.16361</span> <span class="token number">47.40214</span>
<span class="token operator">&gt;</span> runif<span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>min<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>max<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment"># 在0到10之间产生20个均匀分布随机数</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">9.152619</span> <span class="token number">4.574306</span> <span class="token number">9.210739</span> <span class="token number">2.591188</span> <span class="token number">3.437781</span> <span class="token number">4.291725</span> <span class="token number">3.302786</span> <span class="token number">7.528325</span>
 <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token number">8.438981</span> <span class="token number">0.108724</span> <span class="token number">6.667001</span> <span class="token number">7.141199</span> <span class="token number">7.685038</span> <span class="token number">9.419001</span> <span class="token number">2.480386</span> <span class="token number">9.107371</span>
<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> <span class="token number">6.278621</span> <span class="token number">7.761303</span> <span class="token number">8.178044</span> <span class="token number">2.735253</span>
<span class="token operator">&gt;</span> rchisq<span class="token punctuation">(</span>n<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>df<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>       <span class="token comment"># 产生20个卡方分布随机数</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">11.658757</span> <span class="token number">17.344157</span> <span class="token number">23.824789</span> <span class="token number">11.781247</span> <span class="token number">16.588682</span> <span class="token number">12.754254</span> <span class="token number">16.175599</span>
 <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token number">10.401406</span> <span class="token number">15.980531</span> <span class="token number">18.076179</span> <span class="token number">30.238385</span>  <span class="token number">9.272893</span> <span class="token number">18.784349</span> <span class="token number">23.903483</span>
<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span> <span class="token number">19.380283</span> <span class="token number">17.850878</span> <span class="token number">19.912369</span> <span class="token number">12.756399</span> <span class="token number">22.108622</span> <span class="token number">11.625485</span>
</code></pre> 
<ol start="2"><li>数据抽样<br> sample：从已知数据集中抽取简单随机样本</li></ol> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 抽取随机样本</span>
<span class="token operator">&gt;</span> N<span class="token operator">&lt;-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">20</span>                              <span class="token comment"># 1到20的数值向量</span>
<span class="token operator">&gt;</span> n1<span class="token operator">&lt;-</span>sample<span class="token punctuation">(</span>N<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>n1   <span class="token comment"># 无放回抽取10个数据</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">7</span> <span class="token number">17</span> <span class="token number">13</span>  <span class="token number">5</span> <span class="token number">18</span> <span class="token number">11</span> <span class="token number">10</span>  <span class="token number">3</span>  <span class="token number">9</span>  <span class="token number">6</span>
<span class="token operator">&gt;</span> n2<span class="token operator">&lt;-</span>sample<span class="token punctuation">(</span>N<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>replace<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>n2   <span class="token comment"># 有放回抽取10个数据</span>
 <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>  <span class="token number">3</span>  <span class="token number">8</span>  <span class="token number">2</span> <span class="token number">11</span>  <span class="token number">9</span>  <span class="token number">6</span> <span class="token number">19</span> <span class="token number">14</span> <span class="token number">20</span>  <span class="token number">9</span>
<span class="token operator">&gt;</span> Ncols<span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"black"</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"green"</span><span class="token punctuation">,</span><span class="token string">"blue"</span><span class="token punctuation">,</span><span class="token string">"yellow"</span><span class="token punctuation">)</span>     <span class="token comment"># 5种不同的颜色向量</span>
<span class="token operator">&gt;</span> ncols<span class="token operator">&lt;-</span>sample<span class="token punctuation">(</span>Ncols<span class="token punctuation">,</span>size<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span>replace<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ncols      <span class="token comment"># 有放回抽取8个颜色</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token string">"green"</span>  <span class="token string">"yellow"</span> <span class="token string">"yellow"</span> <span class="token string">"black"</span>  <span class="token string">"green"</span>  <span class="token string">"green"</span>  <span class="token string">"red"</span>    <span class="token string">"blue"</span>  
</code></pre> 
<h3><a id="134__310"></a>1.3.4 数据类型的转换</h3> 
<ol><li>变量换向量<br> as.vector</li></ol> 
<pre><code class="prism language-r"><span class="token comment"># 将table1_1中的统计学分数、统计学分数和数学分数转换为向量</span>
table1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/table1_1.csv"</span><span class="token punctuation">)</span>
vector1<span class="token operator">&lt;-</span>as.vector<span class="token punctuation">(</span>table1_1<span class="token operator">$</span>统计学<span class="token punctuation">)</span><span class="token punctuation">;</span>vector1        <span class="token comment"># 将统计学分数转换成向量</span>
vector2<span class="token operator">&lt;-</span>as.vector<span class="token punctuation">(</span>c<span class="token punctuation">(</span>table1_1<span class="token operator">$</span>统计学<span class="token punctuation">,</span>table1_1<span class="token operator">$</span>数学<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>vector2   <span class="token comment"># 将统计学和数学分数合并转换成</span>
vector3<span class="token operator">&lt;-</span>as.vector<span class="token punctuation">(</span>as.matrix<span class="token punctuation">(</span>table1_1<span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>vector3   <span class="token comment"># 将数据框转换为向量</span>
</code></pre> 
<ol start="2"><li>数据框 矩阵 换<br> as.matrix：数据框换矩阵<br> as.data.frame：矩阵换数据框</li></ol> 
<pre><code class="prism language-r"><span class="token comment"># 将数据框转换为矩阵</span>
table1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/table1_1.csv"</span><span class="token punctuation">)</span>  
mat<span class="token operator">&lt;-</span>as.matrix<span class="token punctuation">(</span>table1_1<span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>             <span class="token comment"># 转换为矩阵mat</span>
rownames<span class="token punctuation">(</span>mat<span class="token punctuation">)</span><span class="token operator">=</span>table1_1<span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>               <span class="token comment"># 矩阵的行名为table1_1第1列的名称</span>
mat                                      <span class="token comment"># 查看矩阵</span>
<span class="token comment"># 将矩阵转化成数据框</span>
as.data.frame<span class="token punctuation">(</span>mat<span class="token punctuation">)</span>
</code></pre> 
<ol start="3"><li>短格式数据换长格式<br> 合并一些列-&gt;长格式<br> 拆开-&gt;短格式<br> melt：reshape2包 短转长<br> gather：tidyr包 短转长<br> dcast：reshape2包 长转短<br> spread：tidyr包 长转短</li></ol> 
<ul><li>有标识变量：melt函数中的id.vars称为标识变量，用于指定按哪些因子汇集其他变量的值</li><li>melt：融合列表（id.vars variable.name value.name）</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment">#  将短格式数据转换为长格式——有标识变量</span>
<span class="token operator">&gt;</span> table1_1
    姓名 统计学 数学 经济学
<span class="token number">1</span> 刘文涛     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span> 王宇翔     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span> 田思雨     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span> 徐丽娜     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span> 丁文彬     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
<span class="token operator">&gt;</span> library<span class="token punctuation">(</span>reshape2<span class="token punctuation">)</span>       <span class="token comment"># 加载reshape2包</span>
<span class="token operator">&gt;</span> tab.long<span class="token operator">&lt;-</span>melt<span class="token punctuation">(</span>table1_1<span class="token punctuation">,</span>id.vars<span class="token operator">=</span><span class="token string">"姓名"</span><span class="token punctuation">,</span>variable.name<span class="token operator">=</span><span class="token string">"课程"</span><span class="token punctuation">,</span>value.name<span class="token operator">=</span><span class="token string">"分数"</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token comment"># 融合table1_1与id变量，并命名variable.name="课程",value.name="分数“</span>
<span class="token operator">&gt;</span> tab.long               <span class="token comment"># 显示tab.long</span>
     姓名   课程 分数
<span class="token number">1</span>  刘文涛 统计学   <span class="token number">68</span>
<span class="token number">2</span>  王宇翔 统计学   <span class="token number">85</span>
<span class="token number">3</span>  田思雨 统计学   <span class="token number">74</span>
<span class="token number">4</span>  徐丽娜 统计学   <span class="token number">88</span>
<span class="token number">5</span>  丁文彬 统计学   <span class="token number">63</span>
<span class="token number">6</span>  刘文涛   数学   <span class="token number">85</span>
<span class="token number">7</span>  王宇翔   数学   <span class="token number">91</span>
<span class="token number">8</span>  田思雨   数学   <span class="token number">74</span>
<span class="token number">9</span>  徐丽娜   数学  <span class="token number">100</span>
<span class="token number">10</span> 丁文彬   数学   <span class="token number">82</span>
<span class="token number">11</span> 刘文涛 经济学   <span class="token number">84</span>
<span class="token number">12</span> 王宇翔 经济学   <span class="token number">63</span>
<span class="token number">13</span> 田思雨 经济学   <span class="token number">61</span>
<span class="token number">14</span> 徐丽娜 经济学   <span class="token number">49</span>
<span class="token number">15</span> 丁文彬 经济学   <span class="token number">89</span>
</code></pre> 
<ul><li>无标识变量：不使用id变量，自动融合</li><li>melt函数无标识变量融合数据</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment">#  将短格式数据转换为长格式——无标识变量</span>
<span class="token operator">&gt;</span> table1_3
  统计学 数学 经济学
<span class="token number">1</span>     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span>     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span>     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span>     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span>     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
<span class="token operator">&gt;</span> library<span class="token punctuation">(</span>reshape2<span class="token punctuation">)</span>   <span class="token comment"># 加载reshape2包</span>
<span class="token operator">&gt;</span> tab.long<span class="token operator">&lt;-</span>melt<span class="token punctuation">(</span>table1_3<span class="token punctuation">,</span>variable.name<span class="token operator">=</span><span class="token string">"课程"</span><span class="token punctuation">,</span>value.name<span class="token operator">=</span><span class="token string">"分数"</span><span class="token punctuation">)</span>
No id variables<span class="token punctuation">;</span> using all as measure variables
<span class="token operator">&gt;</span> head<span class="token punctuation">(</span>tab.long<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token comment"># 显示tab.long的前6行</span>
    课程 分数
<span class="token number">1</span> 统计学   <span class="token number">68</span>
<span class="token number">2</span> 统计学   <span class="token number">85</span>
<span class="token number">3</span> 统计学   <span class="token number">74</span>
</code></pre> 
<ul><li>gather函数融合为长格式 有标识</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 使用tidyr包中的gather函数转换为长格式（有标识变量）</span>
<span class="token operator">&gt;</span> table1_1
    姓名 统计学 数学 经济学
<span class="token number">1</span> 刘文涛     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span> 王宇翔     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span> 田思雨     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span> 徐丽娜     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span> 丁文彬     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
<span class="token operator">&gt;</span> library<span class="token punctuation">(</span>tidyr<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> df1<span class="token operator">&lt;-</span>gather<span class="token punctuation">(</span>table1_1<span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">"课程"</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">"分数"</span><span class="token punctuation">,</span><span class="token string">"统计学"</span><span class="token punctuation">,</span><span class="token string">"数学"</span><span class="token punctuation">,</span><span class="token string">"经济学"</span><span class="token punctuation">)</span>     <span class="token comment"># key为融合后的变量名称</span>
<span class="token operator">&gt;</span> df1
     姓名   课程 分数
<span class="token number">1</span>  刘文涛 统计学   <span class="token number">68</span>
<span class="token number">2</span>  王宇翔 统计学   <span class="token number">85</span>
<span class="token number">3</span>  田思雨 统计学   <span class="token number">74</span>
<span class="token number">4</span>  徐丽娜 统计学   <span class="token number">88</span>
<span class="token number">5</span>  丁文彬 统计学   <span class="token number">63</span>
<span class="token number">6</span>  刘文涛   数学   <span class="token number">85</span>
<span class="token number">7</span>  王宇翔   数学   <span class="token number">91</span>
<span class="token number">8</span>  田思雨   数学   <span class="token number">74</span>
<span class="token number">9</span>  徐丽娜   数学  <span class="token number">100</span>
<span class="token number">10</span> 丁文彬   数学   <span class="token number">82</span>
<span class="token number">11</span> 刘文涛 经济学   <span class="token number">84</span>
<span class="token number">12</span> 王宇翔 经济学   <span class="token number">63</span>
<span class="token number">13</span> 田思雨 经济学   <span class="token number">61</span>
<span class="token number">14</span> 徐丽娜 经济学   <span class="token number">49</span>
<span class="token number">15</span> 丁文彬 经济学   <span class="token number">89</span>
</code></pre> 
<p>gather函数无标识变量融合</p> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 使用tidyr包中的gather函数转换为长格式（无标识变量）</span>
<span class="token operator">&gt;</span> table1_3
  统计学 数学 经济学
<span class="token number">1</span>     <span class="token number">68</span>   <span class="token number">85</span>     <span class="token number">84</span>
<span class="token number">2</span>     <span class="token number">85</span>   <span class="token number">91</span>     <span class="token number">63</span>
<span class="token number">3</span>     <span class="token number">74</span>   <span class="token number">74</span>     <span class="token number">61</span>
<span class="token number">4</span>     <span class="token number">88</span>  <span class="token number">100</span>     <span class="token number">49</span>
<span class="token number">5</span>     <span class="token number">63</span>   <span class="token number">82</span>     <span class="token number">89</span>
<span class="token operator">&gt;</span> library<span class="token punctuation">(</span>tidyr<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> df2<span class="token operator">&lt;-</span>gather<span class="token punctuation">(</span>table1_3<span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token string">"课程"</span><span class="token punctuation">,</span>value<span class="token operator">=</span><span class="token string">"分数"</span><span class="token punctuation">,</span><span class="token string">"统计学"</span><span class="token punctuation">,</span><span class="token string">"数学"</span><span class="token punctuation">,</span><span class="token string">"经济学"</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> df2
     课程 分数
<span class="token number">1</span>  统计学   <span class="token number">68</span>
<span class="token number">2</span>  统计学   <span class="token number">85</span>
<span class="token number">3</span>  统计学   <span class="token number">74</span>
<span class="token number">4</span>  统计学   <span class="token number">88</span>
<span class="token number">5</span>  统计学   <span class="token number">63</span>
<span class="token number">6</span>    数学   <span class="token number">85</span>
<span class="token number">7</span>    数学   <span class="token number">91</span>
<span class="token number">8</span>    数学   <span class="token number">74</span>
<span class="token number">9</span>    数学  <span class="token number">100</span>
<span class="token number">10</span>   数学   <span class="token number">82</span>
<span class="token number">11</span> 经济学   <span class="token number">84</span>
<span class="token number">12</span> 经济学   <span class="token number">63</span>
<span class="token number">13</span> 经济学   <span class="token number">61</span>
<span class="token number">14</span> 经济学   <span class="token number">49</span>
<span class="token number">15</span> 经济学   <span class="token number">89</span>
</code></pre> 
<h3><a id="135__455"></a>1.3.5 生成频数表</h3> 
<p>频数分布表<br> 频数分布<br> 频数</p> 
<ul><li><strong>生成频数表</strong><br> 一个类别变量——简单频数表（一维列联表）<br> 两个类别变量——二维列联表（二维表，交叉表）<br> 多个类别变量——多维列联表（高维表）</li></ul> 
<p>函数：<br> table：base包 生成列联表<br> ftable：stats包 生成列联表 默认将最后一个变量作为列变量，设置参数row.vars,col.vars可改变位置<br> structable：vcd包 生成列联表 可创建形式多样的多维扁平化表。formula使表达式，指定行列变量。data是继承的对象。direction是拆分方向h水平c垂直。split_vertical是逻辑向量，指定每个维度是否拆分，默认为FALSE。subset为可选向量，指定要使用的观测子集，<br> prop.table：将频数表转化成百分比表<br> addmargins：为列联表添加边际和</p> 
<ul><li>一维：</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 生成满意度的简单频数表</span>
<span class="token operator">&gt;</span> example1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"example1_1.csv"</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> mytable<span class="token operator">&lt;-</span>table<span class="token punctuation">(</span>example1_1<span class="token operator">$</span>社区<span class="token punctuation">)</span><span class="token punctuation">;</span>mytable      
A社区 B社区 C社区 D社区 
   <span class="token number">27</span>    <span class="token number">17</span>    <span class="token number">21</span>    <span class="token number">15</span> 
<span class="token operator">&gt;</span> <span class="token comment"># 生成频数表</span>
<span class="token operator">&gt;</span> prop.table<span class="token punctuation">(</span>mytable<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span>     <span class="token comment"># 将频数表转化成百分比表</span>
A社区 B社区 C社区 D社区 
<span class="token number">33.75</span> <span class="token number">21.25</span> <span class="token number">26.25</span> <span class="token number">18.75</span> 
</code></pre> 
<ul><li>二维：</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 生成社区与态度的二维列联表</span>
<span class="token operator">&gt;</span> example1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"example1_1.csv"</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> attach<span class="token punctuation">(</span>example1_1<span class="token punctuation">)</span>                                   <span class="token comment"># 绑定数据</span>
<span class="token operator">&gt;</span> mytable1<span class="token operator">&lt;-</span>table<span class="token punctuation">(</span>态度<span class="token punctuation">,</span>社区<span class="token punctuation">)</span><span class="token punctuation">;</span>mytable1  <span class="token comment"># 生成性别和满意度的二维列联表</span>
      社区
态度   A社区 B社区 C社区 D社区
  反对    <span class="token number">13</span>     <span class="token number">5</span>     <span class="token number">7</span>     <span class="token number">6</span>
  赞成    <span class="token number">14</span>    <span class="token number">12</span>    <span class="token number">14</span>     <span class="token number">9</span>
<span class="token operator">&gt;</span> addmargins<span class="token punctuation">(</span>mytable1<span class="token punctuation">)</span>           <span class="token comment"># 为列联表添加边际和</span>
      社区
态度   A社区 B社区 C社区 D社区 Sum
  反对    <span class="token number">13</span>     <span class="token number">5</span>     <span class="token number">7</span>     <span class="token number">6</span>  <span class="token number">31</span>
  赞成    <span class="token number">14</span>    <span class="token number">12</span>    <span class="token number">14</span>     <span class="token number">9</span>  <span class="token number">49</span>
  Sum     <span class="token number">27</span>    <span class="token number">17</span>    <span class="token number">21</span>    <span class="token number">15</span>  <span class="token number">80</span>
<span class="token operator">&gt;</span> addmargins<span class="token punctuation">(</span>prop.table<span class="token punctuation">(</span>mytable1<span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment"># 将列联表转换成百分比表</span>
      社区
态度    A社区  B社区  C社区  D社区    Sum
  反对  <span class="token number">16.25</span>   <span class="token number">6.25</span>   <span class="token number">8.75</span>   <span class="token number">7.50</span>  <span class="token number">38.75</span>
  赞成  <span class="token number">17.50</span>  <span class="token number">15.00</span>  <span class="token number">17.50</span>  <span class="token number">11.25</span>  <span class="token number">61.25</span>
  Sum   <span class="token number">33.75</span>  <span class="token number">21.25</span>  <span class="token number">26.25</span>  <span class="token number">18.75</span> <span class="token number">100.00</span>
</code></pre> 
<ul><li>三维</li></ul> 
<pre><code class="prism language-r"><span class="token operator">&gt;</span> <span class="token comment"># 生成三维频数表（列变量为“社区”）</span>
<span class="token operator">&gt;</span> example1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"example1_1.csv"</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> mytable2<span class="token operator">&lt;-</span>ftable<span class="token punctuation">(</span>example1_1<span class="token punctuation">,</span>row.vars<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"性别"</span><span class="token punctuation">,</span><span class="token string">"态度"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col.vars<span class="token operator">=</span><span class="token string">"社区"</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> <span class="token comment"># 行变量为性别和态度，列变量为社区</span>
<span class="token operator">&gt;</span> mytable2
          社区 A社区 B社区 C社区 D社区
性别 态度                             
男   反对          <span class="token number">4</span>     <span class="token number">3</span>     <span class="token number">5</span>     <span class="token number">2</span>
     赞成          <span class="token number">5</span>     <span class="token number">7</span>     <span class="token number">8</span>     <span class="token number">2</span>
女   反对          <span class="token number">9</span>     <span class="token number">2</span>     <span class="token number">2</span>     <span class="token number">4</span>
     赞成          <span class="token number">9</span>     <span class="token number">5</span>     <span class="token number">6</span>     <span class="token number">7</span>
<span class="token operator">&gt;</span> <span class="token comment"># 为列联表添加边际和</span>
<span class="token operator">&gt;</span> ftable<span class="token punctuation">(</span>addmargins<span class="token punctuation">(</span>table<span class="token punctuation">(</span>example1_1<span class="token operator">$</span>性别<span class="token punctuation">,</span>example1_1<span class="token operator">$</span>态度<span class="token punctuation">,</span>example1_1<span class="token operator">$</span>社区<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                             
          A社区 B社区 C社区 D社区 Sum                          
男  反对      <span class="token number">4</span>     <span class="token number">3</span>     <span class="token number">5</span>     <span class="token number">2</span>  <span class="token number">14</span>
    赞成      <span class="token number">5</span>     <span class="token number">7</span>     <span class="token number">8</span>     <span class="token number">2</span>  <span class="token number">22</span>
    Sum       <span class="token number">9</span>    <span class="token number">10</span>    <span class="token number">13</span>     <span class="token number">4</span>  <span class="token number">36</span>
女  反对      <span class="token number">9</span>     <span class="token number">2</span>     <span class="token number">2</span>     <span class="token number">4</span>  <span class="token number">17</span>
    赞成      <span class="token number">9</span>     <span class="token number">5</span>     <span class="token number">6</span>     <span class="token number">7</span>  <span class="token number">27</span>
    Sum      <span class="token number">18</span>     <span class="token number">7</span>     <span class="token number">8</span>    <span class="token number">11</span>  <span class="token number">44</span>
Sum 反对     <span class="token number">13</span>     <span class="token number">5</span>     <span class="token number">7</span>     <span class="token number">6</span>  <span class="token number">31</span>
    赞成     <span class="token number">14</span>    <span class="token number">12</span>    <span class="token number">14</span>     <span class="token number">9</span>  <span class="token number">49</span>
    Sum      <span class="token number">27</span>    <span class="token number">17</span>    <span class="token number">21</span>    <span class="token number">15</span>  <span class="token number">80</span>
<span class="token operator">&gt;</span> <span class="token comment"># 生成三维频数表（列变量为"社区"，行变量为“性别”和"满意度"）</span>
<span class="token operator">&gt;</span> ftable<span class="token punctuation">(</span>example1_1<span class="token punctuation">,</span>row.vars<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"社区"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col.vars<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"性别"</span><span class="token punctuation">,</span><span class="token string">"态度"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      性别   男        女     
      态度 反对 赞成 反对 赞成
社区                          
A社区         <span class="token number">4</span>    <span class="token number">5</span>    <span class="token number">9</span>    <span class="token number">9</span>
B社区         <span class="token number">3</span>    <span class="token number">7</span>    <span class="token number">2</span>    <span class="token number">5</span>
C社区         <span class="token number">5</span>    <span class="token number">8</span>    <span class="token number">2</span>    <span class="token number">6</span>
D社区         <span class="token number">2</span>    <span class="token number">2</span>    <span class="token number">4</span>    <span class="token number">7</span>
</code></pre> 
<p>Untable：DescTools包 列联表转化成数据框<br> as.data.frame：里欸蓝标转化成带有类别频数的数据框</p> 
<pre><code class="prism language-r"><span class="token comment"># 将列联表转换成原始数据框</span>
read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/example1_1.csv"</span><span class="token punctuation">)</span>
example1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/example1_1.csv"</span><span class="token punctuation">)</span>
library<span class="token punctuation">(</span>DescTools<span class="token punctuation">)</span>

mytable<span class="token operator">&lt;-</span>ftable<span class="token punctuation">(</span>example1_1<span class="token punctuation">)</span>     <span class="token comment"># 生成多维列联表        </span>
df<span class="token operator">&lt;-</span>Untable<span class="token punctuation">(</span>mytable<span class="token punctuation">)</span>      <span class="token comment"># 将列联表转化成原始数据框</span>
head<span class="token punctuation">(</span>df<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>tail<span class="token punctuation">(</span>df<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>              <span class="token comment"># 显示前3行和后3行</span>

Untable<span class="token punctuation">(</span>table<span class="token punctuation">(</span>example1_1<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># 将列联表转化成数据框</span>

<span class="token comment"># 将列联表转换成带有交叉频数标签的数据框</span>
read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/example1_1.csv"</span><span class="token punctuation">)</span>
example1_1<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"C:/example/chap01/example1_1.csv"</span><span class="token punctuation">)</span>
tab<span class="token operator">&lt;-</span>ftable<span class="token punctuation">(</span>example1_1<span class="token punctuation">)</span>    <span class="token comment"># 生成列联表（可用table函数生成）</span>
df<span class="token operator">&lt;-</span>as.data.frame<span class="token punctuation">(</span>tab<span class="token punctuation">)</span><span class="token punctuation">;</span>df      <span class="token comment"># 将列联表转化成带有类别频数的数据框</span>
</code></pre> 
<ul><li><strong>计算描述统计量</strong><br> 频数(frequency) ：落在各类别中的数据个数<br> 比例(proportion) ：某一类别数据个数占全部数据个数的比值<br> 百分比(percentage) ：将对比的基数作为100而计算的比值<br> 比率(ratio) ：不同类别数值个数的比值</li></ul> 
<p>类别化：转化为因子数据<br> 例：销售额生成频数分布表</p> 
<ol><li>确定要分的组数<br> 确定组数的方法有几种。设组数为𝐾，根据Sturges给出的组数确定方法，𝐾=1+〖log_10 (𝑛)〗∕〖log_10 (2) 〗。当然这只是个大概数，具体的组数可根据需要适当调整。有60个数据的话，𝐾=1+〖log_10 (100)〗∕〖log_10 (2) 〗=8，或使用R函数nclass.Sturges(example1_2$销售额)，得𝐾=8，因此，可以将数据大概分成8组。当然，这只是个大概数，实际分组时，可根据需要适当调整。</li><li>确定各组的组距（组的宽度）<br> 组距可根据全部数据的最大值和最小值及所分的组数来确定，即组距＝(最大值-最小值) ÷ 组数。</li><li>统计出各组的频数即得频数分布表<br> 在统计各组频数时，恰好等于某一组上限的变量值一般不算在本组内，而算在下一组，即一个组的数值x满足a≤𝑥&lt;b</li></ol> 
<p>cut：base包<br> grouped.data：actuar包<br> Freq：DescTools包<br> 使用Freq函数创建的频数分布表有level组别，freq各组的频数，perc各组频数百分比，cumfreq累计频数，cumperc累计频数百分比<br> 如果要分成特定组距的组，使用参数break确定一个分组切割点的数值向量</p> 
<pre><code class="prism language-r"><span class="token comment"># 使用默认分组，含上限值</span>
tab<span class="token operator">&lt;-</span> Freq<span class="token punctuation">(</span>example1_2<span class="token operator">$</span>销售额<span class="token punctuation">)</span>

<span class="token comment"># 指定组距=15（不含上限值）</span>
library<span class="token punctuation">(</span>DescTools<span class="token punctuation">)</span>
tab1<span class="token operator">&lt;-</span>Freq<span class="token punctuation">(</span>example1_2<span class="token operator">$</span>销售额<span class="token punctuation">,</span>breaks<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">175</span><span class="token punctuation">,</span><span class="token number">190</span><span class="token punctuation">,</span><span class="token number">205</span><span class="token punctuation">,</span><span class="token number">220</span><span class="token punctuation">,</span><span class="token number">235</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">,</span><span class="token number">265</span><span class="token punctuation">,</span><span class="token number">280</span><span class="token punctuation">)</span><span class="token punctuation">,</span>right<span class="token operator">=</span><span class="token boolean">FALSE</span><span class="token punctuation">)</span> 
 <span class="token comment"># 指定组距=15，不含上限值</span>
tab2<span class="token operator">&lt;-</span>data.frame<span class="token punctuation">(</span>分组<span class="token operator">=</span>tab1<span class="token operator">$</span>level<span class="token punctuation">,</span>频数<span class="token operator">=</span>tab1<span class="token operator">$</span>freq<span class="token punctuation">,</span>频数百分比<span class="token operator">=</span>tab1<span class="token operator">$</span>perc<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span>累积频数<span class="token operator">=</span>tab1<span class="token operator">$</span>cumfreq<span class="token punctuation">,</span>累积百分比<span class="token operator">=</span>tab1<span class="token operator">$</span>cumperc<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">)</span> 
<span class="token comment"># 重新命名频数表中的变量</span>
print<span class="token punctuation">(</span>tab2<span class="token punctuation">,</span>digits<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>   <span class="token comment"># 用print函数定义输出结果的小数位数</span>
</code></pre> 
<h2><a id="14_R_598"></a>1.4 R语言绘图基础</h2> 
<p>两大底层绘图系统：base grid<br> 主要介绍graphics包</p> 
<h3><a id="141__601"></a>1.4.1 基本绘图函数</h3> 
<p>graphics包无需加载<br> 包中函数大致分为两类：产生独立图形的函数&amp;在图形上添加标题注释线段等函数<br> plot：反函数，可绘制多种图形<br> barplot：条形图<br> hist：直方图<br> boxplot：箱线图<br> legend：添加图例<br> layout：页面布局<br> mtext：为图形添加注释文本<br> 例</p> 
<pre><code class="prism language-r">par<span class="token punctuation">(</span>mai<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.6</span><span class="token punctuation">,</span><span class="token number">0.6</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>            <span class="token comment"># 设置图形边界和符号的大小</span>
set.seed<span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">)</span>                                 <span class="token comment"># 设置随机数种子</span>
x <span class="token operator">&lt;-</span> rnorm<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>                                <span class="token comment"># 产生200个标准正态分布的随机数</span>
y <span class="token operator">&lt;-</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span>x <span class="token operator">+</span>rnorm<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>                         <span class="token comment"># 产生变量y的随机数</span>
d<span class="token operator">&lt;-</span>data.frame<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>                             <span class="token comment"># 将数据组织成数据框d</span>
plot<span class="token punctuation">(</span>d<span class="token punctuation">,</span>xlab<span class="token operator">=</span><span class="token string">"x=自变量"</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">"y=因变量"</span><span class="token punctuation">)</span>        <span class="token comment"># 绘制散点图</span>
grid<span class="token punctuation">(</span>col<span class="token operator">=</span><span class="token string">"grey60"</span><span class="token punctuation">)</span>                             <span class="token comment"># 添加网格线</span>
axis<span class="token punctuation">(</span>side<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>col.ticks<span class="token operator">=</span><span class="token string">"blue"</span><span class="token punctuation">,</span>lty<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token comment"># 添加坐标轴</span>
polygon<span class="token punctuation">(</span>d<span class="token punctuation">[</span>chull<span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span>lty<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span>lwd<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token string">"lightgreen"</span><span class="token punctuation">)</span>  <span class="token comment"># 添加多边形并填充底色</span>
points<span class="token punctuation">(</span>d<span class="token punctuation">)</span>                                      <span class="token comment"># 重新绘制散点图</span>
points<span class="token punctuation">(</span>mean<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>mean<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>     <span class="token comment"># 添加均值点</span>
abline<span class="token punctuation">(</span>v<span class="token operator">=</span>mean<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>h<span class="token operator">=</span>mean<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>lty<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token string">"gray30"</span><span class="token punctuation">)</span> <span class="token comment"># 添加均值水平线和垂直线</span>
abline<span class="token punctuation">(</span>lm<span class="token punctuation">(</span>y<span class="token operator">~</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>lwd<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>                    <span class="token comment"># 添加回归直线</span>
lines<span class="token punctuation">(</span>lowess<span class="token punctuation">(</span>y <span class="token operator">~</span> x<span class="token punctuation">,</span>f<span class="token operator">=</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>lwd<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>lty<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">)</span>   <span class="token comment"># 添加拟合曲线</span>
segments<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1.6</span><span class="token punctuation">,</span><span class="token number">3.3</span><span class="token punctuation">,</span>lty<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token string">"blue"</span><span class="token punctuation">)</span>     <span class="token comment"># 添加线段</span>
arrows<span class="token punctuation">(</span><span class="token number">0.45</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">2.2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.6</span><span class="token punctuation">,</span>code<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>angle<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">,</span>length<span class="token operator">=</span><span class="token number">0.06</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> 
                                               <span class="token comment"># 添加带箭头的线段</span>
text<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2.2</span><span class="token punctuation">,</span><span class="token number">3.5</span><span class="token punctuation">,</span>labels<span class="token operator">=</span>expression<span class="token punctuation">(</span><span class="token string">"拟合的曲线"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>adj<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.02</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span> 
                                               <span class="token comment"># 添加注释文本</span>
rect<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1.6</span><span class="token punctuation">,</span> <span class="token number">1.8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token string">"pink"</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token string">"grey60"</span><span class="token punctuation">)</span>  <span class="token comment"># 添加矩形</span>

mtext<span class="token punctuation">(</span>expression<span class="token punctuation">(</span>hat<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token operator">==</span>hat<span class="token punctuation">(</span>beta<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>hat<span class="token punctuation">(</span>beta<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span>side<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>line<span class="token operator">=</span><span class="token operator">-</span><span class="token number">2.5</span><span class="token punctuation">,</span>adj<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">)</span>                         <span class="token comment"># 添加注释表达式</span>

legend<span class="token punctuation">(</span><span class="token string">"topleft"</span><span class="token punctuation">,</span>legend<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"拟合的直线"</span><span class="token punctuation">,</span><span class="token string">"拟合的曲线"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>lty<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>fill<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>box.col<span class="token operator">=</span><span class="token string">"grey60"</span><span class="token punctuation">,</span>ncol<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>inset<span class="token operator">=</span><span class="token number">0.02</span><span class="token punctuation">)</span>  <span class="token comment"># 添加图例</span>
title<span class="token punctuation">(</span><span class="token string">"散点图及拟合直线和曲线\n并为图形增加新的元素"</span><span class="token punctuation">,</span>cex.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>font.main<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment"># 增加标题并折行,使用斜体字</span>
box<span class="token punctuation">(</span>col<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>lwd<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>                             <span class="token comment"># 添加边框14</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/fc/79/jaEE7Yid_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="142__644"></a>1.4.2 图形控制和页面布局</h3> 
<ol><li>图形参数</li></ol> 
<ul><li>par函数参数<br> 绘图符号pch<br> 线型lty<br> 线宽lwd<br> 点的大小pt.cex<br> 位置调整参数adj<br> 主要颜色col<br> <img src="https://images2.imgbox.com/42/13/cV1chRyK_o.png" alt="在这里插入图片描述"></li></ul> 
<ol start="2"><li>页面布局<br> 页面分割和图形组合方法</li></ol> 
<ul><li>par函数参数<br> mfrow和mfcol将绘图页面分割成nr*nc矩阵<br> mfrow=c(nr,nc)按行填充各图<br> mfcol=c(nr,nc)按列填充各图</li></ul> 
<pre><code class="prism language-r"><span class="token comment"># 图1-5（a）的绘制代码</span>
par<span class="token punctuation">(</span>mfrow<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>mai<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span>mgp<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex.axis<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>cex.main<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>font.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
set.seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>         <span class="token comment"># 设置随机数种子</span>
x<span class="token operator">&lt;-</span>rnorm<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment"># 生成100个标准正态分布随机数</span>
y<span class="token operator">&lt;-</span>rexp<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token comment"># 生成100个指数分布随机数</span>
plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>col<span class="token operator">=</span>sample<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">"black"</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"blue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>replace<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(a) 散点图"</span><span class="token punctuation">)</span>
boxplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(b) 箱线图"</span><span class="token punctuation">)</span>
hist<span class="token punctuation">(</span>x<span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token string">"orange1"</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">"y"</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(c) 直方图"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>runif<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(d) 条形图"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c2/dd/wwGhTMlx_o.png" alt="在这里插入图片描述"></p> 
<ul><li>layout函数参数<br> 向量c(nr,nc) 可以设置widths和heights将矩阵分割成大小不同的区域</li></ul> 
<pre><code class="prism language-r"><span class="token comment"># 2行2列的图形矩阵，第2列为1个图</span>
layout<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>nrow<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>ncol<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>byrow<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>heights<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
layout.show<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment"># 2行2列的图形矩阵，第2列为1个图</span>
layout<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>nrow<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>ncol<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>heights<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
layout.show<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment"># 2行3列的图形矩阵，第2行为3个图</span>
layout<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>nrow<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>ncol<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>byrow<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>widths<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>heights<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
layout.show<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token comment"># 3行3列的图形矩阵，第2行为2个图</span>
layout<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>byrow<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>widths<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>heights<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
layout.show<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/98/43/qkyFjHA1_o.png" alt="在这里插入图片描述"><br> 8幅图的layout函数布局</p> 
<pre><code class="prism language-r"><span class="token comment"># 绘制代码</span>
n<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>set.seed<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>x<span class="token operator">&lt;-</span>rnorm<span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>y<span class="token operator">&lt;-</span>rexp<span class="token punctuation">(</span>n<span class="token punctuation">)</span>
layout<span class="token punctuation">(</span>matrix<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span>byrow<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>widths<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>heights<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
par<span class="token punctuation">(</span>mai<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex.main<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span>font.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>runif<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(a) 条形图"</span><span class="token punctuation">)</span>
pie<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>col<span class="token operator">=</span>rainbow<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>labels<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token keyword">NA</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(b) 饼图"</span><span class="token punctuation">)</span>
qqnorm<span class="token punctuation">(</span>y<span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>xlab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(c) Q-Q图"</span><span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">19</span><span class="token punctuation">,</span>col<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>xlab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(d) 散点图"</span><span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>rnorm<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rnorm<span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token punctuation">(</span>y<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>lwd<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>xlab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(e) 气泡图"</span><span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>density<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">,</span>lwd<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>xlab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(f) 核密度图"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>polygon<span class="token punctuation">(</span>density<span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token string">"gold"</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token string">"blue"</span><span class="token punctuation">)</span>
hist<span class="token punctuation">(</span>rnorm<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>xlab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ylab<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(g) 直方图"</span><span class="token punctuation">)</span>
boxplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(h) 箱线图"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b5/d6/dGrT5UFE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="143__709"></a>1.4.3 图形颜色</h3> 
<ol><li>颜色名称和颜色集合函数<br> colors：查看R软件中657种颜色名称<br> graphics包中参数<br> col，bg，fg.col 用来设置绘图区中绘制的数据符号、线条、文本等元素颜色<br> grDevices包中参数<br> cm.colors,heat.colors,rainbow,topo.colors 提供颜色集合<br> 例：</li></ol> 
<pre><code class="prism language-r"><span class="token comment"># col的设置</span>
x<span class="token operator">&lt;-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">10</span>    <span class="token comment"># 生成1到10的等差数列</span>
a<span class="token operator">&lt;-</span> LETTERS<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">]</span>     <span class="token comment"># 生成字母标签向量</span>
par<span class="token punctuation">(</span>mfrow<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>mai<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.4</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>cex.axis<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span>cex.lab<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span>mgp<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex.main<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span>font.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>               <span class="token comment"># 图形参数设置</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>a<span class="token punctuation">,</span>col<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token string">"red"</span><span class="token punctuation">,</span><span class="token string">"green"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(a) 循环使用2种颜色"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>a<span class="token punctuation">,</span>col<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(b) 重复使用颜色1:8"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/79/c7/LIZDqymG_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-r"><span class="token comment"># 颜色集合</span>
par<span class="token punctuation">(</span>mfrow<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>mai<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span>mgp<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex.axis<span class="token operator">=</span><span class="token number">0.7</span><span class="token punctuation">,</span>cex.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>font.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
x<span class="token operator">&lt;-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span>
names<span class="token operator">&lt;-</span>LETTERS<span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">]</span>       <span class="token comment"># 生成字母标签向量</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>names<span class="token punctuation">,</span>col<span class="token operator">=</span>rainbow<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"col=rainbow()"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>names<span class="token punctuation">,</span>col<span class="token operator">=</span>rainbow<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span>start<span class="token operator">=</span><span class="token number">0.4</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"col=rainbow(start=0.4,end=0.5)"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>names<span class="token punctuation">,</span>col<span class="token operator">=</span>heat.colors<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"col=heat.colors()"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>names<span class="token punctuation">,</span>col<span class="token operator">=</span>terrain.colors<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"col=terrain.colors()"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>names<span class="token punctuation">,</span>col<span class="token operator">=</span>topo.colors<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"col=topo.colors()"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span>x<span class="token punctuation">,</span>names<span class="token operator">=</span>names<span class="token punctuation">,</span>col<span class="token operator">=</span>cm.colors<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"col=cm.colors()"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/15/DHPetM4y_o.png" alt="在这里插入图片描述"><br> 2. 调色板<br> 对图形进行配色<br> display.brewer.all：RColorBrewer包 查看R的调色板，多种色系<br> brewer.pal：创建自己的调色板</p> 
<pre><code class="prism language-r"><span class="token comment"># 图1-9的绘制代码——使用调色板</span>
library<span class="token punctuation">(</span>RColorBrewer<span class="token punctuation">)</span>
par<span class="token punctuation">(</span>mfrow<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>mai<span class="token operator">=</span>c<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">,</span>font.main<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
palette1<span class="token operator">&lt;-</span>brewer.pal<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">"Reds"</span><span class="token punctuation">)</span>            <span class="token comment"># 7种颜色的红色连续型调色板</span>
palette2<span class="token operator">&lt;-</span>brewer.pal<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">"Set1"</span><span class="token punctuation">)</span>            <span class="token comment"># 7种颜色的离散型调色板</span>
palette3<span class="token operator">&lt;-</span>brewer.pal<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">"RdBu"</span><span class="token punctuation">)</span>            <span class="token comment"># 7种颜色的红蓝色极端值调色板</span>
palette4<span class="token operator">&lt;-</span>rev<span class="token punctuation">(</span>brewer.pal<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">"Greens"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># 调色板颜色反转</span>
palette5<span class="token operator">&lt;-</span>brewer.pal<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token string">"Spectral"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>       <span class="token comment"># 去掉第1种颜色，使用其余7种</span>
palette6<span class="token operator">&lt;-</span>brewer.pal<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">"RdYlBu"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">]</span>     <span class="token comment"># 使用其中的2:4种颜色</span>
barplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>col<span class="token operator">=</span>palette1<span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(a) 红色连续型调色板"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>col<span class="token operator">=</span>palette2<span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(b) 离散型调色板"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>col<span class="token operator">=</span>palette3<span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(c) 极端值调色板"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>col<span class="token operator">=</span>palette4<span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(d) 调色板颜色反转"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>col<span class="token operator">=</span>palette5<span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(e) 去掉第1种颜色"</span><span class="token punctuation">)</span>
barplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">,</span>col<span class="token operator">=</span>palette6<span class="token punctuation">,</span>main<span class="token operator">=</span><span class="token string">"(f) 使用其中的2:4种颜色"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/19/ac/KsoGFMQu_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fe1ea441adeb3486b78253fb7e16752/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#【必备技能篇】使用批处理脚本（.bat文件）打开控制台应用程序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d636cbbb8c4828ad009a2f68a5244707/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">浅谈pycharm和终端下的ModuleNotFoundError</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>