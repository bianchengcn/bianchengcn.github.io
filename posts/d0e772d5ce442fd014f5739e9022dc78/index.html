<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>游戏DrawCall分析工具-SpectorJS入门 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="游戏DrawCall分析工具-SpectorJS入门" />
<meta property="og:description" content="1. DrawCall简介 1.1、DrawCall是什么？ DrawCall 中⽂译为“绘制调⽤”或“绘图指令”。
DrawCall 是⼀种⾏为（指令），即CPU调⽤图形API，命
令GPU进⾏图形绘制。
1.2、为什么DrawCall多了会影响帧率? 在每次调⽤Draw Call之前，CPU需要向GPU发送很多内
容，包括数据，状态，命令等。在这⼀阶段，CPU需要
完成很多⼯作，例如检查渲染状态等。⽽⼀旦CPU完成
了这些准备⼯作，GPU就可以开始本次的渲染。GPU的
渲染能⼒是很强的，渲染300个和3000个三⻆⽹格通常
没有什么区别，因此渲染速度往往快于CPU提交命令的
速度。如果DrawCall的数量太多，CPU就会把⼤量时间
花费在提交DrawCall命令上，造成CPU的过载。
1.3、如何减少DrawCall？ 提交⼤量很⼩的DrawCall会造成CPU的性能瓶颈，即
CPU把时间都花费在准备DrawCall的⼯作上了。那么，
⼀个很显然的优化想法就是把很多⼩的DrawCall合并成
⼀个⼤的DrawCall,这就是批处理的思想。
2. Spector.js入门使用 2.1、什么是SpectorJS Spector.js是⼀个检测程序每⼀帧时间线渲染的内容、执
⾏的shader、以及WebGL接⼝调⽤情况。常⽤于分析
Drawcall 、 相机渲染内容 等场景。Spector.js⼀般提
供npm安装以及浏览器插件的形式。本⽂以chrome浏览
器插件为例。
2.2、安装SpectorJS 链接：https://pan.baidu.com/s/1ZA3vmbOfqzxx7BoH0rY3LQ?pwd=ix7x 提取码：ix7x 2.3、如何使用SpectorJS 以Chrome扩展程序为例子
点击这个红色图标，图标变成绿色， SpectorJS启动，将重新加载当前页面，并注入调试代码用来收集当前Web页面的渲染信息
点击这个窗口上方的红色圆圈，SpectorJS捕获帧渲染内容，并展示收集到的渲染信息
页面有3个DrawCall，则SpectorJS大约生成3-5张截图，从图中左侧图列可以看出，每一张截图对应一个DrawCall,每调用一次drawElements或WebGL其他draw函数，则增加一次DrawCall。对比指令绘制的内容差异，来决定是否可以将多个指令合并在一起绘制（例如合图或调整图片和文字地渲染顺序等），进而减少DrawCall，提升性能。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/d0e772d5ce442fd014f5739e9022dc78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-22T23:11:01+08:00" />
<meta property="article:modified_time" content="2022-11-22T23:11:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">游戏DrawCall分析工具-SpectorJS入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_DrawCall_0"></a>1. DrawCall简介</h3> 
<h5><a id="11DrawCall_1"></a>1.1、DrawCall是什么？</h5> 
<p>DrawCall 中⽂译为“绘制调⽤”或“绘图指令”。<br> DrawCall 是⼀种⾏为（指令），即CPU调⽤图形API，命<br> 令GPU进⾏图形绘制。</p> 
<h5><a id="12DrawCall_5"></a>1.2、为什么DrawCall多了会影响帧率?</h5> 
<p>在每次调⽤Draw Call之前，CPU需要向GPU发送很多内<br> 容，包括数据，状态，命令等。在这⼀阶段，CPU需要<br> 完成很多⼯作，例如检查渲染状态等。⽽⼀旦CPU完成<br> 了这些准备⼯作，GPU就可以开始本次的渲染。GPU的<br> 渲染能⼒是很强的，渲染300个和3000个三⻆⽹格通常<br> 没有什么区别，因此渲染速度往往快于CPU提交命令的<br> 速度。如果DrawCall的数量太多，CPU就会把⼤量时间<br> 花费在提交DrawCall命令上，造成CPU的过载。</p> 
<h5><a id="13DrawCall_14"></a>1.3、如何减少DrawCall？</h5> 
<p>提交⼤量很⼩的DrawCall会造成CPU的性能瓶颈，即<br> CPU把时间都花费在准备DrawCall的⼯作上了。那么，<br> ⼀个很显然的优化想法就是把很多⼩的DrawCall合并成<br> ⼀个⼤的DrawCall,这就是批处理的思想。</p> 
<h3><a id="2_Spectorjs_19"></a>2. Spector.js入门使用</h3> 
<h5><a id="21SpectorJS_20"></a>2.1、什么是SpectorJS</h5> 
<p>Spector.js是⼀个检测程序每⼀帧时间线渲染的内容、执<br> ⾏的shader、以及WebGL接⼝调⽤情况。常⽤于分析<br> Drawcall 、 相机渲染内容 等场景。Spector.js⼀般提<br> 供npm安装以及浏览器插件的形式。本⽂以chrome浏览<br> 器插件为例。</p> 
<h5><a id="22SpectorJS_26"></a>2.2、安装SpectorJS</h5> 
<pre><code>链接：https://pan.baidu.com/s/1ZA3vmbOfqzxx7BoH0rY3LQ?pwd=ix7x 
提取码：ix7x
</code></pre> 
<h5><a id="23SpectorJS_32"></a>2.3、如何使用SpectorJS</h5> 
<p>以Chrome扩展程序为例子<br> <img src="https://images2.imgbox.com/51/0d/N5w5FxCg_o.png" alt="在这里插入图片描述"><br> 点击这个红色图标，图标变成绿色， SpectorJS启动，将重新加载当前页面，并注入调试代码用来收集当前Web页面的渲染信息<br> <img src="https://images2.imgbox.com/6e/ea/lxzx6ICp_o.png" alt="在这里插入图片描述"><br> 点击这个窗口上方的红色圆圈，SpectorJS捕获帧渲染内容，并展示收集到的渲染信息<br> <img src="https://images2.imgbox.com/7f/bc/7r986Dm2_o.png" alt="在这里插入图片描述">页面有3个DrawCall，则SpectorJS大约生成3-5张截图，从图中左侧图列可以看出，每一张截图对应一个DrawCall,<strong>每调用一次drawElements或WebGL其他draw函数，则增加一次DrawCall。对比指令绘制的内容差异，来决定是否可以将多个指令合并在一起绘制</strong>（例如合图或调整图片和文字地渲染顺序等），进而减少DrawCall，提升性能。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/28ee22eb9bfc705e29d45a2419feeb42/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">强化学习——基本概念&#43;Q表格</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/52869292250103581ff94bfd97654b01/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2022亚马逊云科技re:Invent科创风尚，抢占下一个万亿赛道</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>