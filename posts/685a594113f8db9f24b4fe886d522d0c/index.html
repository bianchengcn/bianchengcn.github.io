<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>node基础 fs(文件系统模块) - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="node基础 fs(文件系统模块)" />
<meta property="og:description" content="node.js 引入fs模块
const fs = require(&#39;fs&#39;) 1. fs.stat() 检测是文件还是目录 语法格式：fs.stat(path, callback)
stat 参数说明：
第一个path是文件路径第二个callback是回调函数，fs.stat(path)执行后，会将stats类的实例返回给其回调函数，例子中分别使用 isFile 和 isDirectory 来判断当前操作的是文件还是目录，取值为 true 和 false const fs = require(&#39;fs&#39;) //判断 ./test/text.txt 是文件还是目录 fs.stat(&#39;./test/text.txt&#39;, (err, dataStr) =&gt; { if (err) { return console.log(&#39;获取失败:&#39;&#43; err.message) } console.log(`是文件:${dataStr.isFile()}`) console.log(`是目录:${dataStr.isDirectory()}`) }) 2. fs.writeFile 写入文件 (若该文件已存在则会覆盖该文件) 语法格式: fs.writeFile(file, data[, options], callback)
writeFile 参数说明：
file 文件名或文件描述符data 要写入文件的数据，可以是 String(字符串) 或 Buffer(缓冲) 对象options 是一个对象，包含以下参数 encoding(String | null) 默认值 utf8mode 默认值 0666flag 默认值 wcallback 回调函数，返回错误信息参数(err) const fs = require(&#39;fs&#39;) // 写入文件 fs." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/685a594113f8db9f24b4fe886d522d0c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-23T16:15:43+08:00" />
<meta property="article:modified_time" content="2023-02-23T16:15:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">node基础 fs(文件系统模块)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a class="link-info" href="https://www.runoob.com/nodejs/nodejs-fs.html" rel="nofollow" title="node.js">node.js</a> 引入fs模块</p> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')</code></pre> 
</div> 
<h4 id="1.%20fs.stat()%20%E6%A3%80%E6%B5%8B%E6%98%AF%E6%96%87%E4%BB%B6%E8%BF%98%E6%98%AF%E7%9B%AE%E5%BD%95">1. fs.stat() 检测是文件还是目录</h4> 
<p>语法格式：fs.stat(path, callback)</p> 
<p>stat 参数说明：</p> 
<ul><li>第一个path是文件路径</li><li>第二个callback是回调函数，fs.stat(path)执行后，会将stats类的实例返回给其回调函数，例子中分别使用 isFile 和 isDirectory 来判断当前操作的是文件还是目录，取值为 true 和 false</li></ul> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')
//判断 ./test/text.txt 是文件还是目录
fs.stat('./test/text.txt', (err, dataStr) =&gt; {
    if (err) {
        return console.log('获取失败:'+ err.message)
    }
    console.log(`是文件:${dataStr.isFile()}`)
    console.log(`是目录:${dataStr.isDirectory()}`)
})</code></pre> 
</div> 
<h4>2. fs.writeFile 写入文件 (若该文件已存在则会覆盖该文件)</h4> 
<p>语法格式: fs.writeFile(file, data[, options], callback)</p> 
<p>writeFile 参数说明：</p> 
<ul><li>file 文件名或文件描述符</li><li>data 要写入文件的数据，可以是 String(字符串) 或 Buffer(缓冲) 对象</li><li>options 是一个对象，包含以下参数 
  <ul><li>encoding(String | null) 默认值 utf8</li><li>mode 默认值 0666</li><li>flag 默认值 w</li></ul></li><li>callback 回调函数，返回错误信息参数(err)</li></ul> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')
// 写入文件
fs.writeFile('./test/text.txt', 'hello', 'utf8', (err) =&gt; {
    if (err) {
        return console.log('写入错误:' + err.message)
    }
    console.log('写入成功');
})</code></pre> 
</div> 
<h4>3. fs.readFile 读取文件</h4> 
<p>语法格式: fs.readFile(path[, options], callback)</p> 
<p> readFile 参数说明：</p> 
<ul><li><span style="color:#0d0016;">path 文件的路径</span></li><li>options 是一个可选参数， 编码格式 一般默认utf8</li><li>callback 回调函数，返回读取失败(err)和成功(dataStr)的结果</li></ul> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')
// 读取文件
fs.readFile('./test/text.txt', 'utf8', (err, dataStr) =&gt; {
    if (err) {
        return console.log('读取错误:' + err.message)
    }
    console.log('读取成功:' + dataStr)
})</code></pre> 
</div> 
<h4 id="2.%20fs.mkdir%20%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%9B%AE%E5%BD%95%E5%AD%98%E5%9C%A8%EF%BC%8C%E5%B0%B1%E4%BC%9A%E6%8A%A5%E9%94%99">4. fs.mkdir 创建目录 (如果目录已存在，就会报错)</h4> 
<p>语法格式：fs.mkdir(path[, options], callback)</p> 
<p>mkdir 参数说明：</p> 
<ul><li>file 文件路径</li><li>data 要写入文件的数据，可以是 String(字符串) 或 Buffer(缓冲) 对象</li><li>options 是一个对象，包含以下参数 
  <ul><li>recursive<strong> </strong>是否以递归的方式创建目录，默认为 false</li><li>mode 设置目录权限，默认为 0777</li></ul></li><li>callback 回调函数， 返回错误信息(err)</li></ul> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')
fs.mkdir('./test', (err) =&gt; {
    if (err) {
        return console.log('创建目录失败:' + err.message)
    }
    console.log('创建目录成功')
})</code></pre> 
</div> 
<h4>5. fs.readdir 读取目录</h4> 
<p>语法格式：fs.readdir(path, callback)</p> 
<p>readdir 参数说明：</p> 
<ul><li>path 文件路径</li><li>callback 回调函数，回调函数带有两个参数err, files，err 为错误信息，files 为 目录下的文件数组列表</li></ul> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')
// 查看 ./test 目录
fs.readdir("./test", (err, files) =&gt; {
    if (err) {
        return console.log('读取目录失败:' + err.message)
    }
    console.log(files) // 返回的是一个数组 [ 'text.txt' ]
})</code></pre> 
</div> 
<h4>6. fs.rename 重命名 </h4> 
<p>语法格式：fs.rename(oldPath, newPath, callback)</p> 
<p>rename参数说明：</p> 
<ul><li>oldPath 原文件路径及名称</li><li>newPath 新命名文件路径及名称</li><li>callback 回调函数，回调函数返回错误信息(err) </li></ul> 
<div> 
 <pre><code class="language-javascript">const fs = require('fs')
// 重命名
fs.rename('./test/text.txt', './test/text1.txt', (err) =&gt; {
    if (err) {
       return console.log('重命名失败' + err.message)
    }
    console.log('重命名成功')
})</code></pre> 
</div> 
<h4>路径动态拼接的问题</h4> 
<p>在使用 fs 模块操作文件时，如果提供的操作路径是以./或../开头的<a href="https://so.csdn.net/so/search?spm=1001.2014.3001.4498&amp;q=%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84&amp;t=&amp;u=" title="相对路径">相对路径</a>时，很容易出现路径动态拼接错误的问题</p> 
<p><strong>原因：</strong>代码在运行的时候，会以执行node命令时所处的目录，动态拼接出被操作文件的完整路径。</p> 
<p><strong>解决方案：</strong>在使用 fs 模块操作文件时，直接提供完整的路径，不要提供./或../开头的相对路径，从而防止路径动态拼接错误的问题。</p> 
<pre><code class="language-javascript">const fs = require('fs')

// 当前文件路径: D:\project\node\node_api\base\fs.js
// 在base目录下执行node .\fs.js 命令是不会报错的
// 如果我们将目录退一级如在node_api下执行node .\base\fs.js 就会报错
// 解决方案是提供一个完整的文件存放路径

//  __dirname 表示当前文件所在的目录
fs.readFile(__dirname + '/test/text.txt', 'utf8', (err, dataStr) =&gt; {
    if (err) {
        return console.log('读取错误:' + err.message)
    }
    console.log('读取成功:' + dataStr)
})</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6742c327991821fa1cd805fce94fed8e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue | vuex安装失败解决的方法实例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c4a8b9b8f2907058fa3da760a90eef7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言中#include＜...＞和#include“...“的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>