<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jQuery的LG的自定义插件。 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="jQuery的LG的自定义插件。" />
<meta property="og:description" content="代码如下：
(function ($)
{
//全局系统对象
window[&#39;LG&#39;] = {};
LG.cookies = (function ()
{
var fn = function ()
{
};
fn.prototype.get = function (name)
{
var cookieValue = &#34;&#34;;
var search = name &#43; &#34;=&#34;;
if (document.cookie.length &gt; 0)
{
offset = document.cookie.indexOf(search);
if (offset != -1)
{
offset &#43;= search.length;
end = document.cookie.indexOf(&#34;;&#34;, offset);
if (end == -1) end = document.cookie.length;
cookieValue = decodeURIComponent(document.cookie.substring(offset, end))
}
}
return cookieValue;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/7a89a8abc2cf3d0628fce070f25cc574/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-09-26T15:37:42+08:00" />
<meta property="article:modified_time" content="2016-09-26T15:37:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">jQuery的LG的自定义插件。</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>代码如下：</p> 
<p>(function ($)<br> {<!-- --><br> <br> <br>     //全局系统对象<br>     window['LG'] = {};<br> <br> <br>     LG.cookies = (function ()<br>     {<!-- --><br>         var fn = function ()<br>         {<!-- --><br>         };<br>         fn.prototype.get = function (name)<br>         {<!-- --><br>             var cookieValue = "";<br>             var search = name + "=";<br>             if (document.cookie.length &gt; 0)<br>             {<!-- --><br>                 offset = document.cookie.indexOf(search);<br>                 if (offset != -1)<br>                 {<!-- --><br>                     offset += search.length;<br>                     end = document.cookie.indexOf(";", offset);<br>                     if (end == -1) end = document.cookie.length;<br>                     cookieValue = decodeURIComponent(document.cookie.substring(offset, end))<br>                 }<br>             }<br>             return cookieValue;<br>         };<br>         fn.prototype.set = function (cookieName, cookieValue, DayValue)<br>         {<!-- --><br>             var expire = "";<br>             var day_value = 1;<br>             if (DayValue != null)<br>             {<!-- --><br>                 day_value = DayValue;<br>             }<br>             expire = new Date((new Date()).getTime() + day_value * 86400000);<br>             expire = "; expires=" + expire.toGMTString();<br>             document.cookie = cookieName + "=" + encodeURIComponent(cookieValue) + ";path=/" + expire;<br>         }<br>         fn.prototype.remvoe = function (cookieName)<br>         {<!-- --><br>             var expire = "";<br>             expire = new Date((new Date()).getTime() - 1);<br>             expire = "; expires=" + expire.toGMTString();<br>             document.cookie = cookieName + "=" + escape("") + ";path=/" + expire;<br>             /*path=/*/<br>         };<br> <br> <br>         return new fn();<br>     })();<br> <br> <br>     //右下角的提示框<br>     LG.tip = function (message) {<!-- --><br>         if (LG.wintip) {<!-- --><br>             LG.wintip.set('content', message);<br>             LG.wintip.show();<br>         } else {<!-- --><br>             LG.wintip = $.ligerDialog.tip({ content: message });<br>         }<br>         setTimeout(function () {<!-- --><br>             LG.wintip.hide()<br>         }, 5000);<br>     };<br> <br> <br>     //预加载图片<br>     LG.prevLoadImage = function (rootpath, paths) {<!-- --><br>         for (var i in paths) {<!-- --><br>             $('&lt;img /&gt;').attr('src', rootpath + paths[i]);<br>         }<br>     };<br>     //显示loading<br>     LG.showLoading = function (message) {<!-- --><br>         message = message || "正在加载中...";<br>         $('body').append("&lt;div class='jloading'&gt;" + message + "&lt;/div&gt;");<br>         $.ligerui.win.mask();<br>     };<br>     //隐藏loading<br>     LG.hideLoading = function (message) {<!-- --><br>         $('body &gt; div.jloading').remove();<br>         $.ligerui.win.unmask({ id: new Date().getTime() });<br>     };<br> <span style="white-space:pre"></span>LG.showLoading2 = function(message){<!-- --><br> <span style="white-space:pre"></span>message = message || "正在加载中...";<br> <span style="white-space:pre"></span>$('body').append("&lt;div class='l-grid-loading' style='display: block;'&gt;" + message + "&lt;/div&gt;");<br> <span style="white-space:pre"></span>$.ligerui.win.mask();<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>LG.hideLoading2 = function(){<!-- --><br> <span style="white-space:pre"></span>$('body &gt; div.l-grid-loading').remove();<br>         $.ligerui.win.unmask({ id: new Date().getTime() });<br> <span style="white-space:pre"></span>}<br>     //显示成功提示窗口<br>     LG.showSuccess = function (message, callback) {<!-- --><br>         if (typeof (message) == "function" || arguments.length == 0) {<!-- --><br>             callback = message;<br>             message = "操作成功!";<br>         }<br>         $.ligerDialog.success(message, '提示', callback);<br>     };<br>     //显示成功提示窗口<br>     LG.warn = function (message,title, callback) {<!-- --><br>         if (typeof (message) == "function" || arguments.length == 0) {<!-- --><br>             callback = message;<br>             message = "操作成功!";<br>         }<br>         $.ligerDialog.warn(message, '提示', callback);<br>     };<br>     //显示失败提示窗口<br>     LG.showError = function (message, callback)<br>     {<!-- --><br>         if (typeof (message) == "function" || arguments.length == 0)<br>         {<!-- --><br>             callback = message;<br>             message = "操作失败!";<br>         }<br>         $.ligerDialog.error(message, '提示', callback);<br>     };<br> <br> <br> <br> <br>     //预加载dialog的图片<br>     LG.prevDialogImage = function (rootPath) {<!-- --><br>         rootPath = rootPath || base;<br>         LG.prevLoadImage(rootPath + '/core_res/thirdparty/ligerUI/skins/Aqua/images/win/', ['dialog-icons.gif']);<br>         LG.prevLoadImage(rootPath + '/core_res/thirdparty/ligerUI/skins/Gray/images/win/', ['dialogicon.gif']);<br>     };<br> <br> <br>     //提交服务器请求<br>     //返回json格式<br>     //1,提交给类 options.type  方法 options.method 处理<br>     //2,并返回 AjaxResult(这也是一个类)类型的的序列化好的字符串<br>     LG.ajax = function (options) {<!-- --><br>         var p = options || {};<br>         $.ajax({<!-- --><br>             cache: false,<br>             async: p.async == undefined ? true : p.async,<br>             url: p.url,<br>             data: p.data,<br>             dataType: 'json', type: 'post',<br>             beforeSend: function () {<!-- --><br>                 LG.loading = true;<br>                 if (p.beforeSend)<br>                     p.beforeSend();<br>                 else<br>                     LG.showLoading(p.loading);<br>             },<br>             contentType : "application/x-www-form-urlencoded;charset=utf-8", <br>             complete: function (xhr, textStatus) {<!-- --><br>             <span style="white-space:pre"></span>if(xhr.status == 911){<!-- --><br>             <span style="white-space:pre"></span>if (top.location == location) {<!-- --><br> <span style="white-space:pre"></span>         <span style="white-space:pre"> </span>          window.opener=null;<br> <span style="white-space:pre"></span>         <span style="white-space:pre"> </span>  alert("登陆超时，请重新登录!");<br> <span style="white-space:pre"></span>         <span style="white-space:pre"> </span>  top.location = base +"/login/home.htm";<br> <span style="white-space:pre"></span>         <span style="white-space:pre"> </span>      } else {<!-- --><br> <span style="white-space:pre"></span>         <span style="white-space:pre"> </span>          top.location = location;<br> <span style="white-space:pre"></span>         <span style="white-space:pre"> </span>      }<br>             <span style="white-space:pre"></span>}<br>                 LG.loading = false;<br>                 LG.hideLoading();<br>             },<br>             success: p.success,<br>             error: function (result, b) {<!-- --><br>                 //LG.tip('发现系统错误 &lt;BR&gt;错误码：' + result.status);<br>             }<br>         });<br>     };<br> <br> <br>     //获取当前页面的MenuNo<br>     //优先级1：如果页面存在MenuNo的表单元素，那么加载它的值<br>     //优先级2：加载QueryString，名字为MenuNo的值<br>     LG.getPageMenuNo = function () {<!-- --><br>         var menuno = $("#MenuNo").val();<br>         if (!menuno) {<!-- --><br>             menuno = getQueryStringByName("MenuNo");<br>         }<br>         return menuno;<br>     };<br> <br> <br>     //创建按钮<br>     LG.createButton = function (options) {<!-- --><br>         var p = $.extend({<!-- --><br>             appendTo: $('body')<br>         }, options || {});<br>         var btn = $('&lt;div class="button button2 buttonnoicon" style="width:60px"&gt;&lt;div class="button-l"&gt; &lt;/div&gt;&lt;div class="button-r"&gt; &lt;/div&gt; &lt;span&gt;&lt;/span&gt;&lt;/div&gt;');<br>         if (p.icon)<br>         {<!-- --><br>             btn.removeClass("buttonnoicon");<br>             btn.append('&lt;div class="button-icon"&gt; &lt;img src="../' + p.icon + '" /&gt; &lt;/div&gt; ');<br>         }<br>         //绿色皮肤<br>         if (p.green)<br>         {<!-- --><br>             btn.removeClass("button2");<br>         }<br>         if (p.width)<br>         {<!-- --><br>             btn.width(p.width);<br>         }<br>         if (p.click)<br>         {<!-- --><br>             btn.click(p.click);<br>         }<br>         if (p.text)<br>         {<!-- --><br>             $("span", btn).html(p.text);<br>         }<br>         if (typeof (p.appendTo) == "string") p.appendTo = $(p.appendTo);<br>         btn.appendTo(p.appendTo);<br>     };<br> <br> <br>     //创建过滤规则(查询表单)<br>     LG.bulidFilterGroup = function (form) {<!-- --><br>         if (!form) return null;<br>         var group = { op: "and", rules: [] };<br>         $(":input", form).not(":submit, :reset, :image,:button, [disabled]")<br>         .each(function () {<!-- --><br>             if (!this.name) return;<br>             if (!$(this).hasClass("field")) return;<br>             if ($(this).val() == null || $(this).val() == "") return;<br>             var ltype = $(this).attr("ltype");<br>             var optionsJSON = $(this).attr("ligerui"), options;<br>             if (optionsJSON) {<!-- --><br>                 options = JSON2.parse(optionsJSON);<br>             }<br>             var op = $(this).attr("op") || "like";<br>             //get the value type(number or date)<br>             var type = $(this).attr("vt") || "string";<br>             var value = $(this).val();<br>             var name = this.name;<br>             //如果是下拉框，那么读取下拉框关联的隐藏控件的值(ID值,常用与外表关联)<br>             if (ltype == "select" &amp;&amp; options &amp;&amp; options.valueFieldID) {<!-- --><br>                 value = $("#" + options.valueFieldID).val();<br>                 name = options.valueFieldID;<br>             }<br>             group.rules.push({<!-- --><br>                 op: op,<br>                 field: name,<br>                 value: value,<br>                 type: type<br>             });<br>         });<br>         return group;<br>     };<br> <br> <br>     //附加表单搜索按钮：搜索、高级搜索<br>     LG.appendSearchButtons = function (form, grid) {<!-- --><br>         if (!form) return;<br>         form = $(form);<br>         //搜索按钮 附加到第一个li  高级搜索按钮附加到 第二个li<br>         var container = $('&lt;ul&gt;&lt;li style="margin-right:8px"&gt;&lt;/li&gt;&lt;li&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class="l-clear"&gt;&lt;/div&gt;').appendTo(form);<br>         LG.addSearchButtons(form, grid, container.find("li:eq(0)"), container.find("li:eq(1)"));<br> <br> <br>     };<br> <br> <br>     //创建表单搜索按钮：搜索、高级搜索<br>     LG.addSearchButtons = function (form, grid, btn1Container, btn2Container) {<!-- --><br>         if (!form) return;<br>         if (btn1Container) {<!-- --><br>             LG.createButton({<!-- --><br>                 appendTo: btn1Container,<br>                 text: '搜索',<br>                 click: function () {<!-- --><br>                     var rule = LG.bulidFilterGroup(form);<br>                     if (rule.rules.length)<br>                     {<!-- --><br>                         grid.set('parms', { where: JSON2.stringify(rule) });<br>                     } else<br>                     {<!-- --><br>                         grid.set('parms', {});<br>                     }<br>                     grid.loadData();<br>                 }<br>             });<br>         }<br>         if (btn2Container) {<!-- --><br>             LG.createButton({<!-- --><br>                 appendTo: btn2Container,<br>                 width: 80,<br>                 text: '高级搜索',<br>                 click: function ()<br>                 {<!-- --><br>                     grid.showFilter();<br>                 }<br>             });<br>         }<br>     };<br> <br> <br>     //快速设置表单底部默认的按钮:保存、取消<br>     LG.setFormDefaultBtn = function (cancleCallback, savedCallback) {<!-- --><br>         //表单底部按钮<br>         var buttons = [];<br>         if (cancleCallback)<br>         {<!-- --><br>             buttons.push({ text: '取消', onclick: cancleCallback });<br>         }<br>         if (savedCallback)<br>         {<!-- --><br>             buttons.push({ text: '保存', onclick: savedCallback });<br>         }<br>         LG.addFormButtons(buttons);<br>     };<br> <br> <br>     //增加表单底部按钮,比如：保存、取消<br>     LG.addFormButtons = function (buttons)<br>     {<!-- --><br>         if (!buttons) return;<br>         var formbar = $("body &gt; div.form-bar");<br>         if (formbar.length == 0)<br>             formbar = $('&lt;div class="form-bar"&gt;&lt;div class="form-bar-inner"&gt;&lt;/div&gt;&lt;/div&gt;').appendTo('body');<br>         if (!(buttons instanceof Array))<br>         {<!-- --><br>             buttons = [buttons];<br>         }<br>         $(buttons).each(function (i, o)<br>         {<!-- --><br>             var btn = $('&lt;div class="l-dialog-btn"&gt;&lt;div class="l-dialog-btn-l"&gt;&lt;/div&gt;&lt;div class="l-dialog-btn-r"&gt;&lt;/div&gt;&lt;div class="l-dialog-btn-inner"&gt;&lt;/div&gt;&lt;/div&gt; ');<br>             $("div.l-dialog-btn-inner:first", btn).html(o.text || "BUTTON");<br>             if (o.onclick)<br>             {<!-- --><br>                 btn.bind('click', function ()<br>                 {<!-- --><br>                     o.onclick(o);<br>                 });<br>             }<br>             if (o.width)<br>             {<!-- --><br>                 btn.width(o.width);<br>             }<br>             $("&gt; div:first", formbar).append(btn);<br>         });<br>     };<br> <br> <br>     //填充表单数据<br>     LG.loadForm = function (mainform, options, callback)<br>     {<!-- --><br>         options = options || {};<br>         if (!mainform)<br>             mainform = $("form:first");<br>         var p = $.extend({<!-- --><br>             beforeSend: function ()<br>             {<!-- --><br>                 LG.showLoading('正在加载表单数据中...');<br>             },<br>             complete: function ()<br>             {<!-- --><br>                 LG.hideLoading();<br>             },<br>             success: function (data)<br>             {<!-- --><br>                 var preID = options.preID || "";<br>                 //根据返回的属性名，找到相应ID的表单元素，并赋值<br>                 for (var p in data)<br>                 {<!-- --><br>                     var ele = $("[name=" + (preID + p) + "]", mainform);<br>                     //针对复选框和单选框 处理<br>                     if (ele.is(":checkbox,:radio"))<br>                     {<!-- --><br>                         ele[0].checked = data[p] ? true : false;<br>                     }<br>                     else<br>                     {<!-- --><br>                         ele.val(data[p]);<br>                     }<br>                 }<br>                 //下面是更新表单的样式<br>                 var managers = $.ligerui.find($.ligerui.controls.Input);<br>                 for (var i = 0, l = managers.length; i &lt; l; i++)<br>                 {<!-- --><br>                     //改变了表单的值，需要调用这个方法来更新ligerui样式<br>                     var o = managers[i];<br>                     o.updateStyle();<br>                     if (managers[i] instanceof $.ligerui.controls.TextBox)<br>                         o.checkValue();<br>                 }<br>                 if (callback)<br>                     callback(data);<br>             },<br>             error: function (message)<br>             {<!-- --><br>                 LG.showError('数据加载失败!&lt;BR&gt;错误信息：' + message);<br>             }<br>         }, options);<br>         LG.ajax(p);<br>     };<br> <br> <br>     //带验证、带loading的提交<br>     LG.submitForm = function (mainform, success, error, data) {<!-- --><br>         if (!mainform)<br>             mainform = $("form:first");<br>         if (mainform.valid()) {<!-- --><br>             mainform.ajaxSubmit({<!-- --><br>                 dataType: 'json',<br>                 success: success,<br> <span style="white-space:pre"></span>data: data,<br>                 beforeSubmit: function (formData, jqForm, options){<!-- --><br>                     //针对复选框和单选框 处理<br>                     $(":checkbox,:radio", jqForm).each(function (){<!-- --><br>                         if (!existInFormData(formData, this.name)){<!-- --><br>                             formData.push({ name: this.name, type: this.type, value: this.checked });<br>                         }<br>                     });<br>                     for (var i = 0, l = formData.length; i &lt; l; i++){<!-- --><br>                         var o = formData[i];<br>                         if (o.type == "checkbox" || o.type == "radio"){<!-- --><br>                             o.value = $("[name=" + o.name + "]", jqForm)[0].checked ? "true" : "false";<br>                         }<br>                     }<br>                 },<br>                 beforeSend: function (a, b, c){<!-- --><br>                     LG.showLoading('正在保存数据中...');<br>                 },<br>                 complete: function (result){<!-- --><br>                     LG.hideLoading();<br>                 },<br>                 error: function (result){<!-- --><br>                     LG.tip('发现系统错误 &lt;BR&gt;错误码：' + result.status);<br>                 }<br>             });<br>         }<br>         else{<!-- --><br>             LG.showInvalid();<br>         }<br>         function existInFormData(formData, name){<!-- --><br>             for (var i = 0, l = formData.length; i &lt; l; i++){<!-- --><br>                 var o = formData[i];<br>                 if (o.name == name) return true;<br>             }<br>             return false;<br>         }<br>     };<br> <br> <br>     //提示 验证错误信息<br>     LG.showInvalid = function (validator) {<!-- --><br>         validator = validator || LG.validator;<br>         if (!validator) return;<br>         var message = '&lt;div class="invalid"&gt;存在' + validator.errorList.length + '个字段验证不通过，请检查!&lt;/div&gt;';<br>         //top.LG.tip(message);<br>         $.ligerDialog.error(message);<br>     };<br> <br> <br>     //表单验证<br>     LG.validate = function (form, options) {<!-- --><br>         if (typeof (form) == "string")<br>             form = $(form);<br>         else if (typeof (form) == "object" &amp;&amp; form.NodeType == 1)<br>             form = $(form);<br> <br> <br>         options = $.extend({<!-- --><br>             errorPlacement: function (lable, element)<br>             {<!-- --><br>                 if (!element.attr("id"))<br>                     element.attr("id", new Date().getTime());<br>                 if (element.hasClass("l-textarea"))<br>                 {<!-- --><br>                     element.addClass("l-textarea-invalid");<br>                 }<br>                 else if (element.hasClass("l-text-field"))<br>                 {<!-- --><br>                     element.parent().addClass("l-text-invalid");<br>                 }<br>                 $(element).removeAttr("title").ligerHideTip();<br>                 $(element).attr("title", lable.html()).ligerTip({<!-- --><br>                     distanceX: 5,<br>                     distanceY: -3,<br>                     auto: true<br>                 });<br>             },<br>             success: function (lable) {<!-- --><br>                 if (!lable.attr("for")) return;<br>                 var element = $("#" + lable.attr("for"));<br> <br> <br>                 if (element.hasClass("l-textarea")) {<!-- --><br>                     element.removeClass("l-textarea-invalid");<br>                 } else if (element.hasClass("l-text-field")) {<!-- --><br>                     element.parent().removeClass("l-text-invalid");<br>                 }<br>                 $(element).removeAttr("title").ligerHideTip();<br>             }<br>         }, options || {});<br>         LG.validator = form.validate(options);<br>         return LG.validator;<br>     };<br> <br> <br>     LG.loadToolbar = function (grid, toolbarBtnItemClick) {<!-- --><br>         LG.ajax({<!-- --><br>             loading: '正在加载工具条中...',<br>             type: 'AjaxSystem',<br> <span style="white-space:pre"></span>url: base + '/rbac/operate!toolBarButton.ajax',<br>             data: { HttpContext: true, url: location.pathname },<br>             success: function (data) {<!-- --><br>                 if (!grid.toolbarManager) return;<br>                 if (!data || !data.length) return;<br>                 var items = [];<br>                 for (var i = 0, l = data.length; i &lt; l; i++){<!-- --><br>                     var o = data[i];<br>                     items[items.length] = {<!-- --><br>                         click: toolbarBtnItemClick || LG.toolbarBtnItemClick,<br>                         text: o.name,<br> <span style="white-space:pre"></span>html: o.html,<br>                         img: base + "/" + o.btnIcon,<br>                         id: o.id,<br> <span style="white-space:pre"></span>url: o.url<span style="white-space:pre"> </span> <br>                     };<br>                     items[items.length] = { line: true };<br>                 }<br>                 grid.toolbarManager.set('items', items);<br>             }<br>         });<br>     };<br> <span style="white-space:pre"></span><br> <span style="white-space:pre"></span>LG.toolbarBtnItemClick = function(item) {<!-- --><br> <span style="white-space:pre"></span>eval(item.html);<br> <span style="white-space:pre"></span>};<br> <span style="white-space:pre"></span><br>     //关闭Tab项,如果tabid不指定，那么关闭当前显示的<br>     LG.closeCurrentTab = function (tabid) {<!-- --><br>         if (!tabid) {<!-- --><br>             tabid = $("#framecenter &gt; .l-tab-content &gt; .l-tab-content-item:visible").attr("tabid");<br>         }<br>         if (tab) {<!-- --><br>             tab.removeTabItem(tabid);<br>         }<br>     };<br> <br> <br>     //关闭Tab项并且刷新父窗口<br>     LG.closeAndReloadParent = function (tabid, parentMenuNo) {<!-- --><br>         LG.closeCurrentTab(tabid);<br>         var menuitem = $("#mainmenu ul.menulist li[menuno=" + parentMenuNo + "]");<br>         var parentTabid = menuitem.attr("tabid");<br>         var iframe = window.frames[parentTabid];<br>         if (tab) {<!-- --><br>             tab.selectTabItem(parentTabid);<br>         }<br>         if (iframe &amp;&amp; iframe.f_reload) {<!-- --><br>             iframe.f_reload();<br>         } else if (tab) {<!-- --><br>             tab.reload(parentTabid);<br>         }<br>     };<br> <br> <br>     //覆盖页面grid的loading效果<br>     LG.overrideGridLoading = function () {<!-- --><br>         $.extend($.ligerDefaults.Grid, {<!-- --><br>             onloading: function () {<!-- --><br>                 LG.showLoading('正在加载表格数据中...');<br>             }, onloaded: function () {<!-- --><br>                 LG.hideLoading();<br>             }<br>         });<br>     };<br> <br> <br>     //根据字段权限调整 页面配置<br>     LG.adujestConfig = function (config, forbidFields) {<!-- --><br>         if (config.Form &amp;&amp; config.Form.fields) {<!-- --><br>             for (var i = config.Form.fields.length - 1; i &gt;= 0; i--) {<!-- --><br>                 var field = config.Form.fields[i];<br>                 if ($.inArray(field.name, forbidFields) != -1)<br>                     config.Form.fields.splice(i, 1);<br>             }<br>         }<br>         if (config.Grid &amp;&amp; config.Grid.columns) {<!-- --><br>             for (var i = config.Grid.columns.length - 1; i &gt;= 0; i--) {<!-- --><br>                 var column = config.Grid.columns[i];<br>                 if ($.inArray(column.name, forbidFields) != -1)<br>                     config.Grid.columns.splice(i, 1);<br>             }<br>         }<br>         if (config.Search &amp;&amp; config.Search.fields)<br>         {<!-- --><br>             for (var i = config.Search.fields.length - 1; i &gt;= 0; i--)<br>             {<!-- --><br>                 var field = config.Search.fields[i];<br>                 if ($.inArray(field.name, forbidFields) != -1)<br>                     config.Search.fields.splice(i, 1);<br>             }<br>         }<br>     };<br> <br> <br>     //查找是否存在某一个按钮<br>     LG.findToolbarItem = function (grid, itemID)<br>     {<!-- --><br>         if (!grid.toolbarManager) return null;<br>         if (!grid.toolbarManager.options.items) return null;<br>         var items = grid.toolbarManager.options.items;<br>         for (var i = 0, l = items.length; i &lt; l; i++)<br>         {<!-- --><br>             if (items[i].id == itemID) return items[i];<br>         }<br>         return null;<br>     };<br> <br> <br> <br> <br>     //设置grid的双击事件(带权限控制)<br>     LG.setGridDoubleClick = function (grid, btnID, btnItemClick) {<!-- --><br> //        btnItemClick = btnItemClick || toolbarBtnItemClick;<br> //        if (!btnItemClick) return;<br>         grid.bind('dblClickRow', function (rowdata) {<!-- --><br>             var item = LG.findToolbarItem(grid, btnID);<br>             if (!item) return;<br>             grid.select(rowdata);<br> <span style="white-space:pre"></span>eval(item.html);<br>             //btnItemClick(item);<br>         });<br>     };<br> <br> <br> <span style="white-space:pre"></span>//将选中的记录转换成ID数组<br> <span style="white-space:pre"></span>LG.getIds = function (selected){<!-- --><br> <span style="white-space:pre"></span>var ids = new Array();<br> <span style="white-space:pre"></span>for (var i = 0; i&lt; selected.length; i++){<!-- --><br> <span style="white-space:pre"></span>ids.push(selected[i].id);<br> <span style="white-space:pre"></span>};<br> <span style="white-space:pre"></span>return ids;<br> <span style="white-space:pre"></span>};<br> <span style="white-space:pre"></span><br> <span style="white-space:pre"></span>LG.ajaxByJSON = function ajaxByJSON(_url,_data,_async, callBack, errorCallBack){<!-- --><br> <span style="white-space:pre"></span>jQuery.ajax({<!-- --><br> <span style="white-space:pre"></span>url: _url,<br> <span style="white-space:pre"></span>cache: false,<br> <span style="white-space:pre"></span>async: _async,<br> <span style="white-space:pre"></span>type: 'POST', <br> <span style="white-space:pre"></span>data: _data,<br> <span style="white-space:pre"></span>dataType: 'json',<br> <span style="white-space:pre"></span>error: function(){<!-- --><br> <span style="white-space:pre"></span>if(errorCallBack){<!-- --><br> <span style="white-space:pre"></span>errorCallBack();<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>alert("jQuery.ajax 执行失败！");<br> <span style="white-space:pre"></span>},<br> <span style="white-space:pre"></span>success: function(json){<!-- --><br> <span style="white-space:pre"></span><span style="white-space:pre"></span>if(callBack) callBack(json);<br> <span style="white-space:pre"></span><span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>});<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span><br> <span style="white-space:pre"></span>LG.search = function(grid, p){<!-- --><br> <span style="white-space:pre"></span>p = $.extend({<!-- --><br> <span style="white-space:pre"></span>beforeSearch: null, //搜索之前调用的函数<br> <span style="white-space:pre"></span>afterSearch: null //搜索之后调用的函数<br> <span style="white-space:pre"></span>}, p || {});<br> <span style="white-space:pre"></span>$("#search").click(function(){<!-- --><br> <span style="white-space:pre"></span>var self = this;<br> <span style="white-space:pre"></span>this.p = p;<br> <span style="white-space:pre"></span>if ($.isFunction(self.p.beforeSearch)) {<!-- --><br> <span style="white-space:pre"></span>self.p.beforeSearch();<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span><br> <span style="white-space:pre"></span>var searchData = getWarpPara("functions");<br> <span style="white-space:pre"></span>delete searchData[""];<br> <span style="white-space:pre"></span>var flag = false;<br> <span style="white-space:pre"></span>for (var key in searchData) {<!-- --><br> <span style="white-space:pre"></span>if (searchData[key].trim() != "") {<!-- --><br> <span style="white-space:pre"></span>flag = true;<br> <span style="white-space:pre"></span>break;<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>if (flag) {<!-- --><br> <span style="white-space:pre"></span>$("#search_btn_reset").css("display", "inline");<br> <span style="white-space:pre"></span>grid.options.parms = searchData;<br> <span style="white-space:pre"></span>grid.loadData(true);<br> <span style="white-space:pre"></span>if ($.isFunction(self.p.afterSearch)) {<!-- --><br> <span style="white-space:pre"></span>self.p.afterSearch();<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>});<br> <span style="white-space:pre"></span>$("#search_btn_reset").click(function(){<!-- --><br> <span style="white-space:pre"></span>clearSearchWeiget("functions");<br> <span style="white-space:pre"></span>grid.options.parms = null;<br> <span style="white-space:pre"></span>grid.loadData(true);<br> <span style="white-space:pre"></span>$(this).css("display", "none");<br> <span style="white-space:pre"></span>});<br> <span style="white-space:pre"></span>};<br> })(jQuery);<br> //根据id清空搜索框<br> function clearSearchWeiget(id){<!-- --><br> <span style="white-space:pre"></span>var inputs = $("#"+id).find("input[type!='button'], select");<br> <span style="white-space:pre"></span>for (var i = 0; i &lt; inputs.size(); i++) {<!-- --><br> <span style="white-space:pre"></span>var input = $(inputs[i]);<br> <span style="white-space:pre"></span>//如果是checkbox<br> <span style="white-space:pre"></span>if(input.attr("type") == "checkbox" &amp;&amp; input.val() != ''){<!-- --><br> <span style="white-space:pre"></span>input.attr("checked", false);<br> <span style="white-space:pre"></span>continue;<br> <span style="white-space:pre"></span>} else if(input.attr("type") == "radio"){<!-- --><br> <span style="white-space:pre"></span>if (input.attr("checked")) {<!-- --><br> <span style="white-space:pre"></span>input.attr("checked", false);<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>continue;<br> <span style="white-space:pre"></span>} else if (input.val() != '') {<!-- --><br> <span style="white-space:pre"></span>input.val("");<br> <span style="white-space:pre"></span>continue;<br> <span style="white-space:pre"></span>}<br> <span style="white-space:pre"></span>}<br> };<br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c194a92f869efcd68bd206ef906b5742/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Jquery的$.ajax防止重复提交的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/551f663c3b0ace29271a8c0cf6aae89c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Django管理文件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>