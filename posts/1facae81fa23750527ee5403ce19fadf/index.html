<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java 传json到前台_利用JSON进行前台和后端的数据传输 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java 传json到前台_利用JSON进行前台和后端的数据传输" />
<meta property="og:description" content="首先，JSON有两种结构：
1)数组结构
[
{
key1:value1,
key2:value2
},
{
key3:value3,
key4:value4
}
]
2)对象结构
{
key1:value1,
key2:value2,
...
}
主要的操作步骤如下：
1)将查询的条件从前端传以一定的方式传递到后台。
2)后台根据查询条件从数据库中进行查找。
3)建立JSONObject对象，将查询的加过按照一定的规则添加到对象中，并返回。
4)在前端中通过JavaScript脚本解析后台传过来的JSON对象。(其中通常先采取eval()函数，使得后台传回来的JSON对象被作为一段JavaScript脚本执行，然后对执行结果进行接下来的解析操作)。
程序主体代码如下：
List jsonList = newArrayList();try{
ylx_db query_db= new ylx_db(&#34;test&#34;); //这里用的是MySQL里的test数据库，可以根据需要改成自己的数据库名//构造sql语句，根据传递过来的查询条件参数
String sql=&#34;select * from &#34;&#43;tableName;
System.out.println(sql);
ResultSet rs=query_db.executeQuery(sql);while(rs.next()) {
List list= newArrayList();//list.add(rs.getString(&#34;&#34;));
list.add(rs.getString(&#34;lng&#34;));
list.add(rs.getString(&#34;lat&#34;));
jsonList.add(list);
System.out.println(rs.getString(&#34;lng&#34;)&#43;&#34;,&#34;&#43;rs.getString(&#34;lat&#34;));
}
rs.close();
query_db.close();
}catch(SQLException sqlexception) {
sqlexception.printStackTrace();
}//数据库查询完毕，得到了json数组jsonList//
//下面开始构建返回的json
JSONObject jsonObj=newJSONObject();
jsonObj.put(&#34;aaData&#34;,jsonList); //以键值对的形式给出
response.setContentType(&#34;text/html; charset=UTF-8&#34;);try{
response.getWriter().print(jsonObj);
response.getWriter().flush();
response.getWriter().close();
}catch(IOException e) {" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/1facae81fa23750527ee5403ce19fadf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-27T05:04:56+08:00" />
<meta property="article:modified_time" content="2021-02-27T05:04:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java 传json到前台_利用JSON进行前台和后端的数据传输</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>首先，JSON有两种结构：</p> 
 <p>1)数组结构</p> 
 <p>[</p> 
 <p>{<!-- --></p> 
 <p>key1:value1,</p> 
 <p>key2:value2</p> 
 <p>},</p> 
 <p>{<!-- --></p> 
 <p>key3:value3,</p> 
 <p>key4:value4</p> 
 <p>}</p> 
 <p>]</p> 
 <p>2)对象结构</p> 
 <p>{<!-- --></p> 
 <p>key1:value1,</p> 
 <p>key2:value2,</p> 
 <p>...</p> 
 <p>}</p> 
 <p>主要的操作步骤如下：</p> 
 <p>1)将查询的条件从前端传以一定的方式传递到后台。</p> 
 <p>2)后台根据查询条件从数据库中进行查找。</p> 
 <p>3)建立JSONObject对象，将查询的加过按照一定的规则添加到对象中，并返回。</p> 
 <p>4)在前端中通过JavaScript脚本解析后台传过来的JSON对象。(其中通常先采取eval()函数，使得后台传回来的JSON对象被作为一段JavaScript脚本执行，然后对执行结果进行接下来的解析操作)。</p> 
 <p>程序主体代码如下：</p> 
 <p>List jsonList = newArrayList();try{<!-- --></p> 
 <p>ylx_db query_db= new ylx_db("test"); //这里用的是MySQL里的test数据库，可以根据需要改成自己的数据库名//构造sql语句，根据传递过来的查询条件参数</p> 
 <p>String sql="select * from "+tableName;</p> 
 <p>System.out.println(sql);</p> 
 <p>ResultSet rs=query_db.executeQuery(sql);while(rs.next()) {<!-- --></p> 
 <p>List list= newArrayList();//list.add(rs.getString(""));</p> 
 <p>list.add(rs.getString("lng"));</p> 
 <p>list.add(rs.getString("lat"));</p> 
 <p>jsonList.add(list);</p> 
 <p>System.out.println(rs.getString("lng")+","+rs.getString("lat"));</p> 
 <p>}</p> 
 <p>rs.close();</p> 
 <p>query_db.close();</p> 
 <p>}catch(SQLException sqlexception) {<!-- --></p> 
 <p>sqlexception.printStackTrace();</p> 
 <p>}//数据库查询完毕，得到了json数组jsonList//</p> 
 <p>//下面开始构建返回的json</p> 
 <p>JSONObject jsonObj=newJSONObject();</p> 
 <p>jsonObj.put("aaData",jsonList); //以键值对的形式给出</p> 
 <p>response.setContentType("text/html; charset=UTF-8");try{<!-- --></p> 
 <p>response.getWriter().print(jsonObj);</p> 
 <p>response.getWriter().flush();</p> 
 <p>response.getWriter().close();</p> 
 <p>}catch(IOException e) {<!-- --></p> 
 <p>e.printStackTrace();</p> 
 <p>}%&gt;</p> 
 <p>var url="get_gps.jsp";</p> 
 <p>alert(url);</p> 
 <p>$.post(url,{},function(data){ //获取传回来JSON字段data</p> 
 <p>var json=eval("("+data+")"); //执行eval函数，使JSON成为一个JavaScript对象，接下来就是解析了</p> 
 <p>var list=json.aaData;</p> 
 <p>var pointArray=new Array(); //储存点</p> 
 <p>for(var i=0;i</p> 
 <p>var point=newBMap.Point(list[i][0],list[i][1]);</p> 
 <p>pointArray.push(point);</p> 
 <p>}</p> 
 <p>alert(pointArray);</p> 
 <p>var polyline=newBMap.Polyline(pointArray, {strokeColor:"red", strokeWeight:6, strokeOpacity:0.5});</p> 
 <p>map.addOverlay(polyline);</p> 
 <p>alert("OK")</p> 
 <p>以上皆为个人见解，望大家斧正。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/10bc888b3fe2632cd1366bb3a840be32/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">删除多余括号java_剔除多余括号</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c536f786ecef52396bc39ac87a66f7ae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">学plc还是学java_要学PLC想走PLC工程师之路的看看</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>