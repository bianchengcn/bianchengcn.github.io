<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【springboot】logback配置 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【springboot】logback配置" />
<meta property="og:description" content="在Spring Boot中，默认使用的是Logback作为日志框架。要配置Logback，可以在src/main/resources目录下创建一个名为logback-spring.xml的文件，然后在其中添加以下配置：
在 Logback 中，日志的输出被称为 appender，包含控制台输出、文件输出、网络输出等多种方式。以下是一个简单的 Logback 配置文件示例：
范例 &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;configuration&gt; &lt;include resource=&#34;org/springframework/boot/logging/logback/base.xml&#34; /&gt; &lt;!-- 日志输出级别 --&gt; &lt;root level=&#34;INFO&#34;&gt; &lt;appender-ref ref=&#34;CONSOLE&#34;/&gt; &lt;appender-ref ref=&#34;FILE&#34;/&gt; &lt;/root&gt; &lt;!-- 控制台输出 --&gt; &lt;appender name=&#34;CONSOLE&#34; class=&#34;ch.qos.logback.core.ConsoleAppender&#34;&gt; &lt;encoder&gt; &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- 文件输出 --&gt; &lt;appender name=&#34;FILE&#34; class=&#34;ch.qos.logback.core.rolling.RollingFileAppender&#34;&gt; &lt;file&gt;logs/app.log&lt;/file&gt; &lt;rollingPolicy class=&#34;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&#34;&gt; &lt;!-- 每天滚动 --&gt; &lt;fileNamePattern&gt;logs/app.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt; &lt;!-- 保留 7 天的日志 --&gt; &lt;maxHistory&gt;7&lt;/maxHistory&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;/configuration&gt; 在这个配置文件中，我们首先引入了Spring Boot默认的日志配置，然后定义了根日志级别（INFO），以及控制台和文件输出。控制台输出使用了ConsoleAppender，文件输出使用了RollingFileAppender，并配置了滚动策略。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/dc7b5a7e266a54501eb7ab57463e08b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-30T14:36:15+08:00" />
<meta property="article:modified_time" content="2023-08-30T14:36:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【springboot】logback配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在Spring Boot中，默认使用的是Logback作为日志框架。要配置Logback，可以在src/main/resources目录下创建一个名为logback-spring.xml的文件，然后在其中添加以下配置：</p> 
<p>在 Logback 中，日志的输出被称为 appender，包含控制台输出、文件输出、网络输出等多种方式。以下是一个简单的 Logback 配置文件示例：</p> 
<h2><a id="_3"></a>范例</h2> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;configuration&gt;  
    &lt;include resource="org/springframework/boot/logging/logback/base.xml" /&gt;  
      
    &lt;!-- 日志输出级别 --&gt;  
    &lt;root level="INFO"&gt;  
        &lt;appender-ref ref="CONSOLE"/&gt;  
        &lt;appender-ref ref="FILE"/&gt;  
    &lt;/root&gt;  
      
    &lt;!-- 控制台输出 --&gt;  
    &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;  
        &lt;encoder&gt;  
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;  
        &lt;/encoder&gt;  
    &lt;/appender&gt;  
      
    &lt;!-- 文件输出 --&gt;  
    &lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;  
        &lt;file&gt;logs/app.log&lt;/file&gt;  
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;  
            &lt;!-- 每天滚动 --&gt;  
            &lt;fileNamePattern&gt;logs/app.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;  
            &lt;!-- 保留 7 天的日志 --&gt;  
            &lt;maxHistory&gt;7&lt;/maxHistory&gt;  
        &lt;/rollingPolicy&gt;  
        &lt;encoder&gt;  
            &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;  
        &lt;/encoder&gt;  
    &lt;/appender&gt;  
&lt;/configuration&gt;
</code></pre> 
<p>在这个配置文件中，我们首先引入了Spring Boot默认的日志配置，然后定义了根日志级别（INFO），以及控制台和文件输出。控制台输出使用了ConsoleAppender，文件输出使用了RollingFileAppender，并配置了滚动策略。</p> 
<p>最后，我们将这两个 appender 关联到 root 节点中，表示所有日志都会输出到这两个地方。</p> 
<p>除了这些常用的配置，Logback 还提供了很多高级特性，例如过滤器、异步输出等。根据实际需求，可以选择相应的配置方案。</p> 
<p>可以根据自己的需求调整日志级别、输出格式、文件存储路径等参数。</p> 
<h2><a id="_45"></a>实战</h2> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;
    &lt;!--
       说明：
       1、日志级别及文件
           日志记录采用分级记录，级别与日志文件名相对应，不同级别的日志信息记录到不同的日志文件中
           例如：error级别记录到log_error_xxx.log或log_error.log（该文件为当前记录的日志文件），而log_error_xxx.log为归档日志，
           日志文件按日期记录，同一天内，若日志文件大小等于或大于2M，则按0、1、2...顺序分别命名
           例如log-level-2013-12-21.0.log
           其它级别的日志也是如此。
       2、文件路径
           若开发、测试用，在Eclipse中运行项目，则到Eclipse的安装路径查找logs文件夹，以相对路径../logs。
           若部署到Tomcat下，则在Tomcat下的logs文件中
       3、Appender
           FILEERROR对应error级别，文件名以log-error-xxx.log形式命名
           FILEWARN对应warn级别，文件名以log-warn-xxx.log形式命名
           FILEINFO对应info级别，文件名以log-info-xxx.log形式命名
           FILEDEBUG对应debug级别，文件名以log-debug-xxx.log形式命名
           stdout将日志信息输出到控制上，为方便开发测试使用
    --&gt;
    &lt;contextName&gt;logback&lt;/contextName&gt;
     &lt;!-- 日志文件输出位置 --&gt;
    &lt;property name="LOG_PATH" value="./webserverLog" /&gt;
    &lt;!-- 单个日志文件最大值 --&gt;
    &lt;property name="maxFileSize" value="2MB" /&gt;

    &lt;!-- ERROR 日志记录器，滚动记录文件，先将日志记录到指定文件，当符合某个条件时，将日志记录到其他文件 --&gt;
    &lt;appender name="FILEERROR" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;!-- 正在记录的日志文件的路径及文件名 --&gt;
        &lt;file&gt;${LOG_PATH}/log_error.log&lt;/file&gt;
        &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;!-- 归档的日志文件的路径及格式，归档日志文件路径可以与file指定文件路径不同。%d{yyyy-MM-dd}指定日期格式，%i指定索引 如：log-error-2020-05-19.68.log--&gt;
            &lt;fileNamePattern&gt;${LOG_PATH}/error/log-error-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;!-- 除按日志记录之外，还配置了日志文件不能超过2M，若超过2M，日志文件会以索引0开始，命名日志文件，例如log-error-2013-12-21.0.log --&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;${maxFileSize}&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;
        &lt;!-- 追加方式记录日志 --&gt;
        &lt;append&gt;true&lt;/append&gt;
        &lt;!-- 日志输出格式 --&gt;
        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;pattern&gt;===%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread]  %logger Line:%-3L - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;!-- 此日志文件只记录error级别的 --&gt;
        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;!-- 设置过滤级别 --&gt;
            &lt;level&gt;ERROR&lt;/level&gt;
            &lt;!-- 用于配置符合过滤条件的操作 --&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
             &lt;!-- 用于配置不符合过滤条件的操作 --&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

   &lt;!-- WARN 日志记录器--&gt;
    &lt;appender name="FILEWARN" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;file&gt;${LOG_PATH}/log_warn.log&lt;/file&gt;

        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;${LOG_PATH}/warn/log-warn-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;${maxFileSize}&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;

        &lt;append&gt;true&lt;/append&gt;

        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;pattern&gt;===%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread]  %logger Line:%-3L - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;

        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;WARN&lt;/level&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

    &lt;!-- INFO 日志记录器--&gt;
    &lt;appender name="FILEINFO" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;

        &lt;file&gt;${LOG_PATH}/log_info.log&lt;/file&gt;

        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;${LOG_PATH}/info/log-info-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;${maxFileSize}&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;

        &lt;append&gt;true&lt;/append&gt;

        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;pattern&gt;===%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread]  %logger Line:%-3L - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;

        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;INFO&lt;/level&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

    &lt;!--DEBUG 日志记录器 --&gt;
    &lt;appender name="FILEDEBUG" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;

        &lt;file&gt;${LOG_PATH}/log_debug.log&lt;/file&gt;

        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;${LOG_PATH}/debug/log-debug-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;${maxFileSize}&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;

        &lt;append&gt;true&lt;/append&gt;

        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;pattern&gt;===%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread]  %logger Line:%-3L - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;

        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;DEBUG&lt;/level&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

    &lt;!-- 控制台输出日志 --&gt;
    &lt;appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;!--encoder 默认配置为PatternLayoutEncoder--&gt;
        &lt;encoder&gt;
            &lt;!-- 设置日志输出格式 --&gt;
            &lt;pattern&gt;===%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread]  %logger Line:%-3L - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;
        &lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt;
        &lt;filter class="ch.qos.logback.classic.filter.ThresholdFilter"&gt;
            &lt;level&gt;DEBUG&lt;/level&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

    &lt;!-- 自定义监控日志记录器--&gt;
    &lt;appender name="MONITORLOG" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;

        &lt;file&gt;${LOG_PATH}/log_monitor.log&lt;/file&gt;

        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;${LOG_PATH}/monitor/log-monitor-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;${maxFileSize}&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;

        &lt;append&gt;true&lt;/append&gt;

        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;pattern&gt;===%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%thread]  %logger Line:%-3L - %msg%n&lt;/pattern&gt;
            &lt;charset&gt;utf-8&lt;/charset&gt;
        &lt;/encoder&gt;

        &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
            &lt;level&gt;INFO&lt;/level&gt;
            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
        &lt;/filter&gt;
    &lt;/appender&gt;

&lt;!--     &lt;appender name="DB" class="com.croot.monitor.appender.SynDBAppender"&gt;--&gt;
&lt;!--	    &lt;connectionSource class="ch.qos.logback.core.db.DataSourceConnectionSource"&gt;--&gt;
&lt;!--	        &lt;dataSource class="com.alibaba.druid.pool.DruidDataSource"&gt;--&gt;
&lt;!--	            &amp;lt;!&amp;ndash; DruidDataSource 中的属性配置 &amp;ndash;&amp;gt;--&gt;
&lt;!--	            &lt;driverClassName&gt;org.sqlite.JDBC&lt;/driverClassName&gt;--&gt;
&lt;!--	            &lt;url&gt;jdbc:sqlite:monitor.db&lt;/url&gt;--&gt;
&lt;!--	            &lt;username&gt;&lt;/username&gt;--&gt;
&lt;!--	            &lt;password&gt;&lt;/password&gt;--&gt;
&lt;!--	        &lt;/dataSource&gt;--&gt;
&lt;!--	    &lt;/connectionSource&gt;--&gt;
&lt;!--	&lt;/appender&gt;--&gt;

&lt;!--	&lt;appender name="ASYNC_DB" class="ch.qos.logback.classic.AsyncAppender"&gt;--&gt;
&lt;!--	    &lt;appender-ref ref="DB" /&gt;--&gt;
&lt;!--	&lt;/appender&gt;--&gt;

&lt;!--	&lt;appender name="ERRORDB" class="com.croot.monitor.appender.SynDBAppender"&gt;--&gt;
&lt;!--	    &lt;connectionSource class="ch.qos.logback.core.db.DataSourceConnectionSource"&gt;--&gt;
&lt;!--	        &lt;dataSource class="com.alibaba.druid.pool.DruidDataSource"&gt;--&gt;
&lt;!--	            &amp;lt;!&amp;ndash; DruidDataSource 中的属性配置 &amp;ndash;&amp;gt;--&gt;
&lt;!--	            &lt;driverClassName&gt;org.sqlite.JDBC&lt;/driverClassName&gt;--&gt;
&lt;!--	            &lt;url&gt;jdbc:sqlite:monitor.db&lt;/url&gt;--&gt;
&lt;!--	            &lt;username&gt;&lt;/username&gt;--&gt;
&lt;!--	            &lt;password&gt;&lt;/password&gt;--&gt;
&lt;!--	        &lt;/dataSource&gt;--&gt;
&lt;!--	    &lt;/connectionSource&gt;--&gt;
&lt;!--	     &amp;lt;!&amp;ndash; 此日志文件只记录error级别的 &amp;ndash;&amp;gt;--&gt;
&lt;!--	    &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;--&gt;
&lt;!--	        &amp;lt;!&amp;ndash; 设置过滤级别 &amp;ndash;&amp;gt;--&gt;
&lt;!--	        &lt;level&gt;ERROR&lt;/level&gt;--&gt;
&lt;!--	        &amp;lt;!&amp;ndash; 用于配置符合过滤条件的操作 &amp;ndash;&amp;gt;--&gt;
&lt;!--	        &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;--&gt;
&lt;!--	         &amp;lt;!&amp;ndash; 用于配置不符合过滤条件的操作 &amp;ndash;&amp;gt;--&gt;
&lt;!--	        &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;--&gt;
&lt;!--	    &lt;/filter&gt;--&gt;
&lt;!--	&lt;/appender&gt;--&gt;

&lt;!--	&lt;appender name="ASYNC_ERRORDB" class="ch.qos.logback.classic.AsyncAppender"&gt;--&gt;
&lt;!--	    &lt;appender-ref ref="ERRORDB" /&gt;--&gt;
&lt;!--	&lt;/appender&gt;--&gt;

	 &lt;logger name="com.croot.framework.logger.aspect" level="INFO" additivity="false"&gt;
	        &lt;appender-ref ref="MONITORLOG"/&gt;
&lt;!--	        &lt;appender-ref ref="ASYNC_DB" /&gt;--&gt;
	 &lt;/logger&gt;

&lt;!--	&lt;logger name="com.croot.framework.logger.BizLogger" level="INFO" additivity="false"&gt;--&gt;
&lt;!--	        &lt;appender-ref ref="MONITORLOG"/&gt;--&gt;
&lt;!--	        &lt;appender-ref ref="ASYNC_DB" /&gt;--&gt;
&lt;!--	 &lt;/logger&gt;--&gt;

     &lt;!-- mybatis日志打印 org.apache.ibatis包下的类的日志输出--&gt;
    &lt;logger name="org.apache.ibatis" level="WARN" /&gt;
    &lt;logger name="java.sql" level="WARN" /&gt;


    &lt;!-- 生产环境下，将此级别配置为适合的级别，以免日志文件太多或影响程序性能 --&gt;
    &lt;root level="INFO"&gt;
        &lt;appender-ref ref="FILEERROR" /&gt;
        &lt;appender-ref ref="FILEWARN" /&gt;
        &lt;appender-ref ref="FILEDEBUG" /&gt;
        &lt;appender-ref ref="FILEINFO" /&gt;
&lt;!--        &lt;appender-ref ref="ASYNC_ERRORDB" /&gt;--&gt;

        &lt;!-- 生产环境将请stdout去掉 --&gt;
        &lt;appender-ref ref="STDOUT" /&gt;
    &lt;/root&gt;
&lt;/configuration&gt;
</code></pre> 
<p>配置时间</p> 
<pre><code>&lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
    &lt;file&gt;${logBase}/${appName}-server.log&lt;/file&gt;
    &lt;!--SizeAndTimeBasedRollingPolicy策略继承了TimeBasedRollingPolicy策略--&gt;
    &lt;rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt;
        &lt;!--每天生成一个文件 %i表示序号 从0开始--&gt;
        &lt;fileNamePattern&gt;${logBase}/${appName}-server-%d{yyyy-MM-dd}.log.%i&lt;/fileNamePattern&gt;
        &lt;!--每个文件的大小限制--&gt;
        &lt;MaxFileSize&gt;100MB&lt;/MaxFileSize&gt;
        &lt;!--最多保留10天的文件，10天之前的将被清除--&gt;
        &lt;MaxHistory&gt;10&lt;/MaxHistory&gt;
        &lt;!--该滚动策略日志的总大小，超过的日志会被清除--&gt;
        &lt;totalSizeCap&gt;1GB&lt;/totalSizeCap&gt;
        &lt;!--启动时清理日志文件  此项置灰清理超过保留天数的  也会清理超过总大小的--&gt;
        &lt;cleanHistoryOnStart&gt;true&lt;/cleanHistoryOnStart&gt;
    &lt;/rollingPolicy&gt;
    &lt;encoder&gt;
        &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - [%X{TRACE_ID}] %msg%n&lt;/pattern&gt;
        &lt;charset&gt;UTF-8&lt;/charset&gt;
    &lt;/encoder&gt;
&lt;/appender&gt;
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6876481947593b4ba5d722d0421c2643/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【leetcode刷题之路】剑指Offer（4）——分治&#43;排序算法&#43;动态规划</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/41d00445a7f7381771b2729088daad7b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C语言的数据类型简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>