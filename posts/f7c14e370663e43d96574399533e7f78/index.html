<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>结构体、结构指针作为函数参数 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="结构体、结构指针作为函数参数" />
<meta property="og:description" content="结构体、结构指针作为函数参数 结构体、结构体指针作为函数的参数现在应用的非常广泛，但一些细微之处还需要引起注意。本文将讨论其作为形参和实参的区别。
结构体作为参数 将结构体作为函数的参数，目的是通过makeinfo()函数调用去改变person结构体中letters的值。
情形1：
#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
struct namect{
char fname[20];
char lname[20];
int letters; }; struct namect getinfo(void);
struct namect makeinfo(struct namect);
void showinfo(struct namect);
int main(void)
{
struct namect person;
person=getinfo();
person=makeinfo(person);
//makeinfo(person);
showinfo(person);
return 0;
}
struct namect getinfo(void)
{
struct namect temp;
printf(&#34;please enter you first name.\n&#34;);
gets(temp.fname);
printf(&#34;please enter you last name.\n&#34;);
gets(temp.lname);
return temp; }
struct namect makeinfo(struct namect info)
{
info.letters=strlen(info.fname)&#43;strlen(info.lname);
return info;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f7c14e370663e43d96574399533e7f78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-05-20T07:19:25+08:00" />
<meta property="article:modified_time" content="2019-05-20T07:19:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">结构体、结构指针作为函数参数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="margin-left:0cm;"><span style="color:#ff9900;">结构体、结构指针作为函数参数</span></h2> 
<p style="margin-left:0cm;"><span style="color:#000000;">结构体、结构体指针作为函数的参数现在应用的非常广泛，但一些细微之处还需要引起注意。本文将讨论其作为形参和实参的区别。</span></p> 
<h3 style="margin-left:0cm;"><span style="color:#0000ff;">结构体作为参数</span></h3> 
<p style="margin-left:0cm;"><span style="color:#000000;">将结构体作为函数的参数，目的是通过</span><span style="color:#000000;">makeinfo()</span><span style="color:#000000;">函数调用去改变</span><span style="color:#000000;">person</span><span style="color:#000000;">结构体中</span><span style="color:#000000;">letters</span><span style="color:#000000;">的值。</span></p> 
<p style="margin-left:0cm;"><strong><span style="color:#ff0000;">情形</span></strong><strong><span style="color:#ff0000;">1</span></strong><strong><span style="color:#ff0000;">：</span></strong></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">#include&lt;stdio.h&gt;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">#include&lt;string.h&gt;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    char fname[20];</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    char lname[20];</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    int letters; </span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}; </span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect getinfo(void);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect makeinfo(struct namect);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">void showinfo(struct namect);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">int main(void)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    struct namect person;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    person=getinfo();</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    person=makeinfo(person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    //makeinfo(person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    showinfo(person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    return 0;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect  getinfo(void)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    struct namect temp;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    printf("please enter you first name.\n");</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    gets(temp.fname);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    printf("please enter you last name.\n");</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    gets(temp.lname);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    return temp; </span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect makeinfo(struct namect info)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    info.letters=strlen(info.fname)+strlen(info.lname);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    return info;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">void showinfo (struct namect info)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    printf("%s %s ,your name contains %d letters .\n",info.fname,info.lname,info.letters);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">程序的运行结果图如下：</span></p> 
<p style="margin-left:0cm;"><img alt="https://img-blog.csdn.net/20150905161616908" class="has" height="380" src="https://images2.imgbox.com/2e/d0/RHvFvehj_o.jpg" width="756"></p> 
<p style="margin-left:0cm;"><strong><span style="color:#ff0000;">情形</span></strong><strong><span style="color:#ff0000;">2</span></strong><strong><span style="color:#ff0000;">：</span></strong></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">如果将</span><span style="color:#000000;">person=makeinfo(person)</span><span style="color:#000000;">改为</span><span style="color:#000000;">makeinfo(person),</span><span style="color:#000000;">则运行结果如下：</span></p> 
<p style="margin-left:0cm;"><img alt="https://img-blog.csdn.net/20150905161005090" class="has" height="203" src="https://images2.imgbox.com/54/6c/1HGmY1vn_o.jpg" width="756"></p> 
<h3 style="margin-left:0cm;"><span style="color:#0000ff;">结构体指针作为参数</span></h3> 
<p style="margin-left:0cm;"><span style="color:#000000;">将结构体指针作为函数的参数，从而直接去改变</span><span style="color:#000000;">letters</span><span style="color:#000000;">的值，相关代码如下：</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">#include&lt;stdio.h&gt;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">#include&lt;string.h&gt;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    char fname[20];</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    char lname[20];</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    int letters; </span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}; </span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect getinfo(void);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">void  makeinfo(struct namect *pst);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">void showinfo(struct namect);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">int main(void)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    struct namect person;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    person=getinfo();</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    //person=makeinfo(person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    //makeinfo(person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    makeinfo(&amp;person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    showinfo(person);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    return 0;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">struct namect  getinfo(void)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    struct namect temp;</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    printf("please enter you first name.\n");</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    gets(temp.fname);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    printf("please enter you last name.\n");</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    gets(temp.lname);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    return temp; </span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;"> void makeinfo(struct namect *pst)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    pst-&gt;letters=strlen(pst-&gt;fname)+strlen(pst-&gt;lname);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">void showinfo (struct namect info)</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">{<!-- --></span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">    printf("%s %s ,your name contains %d letters .\n",info.fname,info.lname,info.letters);</span></p> 
<p style="margin-left:0cm;"><span style="color:#0000ff;">}</span></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">程序运行结果如下：</span></p> 
<p style="margin-left:0cm;"><img alt="https://img-blog.csdn.net/20150905161616908" class="has" height="380" src="https://images2.imgbox.com/7e/a8/xztNmKQk_o.jpg" width="756"></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">在情形二与情形一比较，虽然表面上看起来情形二调用</span><span style="color:#000000;">makeinfo(person)</span><span style="color:#000000;">函数后，好像改变了</span><span style="color:#000000;">person</span><span style="color:#000000;">结构体中</span><span style="color:#000000;">letters</span><span style="color:#000000;">的值。但实质上调用</span><span style="color:#000000;">makeinfo(person)</span><span style="color:#000000;">函数中，结构体</span><span style="color:#000000;">person</span><span style="color:#000000;">只是作为一个形式参数，函数会创建一个新的结构体</span><span style="color:#000000;">**info</span><span style="color:#000000;">，</span><span style="color:#000000;">person</span><span style="color:#000000;">中的值被复制到新的</span><span style="color:#000000;">info</span><span style="color:#000000;">结构体中，之后函数的所有处理过程都是针对这个</span><span style="color:#000000;">**info</span><span style="color:#000000;">结构体副本。自然而然得到的</span><span style="color:#000000;"> letters</span><span style="color:#000000;">的值只是存储在</span><span style="color:#000000;">info</span><span style="color:#000000;">中，而没有存在</span><span style="color:#000000;">person</span><span style="color:#000000;">结构体中。这就是为什么我们看到</span><span style="color:#000000;">Letters</span><span style="color:#000000;">是一个随机值的原因。</span></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">结构体指针作为函数的参数，因为传送的实质就是</span><span style="color:#000000;">person</span><span style="color:#000000;">结构体的地址，也就是</span><span style="color:#000000;">person</span><span style="color:#000000;">结构体本身。</span><span style="color:#000000;">makeinfo(&amp;person)</span><span style="color:#000000;">函数调用，通过使用指针</span><span style="color:#000000;">pst</span><span style="color:#000000;">定位把计算得到的值放在</span><span style="color:#000000;">person</span><span style="color:#000000;">结构体中，当然能改变其中</span><span style="color:#000000;">letters</span><span style="color:#000000;">的值。</span></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">我们可以用形参和实参来类比理解，传结构体相当于一个形参（形式上的参数，只是起到一个原件的作用，之后的处理都是针对其复印件而言，要想改变原件必须对原件进行赋值），传结构体指针相当于一个实参（实实在在的参数，一般是传输相关参数的地址值，改变都是对它本身而言）。</span></p> 
<h3 style="margin-left:0cm;"><span style="color:#0000ff;">结构作为参数的优点</span></h3> 
<ol><li><span style="color:#000000;">编程风格更加的直接、清晰。</span></li><li><span style="color:#000000;">由于其改变的是副本，所以比处理原始数据相比更加的安全。</span></li></ol> 
<h3 style="margin-left:0cm;"><span style="color:#0000ff;">结构体指针作为参数的优点</span></h3> 
<ol><li><span style="color:#000000;">只需要传递一个单个地址即可；</span></li><li><span style="color:#000000;">处理数据更加的方便，效率较高。</span></li></ol> 
<p style="margin-left:0cm;"><span style="color:#000000;">但是两者也有各自的缺点，结构作为参数有时候比较浪费空间和时间，结构体指针缺少对数据的保护。</span></p> 
<p style="margin-left:0cm;"><span style="color:#000000;">通常，为追求效率常使用结构指针作为参数，当需要保护现场或者为发生某些不必要的意外时候使用</span><span style="color:#000000;">const</span><span style="color:#000000;">限制，传递结构值是处理小型结构经常用到的方法，通常传递指针或只将所需的成员作为参数传递。</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5c022b1a4e3710a67a870b2943fa0496/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">二叉搜索树、完全二叉树、平衡二叉树 Python实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e86f808a71e84c23a2b5f57f48e315a8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java动态创建MultipartFile表单</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>