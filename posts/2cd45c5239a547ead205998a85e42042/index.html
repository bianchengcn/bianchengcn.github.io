<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32单片机（二）STM32环境搭建 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32单片机（二）STM32环境搭建" />
<meta property="og:description" content="❤️ 专栏简介：本专栏记录了从零学习单片机的过程，其中包括51单片机和STM32单片机两部分；建议先学习51单片机，其是STM32等高级单片机的基础；这样再学习STM32时才能融会贯通。
☀️ 专栏适用人群 ：适用于想要从零基础开始学习入门单片机，且有一定C语言基础的的童鞋。
🌙专栏目标：实现从零基础入门51单片机和STM32单片机，力求在玩好单片机的同时，能够了解一些计算机的基本概念，了解电路及其元器件的基本理论等。
⭐️ 专栏主要内容： 主要学习STM32单片机的功能、各个模块、单片机的外设、驱动等，最终玩好单片机和单片机的外设，全程手敲代码，实现我们所要实现的功能。
🌴 专栏说明 ：如果文章知识点有错误的地方，欢迎大家随时在文章下面评论，我会第一时间改正。让我们一起学习，一起进步。
💑专栏主页：http://t.csdn.cn/HCD8v
本学习过程参考：https://space.bilibili.com/383400717
STM3单片机安装软件、各种资料以及源码的路径：
链接：https://pan.baidu.com/s/1snD0uuTfMhchFqOMWvAiHA?pwd=asdf#list/path=%2F 提取码：asdf
链接里压缩包的解压密码：32
本节主要对STM32环境搭建过程进行简单介绍，其中包括软件安装和新建工程两部分；其中软件安装包括安装Keil5 MDK、安装器件支持包、软件注册、安装STLINK驱动、安装USB转串口驱动等；新建工程部分包括STM32开发方式简介以及新建标准库工程等。
文章目录 一、软件安装1.1 安装Keil5 MDK1.2 安装器件支持包1.2.1 离线安装1.2.2 在线安装 1.3 软件注册1.4 安装STLINK驱动1.5 安装USB转串口驱动 二、新建工程2.1 STM32开发方式简介2.2 新建标准库工程2.2.1 新建工程2.2.2 添加启动文件2.2.2.1 添加启动文件2.2.2.2 添加寄存器描述文件2.2.2.3 添加内核寄存器描述文件2.2.2.4 以上文件添加到工程2.2.2.5 在工程中添加头文件路径 2.2.3 新工程测试2.2.4 配置寄存器实现点灯2.2.5 使用库函数实现点灯2.2.6 补充：库函数中的启动文件选择2.2.7 总结：新建工程的步骤 一、软件安装 软件的下载链接：
STM3单片机安装软件、各种资料以及源码的路径：
链接：https://pan.baidu.com/s/1snD0uuTfMhchFqOMWvAiHA?pwd=asdf#list/path=%2F 提取码：asdf
链接里压缩包的解压密码：32
1.1 安装Keil5 MDK 解压 资料/Keil5 MDK.zip，解压之后，（右键管理员权限打开）MDK524.EXE文件，开始安装软件，注意路径不要有英文，不要选择带有特殊权限的盘；选Next-&gt;勾选同意许可协议-&gt;Next-&gt;选择安装目录（如果不想放在C盘，也可以在创建英文目录，记得创建文件夹时起英文名字）-&gt;Next-&gt;填写个人信息（随便填）-&gt;Next,等待安装即可；
安装过程中会让选择是否安装ULINK驱动，选择是就行：
可以将Show Release Notes 取消勾选：
最后点击Finish，接下来就会自动弹出一个Pack Installer的窗口，这个窗口就是用来安装器件支持包的，我们先把它叉掉，后面再讲：
1.2 安装器件支持包 首先来介绍一下为什么需要要安装器件支持包，这个支持包是Keil5才需要安装的，想Keil4和之前的老版本，是不需要安装的；这是因为现在的ARM芯片型号是非常多的，升级换代速度也快；新型号的芯片也是不断地推出来，那Keil软件总不能出一款芯片就升级一下软件吧，而且同时支持所有型号的芯片，这个占用内存也是非常大的，所以Keil5之后，芯片的器件支持包就被独立出来了；我们开发哪种芯片，就安装对应的支持包就行；如果你不安装支持包，那在新建工程时，是不会出现相应的器件型号的；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2cd45c5239a547ead205998a85e42042/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-26T22:16:39+08:00" />
<meta property="article:modified_time" content="2023-06-26T22:16:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32单片机（二）STM32环境搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>❤️ 专栏简介：本专栏记录了从零学习单片机的过程，其中包括51单片机和STM32单片机两部分；建议先学习51单片机，其是STM32等高级单片机的基础；这样再学习STM32时才能融会贯通。<br> ☀️ 专栏适用人群 ：适用于想要从零基础开始学习入门单片机，且有一定C语言基础的的童鞋。<br> 🌙专栏目标：实现从零基础入门51单片机和STM32单片机，力求在玩好单片机的同时，能够了解一些计算机的基本概念，了解电路及其元器件的基本理论等。</p> 
 <p>⭐️ 专栏主要内容： 主要学习STM32单片机的功能、各个模块、单片机的外设、驱动等，最终玩好单片机和单片机的外设，全程手敲代码，实现我们所要实现的功能。<br> 🌴 专栏说明 ：如果文章知识点有错误的地方，欢迎大家随时在文章下面评论，我会第一时间改正。让我们一起学习，一起进步。<br> 💑专栏主页：<a href="http://t.csdn.cn/HCD8v" rel="nofollow">http://t.csdn.cn/HCD8v</a></p> 
</blockquote> 
<p>本学习过程参考：<a href="https://space.bilibili.com/383400717" rel="nofollow">https://space.bilibili.com/383400717</a></p> 
<p>STM3单片机安装软件、各种资料以及源码的路径：<br> <a href="https://pan.baidu.com/s/1snD0uuTfMhchFqOMWvAiHA?pwd=asdf" rel="nofollow">链接：https://pan.baidu.com/s/1snD0uuTfMhchFqOMWvAiHA?pwd=asdf#list/path=%2F </a><br> 提取码：asdf</p> 
<p>链接里压缩包的解压密码：32</p> 
<p>本节主要对STM32环境搭建过程进行简单介绍，其中包括软件安装和新建工程两部分；其中软件安装包括安装Keil5 MDK、安装器件支持包、软件注册、安装STLINK驱动、安装USB转串口驱动等；新建工程部分包括STM32开发方式简介以及新建标准库工程等。</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_24" rel="nofollow">一、软件安装</a></li><li><ul><li><a href="#11_Keil5_MDK_33" rel="nofollow">1.1 安装Keil5 MDK</a></li><li><a href="#12__44" rel="nofollow">1.2 安装器件支持包</a></li><li><ul><li><a href="#121__50" rel="nofollow">1.2.1 离线安装</a></li><li><a href="#122__70" rel="nofollow">1.2.2 在线安装</a></li></ul> 
   </li><li><a href="#13__138" rel="nofollow">1.3 软件注册</a></li><li><a href="#14_STLINK_166" rel="nofollow">1.4 安装STLINK驱动</a></li><li><a href="#15_USB_193" rel="nofollow">1.5 安装USB转串口驱动</a></li></ul> 
  </li><li><a href="#_217" rel="nofollow">二、新建工程</a></li><li><ul><li><a href="#21_STM32_222" rel="nofollow">2.1 STM32开发方式简介</a></li><li><a href="#22__245" rel="nofollow">2.2 新建标准库工程</a></li><li><ul><li><a href="#221___248" rel="nofollow">2.2.1 新建工程</a></li><li><a href="#222___279" rel="nofollow">2.2.2 添加启动文件</a></li><li><ul><li><a href="#2221___281" rel="nofollow">2.2.2.1 添加启动文件</a></li><li><a href="#2222__298" rel="nofollow">2.2.2.2 添加寄存器描述文件</a></li><li><a href="#2223__309" rel="nofollow">2.2.2.3 添加内核寄存器描述文件</a></li><li><a href="#2224__318" rel="nofollow">2.2.2.4 以上文件添加到工程</a></li><li><a href="#2225__337" rel="nofollow">2.2.2.5 在工程中添加头文件路径</a></li></ul> 
    </li><li><a href="#223___363" rel="nofollow">2.2.3 新工程测试</a></li><li><a href="#224___411" rel="nofollow">2.2.4 配置寄存器实现点灯</a></li><li><a href="#225___469" rel="nofollow">2.2.5 使用库函数实现点灯</a></li><li><a href="#226___568" rel="nofollow">2.2.6 补充：库函数中的启动文件选择</a></li><li><a href="#227___580" rel="nofollow">2.2.7 总结：新建工程的步骤</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_24"></a>一、软件安装</h2> 
<p>软件的下载链接：<br> STM3单片机安装软件、各种资料以及源码的路径：<br> <a href="https://pan.baidu.com/s/1snD0uuTfMhchFqOMWvAiHA?pwd=asdf" rel="nofollow">链接：https://pan.baidu.com/s/1snD0uuTfMhchFqOMWvAiHA?pwd=asdf#list/path=%2F </a><br> 提取码：asdf</p> 
<p>链接里压缩包的解压密码：32</p> 
<h3><a id="11_Keil5_MDK_33"></a>1.1 安装Keil5 MDK</h3> 
<p>解压 <code>资料/Keil5 MDK.zip</code>，解压之后，（右键管理员权限打开）MDK524.EXE文件，开始安装软件，注意路径不要有英文，不要选择带有特殊权限的盘；<code>选Next-&gt;勾选同意许可协议-&gt;Next-&gt;选择安装目录（如果不想放在C盘，也可以在创建英文目录，记得创建文件夹时起英文名字）-&gt;Next-&gt;填写个人信息（随便填）-&gt;Next</code>,等待安装即可；</p> 
<p>安装过程中会让选择是否安装ULINK驱动，选择是就行：<br> <img src="https://images2.imgbox.com/5a/c2/4VLr9hTH_o.png" alt="在这里插入图片描述"><br> 可以将Show Release Notes 取消勾选：<br> <img src="https://images2.imgbox.com/c5/68/qUajt8WM_o.png" alt="在这里插入图片描述"></p> 
<p>最后点击Finish，接下来就会自动弹出一个Pack Installer的窗口，这个窗口就是用来安装器件支持包的，我们先把它叉掉，后面再讲：<img src="https://images2.imgbox.com/2d/8f/XFnd2WSA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12__44"></a>1.2 安装器件支持包</h3> 
<p>首先来介绍一下为什么需要要安装器件支持包，这个支持包是Keil5才需要安装的，想Keil4和之前的老版本，是不需要安装的；这是因为现在的ARM芯片型号是非常多的，升级换代速度也快；新型号的芯片也是不断地推出来，那Keil软件总不能出一款芯片就升级一下软件吧，而且同时支持所有型号的芯片，这个占用内存也是非常大的，所以Keil5之后，芯片的器件支持包就被独立出来了；我们开发哪种芯片，就安装对应的支持包就行；如果你不安装支持包，那在新建工程时，是不会出现相应的器件型号的；</p> 
<p>安装器件支持包有两种安装方式，一种是离线安装，一种是在线安装；</p> 
<h4><a id="121__50"></a>1.2.1 离线安装</h4> 
<p>首先介绍一下离线安装：<br> 打开Keil5 MDK的安装包文件夹，打开支持包文件夹：<br> <img src="https://images2.imgbox.com/48/36/dm1a2FVQ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/7b/3b/TGsSYEyb_o.png" alt="在这里插入图片描述"></p> 
<p>在这里已经提前准备了常见的支持包，我们本课程使用的是STM32F1系列， 我们就需要选择这个<code>Keil.STM32F1xx_DFP</code>的文件，双击打开，这里的目标路径会自动选择我们安装时的那个目录：<img src="https://images2.imgbox.com/94/c9/8zYLLmoj_o.png" alt="在这里插入图片描述"></p> 
<p>直接点击Next即可，等待一小会儿即可安装完成；安装完成点击Finish即可。此时再打开Keil5软件，新建工程：<br> <img src="https://images2.imgbox.com/09/c5/fjHfEFl1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d4/0b/4hbgkSEs_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/8d/ad/C45iUu7b_o.png" alt="在这里插入图片描述"></p> 
<p>可以发现这里就出现了STM32F1的器件列表，展开之后我们可以选择F103，然后F103C8，这样就可以新建工程了；</p> 
<p><img src="https://images2.imgbox.com/fa/9a/nPDNDKiQ_o.png" alt="在这里插入图片描述"></p> 
<p>到这里，我们离线安装器件支持包的方式就介绍完了；</p> 
<h4><a id="122__70"></a>1.2.2 在线安装</h4> 
<p>在线安装是离线安装的扩展部分，主要是为了防止以后开发其他芯片找不到型号；大概了解一下即可；</p> 
<p>因为在1.2.1的安装包里，只提供了部分的器件支持包，所以如果以后想开发其他芯片，比如STM32F2的系列或者其他公司的ARM芯片，那到时候找不到器件支持包不就尴尬了嘛，，，这个时候就可以用上在线安装了。</p> 
<p>打开keil5软件，点击下面的绿色按钮：<br> <img src="https://images2.imgbox.com/f5/53/c6zNsDTR_o.png" alt="在这里插入图片描述"><br> 弹出来的就是我们之前叉掉的那个Pack Installer界面：</p> 
<p><img src="https://images2.imgbox.com/7f/13/aLcuEhcH_o.png" alt="在这里插入图片描述"><br> 那这个就可以用来安装支持包，并且所有可以用keil软件来开发的芯片都可以找到，使用还是非常方便的，就是网速比较慢哈；</p> 
<p><strong>注意，在这个页面一定要联网；</strong></p> 
<p>然后进来之后它就会自动在Keil官网上获取最新的器件列表了；左下角提示的就是正在获取的东西，右边有进度条显示进度；</p> 
<p><img src="https://images2.imgbox.com/47/6f/SFyijOeT_o.png" alt="在这里插入图片描述"></p> 
<p>这个网速还是挺慢的，大家得多等一会儿；</p> 
<p>如果你点进来没有自动获取的话，可以点一下这个更新按钮，这样就可以获取最新列表了：</p> 
<p><img src="https://images2.imgbox.com/00/b6/WQ7doOzK_o.png" alt=" "></p> 
<p>点击刷新后，经过漫长的等待，这个器件列表总算是加载完了哈：</p> 
<p><img src="https://images2.imgbox.com/e1/eb/RbJ7uvg9_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到，这里有很多公司的名称，里面包含了Keil支持的所有ARM芯片，其中这个GigaDevice公司下，就有目前做的还不错的国产兼容STM32的芯片，叫GD32，里面有这个叫GD32F103C8的型号，基本和STM32F103C8T6的芯片一样；</p> 
<p><img src="https://images2.imgbox.com/82/18/IVNwynmZ_o.png" alt="在这里插入图片描述"></p> 
<p>还有下面这个MindMotion公司，里面也有MM32F103C8T，也是可以兼容STM32F103C8T6的国产芯片：</p> 
<p><img src="https://images2.imgbox.com/d3/db/Hcug7lLj_o.png" alt="在这里插入图片描述"></p> 
<p>现在STM32涨价比较厉害，所以国产这些芯片也取得了一定的发展；大家可以了解一下；</p> 
<p>接着往下划，下面这个STMicroelectronics里面就有STM32了，里面包含了现在STM32的所有型号，其中就有我们刚才安装的STM32F1系列：</p> 
<p><img src="https://images2.imgbox.com/a8/1c/dYsr8oAv_o.png" alt="在这里插入图片描述"></p> 
<p>那比如我们以后想要开发STM32F2的系列，我们就可以选择这个STM32F2；因为刚刚在离线安装中我们已经安装好了STM32F1，所以此次我们是拿STM32F2来演示在线下载：<br> 在右边找到这个后缀是DFP的文件，然后点击Install，安装即可：</p> 
<p><img src="https://images2.imgbox.com/78/75/9DplfpNi_o.png" alt="在这里插入图片描述"></p> 
<p>那接下来，它就会自动在Keil的官网下载DFP文件，然后自动帮我们安装上；<br> 当然也可以用浏览器到这个网站上下载，下载之后，就和离线安装的方式是一样的了：</p> 
<p><img src="https://images2.imgbox.com/eb/a9/EeWaobse_o.png" alt="在这里插入图片描述"></p> 
<p>现在又是需要一段漫长的时间来下载哈，等提示完成后即可叉掉这个窗口了，叉掉后，会出来一个弹窗，如下所示，提示软件的支持包已经更改，是否要重新加载支持包，选择是就行：</p> 
<p><img src="https://images2.imgbox.com/2d/b9/engr6oTd_o.png" alt="在这里插入图片描述"><br> 然后再新建工程，就可以看到有STM32F2系列的芯片了：</p> 
<p><img src="https://images2.imgbox.com/52/8e/5DR70dYS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e0/7a/UMkla6E7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a1/64/yKnPuIRL_o.png" alt="在这里插入图片描述"><br> 这就是在线安装的整个过程了，有个印象就行；</p> 
<h3><a id="13__138"></a>1.3 软件注册</h3> 
<p>这个Keil软件是一个付费软件，如果不注册的话，功能上会有很大限制的，如果我们个人用户学习的话，使用盗版问题也不大，但是企业用户就必须得用正版了。</p> 
<p>首先我们先关闭软件， 然后再Keil5图标上右键，选择以管理员身份运行（<strong>这里需要注意，必须是右键-&gt;以管理员身份运行</strong>）然后点击<code>File-&gt;LicenseManagement</code>，把这个CID复制下来：</p> 
<p><img src="https://images2.imgbox.com/d3/64/YBSCzfJG_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/db/28/aQWeqr9P_o.png" alt="在这里插入图片描述"></p> 
<p>然后打开安装包，将Keygen的压缩包解压：</p> 
<p><img src="https://images2.imgbox.com/f1/a5/JniyJa9s_o.png" alt="在这里插入图片描述"><br> 打开解压后的文件夹，可以看到这个注册机（如果解压后看不到该文件，可能是被杀毒软件杀掉了，那就需要将杀毒软件关掉再重新解压），双击打开：</p> 
<p><img src="https://images2.imgbox.com/de/1d/iRgOSsXF_o.png" alt="在这里插入图片描述"><br> 然后将刚刚复制的CID码复制进来，右边的Target选择ARM，点击Generate，<br> <img src="https://images2.imgbox.com/d9/95/oEjC1LZX_o.png" alt="在这里插入图片描述"><br> 最后将生成的序列码复制下来，就可以退出这个软件了，</p> 
<p><img src="https://images2.imgbox.com/d2/1c/oJkuVhjT_o.png" alt="在这里插入图片描述"><br> 最后回到Keil5软件，将刚刚生成的序列码粘贴到LIC位置，点击Add LIC即可，如下图所示：<br> <img src="https://images2.imgbox.com/a6/7e/OqLBFICf_o.png" alt="在这里插入图片描述"><br> 提示LIC添加成功，并且上面的MDK-ARM这一行的使用期限显示2032年，就表示软件注册完成了。</p> 
<p><img src="https://images2.imgbox.com/af/1d/Qb3iBEZU_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="14_STLINK_166"></a>1.4 安装STLINK驱动</h3> 
<p>首先，我们需要将STLINK插到电脑上，</p> 
<p><img src="https://images2.imgbox.com/63/ca/5CNJFors_o.png" alt="在这里插入图片描述"></p> 
<p>然后在 <code>此电脑-&gt;右键-&gt;设备管理器</code>，打开设备管理器的窗口，在其他设备里面可以看到这个STLINK是在其他设备的列表上，并且图标带了个感叹号，说明我们的电脑上目前是没有安装STLINK驱动的； 如下图所示</p> 
<p><img src="https://images2.imgbox.com/8f/bf/RRKjZd3B_o.png" alt="在这里插入图片描述"><br> 如果插上STLINK，在这个列表里找一下，能找到STLINK的设备且没有感叹号，那说明你的电脑已经装过STLINK的驱动了，就不需要进行这一步了。</p> 
<p>如果没有安装STLINK驱动，我们则需要安装一下：</p> 
<p>这个驱动程序Keil软件自带的就有，我们可以打开Keil5的安装目录，在<code>ARM-&gt;STLink-&gt;USBDriver</code>里面，找到amd64.exe就是64位的，X86是32位的：</p> 
<p><img src="https://images2.imgbox.com/8e/57/yJA5O7iY_o.png" alt="在这里插入图片描述"></p> 
<p>我的电脑是64位的，那么双击这个64，然后一直Next即可。安装完成后，可以发现没有感叹号了：<br> <img src="https://images2.imgbox.com/a5/86/DHNpm9HC_o.png" alt="在这里插入图片描述"></p> 
<p>另外这个目录下，还有JLINK的驱动，JLINK也是一种常用的调试器，如果你想安装JLINK驱动的话可以打开这里的Segger文件夹，</p> 
<p><img src="https://images2.imgbox.com/dc/c9/IEao6HPQ_o.png" alt="在这里插入图片描述"><br> 这里面就可以安装JLINK的驱动了。</p> 
<h3><a id="15_USB_193"></a>1.5 安装USB转串口驱动</h3> 
<p><img src="https://images2.imgbox.com/b4/11/UfE1Nmdi_o.png" alt="在这里插入图片描述"></p> 
<p>同样我们先把USB串口模块插在电脑上，这个USB转串口的芯片是CH340，和之前51开发板上的一样，如果之前学过51，那么大概率已经装过该驱动了。</p> 
<p><img src="https://images2.imgbox.com/9f/48/dAPVynzd_o.png" alt="在这里插入图片描述"><br> 如果这里有感叹号，就需要装一下驱动，如果能正常识别，就不需要装了。</p> 
<p>CH340的驱动在资料文件夹里，打开工具软件，打开USB转串口CH340驱动，双击以下EXE程序：</p> 
<p><img src="https://images2.imgbox.com/4d/89/1xRrf0wl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/65/99/tcSfMwnK_o.png" alt="在这里插入图片描述"><br> 点击安装</p> 
<p><img src="https://images2.imgbox.com/0c/44/6njYlPOc_o.png" alt="在这里插入图片描述"></p> 
<p>出现驱动安装成功就ok了；</p> 
<p><img src="https://images2.imgbox.com/af/0f/0Cyzkarz_o.png" alt="在这里插入图片描述"><br> 设备管理器里感叹号也消失了。</p> 
<h2><a id="_217"></a>二、新建工程</h2> 
<p>本小节我们来建立一个STM32的工程，STM32的工程结构还是比较复杂的，需要用到很多文件，之后我们的代码也都是需要建立在工程结构上的，所以在开始学习后续内容之前，我们先来学习以下如何新建STM32的工程；</p> 
<h3><a id="21_STM32_222"></a>2.1 STM32开发方式简介</h3> 
<p>目前STM32的开发方式主要有<code>基于寄存器的方式</code>、<code>基于标准库也就是库函数的方式</code>和<code>基于HAL库的方式</code>；</p> 
<ul><li>基于<code>寄存器</code>的方式和我们51单片机的开发方式一样，是用程序直接配置寄存器，来达到我们想要的功能；这种方式最底层、最直接、效率会更高一些；但是由于STM32的结构复杂、寄存器太多，所以基于寄存器的方式目前是不推荐的；</li><li>基于<code>库函数</code>的方式是使用ST官方提供的封装好的函数，通过调用这些函数来间接的配置寄存器，由于ST对寄存器封装的比较好，所以这种方式既能满足对寄存器的配置，对开发人员也比较友好，有利于提高开发效率，我们本课程使用的就是库函数的开发方式；</li><li>最后一个基于<code>HAL库</code>的方式可以利用图像化界面快速配置STM32，这个比较适合快速上手STM32的情况，但是这种方式隐藏了底层逻辑，如果你对STM32不熟悉，基本只能停留在很浅的水平，所以目前不推荐HAL库。</li></ul> 
<p>既然我们要使用库函数的方式，我们需要准备一个STM32库函数的压缩包，大家可以在百度云链接提供的资料里找到固件库的文件，如下图所示：</p> 
<p><img src="https://images2.imgbox.com/81/3e/7xANmxbr_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到STM32F10x标准外设库的这个压缩包，解压后就可以看到库函数的文件夹目录了，</p> 
<p><img src="https://images2.imgbox.com/19/12/36qnnSVs_o.png" alt="在这里插入图片描述"></p> 
<ul><li>_htmresc文件夹里放的是图片，没啥用</li><li>Libraries文件夹里放的是库函数的文件了，我们之后建工程时会用到</li><li>Project时官方提供的工程示例和模板，以后使用库函数的时候可以参考一下；</li><li>Utilities是STM32官方评估板的相关例程，这个评估板就是官方用STM32做的一个小电路板，用来测评STM32的；这个文件夹里面存的就是这个小电路板的测评程序；</li><li>接下来后面的两个文件，一个是库函数的发布文档，一个是使用手册；发布文档里有一些版本的说明，使用手册里有教怎么使用这些库函数的；</li></ul> 
<h3><a id="22__245"></a>2.2 新建标准库工程</h3> 
<h4><a id="221___248"></a>2.2.1 新建工程</h4> 
<p>接下来我们就正式开始新建一个基于标准库的工程，首先我们需要建立一个存放工程的文件夹，为了方便，我就在桌面新建该文件夹了，起个名字叫STM32Project，以后我们的工程都存在这个文件夹下，这样比较方便管理；</p> 
<p>接着打开Keil5软件，点击<code>Project-&gt;New uVision Project</code><br> <img src="https://images2.imgbox.com/d9/e7/Bx9XVn5F_o.png" alt="在这里插入图片描述"></p> 
<p>然后选择我们刚才新建的文件夹（桌面上的STM32Project），在里面再新建一个文件夹，用来存放本次的工程，如下图：</p> 
<p><img src="https://images2.imgbox.com/cd/c7/EYREORe0_o.png" alt="在这里插入图片描述"></p> 
<p>起个名字，就叫2-1 STM32工程模板，</p> 
<p><img src="https://images2.imgbox.com/ca/73/TK0KwAI3_o.png" alt="在这里插入图片描述"><br> 然后点进去，接下来给工程文件起个名字，在这里我们可以起一个通用一点的名字，这个工程是干啥的我们可以在文件夹名称说明，文件夹的名称是方便改的，但是工程的名称以后不太方便改，所以我们就起个Project的名称，然后点击保存：</p> 
<p><img src="https://images2.imgbox.com/0c/41/a5wEHvG3_o.png" alt="在这里插入图片描述"></p> 
<p>接下来选择器件型号，我们的芯片型号是STM32F103C8T6，所以这里选择STM32F103C8这个，</p> 
<p><img src="https://images2.imgbox.com/76/f1/pVjVeoMD_o.png" alt="在这里插入图片描述"><br> 点击ok后，会弹出keil软件的一个新建工程小助手，这个小助手可以帮助我们快速新建工程，我们暂时不用这个小助手，可以直接把它叉掉：</p> 
<p><img src="https://images2.imgbox.com/46/83/dzV498wU_o.png" alt="在这里插入图片描述"></p> 
<p>接下来工程就已经建好了，但是这里的工程文件是空空如也，</p> 
<p><img src="https://images2.imgbox.com/0e/83/car0z0vu_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="222___279"></a>2.2.2 添加启动文件</h4> 
<h5><a id="2221___281"></a>2.2.2.1 添加启动文件</h5> 
<p>现在这个工程还是不能直接用的，我们需要给他添加一个工程的必要文件，那我们打开我们的固件库文件夹，路径如下图：</p> 
<p><img src="https://images2.imgbox.com/40/c5/jBERJqHY_o.png" alt="在这里插入图片描述"><br> 打开<code>Libraries-&gt;CMSIS-&gt;CM3-&gt;DeviceSupport-&gt;ST-&gt;STM32F10x-&gt;startup-&gt;arm</code>，</p> 
<p><img src="https://images2.imgbox.com/4f/ec/DITkcFpv_o.png" alt="在这里插入图片描述"><br> 这些就是STM32的<code>启动文件</code>，STM32的程序就是从<code>启动文件</code>开始执行的；我们把这些文件复制下来，然后回到工程模板文件夹里，可以看到我们刚刚新建工程后自动生成的文件：</p> 
<p><img src="https://images2.imgbox.com/b4/35/DXmsc7OR_o.png" alt="在这里插入图片描述"></p> 
<p>在这里新建一个文件夹Start用来存放启动文件，将刚刚复制的启动文件复制到Start文件夹里：</p> 
<p><img src="https://images2.imgbox.com/7a/c4/o70MQ1Ge_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2222__298"></a>2.2.2.2 添加寄存器描述文件</h5> 
<p>然后将资料库里的以下三个文件也复制到Start里面：</p> 
<p><img src="https://images2.imgbox.com/78/0c/R7ec5v5x_o.png" alt="在这里插入图片描述"></p> 
<p>其中stm32f10x.h是STM32的外设寄存器描述文件，作用类似于51单片机的头文件REGX52.H，是用来描述STM32有哪些寄存器和它对应的地址的；</p> 
<p>下面的两个system文件是用来配置时钟的， STM32主频是72MHz，就是system文件里的函数配置的；</p> 
<p>这三个文件也都复制到Start下面；</p> 
<h5><a id="2223__309"></a>2.2.2.3 添加内核寄存器描述文件</h5> 
<p><img src="https://images2.imgbox.com/1c/6d/NF3I9yXd_o.png" alt="在这里插入图片描述"><br> 打开以上路径，将两个core文件复制到Start文件夹下；</p> 
<p>这两个cm3（Cortex-M3）文件就是内核的寄存器描述；当然他还带了一些内核的配置函数，所以多了个.c文件。</p> 
<p>到此为止，我们工程的必要文件就复制完成了，最终Start文件夹下包含的所有文件如下所示：<img src="https://images2.imgbox.com/f6/c5/VA5ElIiJ_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2224__318"></a>2.2.2.4 以上文件添加到工程</h5> 
<p>再回到keil软件，把我们刚刚复制的那些文件添加到工程里来，先选中Source Group 1，然后单击一下，把这个组改一下名字，也叫Start</p> 
<p><img src="https://images2.imgbox.com/d9/a4/gardEsKv_o.png" alt="在这里插入图片描述"><br> 然后右键，选择添加已经存在的文件夹到组里来</p> 
<p><img src="https://images2.imgbox.com/91/dc/HnXHppUW_o.png" alt="在这里插入图片描述"><br> 打开Start文件夹把下面这个文件过滤器选择All files，</p> 
<p><img src="https://images2.imgbox.com/d9/3a/6x0nvyOU_o.png" alt="在这里插入图片描述"><br> 然后将<code>startup_stm32f10x_md.s</code>、以及所有的<code>.c</code>和<code>.h</code>文件都添加进来（至于为什么这么多启动文件单单只添加md.s，这个后面再讲），选好后，点击Add；然后Start文件夹里面的文件就添加好了，如下图所示：</p> 
<p><img src="https://images2.imgbox.com/38/6e/02E3GM1f_o.png" alt="在这里插入图片描述"><br> 这里的文件都是STM32里最基本的文件，是不需要我们修改的，我们添加进来即可。且我们可以看到这些文件图标上带了个小钥匙，表示他们是只读的文件；</p> 
<p><img src="https://images2.imgbox.com/e0/86/zV1vzSZA_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2225__337"></a>2.2.2.5 在工程中添加头文件路径</h5> 
<p>最后我们还需要在工程选项里添加上这个文件夹的头文件路径，否则软件是找不到<code>.h</code>文件的；</p> 
<p><img src="https://images2.imgbox.com/95/e3/NrV1SF4f_o.png" alt="在这里插入图片描述"></p> 
<p>点击魔术棒按钮，打开工程选项，在C/C++里，找到Include Paths栏，然后点击右边三个点的按钮，</p> 
<p><img src="https://images2.imgbox.com/5d/00/cRTN3cTq_o.png" alt="在这里插入图片描述"></p> 
<p>在这里点新建路径，</p> 
<p><img src="https://images2.imgbox.com/33/ae/MxKHJ7QT_o.png" alt="在这里插入图片描述"></p> 
<p>然后再点三个点的路径，把Start的路径添加进来：</p> 
<p><img src="https://images2.imgbox.com/ff/d1/V6mKNq6v_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/d2/mYhT83x3_o.png" alt="在这里插入图片描述"></p> 
<p>点击OK，这样就把这个文件夹的头文件路径添加进来了；</p> 
<p><img src="https://images2.imgbox.com/6a/31/Is664xp9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="223___363"></a>2.2.3 新工程测试</h4> 
<p>接下来我们新建一个main函数测试一下这个工程是否可行；</p> 
<p>打开工程文件夹，新建一个User文件夹：</p> 
<p><img src="https://images2.imgbox.com/c3/84/MUdqvoNl_o.png" alt="在这里插入图片描述"></p> 
<p>我们的main函数就放在这个文件夹里，然后再keil里，在Target 1这里点击右键，点击添加组：</p> 
<p><img src="https://images2.imgbox.com/12/03/FK7CWGcT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fe/52/K681XSSF_o.png" alt="在这里插入图片描述"><br> 然后将名字改为User：</p> 
<p><img src="https://images2.imgbox.com/22/fc/MRatY04i_o.png" alt="在这里插入图片描述"></p> 
<p>然后再User上右键，点击添加新文件，</p> 
<p><img src="https://images2.imgbox.com/75/d8/EL5rOArf_o.png" alt="在这里插入图片描述"><br> 选择C文件，名字叫main：</p> 
<p><img src="https://images2.imgbox.com/2b/b6/XziWUr0f_o.png" alt="在这里插入图片描述"><br> 下面的路径注意一下，要选择User文件夹，要不然默认是放在文件夹外面的：</p> 
<p><img src="https://images2.imgbox.com/02/5b/hE9Dj1of_o.png" alt="在这里插入图片描述"><br> 然后点击Add，这样我们就有了main.c文件了：</p> 
<p><img src="https://images2.imgbox.com/a9/22/ZYoDlUJe_o.png" alt="在这里插入图片描述"><br> 在main.c里，我们先右键插入头文件，选择<code>stm32f10x.h</code>：</p> 
<p><img src="https://images2.imgbox.com/51/08/TfkFHAcd_o.png" alt="在这里插入图片描述"></p> 
<p>然后写一个main函数，并写入测试代码，然后点击build：</p> 
<p><img src="https://images2.imgbox.com/08/84/FdUesQNj_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到结果为编译通过，0警告0错误，则证明工程建立成功了：</p> 
<p><img src="https://images2.imgbox.com/48/d0/pisW0LZP_o.png" alt="在这里插入图片描述"></p> 
<p><strong>这里需要注意，文件的最后一行必须要空一行，否则会报警告。</strong></p> 
<p>这个工程目前还没有添加STM32的库函数，所以它还是一个基于寄存器开发的工程，如果你想用寄存器开发STM32，那工程建到这里就可以了。</p> 
<h4><a id="224___411"></a>2.2.4 配置寄存器实现点灯</h4> 
<p>下面演示一下通过配置寄存器来完成点灯操作，当然直接操作寄存器不是本节的重点，了解一下即可。</p> 
<p>首先拿出STM32的最小系统板、STLINK和四根母对母的杜邦线， 按照插针边上的标识，把3.3V、SWDIO、SWCLK、GND对应连接好：</p> 
<p><img src="https://images2.imgbox.com/3f/7c/Y0NXDWEL_o.png" alt="在这里插入图片描述"><br> 你的接口也有可能是以下这样：</p> 
<pre><code class="prism language-c">SWCLK<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span>SWCLK
SWDIO<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span>SWO
GND<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span>GND
<span class="token number">3.3</span>V<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">&gt;</span><span class="token number">3.3</span>V
</code></pre> 
<p>连接好之后如下图所示：</p> 
<p><img src="https://images2.imgbox.com/bd/90/zhNQkvEP_o.png" alt="在这里插入图片描述"></p> 
<p>然后把STLINK插在电脑上</p> 
<p><img src="https://images2.imgbox.com/8f/d8/a3K2CgO3_o.png" alt="在这里插入图片描述"></p> 
<p>插上电之后，板子上的电源灯应该会常亮，另一个谅解在PC13口上的灯默认应该是闪烁状态，这是芯片里的一个测试程序；</p> 
<p>然后我们再在Keil里面配置一下调试器：点击魔术棒按钮-&gt;选择DEBUG-&gt;，这个调试器默认是ULINK，改成ST-Link Debugger</p> 
<p><img src="https://images2.imgbox.com/c3/1e/BnvLGLpj_o.png" alt="在这里插入图片描述"><br> 然后再点击上图3旁边的Settings按钮，在Flash Download里，把Reset and Run这一项勾上：</p> 
<p><img src="https://images2.imgbox.com/2e/a9/ds4bbD5N_o.png" alt="在这里插入图片描述"><br> 勾上这一项的目的是，我们下载程序后会立马复位并执行，这样方便一些；否则每次下载之后还要按一下板子上的复位按键才能执行程序；配置好之后点击确认即可。</p> 
<p>然后将以下代码写进main.c里：</p> 
<p><img src="https://images2.imgbox.com/e4/b6/bkDR9Gpp_o.png" alt="在这里插入图片描述"><br> 然后编译并下载，</p> 
<p><img src="https://images2.imgbox.com/24/6b/RyREhMFs_o.png" alt="在这里插入图片描述"></p> 
<p>现象是灯就会灭：</p> 
<p><img src="https://images2.imgbox.com/f4/78/IZpJ6XAw_o.png" alt="在这里插入图片描述"></p> 
<p>如果将代码改为以下：</p> 
<p><img src="https://images2.imgbox.com/6c/02/dlk8UlYs_o.png" alt="在这里插入图片描述"></p> 
<p>灯就会被亮：<br> <img src="https://images2.imgbox.com/91/16/RnBDF6Rh_o.png" alt="在这里插入图片描述"></p> 
<p>这就是通过寄存器控制LED灯，通过寄存器配置LED灯要一直查手册，来了解每一个寄存器的每一位是干啥的， 才能成功点亮。</p> 
<h4><a id="225___469"></a>2.2.5 使用库函数实现点灯</h4> 
<p>新建一个文件夹叫Library，用来存放库函数，</p> 
<p><img src="https://images2.imgbox.com/65/1b/jorM1mPd_o.png" alt="在这里插入图片描述"><br> 接着打开固件库的文件夹，打开<code>Libraries-&gt;STM32标准外设驱动-&gt;src</code>：如下图<br> <img src="https://images2.imgbox.com/86/9b/UiTfEM9s_o.png" alt="在这里插入图片描述"></p> 
<p>这些就是库函数的源文件，这个<code>misc.c</code>是内核的库函数，其他的就是内核外的外设库函数了；这个misc就是混杂的意思；按ctrl+A全选，然后复制，在Library下粘贴，如下图所示：</p> 
<p><img src="https://images2.imgbox.com/bf/67/Tsp2BqSk_o.png" alt="在这里插入图片描述"><br> 然后再打开固件库的<code>inc</code>文件夹：</p> 
<p><img src="https://images2.imgbox.com/0e/3d/cdNza8WK_o.png" alt="在这里插入图片描述"><br> 这些是库函数的头文件，继续全选并复制，同样在Library文件夹下粘贴：</p> 
<p><img src="https://images2.imgbox.com/71/f1/BGsnELkI_o.png" alt="在这里插入图片描述"><br> 然后回到Keil软件，同样在Target1处右键，添加组，</p> 
<p><img src="https://images2.imgbox.com/4f/20/ui37wIlo_o.png" alt="在这里插入图片描述"><br> 改个名字叫Library：</p> 
<p><img src="https://images2.imgbox.com/c6/3a/eKvPWq3E_o.png" alt="在这里插入图片描述"></p> 
<p>再右键，添加已经存在的文件，打开Library，ctrl+A，Add：<br> <img src="https://images2.imgbox.com/9c/5f/4uMPMlXY_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a6/81/uIy9FJSj_o.png" alt="在这里插入图片描述"><br> 这样就把所有的库函数文件都添加进来了；但是对于这个库函数来说，现在还不能直接使用，需要再添加一个文件：打开固件库的文件夹（路径为固件库<code>\STM32F10x_StdPeriph_Lib_V3.5.0\Project\STM32F10x_StdPeriph_Template</code>），找到如下三个文件：</p> 
<p><img src="https://images2.imgbox.com/12/08/k36B8PSz_o.png" alt="在这里插入图片描述"><br> 其中<code>stm32f10x_conf.h</code>是用来配置库函数头文件的包含关系的，另外这里面还有个用来参数检查的函数定义，这是所有库函数都需要的；两个it结尾的文件是用来存放中断函数的；</p> 
<p>把这三个文件复制下来，粘贴进工程的User目录下：</p> 
<p><img src="https://images2.imgbox.com/06/d2/y9riJDHy_o.png" alt="在这里插入图片描述"><br> 接着回到Keil软件， 在User组里，把刚发财那三个文件添加进来：<br> <img src="https://images2.imgbox.com/00/50/1buTfSKj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ae/bb/793jSozC_o.png" alt="在这里插入图片描述"></p> 
<p>因为在头文件中定义了如下代码：</p> 
<p><img src="https://images2.imgbox.com/de/ce/AcuBBMRK_o.png" alt="在这里插入图片描述"><br> 所以我们需要对USE_STDPERIPH_DRIVER宏进行定义，才能包含到stm32f10x_conf.h头文件：</p> 
<p>添加该宏的步骤如下：</p> 
<p><img src="https://images2.imgbox.com/6b/b8/h1nZz0Ut_o.png" alt="在这里插入图片描述"><br> 这样我们基于库函数的工程就建好了；我们可以看一下，这个Library里面的库函数也都带了钥匙，说明只读；</p> 
<p><img src="https://images2.imgbox.com/ca/34/nLxZ0FeL_o.png" alt="在这里插入图片描述"><br> 此时编译一下，结果如下：</p> 
<p><img src="https://images2.imgbox.com/64/3d/4yAQKkls_o.png" alt="在这里插入图片描述"><br> 0错误0警告，所以我们的工程建立是成功的。</p> 
<p>然后我们用库函数实现点灯的操作，代码如下：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"stm32f10x.h"</span>                  <span class="token comment">// Device header</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">RCC_APB2PeriphClockCmd</span><span class="token punctuation">(</span>RCC_APB2Periph_GPIOC<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>
	GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_Out_PP<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_13<span class="token punctuation">;</span>
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Speed <span class="token operator">=</span> GPIO_Speed_50MHz<span class="token punctuation">;</span>
	<span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOC<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//	GPIO_SetBits(GPIOC, GPIO_Pin_13);</span>
	<span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOC<span class="token punctuation">,</span> GPIO_Pin_13<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码解释：</p> 
<p><code>RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);</code>表示配置GPIOC的外设时钟；</p> 
<pre><code class="prism language-c">GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span>
GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_Out_PP<span class="token punctuation">;</span>
GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_13<span class="token punctuation">;</span>
GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Speed <span class="token operator">=</span> GPIO_Speed_50MHz<span class="token punctuation">;</span>
<span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOC<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>先定义一个GPIO_InitTypeDef 结构体，然后对其进行赋值，最后调用GPIO_Init函数，来配置GPIO模式；</p> 
<p>最后设置端口的高低电平来进行点灯：<br> <code>GPIP_SetBIts</code>这个函数可以把指定端口设置为高电平，<code>GPIO_SetBits(GPIOC, GPIO_Pin_13)</code>代码的意思是将PC13号口设置为高电平；</p> 
<p><code>GPIO_ResetBits</code>这个函数可以将指定端口设置为低电平，<code>GPIO_ResetBits(GPIOC, GPIO_Pin_13);</code>代码的意思是将PC13号口设置为低电平；</p> 
<p>以上代码的现象（注释掉了PC13号口的低电平，使用的是低电平），所以灯会亮：</p> 
<p><img src="https://images2.imgbox.com/2d/fd/sNo4AtK9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="226___568"></a>2.2.6 补充：库函数中的启动文件选择</h4> 
<p>在第2.2.2.4 节中，添加启动文件时，我们选择了md.s结尾的启动文件，<br> <img src="https://images2.imgbox.com/f9/7c/dNOAne9O_o.png" alt="在这里插入图片描述"></p> 
<p>为什么选择这个而不选择添加其他的呢？</p> 
<p>先看一下下面的表：</p> 
<p><img src="https://images2.imgbox.com/b6/1a/RKxJbmXi_o.png" alt="在这里插入图片描述"><br> 我们使用的STM32F103系列C8T6，其Flash大小是64K，按照表中的对应关系，需要选择MD的启动文件。</p> 
<h4><a id="227___580"></a>2.2.7 总结：新建工程的步骤</h4> 
<p><img src="https://images2.imgbox.com/81/4d/dnIbSxfn_o.png" alt="在这里插入图片描述"><br> 工程架构：</p> 
<p><img src="https://images2.imgbox.com/58/a1/8fBapIyd_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b8754784126bd8cf19e8d8cf1f7bb2f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Visual Studio （2022）安装配置pthread.h多线程库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bf96a06c7c2042bfae462a6ab401f698/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux系统宝塔安装与卸载详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>