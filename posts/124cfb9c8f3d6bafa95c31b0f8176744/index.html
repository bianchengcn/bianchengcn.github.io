<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python request url 转义_python测试开发django56.模板渲染markdown语法&#43;代码高亮 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python request url 转义_python测试开发django56.模板渲染markdown语法&#43;代码高亮" />
<meta property="og:description" content="前言 上一篇已经实现在xadmin后台编辑markdown语法的文档，编辑完成之后发布博客，在前端html能把markdown语法显示出来。
主要思路是先从数据库把markdown的代码读出来，导入markdown模块，把markdown的语法转换成html语法，再嵌入到模板里面。
markdown 先使用pip按照markdown模块，用于转换markdown为html
pip install markdown
在后台页面编辑的markdown内容，markdown里面插入代码一般有两种方式：一种是把代码全部选中，然后缩进(四个空格)
第二种是代码部分用三个```包起来,后面可以跟着对应语言python，如下(这里不太好展示，前面的\要去掉)
# django 框架介绍 Django 项目是一个Python定制框架，它源自一个在线新闻 Web 站点，于 2005 年以开源的形式被释放出来。Django 框架的核心组件有：- 用于创建模型的对象关系映射 - 为最终用户设计的完美管理界面 - 一流的 URL 设计 - 设计者友好的模板语言 - 缓存系统。# 图片展示 图片显示 ![](/media/editor/1_20190422134140555628.png) # 代码展示 \```python # 前面的\去掉 from django.db import models from mdeditor.fields import MDTextField # 必须导入 class Blog(models.Model): &#39;&#39;&#39;博客管理&#39;&#39;&#39; title = models.CharField(max_length=30) content = MDTextField() # 注意为MDTextField() def __str__(self): return self.__doc__ &#43; &#34;title-&gt;&#34; &#43; self.title class Meta: verbose_name = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/124cfb9c8f3d6bafa95c31b0f8176744/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-20T21:47:05+08:00" />
<meta property="article:modified_time" content="2020-12-20T21:47:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python request url 转义_python测试开发django56.模板渲染markdown语法&#43;代码高亮</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="._5ce-wx-style" style="font-size:16px;"> 
 <div class="rich_media_content" id="js_content"> 
  <div> 
   <h2>前言</h2> 
   <p>上一篇已经实现在xadmin后台编辑markdown语法的文档，编辑完成之后发布博客，在前端html能把markdown语法显示出来。<br>主要思路是先从数据库把markdown的代码读出来，导入markdown模块，把markdown的语法转换成html语法，再嵌入到模板里面。</p> 
   <h2>markdown</h2> 
   <p>先使用pip按照markdown模块，用于转换markdown为html</p> 
   <blockquote> 
    <p>pip install markdown</p> 
   </blockquote> 
   <p>在后台页面编辑的markdown内容，markdown里面插入代码一般有两种方式：一种是把代码全部选中，然后缩进(四个空格)<br>第二种是代码部分用三个```包起来,后面可以跟着对应语言python，如下(这里不太好展示，前面的\要去掉)</p> 
   <pre class="has"><code># django 框架介绍

Django 项目是一个Python定制框架，它源自一个在线新闻 Web 站点，于 2005 年以开源的形式被释放出来。Django 框架的核心组件有：- 用于创建模型的对象关系映射
- 为最终用户设计的完美管理界面
- 一流的 URL 设计
- 设计者友好的模板语言
- 缓存系统。# 图片展示

图片显示

![](/media/editor/1_20190422134140555628.png)

# 代码展示

\```python         # 前面的\去掉
from django.db import models
from mdeditor.fields import MDTextField   # 必须导入

class Blog(models.Model):
'''博客管理'''
    title = models.CharField(max_length=30)
    content = MDTextField()    # 注意为MDTextField()

def __str__(self):
    return self.__doc__ + "title-&gt;" + self.title

class Meta:
    verbose_name = "博客发布"
    verbose_name_plural = verbose_name
\```   # 前面的\去掉</code></pre> 
   <h2>views试图</h2> 
   <p>在views.py中导入markdown，这里extensions里面三个参数用法,</p> 
   <ul><li>markdown.extensions.extra 本身包含很多扩展</li><li>markdown.extensions.codehilite 是语法高亮，后面插入代码会用到</li><li>markdown.extensions.toc 是自动生成目录</li></ul> 
   <pre class="has"><code>from .models import Blog
import markdown

def detail(request, id):
    '''博客详情展示, 根据id读取'''
    blog = Blog.objects.filter(id=int(id)).first()
    blog.content = markdown.markdown(blog.content,
                                     extensions=[
                                      'markdown.extensions.extra',
                                      'markdown.extensions.codehilite',
                                      'markdown.extensions.toc',
                                  ],
                                  safe_mode=True,
                                  enable_attributes=False)
    context = {
        "blogmd": blog
    }
    return render(request, 'blogmd.html', context)</code></pre> 
   <h2>templates模板</h2> 
   <p>接下来把markdown的内容插入到以下模板的<code>{<!-- -->{ blogmd.content | safe}}</code> 位置，这里需加个safe参数，<br>Django 出于安全方面的考虑，任何的 HTML 代码在 Django 的模板中都会被转义(即显示原始的 HTML 代码，而不是经浏览器渲染后的格式)。<br>为了解除转义，只需在模板标签使用 safe 过滤器即可，告诉 Django，这段文本是安全的，你什么也不用做</p> 
   <pre class="has"><code>


{<!-- -->{blogmd.title}}</code></pre> 
   <div> 
    <code> </code> 
    <h2><code>{<!-- -->{blogmd.title}}</code></h2> 
    <code> </code> 
    <div> 
     <code> 2019.04.22 18:28 发布  作者：上海-悠悠  阅读 9999 </code> 
    </div> 
    <code> {<!-- -->{ blogmd.content | safe}} </code> 
   </div> 
   <code> </code> 
   <p>文件名保存为blogmd.html</p> 
   <h2>urls.py设置</h2> 
   <p>urls.py设置访问地址</p> 
   <pre class="has"><code>from django.conf.urls import url
from hello import views

urlpatterns = [
    url(r'^blog/(.+).html$', views.detail),
]</code></pre> 
   <p>访问地址:<code>http://localhost:8000/blog/2.html</code>页面效果如下</p> 
   <p><img src="https://images2.imgbox.com/e1/c4/lAUaTbi5_o.png" alt="e413813523a0cf2fd5fc32ddcf8c49c0.png"></p> 
   <h2>代码高亮展示</h2> 
   <p>这里代码部分，默认是不会有背景的，也不会也高亮，如下图</p> 
   <p><img src="https://images2.imgbox.com/f0/b2/74MYGMVM_o.png" alt="1fdd85b812cfa25c631c02b64c8b591d.png"></p> 
   <p>代码高亮展示需要安装Pygments模块</p> 
   <blockquote> 
    <p>pip install Pygments</p> 
   </blockquote> 
   <p>接着在你的app的static目录新建一个css目录：hello/static/hello/css</p> 
   <p><img src="https://images2.imgbox.com/89/d4/WNSG0x7Q_o.png" alt="ae70e6bd97d92c33f62279c4ce406c0a.png"></p> 
   <p>打开cmd, cd到<code>hello/static/hello/css</code>目录，执行以下指令，会在当前目录生成一个code.css文件</p> 
   <blockquote> 
    <p>pygmentize -S default -f html -a .codehilite &gt; code.css</p> 
   </blockquote> 
   <p>在模板里面引入这个css文件就可以了，在head里面加一个link</p> 
   <p>刷新页面后，就能显示高亮的代码了</p> 
   <p><img src="https://images2.imgbox.com/96/3f/L5oYevfR_o.png" alt="ca3960e3abfe8a53479c4697ca02d1e4.png"><strong><strong>2019年《python3自动化UI+接口》课程5月25-7月27开课</strong></strong>主讲老师：上海-悠悠<br>上课方式：QQ群视频在线教学<br>上课时间：每周六、周日晚上20:30-22:30<br>报名费：2000<br>联系QQ：283340479<strong><br>课表详情：5月25号开学!第13期《python3自动化测试selenium+接口》课程</strong></p> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/900a2b51cdfe0e597669aac659b00b52/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">cubemx spi 中断_STM32HAL库SPI的16位数据中断发送与接收</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/508e6fe4569e964d2b2788b01baa9cad/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">小米蓝牙耳机持续白灯_小米蓝牙耳机air2怎么重置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>