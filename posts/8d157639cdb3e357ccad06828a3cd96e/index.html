<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>javaweb实现购物车功能 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="javaweb实现购物车功能" />
<meta property="og:description" content="本篇文章讲的是如何使用javaweb相关知识模拟购物车功能 (web练手小项目) 使用到的相关知识(部分知识点在文章中简单涉及到):
html cs javascript jsp servlet ajax jQuery Mysql MyBatis(持久层框架，用来连接数据库，这里可以使用jdbc进行数据库的连接) 功能使用MVC设计模式，以及三层架构思想
注: 本篇使用Session对购物车进行存储,具体参考下文WelcomeServlet.java
功能实现效果:
购物车为空状态 功能大致目录结构:
前端界面代码:
(1) shopcar.jsp(购物车界面)
&lt;%@ page import=&#34;edu.pdsu.shop.pojo.CarGoods&#34; %&gt; &lt;%@ page import=&#34;java.util.List&#34; %&gt; &lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt; &lt;%@taglib prefix=&#34;c&#34; uri=&#34;http://java.sun.com/jsp/jstl/core&#34; %&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;shop car&lt;/title&gt; &lt;link rel=&#34;stylesheet&#34; href=&#34;css/shoplist.css&#34; type=&#34;text/css&#34;&gt; &lt;script type=&#34;text/javascript&#34; src=&#34;${pageContext.request.contextPath}/js/jquery-3.6.1.min.js&#34;&gt;&lt;/script&gt; &lt;/head&gt; &lt;style type=&#34;text/css&#34;&gt; th, td { border-bottom: 1px solid green; } th { background-color: #4CAF50; color: white; } table{ text-align: center; } &lt;/style&gt; &lt;body style=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/8d157639cdb3e357ccad06828a3cd96e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-12T00:09:04+08:00" />
<meta property="article:modified_time" content="2022-11-12T00:09:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">javaweb实现购物车功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>本篇文章讲的是如何使用javaweb相关知识模拟购物车功能</h2> 
<h3>(web练手小项目)</h3> 
<p><strong>使用到的相关知识(部分知识点在文章中简单涉及到):</strong></p> 
<p>       html  cs  javascript  jsp  servlet   ajax  jQuery  Mysql  MyBatis(持久层框架，用来连接数据库，这里可以使用jdbc进行数据库的连接)  功能使用MVC设计模式，以及三层架构思想</p> 
<p>注: 本篇使用<strong>Session</strong>对购物车进行存储,具体参考下文<strong>WelcomeServlet</strong><strong>.</strong><strong>java</strong></p> 
<p><strong>功能实现效果:</strong></p> 
<p style="text-align:center;"><strong><img src="https://images2.imgbox.com/b7/03/l7liYsSp_o.png" alt="6fa64acb07db475a83fa7976e87c7527.png"></strong></p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/90/11/VruKrwqX_o.png" alt="5b166471e3a040da89a271db28a1af3f.png"></p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/97/07/pXtOMMdP_o.png" alt="044cb41da4ad4b4aa0b1dee10b6aa778.png"></p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/ff/33/8kjO3SuT_o.png" alt="5e0d1203d22744939a4229b7fd4d55c1.png"></p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/b4/b4/gcxvosB8_o.png" alt="49277781ce544930bb5600f26594b7ac.png"></p> 
<p>购物车为空状态 </p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/80/ae/WSbfq89C_o.png" alt="6629d9457ce4476b9dc42fb3d912b696.png"></p> 
<p style="text-align:center;"> 功能大致目录结构:<br><img src="https://images2.imgbox.com/7d/d1/FLEVCXHk_o.png" alt="863ced0c16cb4953a79157a993bfc207.png"></p> 
<p style="text-align:center;"><img src="https://images2.imgbox.com/fb/97/HCjqjJdt_o.png" alt="06acba73a1d042358926f78a1fa1ffb3.png"></p> 
<p> </p> 
<p>前端界面代码:</p> 
<p> (1) shopcar.jsp(购物车界面)</p> 
<pre><code class="language-html">&lt;%@ page import="edu.pdsu.shop.pojo.CarGoods" %&gt;
&lt;%@ page import="java.util.List" %&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;shop car&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/shoplist.css" type="text/css"&gt;
    &lt;script type="text/javascript" src="${pageContext.request.contextPath}/js/jquery-3.6.1.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;style type="text/css"&gt;
    th, td {
        border-bottom: 1px solid green;
    }
    th {
        background-color: #4CAF50;
        color: white;
    }
    table{
        text-align: center;
    }
&lt;/style&gt;
&lt;body style="background-color: #ffffe0" background="img/11.webp"&gt;
&lt;h1 style="color: white;margin-left: 600px;margin-top: 50px"&gt;购物车&lt;/h1&gt;
&lt;table border="1px" cellspacing="0" style="border-color: #d7ffff ; margin-top: 5px ; margin-left: 340px"&gt;
    &lt;script type="text/javascript"&gt;
        function judgeDelete(carGoodsName) {
            if (confirm("是否删除" + carGoodsName)) {
                window.location.href = "${pageContext.request.contextPath}/deleteCarGoods?carGoodsName=" + carGoodsName
            } else {
                alert("取消删除成功")
            }
        }
    &lt;/script&gt;

    &lt;c:if test="${empty carGoodsList}"&gt;
        &lt;%--&lt;h1 style="margin-left: 580px;margin-top: 170px"&gt;购物车为空&lt;/h1&gt;--%&gt;
        &lt;div style="margin-left: 500px;margin-top: 56px"&gt;
            &lt;img src="img/carnull.jpg" width="300px" height="200px"&gt;
        &lt;/div&gt;
    &lt;/c:if&gt;

    &lt;c:if test="${not empty carGoodsList}"&gt;
        &lt;tr&gt;
            &lt;th&gt;商品名称&lt;/th&gt;
            &lt;th&gt;商品描述&lt;/th&gt;
            &lt;th&gt;价格&lt;/th&gt;
            &lt;th&gt;购买数量&lt;/th&gt;
            &lt;th&gt;操作&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/c:if&gt;
    &lt;c:if test="${not empty carGoodsList}"&gt;

        &lt;c:forEach items="${carGoodsList}" var="CarGoods"&gt;
            &lt;tr&gt;
                &lt;td&gt;${CarGoods.carGoodsName}&lt;/td&gt;
                &lt;td&gt;${CarGoods.carGoodsDes}&lt;/td&gt;
                &lt;td&gt;${CarGoods.carGoodsPrice}&lt;/td&gt;
                &lt;td&gt;${CarGoods.buyCount}&lt;/td&gt;
                &lt;td&gt;
                    &lt;input id="deleteCarGoods" type="button" style="text-decoration: none"
                           onclick="judgeDelete('${CarGoods.carGoodsName}')" value="删除"/&gt;
                &lt;/td&gt;
            &lt;/tr&gt;

        &lt;/c:forEach&gt;
    &lt;/c:if&gt;
&lt;/table&gt;

&lt;c:if test="${not empty carGoodsList}"&gt;
    &lt;h3 style="margin-left: 340px;color: white"&gt;目前您购物车的总价格为:${money}元人民币&lt;/h3&gt;
&lt;/c:if&gt;

&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
&lt;input class="backshowlist" type="button" value="返回商品显示页"
       onclick="window.location.href='${pageContext.request.contextPath}/showlist'"&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p> </p> 
<p> (2) shoplist.jsp(商品页)</p> 
<pre><code class="language-html">&lt;%@ page contentType="text/html;charset=utf-8" language="java" isELIgnored="false" %&gt;
&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;!DOCTYPE html&gt;
&lt;head&gt;
    &lt;title&gt;myshop&lt;/title&gt;
    &lt;link rel="stylesheet" href="css/shoplist.css" type="text/css"&gt;
    &lt;script type="text/javascript" src="js/jquery-3.6.1.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;style type="text/css"&gt;
    th, td {
        border-bottom: 1px solid green;
    }
    th {
        background-color: #4CAF50;
        color: white;
    }
    table{
        text-align: center;
    }
&lt;/style&gt;

&lt;body style="background-color: #ffffe0" background="img/11.webp"&gt;
&lt;h2 style="color: skyblue"&gt;:)&lt;/h2&gt;

&lt;script type="text/javascript"&gt;
    $(function () {
        $("#showbtn").click(function () {
            $.ajax({
                type: "GET",
                url: "${pageContext.request.contextPath}/judgecar",
                async: true,
                success: function (j) {
                    if (j == "购物车为空") {
                        alert("购物车为空")
                    } else {
                        window.location.href = "${pageContext.request.contextPath}/shopcar.jsp"
                    }
                }
            })
        })
    })
&lt;/script&gt;
&lt;h1 style="color: white;margin-left: 600px"&gt;商品页&lt;/h1&gt;
&lt;button id="showbtn" class="showcarbtn"&gt;查看购物车&lt;/button&gt;
&lt;form action="${pageContext.request.contextPath}/beforeCar" method="post" id="form_"&gt;
    &lt;table  cellspacing="0" style="  margin-top: 5px ; margin-left: 270px ;border-color: #8bff73"&gt;
        &lt;tr&gt;
            &lt;th&gt;序号&lt;/th&gt;
            &lt;th&gt;商品名称&lt;/th&gt;
            &lt;th&gt;商品描述&lt;/th&gt;
            &lt;th&gt;商品价格(元)&lt;/th&gt;
            &lt;th&gt;库存数量&lt;/th&gt;
            &lt;th&gt;添至购物车&lt;/th&gt;
        &lt;/tr&gt;

        &lt;c:forEach items="${goodss}" var="goods" varStatus="goodStatus"&gt;
            &lt;tr&gt;
                &lt;td&gt;${goodStatus.count}&lt;/td&gt;
                &lt;td&gt;${goods.goodsName}&lt;/td&gt;
                &lt;td&gt;${goods.goodsDes}&lt;/td&gt;
                &lt;td&gt;${goods.goodsPrice}&lt;/td&gt;
                &lt;td&gt;${goods.goodsCount}&lt;/td&gt;
                &lt;td&gt;
                    &lt;input type="checkbox" name="buy" value="${goods.goodsName}" style="margin-left: 30px"&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/c:forEach&gt;
    &lt;/table&gt;
    &lt;br&gt;

    &lt;input type="button" value="确定" id="btn" class="ensure"&gt;
    &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
    &lt;input type="reset" value="重置" class="reset"&gt;

&lt;/form&gt;

&lt;script type="text/javascript"&gt;
    $(function () {
        $("#btn").click(function () {
            var flag = false;
            var $checkbox = $(":checkbox");
            /*for (var i = 0; i &lt; $checkbox.length; i++) {
                if($checkbox[i].checked){
                    flag = true;
                }
            }*/
            //使用jQuery循环jQuery对象，其实jQuery对象就是一个dom数组
            /*$checkbox.each(function (i , n) {
                if(n.checked){
                    flag = true
                }
            })*/
            $.each($checkbox,function (i,n) {
                if(n.checked){
                    flag = true;
                }
            })
            if (flag == false) {
                alert("未选择商品")
            } else {
                var $formElement = $("#form_")[0];
                $formElement.submit();
            }
        })
    })
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>后端servlet代码:</p> 
<p> </p> 
<p>欢迎页(WelcomeServlet.java)</p> 
<p>欢迎页介绍：当把购物车初始化在ShopServlet.java或者其他servlet中刷新浏览器页面session中的购物车状态会出现异常,因此我的想法是在欢迎页中创建购物车对象并存储到Session中</p> 
<p><strong>写此欢迎页代码前需要在web.xml配置文件中配置一下代码</strong></p> 
<p> 配置后会默认以/welcome为项目默认路径进行访问(需要注意&lt;welcome-file&gt;这里不需要 /&lt;/welcome-file&gt;)</p> 
<pre><code class="language-XML">&lt;!--配置欢迎页--&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;welcome&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;</code></pre> 
<p>WelcomeServlet.java </p> 
<p> </p> 
<pre><code class="language-java">package edu.pdsu.shop.servlet;

import edu.pdsu.shop.pojo.CarGoods;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;

/**
 * 使用Session mybatis jsp servlet EL JSTL  AJAX JQuery模拟购物车功能的实现
 * 欢迎页(欢迎页中创建购物车对象存储到session中)
 */
@WebServlet("/welcome")
public class WelComeServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        //将购物车写到这里是为了防止进入到shoplist中用户刷新，购物车置空的情况
        //当下面的这段构建购物车的代码写到showlist-&gt;对应的servlet中，如果刷新页面，那么showlist-&gt;servlet会在次执行，重新创建List集合，购物车会置空
        List&lt;CarGoods&gt; carGoodsList = new ArrayList&lt;&gt;();
        //将购物车所有的实体商品存入Session中,
        HttpSession session = request.getSession();
        session.setAttribute("carGoodsList",carGoodsList);
        //重定向
        response.sendRedirect(request.getContextPath() + "/showlist");
    }
}
</code></pre> 
<p>ShopServlet.java(负责获取所有商品的数据并传到前端进行数据展示)</p> 
<pre><code class="language-java">package edu.pdsu.shop.servlet;

import edu.pdsu.shop.pojo.CarGoods;
import edu.pdsu.shop.pojo.goods;
import edu.pdsu.shop.service.ShopService;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

/**
 * 展示商品页servlet
 */
@WebServlet("/showlist")
public class ShopServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        //创建service对象
        ShopService service = new ShopService();
        //调用服务
        List&lt;goods&gt; goodss = service.showShopListService();
        //转发
        request.setAttribute("goodss",goodss);
        request.getRequestDispatcher("/shoplist.jsp").forward(request,response);
    }
}
</code></pre> 
<p>BeforeCarServlet.java(在跳转到购物车界面前需要进行的操作 , 同时将数据传入前端进行展示)</p> 
<pre><code class="language-java">package edu.pdsu.shop.servlet;

import edu.pdsu.shop.exception.UpdateErrorException;
import edu.pdsu.shop.pojo.CarGoods;
import edu.pdsu.shop.pojo.goods;
import edu.pdsu.shop.service.ShopService;
import edu.pdsu.shop.util.SqlSessionUtil;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;
import org.apache.ibatis.session.SqlSession;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

/**
 * 在展示购物车(shopcar.jsp)之前需要进行判断
 *      如果购物车中包含某类商品，则此类商品购买数量加一
 *      否则购物车中新增此商品的记录
 */
@WebServlet("/beforeCar")
public class BeforeCarServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        doPost(request,response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=utf-8");
        PrintWriter out = response.getWriter();

        //创建service方法
        ShopService service = new ShopService();
        //拿到前端传来的数据
        String[] buys = request.getParameterValues("buy");
        //获取购物车信息
        HttpSession session = request.getSession();
        List&lt;CarGoods&gt; carGoodsList = (List&lt;CarGoods&gt;) session.getAttribute("carGoodsList");
        if (buys != null ) {
            boolean flag = false;
            for (String buy : buys) {
                if (carGoodsList.isEmpty()) {
                    goods goods = service.selectByGoodsNameService(buy);
                    CarGoods carGoods2 = new CarGoods();
                    carGoods2.setCarGoodsName(goods.getGoodsName());
                    carGoods2.setCarGoodsDes(goods.getGoodsDes());
                    carGoods2.setBuyCount(1);
                    try {
                        //更新商品库存服务
                        service.updateGoodsCountservice(buy);
                        //设置购物车中商品的价格
                        carGoods2.setCarGoodsPrice(goods.getGoodsPrice());
                        carGoodsList.add(carGoods2);


                    } catch (UpdateErrorException e) {
                        out.print(e.getMessage());
                    }
                } else {
                    for (int i = 0; i &lt; carGoodsList.size(); i++) {
                        if (carGoodsList.get(i).getCarGoodsName().equals(buy)) {
                            //购物车中有用户想要购买的商品,将购物车中的商品数量加1
                            carGoodsList.get(i).setBuyCount(carGoodsList.get(i).getBuyCount() + 1);
                            //更新商品的库存
                            try {
                                service.updateGoodsCountservice(buy);
                            } catch (UpdateErrorException e) {
                                e.printStackTrace();
                            }
                            flag = true;
                        }
                    }
                    if (flag == false) {
                        //购物车中没有此商品，将购物车中加入此商品
                        goods goods = service.selectByGoodsNameService(buy);
                        CarGoods carGoods = new CarGoods();
                        carGoods.setCarGoodsName(goods.getGoodsName());
                        carGoods.setCarGoodsDes(goods.getGoodsDes());
                        carGoods.setBuyCount(1);
                        try {
                            //更新数据库中的数据信息
                            service.updateGoodsCountservice(buy);

                            carGoods.setCarGoodsPrice(goods.getGoodsPrice());
                            carGoodsList.add(carGoods);
                        } catch (UpdateErrorException e) {
                            e.printStackTrace();
                        }


                    }
                    //重新设置flag的值为false
                    flag = false;

                }
            }
            //更新购物车的信息
            double money = 0;
            for (int i = 0; i &lt; carGoodsList.size(); i++) {
                double carGoodsPrice = carGoodsList.get(i).getCarGoodsPrice();
                int buyCount = carGoodsList.get(i).getBuyCount();
                money += carGoodsPrice * buyCount;
            }
            HttpSession session1 = request.getSession();
            session1.setAttribute("money", money);
            request.setAttribute("carGoodsList", carGoodsList);
            //转发到购物车界面
            request.getRequestDispatcher("/shopcar.jsp").forward(request, response);

        } else {
            //更新购物车的信息
            request.setAttribute("carGoodsList", carGoodsList);
            //转发到购物车界面
            request.getRequestDispatcher("/shopcar.jsp").forward(request, response);
        }

    }
}

</code></pre> 
<p>CarServlet.java(购物车删除功能实现)</p> 
<pre><code class="language-java">package edu.pdsu.shop.servlet;

import edu.pdsu.shop.exception.UpdateErrorException;
import edu.pdsu.shop.pojo.CarGoods;
import edu.pdsu.shop.pojo.goods;
import edu.pdsu.shop.service.ShopService;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.Iterator;
import java.util.List;

/**
 * 购物车小程序
 *      购物车删除功能的实现
 */
@WebServlet("/deleteCarGoods")
public class CarServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        ShopService service = new ShopService();
        //获取前端传来的参数
        String carGoodsName = request.getParameter("carGoodsName");

        //获取session存储域中的购物车List
        HttpSession session = request.getSession();
        List&lt;CarGoods&gt; carGoodsList = (List&lt;CarGoods&gt;) session.getAttribute("carGoodsList");
        //遍历CarGoods集合

        Iterator it = carGoodsList.iterator();
        while(it.hasNext()){
            CarGoods carGoods = (CarGoods) it.next();
            if(carGoods.getCarGoodsName().equals(carGoodsName)){
                //在集合中找到要删除的商品,删除商品
                it.remove();
                //删除后还需要更新数据库中的商品库存数量
                int buyCount = carGoods.getBuyCount();
                goods good = service.selectByGoodsNameService(carGoodsName);
                good.setGoodsCount(good.getGoodsCount() + buyCount);
                try {
                    service.AddGoodsCountService(good);
                } catch (UpdateErrorException e) {
                    e.printStackTrace();
                }
                break;
            }
        }
        //更新购物车的信息
        //删除购物车中的商品的时候，商品的总价格是需要改变的
        double money = 0;
        for (int i = 0; i &lt; carGoodsList.size(); i++) {
            double carGoodsPrice = carGoodsList.get(i).getCarGoodsPrice();
            int buyCount = carGoodsList.get(i).getBuyCount();
            money += carGoodsPrice * buyCount;
        }


        request.setAttribute("money",money);
        request.getRequestDispatcher("/shopcar.jsp").forward(request,response);


    }
}
</code></pre> 
<p>JudgeCarServlet.java(此处主要用于AJAX异步请求判断购物车状态,具体实现可以参考shoplist.jsp)</p> 
<pre><code class="language-java">package edu.pdsu.shop.servlet;

import edu.pdsu.shop.pojo.CarGoods;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

/**
 * 使用Ajax请求判断购物车是否为空
 *      如果为空想前端响应为空的信息（“购物车为空”）
 */
@WebServlet("/judgecar")
public class JudgeCarServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        HttpSession session = request.getSession();
        List&lt;CarGoods&gt; carGoodsList = (List&lt;CarGoods&gt;)session.getAttribute("carGoodsList");
        if(carGoodsList.isEmpty()){
            out.print("购物车为空");
        }
    }
}
</code></pre> 
<p>以上大致为项目主要的内容,感谢阅读,希望能帮到大家</p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23318374044534cc73bc6fd56a7c780f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">抖音自动私信Auto.js脚本源码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51126c0ba1c4135da9251526fd05dbf8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用pe系统 修复引导</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>