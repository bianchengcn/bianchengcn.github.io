<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring MVC Controller与jquery ajax请求处理json - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring MVC Controller与jquery ajax请求处理json" />
<meta property="og:description" content="在用 spring mvc 写应用的时候发现jquery传递的【json数组对象】参数后台接收不到，多订单的处理，ajax请求： Java代码 var cmd = {orders:[{&#34;storeId&#34;:&#34;0a1&#34;, &#34;address&#34;:&#34;西斗门路2号&#34;, &#34;goods&#34;:[{&#34;goodsId&#34;:&#34;1&#34;}, {&#34;goodsId&#34;:&#34;2&#34;}, {&#34;goodsId&#34;:&#34;3&#34;}]},{&#34;storeId&#34;:&#34;0a1&#34;, &#34;address&#34;:&#34;西斗门路2号&#34;, &#34;goods&#34;:[{&#34;goodsId&#34;:&#34;4&#34;}, {&#34;goodsId&#34;:&#34;4&#34;}, {&#34;goodsId&#34;:&#34;5&#34;}]}]} $.ajax({ url : url, type : &#34;POST&#34;, datatype:&#34;json&#34;, data : cmd, success : function(data, stats) { if (stats == &#34;success&#34;) { // window.location.href=&#34;/yc&#34; } }, error : function(data) { alert(&#34;请求失败&#34;); } }); 开始如何传后台用 @RequestParam 去接收如何都接不到，分析下请求头，原来是json格式没转换 Java代码 Origin:http://localhost Referer:http://localhost/test/myorder User-Agent:Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1 X-Requested-With:XMLHttpRequest Form Dataview URL encoded orders[0][storeId]:0a1 orders[0][address]:西斗门路2号 orders[0][goods][0][goodsId]:1 orders[0][goods][1][goodsId]:2 orders[0][goods][2][goodsId]:3 orders[1][storeId]:0a1 orders[1][address]:西斗门路2号 orders[1][goods][0][goodsId]:4 orders[1][goods][1][goodsId]:4 orders[1][goods][2][goodsId]:5 Response Headersview source Content-Length:1051 Content-Type:text/html;charset=utf-8 Date:Mon, 26 Nov 2012 16:10:07 GMT Server:Apache-Coyote/1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/89bfa10b543103ed9564b61bb915d2d3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-06-11T16:21:50+08:00" />
<meta property="article:modified_time" content="2014-06-11T16:21:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring MVC Controller与jquery ajax请求处理json</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">在用 spring mvc 写应用的时候发现jquery传递的【json数组对象】参数后台接收不到，多订单的处理，ajax请求：</span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<div class="dp-highlighter" id="" style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.200000762939453px"> 
 <div class="bar"> 
  <div class="tools" style="padding:3px; margin:0px; font-weight:bold">
    Java代码   
   <a target="_blank" href="http://what-is-javascript.iteye.com/blog/1735691" rel="nofollow noopener noreferrer" title="收藏这段代码" style="color:rgb(16,138,198)"><img class="star" src="https://images2.imgbox.com/5b/d0/nKB9lbtl_o.png" alt="收藏代码" style="border:0px"></a> 
  </div> 
 </div> 
 <ol start="1" class="dp-j" style="font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)"><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">var cmd =  {orders:[{<!-- --><span class="string" style="color:blue">"storeId"</span>:<span class="string" style="color:blue">"0a1"</span>, <span class="string" style="color:blue">"address"</span>:<span class="string" style="color:blue">"西斗门路2号"</span>, <span class="string" style="color:blue">"goods"</span>:[{<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"1"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"2"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"3"</span>}]},{<!-- --><span class="string" style="color:blue">"storeId"</span>:<span class="string" style="color:blue">"0a1"</span>, <span class="string" style="color:blue">"address"</span>:<span class="string" style="color:blue">"西斗门路2号"</span>, <span class="string" style="color:blue">"goods"</span>:[{<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"4"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"4"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"5"</span>}]}]}  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">              </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">$.ajax({  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                url : url,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                type : <span class="string" style="color:blue">"POST"</span>,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                datatype:<span class="string" style="color:blue">"json"</span>,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                data : cmd,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                success : function(data, stats) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                    <span class="keyword" style="color:rgb(127,0,85); font-weight:bold">if</span> (stats == <span class="string" style="color:blue">"success"</span>) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                      <span class="comment" style="color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px">//   window.location.href="/yc"</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                    }  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                },  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                error : function(data) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                    alert(<span class="string" style="color:blue">"请求失败"</span>);  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                }  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">            });  </span></li></ol> 
</div> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">开始如何传后台用 @RequestParam 去接收如何都接不到，分析下请求头，原来是json格式没转换</span> 
<div class="dp-highlighter" id="" style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.200000762939453px"> 
 <div class="bar"> 
  <div class="tools" style="padding:3px; margin:0px; font-weight:bold">
    Java代码   
   <a target="_blank" href="http://what-is-javascript.iteye.com/blog/1735691" rel="nofollow noopener noreferrer" title="收藏这段代码" style="color:rgb(16,138,198)"><img class="star" src="https://images2.imgbox.com/08/e7/aD7Vlvko_o.png" alt="收藏代码" style="border:0px"></a> 
  </div> 
 </div> 
 <ol start="1" class="dp-j" style="font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)"><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Origin:http:<span class="comment" style="color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px">//localhost</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Referer:http:<span class="comment" style="color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px">//localhost/test/myorder</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">User-Agent:Mozilla/<span class="number" style="color:rgb(192,0,0)">5.0</span> (Windows NT <span class="number" style="color:rgb(192,0,0)">6.1</span>) AppleWebKit/<span class="number" style="color:rgb(192,0,0)">537.1</span> (KHTML, like Gecko) Chrome/<span class="number" style="color:rgb(192,0,0)">21.0</span>.<span class="number" style="color:rgb(192,0,0)">1180.89</span> Safari/<span class="number" style="color:rgb(192,0,0)">537.1</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">X-Requested-With:XMLHttpRequest  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Form Dataview URL encoded  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">0</span>][storeId]:0a1  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">0</span>][address]:西斗门路<span class="number" style="color:rgb(192,0,0)">2</span>号  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">0</span>][goods][<span class="number" style="color:rgb(192,0,0)">0</span>][goodsId]:<span class="number" style="color:rgb(192,0,0)">1</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">0</span>][goods][<span class="number" style="color:rgb(192,0,0)">1</span>][goodsId]:<span class="number" style="color:rgb(192,0,0)">2</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">0</span>][goods][<span class="number" style="color:rgb(192,0,0)">2</span>][goodsId]:<span class="number" style="color:rgb(192,0,0)">3</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">1</span>][storeId]:0a1  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">1</span>][address]:西斗门路<span class="number" style="color:rgb(192,0,0)">2</span>号  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">1</span>][goods][<span class="number" style="color:rgb(192,0,0)">0</span>][goodsId]:<span class="number" style="color:rgb(192,0,0)">4</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">1</span>][goods][<span class="number" style="color:rgb(192,0,0)">1</span>][goodsId]:<span class="number" style="color:rgb(192,0,0)">4</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">orders[<span class="number" style="color:rgb(192,0,0)">1</span>][goods][<span class="number" style="color:rgb(192,0,0)">2</span>][goodsId]:<span class="number" style="color:rgb(192,0,0)">5</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Response Headersview source  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Content-Length:<span class="number" style="color:rgb(192,0,0)">1051</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Content-Type:text/html;charset=utf-<span class="number" style="color:rgb(192,0,0)">8</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Date:Mon, <span class="number" style="color:rgb(192,0,0)">26</span> Nov <span class="number" style="color:rgb(192,0,0)">2012</span> <span class="number" style="color:rgb(192,0,0)">16</span>:<span class="number" style="color:rgb(192,0,0)">10</span>:<span class="number" style="color:rgb(192,0,0)">07</span> GMT  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">Server:Apache-Coyote/<span class="number" style="color:rgb(192,0,0)">1.1</span>  </span></li></ol> 
</div> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">通过观察，orders[0][storeId]:0a1 </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">orders[0][address]:西斗门路2号 </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">orders[0][goods][0][goodsId]:1 变成了多维数组的格式传递，没有按json对象的方式传递（原以为 jquery会自动转的，可惜我想多了，所以出现了乌龙）。 </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">下了个jquery的json插件，jquery.json-2.4.js 转了下json；但是问题又来了，传的格式正确但是后台还是接不到，打印了下request.getParameterMap(),参数按json格式传进来，但是接的方式又出现了问题，用string接肯定不行，String数组接也接不到，List也接不到，网上查查相关Controller的接收json对象的方式，需要用@RequestBody来进行接收，为了方便干脆把 orders去掉 直接用json数组</span> 
<div class="dp-highlighter" id="" style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.200000762939453px"> 
 <div class="bar"> 
  <div class="tools" style="padding:3px; margin:0px; font-weight:bold">
    Javascript代码   
   <a target="_blank" href="http://what-is-javascript.iteye.com/blog/1735691" rel="nofollow noopener noreferrer" title="收藏这段代码" style="color:rgb(16,138,198)"><img class="star" src="https://images2.imgbox.com/8b/0e/3ssjgT6O_o.png" alt="收藏代码" style="border:0px"></a> 
  </div> 
 </div> 
 <ol start="1" class="dp-c" style="font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)"><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black"><span class="keyword" style="color:rgb(127,0,85); font-weight:bold">var</span> cmd =  [{<!-- --><span class="string" style="color:blue">"storeId"</span>:<span class="string" style="color:blue">"0a1"</span>, <span class="string" style="color:blue">"address"</span>:<span class="string" style="color:blue">"西斗门路2号"</span>, <span class="string" style="color:blue">"goods"</span>:[{<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"1"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"2"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"3"</span>}]},{<!-- --><span class="string" style="color:blue">"storeId"</span>:<span class="string" style="color:blue">"0a1"</span>, <span class="string" style="color:blue">"address"</span>:<span class="string" style="color:blue">"西斗门路2号"</span>, <span class="string" style="color:blue">"goods"</span>:[{<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"4"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"4"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"5"</span>}]}]  </span></li></ol> 
</div> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">后台用</span> 
<div class="dp-highlighter" id="" style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.200000762939453px"> 
 <div class="bar"> 
  <div class="tools" style="padding:3px; margin:0px; font-weight:bold">
    Java代码   
   <a target="_blank" href="http://what-is-javascript.iteye.com/blog/1735691" rel="nofollow noopener noreferrer" title="收藏这段代码" style="color:rgb(16,138,198)"><img class="star" src="https://images2.imgbox.com/7f/4a/iUmmwEmV_o.png" alt="收藏代码" style="border:0px"></a> 
  </div> 
 </div> 
 <ol start="1" class="dp-j" style="font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)"><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">(<span class="annotation" style="color:rgb(100,100,100)">@RequestBody</span> List orders)  </span></li></ol> 
</div> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">这种方法来接 </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">检查下参数写法，应该没错，测试之后还是有问题 报了这样一个错误： </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px; color:red">POST http://localhost/test/order 415 (Unsupported Media Type)</span> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 这个问题应该是前台请求过程中没有指明contentType，ajax中加上contentType: "application/json; charset=utf-8"，再测试，果然可以了。完整代码如下：</span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">ajax： </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<div class="dp-highlighter" id="" style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.200000762939453px"> 
 <div class="bar"> 
  <div class="tools" style="padding:3px; margin:0px; font-weight:bold">
    Javascript代码   
   <a target="_blank" href="http://what-is-javascript.iteye.com/blog/1735691" rel="nofollow noopener noreferrer" title="收藏这段代码" style="color:rgb(16,138,198)"><img class="star" src="https://images2.imgbox.com/03/9b/pjS8PknJ_o.png" alt="收藏代码" style="border:0px"></a> 
  </div> 
 </div> 
 <ol start="1" class="dp-c" style="font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)"><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black"><span class="keyword" style="color:rgb(127,0,85); font-weight:bold">var</span> cmd =  [{<!-- --><span class="string" style="color:blue">"storeId"</span>:<span class="string" style="color:blue">"0a1"</span>, <span class="string" style="color:blue">"address"</span>:<span class="string" style="color:blue">"西斗门路2号"</span>, <span class="string" style="color:blue">"goods"</span>:[{<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"1"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"2"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"3"</span>}]},{<!-- --><span class="string" style="color:blue">"storeId"</span>:<span class="string" style="color:blue">"0a1"</span>, <span class="string" style="color:blue">"address"</span>:<span class="string" style="color:blue">"西斗门路2号"</span>, <span class="string" style="color:blue">"goods"</span>:[{<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"4"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"4"</span>}, {<!-- --><span class="string" style="color:blue">"goodsId"</span>:<span class="string" style="color:blue">"5"</span>}]}]  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">              </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">$.ajax({  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                url : url,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                type : <span class="string" style="color:blue">"POST"</span>,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                datatype:<span class="string" style="color:blue">"json"</span>,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                         contentType: <span class="string" style="color:blue">"application/json; charset=utf-8"</span>,  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                data : $toJSON(cmd),  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                success : <span class="keyword" style="color:rgb(127,0,85); font-weight:bold">function</span>(data, stats) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                    <span class="keyword" style="color:rgb(127,0,85); font-weight:bold">if</span> (stats == <span class="string" style="color:blue">"success"</span>) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                      <span class="comment" style="color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px">//   window.location.href="/yc"</span>  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                    }  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                },  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                error : <span class="keyword" style="color:rgb(127,0,85); font-weight:bold">function</span>(data) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                    alert(<span class="string" style="color:blue">"请求失败"</span>);  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">                }  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">            });  </span></li></ol> 
</div> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<span style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px">Controller method: </span> 
<br style="font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.200000762939453px"> 
<div class="dp-highlighter" id="" style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.200000762939453px"> 
 <div class="bar"> 
  <div class="tools" style="padding:3px; margin:0px; font-weight:bold">
    Java代码   
   <a target="_blank" href="http://what-is-javascript.iteye.com/blog/1735691" rel="nofollow noopener noreferrer" title="收藏这段代码" style="color:rgb(16,138,198)"><img class="star" src="https://images2.imgbox.com/7f/f4/Yk4wiONO_o.png" alt="收藏代码" style="border:0px"></a> 
  </div> 
 </div> 
 <ol start="1" class="dp-j" style="font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)"><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black"><span class="annotation" style="color:rgb(100,100,100)">@RequestMapping</span>(value = <span class="string" style="color:blue">"/order"</span>, method = RequestMethod.POST)  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black"> <span class="keyword" style="color:rgb(127,0,85); font-weight:bold">public</span>  ModelAndView order(<span class="annotation" style="color:rgb(100,100,100)">@RequestBody</span> String orders) {  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">        System.out.println(<span class="string" style="color:blue">"orders size:"</span> + orders.size());  </span></li><li style="font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); background-color:rgb(250,250,250); line-height:18px"> <span style="color:black">}  </span></li></ol> 
</div> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7300394a68822dbc940a06e7c373d1f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android截图命令screencap</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62fcf119dfe122c7e69d05088595acff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">输入一个链表的头结点，从尾到头反过来输出每个结点的值</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>