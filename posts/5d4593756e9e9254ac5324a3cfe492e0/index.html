<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>reGeorg正向代理 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="reGeorg正向代理" />
<meta property="og:description" content="原理
reGeorg主要是把内网服务器的端口通过 http/https 隧道转发到本机，形成一个隧道。用于目标服务器在内网或做了端口策略的情况下连接目标服务器内部开放端口。它利用 webshell 建立一个 socks 代理进行内网穿透，服务器必须支持 aspx、php 或 jsp 这些 web 程序中的一种。
reGeorg由服务端和客户端两部分组成。服务端有php、aspx、asph、jsp、node.js等多个版本，客户端则由python编写。其工作原理可简单描述为python客户端在本地监听一个端口，提供socks服务，并将数据通过http/https协议发送到服务端上，并从服务端上用socket实现转发
我们所使用的是客户端，在目标服务器上getshell后，上传的是对应的服务端。
下载地址
GitHub - sensepost/reGeorg: The successor to reDuh, pwn a bastion webserver and create SOCKS proxies through the DMZ. Pivot and pwn.
测试环境
攻击机:
python2.7(reGeorg不支持python3)
安装对应的库 pip install urllib3
跳板机: php 5.2.17
开始测试
环境配置好之后，使用reGeorg-master&gt;python reGeorgSocksProxy.py -h查看能否运行
接下来需要在跳板机上面安装对应的服务端，上传tunnel.php或tunnel.nosocket.php
由于已经成功getshell并且跳板机的环境是php，因此可以直接上传服务端
访问跳板机，出现这一行字说明已经成功上传并且解析，然后使用客户端去连接服务端，并且建立一个提供socks代理的端口
这里设置的端口就是提供socks服务的端口，ip是我们攻击机的ip吗，下面出现红框的内容就是说明连接成功
然后我们使用代理工具去连接
SocksCap64
然后点击这里进行测试连接，连接成功
如果想让其他工具使用代理就在这里面添加
Proxifier
添加代理服务器
配置代理规则
添加代理规则 应用程序：选择需要使用socks代理的程序，这里指定的是超级弱口令工具exe，其他程序请自行浏览添加 目标主机：如有内网环境，可选择添加其他网卡网段如 192.168.52.*，默认为全部 目标端口：如有需要，可以指定，默认为任意，随机选择端口 动作：proxy socks5 127." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/5d4593756e9e9254ac5324a3cfe492e0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-21T18:37:19+08:00" />
<meta property="article:modified_time" content="2023-03-21T18:37:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">reGeorg正向代理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p><strong>原理</strong><br> reGeorg主要是把内网服务器的端口通过 http/https 隧道转发到本机，形成一个隧道。用于目标服务器在内网或做了端口策略的情况下连接目标服务器内部开放端口。它利用 webshell 建立一个 socks 代理进行内网穿透，服务器必须支持 aspx、php 或 jsp 这些 web 程序中的一种。<br> reGeorg由服务端和客户端两部分组成。服务端有php、aspx、asph、jsp、node.js等多个版本，客户端则由python编写。其工作原理可简单描述为python客户端在本地监听一个端口，提供socks服务，并将数据通过http/https协议发送到服务端上，并从服务端上用socket实现转发<br> 我们所使用的是客户端，在目标服务器上getshell后，上传的是对应的服务端。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/86/cd/IrZRfC4A_o.png"></p> 
<p><br> 下载地址<br><a href="https://github.com/sensepost/reGeorg" title="GitHub - sensepost/reGeorg: The successor to reDuh, pwn a bastion webserver and create SOCKS proxies through the DMZ. Pivot and pwn.">GitHub - sensepost/reGeorg: The successor to reDuh, pwn a bastion webserver and create SOCKS proxies through the DMZ. Pivot and pwn.</a><br> 测试环境<br> 攻击机:<br> python2.7(reGeorg不支持python3)<br> 安装对应的库 pip install urllib3<br> 跳板机: php 5.2.17<br> 开始测试<br> 环境配置好之后，使用reGeorg-master&gt;python reGeorgSocksProxy.py -h查看能否运行</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c6/fc/KFP4dHjB_o.png"></p> 
<p><br> 接下来需要在跳板机上面安装对应的服务端，上传tunnel.php或tunnel.nosocket.php<br> 由于已经成功getshell并且跳板机的环境是php，因此可以直接上传服务端<br><br> 访问跳板机，出现这一行字说明已经成功上传并且解析，然后使用客户端去连接服务端，并且建立一个提供socks代理的端口</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/30/fc/9ZaS9vgE_o.png"></p> 
<p><br> 这里设置的端口就是提供socks服务的端口，ip是我们攻击机的ip吗，下面出现红框的内容就是说明连接成功</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f0/fb/YmEnBK3Y_o.png"></p> 
<p><br> 然后我们使用代理工具去连接<br> SocksCap64</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a9/ac/kJbCnopt_o.png"></p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e5/f2/NxK5wCYu_o.png"></p> 
<p><br> 然后点击这里进行测试连接，连接成功</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/fe/4f/9wSdKPEl_o.png"></p> 
<p><br> 如果想让其他工具使用代理就在这里面添加</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/2d/d2/Jh8Bu9k8_o.png"></p> 
<p><br> Proxifier<br> 添加代理服务器</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3b/89/7PQlwqzA_o.png"></p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a9/12/7irrJEzw_o.png"></p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/90/54/pubI7IIZ_o.png"></p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ea/6b/5wausQt0_o.png"></p> 
<p><br> 配置代理规则</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3f/37/EWnv1Lr0_o.png"></p> 
<p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/43/12/JDdq2FCc_o.png"></p> 
<pre><code class="hljs">添加代理规则
应用程序：选择需要使用socks代理的程序，这里指定的是超级弱口令工具exe，其他程序请自行浏览添加
目标主机：如有内网环境，可选择添加其他网卡网段如 192.168.52.*，默认为全部
目标端口：如有需要，可以指定，默认为任意，随机选择端口
动作：proxy socks5 127.0.0.1 （使用socks代理访问）
Direct（不使用代理访问，直接访问）
block（拒绝访问）</code></pre> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/02/cc/pOtOOyY3_o.png"></p> 
<p id="u0dfc32b8">C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Accessories</p> 
<p id="u14a4bf50">使用其他软件可以直接右键，然后找到Proxifier打开，直接进行代理</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/85/52/STFmHsMg_o.png"></p> 
<h2 id="Y4QZb"></h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d822c44ca4194a5e0cce27c97b434895/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决Navicat无法连接数据库 数据库无法外联</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49306d821f4a96de9189990ebff34516/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Web开发课程实验（一）：使用ASP的基本数据交互</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>