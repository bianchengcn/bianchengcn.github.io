<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>文件拓展服务器,WebDAV 扩展 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="文件拓展服务器,WebDAV 扩展" />
<meta property="og:description" content="WebDAV扩展
Seafile WebDAV Server(SeafDAV)在Seafile Server 2.1.0版本中被加入.
在下面的维基中, 我们假设你将Seafile安装到/data/haiwen目录下。
SeafDAV配置
SeafDAV配置文件是/data/haiwen/conf/seafdav.conf. 如果它还没有被创建，你可以自行创建它。
# 默认值是false。改为true来使用SeafDAV server。
enabled = true
port = 8080
# 如果fastcgi将被使用则更改fastcgi的值为true。
fastcgi = false
# 如果你将seafdav部署到nginx/apache，你需要更改“share_name”的值。
share_name = /
每次配置文件被修改后，你需要重启Seafile服务器使之生效。
示例配置 1: No nginx/apache
你的WebDAV客户端将在地址[http://example.com:8080](http://example.com:8080)访问WebDAV服务器。
enabled = true
port = 8080
fastcgi = false
share_name = /
示例配置 2: With Nginx/Apache
你的WebDAV客户端将在地址[http://example.com/seafdav](http://example.com/seafdav)访问WebDAV服务器。
enabled = true
port = 8080
fastcgi = true
share_name = /seafdav
在上面的配置中，&#34;&#34;&#34;share_name&#34;&#34;&#34;的值被改为&#34;&#34;&#34;/seafdav&#34;&#34;&#34;, 它是你指定给seafdav服务器的地址后缀。
Nginx 无 HTTPS" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/9cf0557305d12f96b0272e3c8a3c58da/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-08T00:17:41+08:00" />
<meta property="article:modified_time" content="2021-08-08T00:17:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">文件拓展服务器,WebDAV 扩展</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>WebDAV扩展</p> 
 <p>Seafile WebDAV Server(SeafDAV)在Seafile Server 2.1.0版本中被加入.</p> 
 <p>在下面的维基中, 我们假设你将Seafile安装到/data/haiwen目录下。</p> 
 <p>SeafDAV配置</p> 
 <p>SeafDAV配置文件是/data/haiwen/conf/seafdav.conf. 如果它还没有被创建，你可以自行创建它。</p> 
 <p># 默认值是false。改为true来使用SeafDAV server。</p> 
 <p>enabled = true</p> 
 <p>port = 8080</p> 
 <p># 如果fastcgi将被使用则更改fastcgi的值为true。</p> 
 <p>fastcgi = false</p> 
 <p># 如果你将seafdav部署到nginx/apache，你需要更改“share_name”的值。</p> 
 <p>share_name = /</p> 
 <p>每次配置文件被修改后，你需要重启Seafile服务器使之生效。</p> 
 <p>示例配置 1: No nginx/apache</p> 
 <p>你的WebDAV客户端将在地址[http://example.com:8080](http://example.com:8080)访问WebDAV服务器。</p> 
 <p>enabled = true</p> 
 <p>port = 8080</p> 
 <p>fastcgi = false</p> 
 <p>share_name = /</p> 
 <p>示例配置 2: With Nginx/Apache</p> 
 <p>你的WebDAV客户端将在地址[http://example.com/seafdav](http://example.com/seafdav)访问WebDAV服务器。</p> 
 <p>enabled = true</p> 
 <p>port = 8080</p> 
 <p>fastcgi = true</p> 
 <p>share_name = /seafdav</p> 
 <p>在上面的配置中，"""share_name"""的值被改为"""/seafdav""", 它是你指定给seafdav服务器的地址后缀。</p> 
 <p>Nginx 无 HTTPS</p> 
 <p>相应的Nginx配置如下 (无 https):</p> 
 <p>fastcgi_pass 127.0.0.1:8080;</p> 
 <p>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</p> 
 <p>fastcgi_param PATH_INFO $fastcgi_script_name;</p> 
 <p>fastcgi_param SERVER_PROTOCOL $server_protocol;</p> 
 <p>fastcgi_param QUERY_STRING $query_string;</p> 
 <p>fastcgi_param REQUEST_METHOD $request_method;</p> 
 <p>fastcgi_param CONTENT_TYPE $content_type;</p> 
 <p>fastcgi_param CONTENT_LENGTH $content_length;</p> 
 <p>fastcgi_param SERVER_ADDR $server_addr;</p> 
 <p>fastcgi_param SERVER_PORT $server_port;</p> 
 <p>fastcgi_param SERVER_NAME $server_name;</p> 
 <p>client_max_body_size 0;</p> 
 <p>access_log /var/log/nginx/seafdav.access.log;</p> 
 <p>error_log /var/log/nginx/seafdav.error.log;</p> 
 <p>}</p> 
 <p>Nginx 有 HTTPS</p> 
 <p>Nginx配置为https:</p> 
 <p>fastcgi_pass 127.0.0.1:8080;</p> 
 <p>fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</p> 
 <p>fastcgi_param PATH_INFO $fastcgi_script_name;</p> 
 <p>fastcgi_param SERVER_PROTOCOL $server_protocol;</p> 
 <p>fastcgi_param QUERY_STRING $query_string;</p> 
 <p>fastcgi_param REQUEST_METHOD $request_method;</p> 
 <p>fastcgi_param CONTENT_TYPE $content_type;</p> 
 <p>fastcgi_param CONTENT_LENGTH $content_length;</p> 
 <p>fastcgi_param SERVER_ADDR $server_addr;</p> 
 <p>fastcgi_param SERVER_PORT $server_port;</p> 
 <p>fastcgi_param SERVER_NAME $server_name;</p> 
 <p>client_max_body_size 0;</p> 
 <p>fastcgi_param HTTPS on;</p> 
 <p>access_log /var/log/nginx/seafdav.access.log;</p> 
 <p>error_log /var/log/nginx/seafdav.error.log;</p> 
 <p>}</p> 
 <p>Apache</p> 
 <p>首先编辑 apache2.conf 文件, 添加如下这行到文件结尾(或者根据你的Linux发行版将其添加到 httpd.conf):</p> 
 <p>注意, /var/www/seafdav.fcgi 仅仅只是一个占位符, 实际在你的系统并不需要有此文件。</p> 
 <p>第二, 修改Apache配置文件 (site-enabled/000-default):</p> 
 <p>Apache 无 HTTPS</p> 
 <p>根据你的Apache配置当你[将要部署 Seafile 和 Apache|已经部署 Seafile 和 Apache], 加入Seafdav的相关配置:</p> 
 <p>ServerName www.myseafile.com</p> 
 <p>DocumentRoot /var/www</p> 
 <p>Alias /media /home/user/haiwen/seafile-server/seahub/media</p> 
 <p>RewriteEngine On</p> 
 <p>#</p> 
 <p># seafile fileserver</p> 
 <p>#</p> 
 <p>ProxyPass /seafhttp http://127.0.0.1:8082</p> 
 <p>ProxyPassReverse /seafhttp http://127.0.0.1:8082</p> 
 <p>RewriteRule ^/seafhttp - [QSA,L]</p> 
 <p>#</p> 
 <p># seafile webdav</p> 
 <p>#</p> 
 <p>RewriteCond %{HTTP:Authorization} (.+)</p> 
 <p>RewriteRule ^(/seafdav.*)$ /seafdav.fcgi$1 [QSA,L,e=HTTP_AUTHORIZATION:%1]</p> 
 <p>RewriteRule ^(/seafdav.*)$ /seafdav.fcgi$1 [QSA,L]</p> 
 <p>#</p> 
 <p># seahub</p> 
 <p>#</p> 
 <p>RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]</p> 
 <p>RewriteCond %{REQUEST_FILENAME} !-f</p> 
 <p>RewriteRule ^(.*)$ /seahub.fcgi$1 [QSA,L,E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]</p> 
 <p>Apache 有 HTTPS</p> 
 <p>根据你的apache配置当你配置Seafile网站和Apache并启用Https, 加入seafdav的相关配置:</p> 
 <p>ServerName www.myseafile.com</p> 
 <p>DocumentRoot /var/www</p> 
 <p>Alias /media /home/user/haiwen/seafile-server/seahub/media</p> 
 <p>SSLEngine On</p> 
 <p>SSLCertificateFile /etc/ssl/cacert.pem</p> 
 <p>SSLCertificateKeyFile /etc/ssl/privkey.pem</p> 
 <p>RewriteEngine On</p> 
 <p>#</p> 
 <p># seafile fileserver</p> 
 <p>#</p> 
 <p>ProxyPass /seafhttp http://127.0.0.1:8082</p> 
 <p>ProxyPassReverse /seafhttp http://127.0.0.1:8082</p> 
 <p>RewriteRule ^/seafhttp - [QSA,L]</p> 
 <p>#</p> 
 <p># seafile webdav</p> 
 <p>#</p> 
 <p>RewriteCond %{HTTP:Authorization} (.+)</p> 
 <p>RewriteRule ^(/seafdav.*)$ /seafdav.fcgi$1 [QSA,L,e=HTTP_AUTHORIZATION:%1]</p> 
 <p>RewriteRule ^(/seafdav.*)$ /seafdav.fcgi$1 [QSA,L]</p> 
 <p>#</p> 
 <p># seahub</p> 
 <p>#</p> 
 <p>RewriteRule ^/(media.*)$ /$1 [QSA,L,PT]</p> 
 <p>RewriteCond %{REQUEST_FILENAME} !-f</p> 
 <p>RewriteRule ^(.*)$ /seahub.fcgi$1 [QSA,L,E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]</p> 
 <p>关于客户端的注意事项</p> 
 <p>Windows</p> 
 <p>在Windows平台，我们推荐使用webdav客户端软件例如Cyberduck或BitKinex.webdav对于Windows浏览器的支持实现并不是十分可用，因为：</p> 
 <p>Windows 浏览器需要利用HTTP数字认证。但是由于Seafile在服务器端不存储纯文本密码，所以它不支持这个特性。HTTP基本认证只被HTTPS支持(这是合理的)。但是浏览器不支持自我签署的证书。</p> 
 <p>结论就是如果你有一个合法的ssl证书，你应该能过通过Windows浏览器来访问seafdav。否则你应该使用客户端软件。Windows XP被声明不支持HTTPS webdav.</p> 
 <p>Linux</p> 
 <p>在Linux平台你有更多的选择。你可以利用文件管理器例如Nautilus来连接webdav服务器，或者在命令行使用davfs2。</p> 
 <p>使用davfs2</p> 
 <p>sudo mount -t davfs -o uid= https://example.com/seafdav /media/seafdav/</p> 
 <p>-o选项设置挂载目录的拥有者为，使得非root用户拥有可写权限。</p> 
 <p>我们建议对于davfs2，禁用锁操作。你需要编辑/etc/davfs2/davfs2.conf</p> 
 <p>Mac OS X</p> 
 <p>Finder对于WebDAV的支持不稳定而且较慢. 所以我们建议使用webdav客户端软件如Cyberduck.</p> 
 <p>常见问题</p> 
 <p>客户端无法连接seafdav服务器</p> 
 <p>默认, seafdav是未被启用的。检查你是否在seafdav.conf中设置enabled = true。 如果没有，更改配置文件并重启seafle服务器。</p> 
 <p>客户端得到"Error: 404 Not Found"错误</p> 
 <p>如果你将SeafDAV部署在Nginx/Apache, 请确保像上面的配置文件一样更改share_name的值。重启Seafile服务器后重新测试。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8fe111b423dc2755d3635c71ce663bbd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">链接中未包含所含的服务器信息,链接服务器不包含表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/822c54d640127ced86b615e1fae80d12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">全球虚拟化服务器排行榜,全球云服务器厂商排名</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>