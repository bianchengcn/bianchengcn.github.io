<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL之DML操作 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL之DML操作" />
<meta property="og:description" content="DML是指数据操作语言，英文全称是Data Manipulation Language，用来对数据库中表的记录进行更新。 有关数据表的DML操作： INSERT INTO
DELETE、TRUNCATE
UPDATE
SELECT
条件查询
查询排序
聚合函数
分组查询
1.1 INSERT语句 INSERT INTO 表名 [字段列表] VALUES (值列表); 默认情况下，一次插入操作只插入一行 一次性插入多条记录： INSERT INTO table [(column [, column...])] VALUES(value [, value...])，(value [, value...]) 如果为每列都指定值，则表名后不需列出插入的列名 如果不想在表名后列出列名，可以为那些无法指定的值插入null 可以使用如下方式一次插入多行 INSERT INTO 表名 [字段列表] SELECT 值列表 UNION 值列表 UNION 值列表....; 语句——可以非常复杂。 如果需要插入其他特殊字符，应该采用\转义字符做前缀 1.2 REPLACE语句 replace语句的语法格式有三种语法格式。 语法格式1：replace into 表名 [（字段列表）] values （值列表） 语法格式2： replace [into] 目标表名[(字段列表1) select (字段列表2) from 源表 where 条件表达式 语法格式3： replace [into] 表名 set 字段1=值1, 字段2=值2 REPLACE与INSERT语句区别： replace语句的功能与insert语句的功能基本相同，不同之处在于：使用replace语句向表插入新记录时，如果新记录的主键值或者唯一性约束的字段值与已有记录相同，则已有记录先被删除（注意：已有记录删除时也不能违背外键约束条件），然后再插入新记录。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/522a610c44257ce0cf0d5910732604bd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-31T15:25:26+08:00" />
<meta property="article:modified_time" content="2024-01-31T15:25:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL之DML操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h6><strong>DML是指数据操作语言，英文全称是Data</strong> Manipulation Language，用来对数据库中表的记录进行更新。</h6> 
<h6>有关数据表的DML操作：</h6> 
<p>INSERT INTO</p> 
<p>DELETE、TRUNCATE</p> 
<p>UPDATE</p> 
<p>SELECT</p> 
<p>条件查询</p> 
<p>查询排序</p> 
<p>聚合函数</p> 
<p>分组查询</p> 
<h3>1.1 INSERT语句</h3> 
<pre><code class="language-sql">INSERT INTO 表名 [字段列表] VALUES (值列表);
默认情况下，一次插入操作只插入一行

一次性插入多条记录：
INSERT INTO table [(column [, column...])] 
	VALUES(value [, value...])，(value [, value...])
	
如果为每列都指定值，则表名后不需列出插入的列名
如果不想在表名后列出列名，可以为那些无法指定的值插入null
可以使用如下方式一次插入多行
	INSERT INTO 表名 [字段列表] SELECT 值列表 UNION 值列表 UNION 值列表....;
    语句——可以非常复杂。
	
如果需要插入其他特殊字符，应该采用\转义字符做前缀</code></pre> 
<h3>1.2 REPLACE语句</h3> 
<pre><code class="language-sql">replace语句的语法格式有三种语法格式。

语法格式1：replace into 表名 [（字段列表）] values （值列表）

语法格式2：
	replace [into] 目标表名[(字段列表1) select (字段列表2) from 源表 where 条件表达式
	
语法格式3：
	replace [into] 表名 set 字段1=值1, 字段2=值2</code></pre> 
<h5><strong>REPLACE与INSERT语句区别：</strong></h5> 
<p>replace语句的功能与insert语句的功能基本相同，不同之处在于：使用replace语句向表插入新记录时，如果新记录的<strong>主键值或者唯一性约束</strong>的字段值与已有记录相同，则已有记录先被删除（注意：已有记录删除时也不能违背外键约束条件），然后再插入新记录。</p> 
<p>使用replace的最大好处就是可以将delete和insert合二为一(效果相当于更新)，形成一个原子操作，这样就无需将delete操作与insert操作置于事务中了</p> 
<h3>1.3 UPDATE语句</h3> 
<pre><code class="language-sql">UPDATE 表名 SET
列名 = 新的值
[,列名 = 新的值,列名 = 新的值]
[WHERE 条件];</code></pre> 
<p>修改可以一次修改多行数据，修改的数据可用where子句限定，where子句里是一个条件表达式，只有符合该条件的行才会被修改。没有where子句意味着where字句的表达式值为true。也可以同时修改多列，多列的修改中间采用逗号(,)隔开。</p> 
<h3>1.4 delete和TRUNCATE语句</h3> 
<pre><code class="language-sql">DELETE FROM 表名 [WHERE 条件];
TRUNCATE FROM 表名 [WHERE 条件];</code></pre> 
<p>完全清空一个表。 DDL语句。</p> 
<h5><strong>DROP、TRUNCATE、DELETE的区别：</strong></h5> 
<p>delete：删除数据，保留表结构，可以回滚，如果数据量大，很慢</p> 
<p>truncate： 删除所有数据，保留表结构，不可以回滚，一次全部删除所有数据，速度相对很快</p> 
<p>drop： 删除数据和表结构,删除速度最快。</p> 
<h3>1.5 SELECT语句</h3> 
<h5>语法：</h5> 
<pre><code class="language-sql">SELECT 需要查询的列
FROM 表名 [,其余表]
[连接机制]
[WHERE 条件]
[GROUP BY 分组条件]
[ORDER BY 排序条件]
[LIMIT 区间条件];</code></pre> 
<h5>简单的SELLECT语句：</h5> 
<pre><code class="language-sql">SELECT {*, column [alias],...}
FROM table;

说明：
–SELECT列名列表。*表示所有列。
–FROM 提供数据源(表名/视图名)
–默认选择所有行</code></pre> 
<h5>SELECT语句中的算数表达式：</h5> 
<pre><code class="language-sql">对数值型数据列、变量、常量可以使用算数操作符创建表达式（+ - * /）
对日期型数据列、变量、常量可以使用部分算数操作符创建表达式（+ -）
运算符不仅可以在列和常量之间进行运算，也可以在多列之间进行运算。
	SELECT last_name, salary, salary*12
	FROM employees;
	
补充：+说明
-- MySQL的+默认只有一个功能：运算符
SELECT 100+80; # 结果为180
SELECT '123'+80; # 只要其中一个为数值，则试图将字符型转换成数值，转换成功做预算，结果为203
SELECT 'abc'+80; # 转换不成功，则字符型数值为0，结果为80
SELECT 'This'+'is'; # 转换不成功，结果为0
SELECT NULL+80; # 只要其中一个为NULL，则结果为NULL</code></pre> 
<h5>运算符的优先级：</h5> 
<p>乘法和除法的优先级高于加法和减法<br> 同级运算的顺序是从左到右<br> 表达式中使用括号可强行改变优先级的运算顺序</p> 
<h5>NULL值的使用：</h5> 
<p>空值是指不可用、未分配的值<br> 空值不等于零或空格<br> 任意类型都可以支持空值<br> 包括空值的任何算术表达式都等于空<br> 字符串和null进行连接运算，得到也是null.</p> 
<h5>安全等于&lt;=&gt;</h5> 
<p>1.可作为普通运算符的=<br> 2.也可以用于判断是否是NULL 如：where salary is NULL/(is not NULL) -&gt;where salary<br> &lt;=&gt;NULL</p> 
<h5>定义字段别名：</h5> 
<pre><code class="language-sql">改变列的标题头
用于表示计算结果的含义
作为列的别名
如果别名中使用特殊字符,或者是强制大小写敏感,或有空格时,都可以通过为别名添加加双引号实现。
    SELECT last_name as “姓名”, salary “薪水”
    FROM employees;</code></pre> 
<h5><strong>重复记录：</strong></h5> 
<pre><code class="language-sql">缺省情况下查询显示所有行,包括重复行
    SELECT department_id      部门id
    FROM employees;           员工表
    
使用DISTINCT关键字可从查询结果中清除重复行
    SELECT DISTINCT department_id
    FROM employees;</code></pre> 
<h3>1.6 多表关联查询</h3> 
<pre><code class="language-sql">1. inner join：代表选择的是两个表的交差部分。
 内连接就是表间的主键与外键相连，只取得键值一致的，可以获取双方表中的数据连接方式。语法如下：
 SELECT 列名1,列名2... FROM 表1 INNER JOIN 表2 ON 表1.外键=表2.主键 WhERE 条件语句;
 
2. left join：代表选择的是前面一个表的全部。
左连接是以左表为标准，只查询在左边表中存在的数据，当然需要两个表中的键值一致。语法如下：
SELECT 列名1 FROM 表1 LEFT OUTER JOIN 表2 ON 表1.外键=表2.主键 WhERE 条件语句;

3. right join：代表选择的是后面一个表的全部
同理，右连接将会以右边作为基准，进行检索。语法如下：
SELECT 列名1 FROM 表1 RIGHT OUTER JOIN 表2 ON 表1.外键=表2.主键 WhERE 条件语句;</code></pre> 
<h5>联合查询</h5> 
<p>说明:一般情况下,我们会将 IN 或者 OR 语句 改写成 UNION ALL,来提高性能<br> UNION   去重复<br> UNION ALL 不去重复</p> 
<h3>1.7 SQL函数</h3> 
<h5>聚合函数</h5> 
<p>聚合函数对一组值进行运算，并返回单个值。也叫组合函数。<br> COUNT(*|列名) 统计行数<br> AVG(数值类型列名) 平均值<br> SUM (数值类型列名) 求和<br> MAX(列名) 最大值<br> MIN(列名) 最小值<br> 除了COUNT()以外，聚合函数都会忽略NULL值。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/86d5b11fb2c07de3305df9a7b4c34220/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BEV感知（1）--BEV感知算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/831a5c70fc097d1e7fb09bb9480dc2e6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">单片机驱动多个ds18b20</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>