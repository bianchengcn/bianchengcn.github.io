<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python基础—读写模式 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python基础—读写模式" />
<meta property="og:description" content="一、数据持久化 问：为什么要数据持久化？ 持久化将程序数据在持久状态和瞬时状态转化的机制 将瞬时状态（内存中的数据，是不能永久保存）转换为持久数据（硬盘中的数据，能够长久保存） 持久化的应用是将内存中的对象存储在硬盘、数据库等位置 二、文本文件的读写模式 1. 使用Python打开一个文件：open方法 语法：open(参数1, 参数2, 参数3, …) 参数2：mode —— 文件打开的读写方式 注意：文件的读或者写不能同时进行 2. 文件打开的模式 w：只写，先清空内容再写入内容，如果文件不存在，先创建，再写入 a： 只写，直接在文件末尾追加写，如果文件不存在，先创建，再写入 r： 只读，如果文件不存在，报错 3. 打开文件以后操作文件的数据类型 t： 读写的数据类型必须是文本（text） b：读写的数据类型必须是二进制（bytes） 上述两种模式各选其一组合使用 例如：wt、 tw、 at、 ta、 rt、 tr等等 二进制文件（图片、音频、视频等）必须以b模式打开，文本文件等要用t模式打开 三、文本文件的写操作 1. open方法的使用 open方法用于打开一个文件并返回被打开的这个文件对象 open(参数1，参数2，参数3，…) 参数1：file —— 文件的路径以及文件名（文件路径分为相对路径和绝对路径，编程中仅仅使用相对路径） 参数2：mode —— 文件打开的读写模式 参数3：编码方式 —— encoding：一般将encoding写为utf-8，但是有些文件编码不是utf-8，而是gbk等编码 绝对路径：以盘符为参照物，对盘符来说文件的位置 相对路径：以某个文件为参照物，另一个文件的位置 3. 文本文件的写操作 ①打开一个文件，如果文件不存在，创建文件 file = open(&#39;./古诗.text&#39;, &#39;wt&#39;, encoding=&#39;utf-8&#39;) ②向打开的文本文件中写入内容 file.write(&#39;静夜思\n&#39;) file.write(&#39;唐.李白\n&#39;) str_1 = &#39;床前明月光，\n疑是地上霜，\n举头望明月，\n低头思故乡。\n&#39; file.write(&#39;str_1&#39;) ③关闭文件 file.close() 运行后系统生成一个古诗." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/df9b6b706bdeb4747578702be7f6bdfe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-29T17:58:25+08:00" />
<meta property="article:modified_time" content="2023-03-29T17:58:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python基础—读写模式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一、数据持久化</h2> 
<h3><a id="_1"></a>问：为什么要数据持久化？</h3> 
<h3><a id="_2"></a>持久化将程序数据在持久状态和瞬时状态转化的机制</h3> 
<h3><a id="_3"></a>将瞬时状态（内存中的数据，是不能永久保存）转换为持久数据（硬盘中的数据，能够长久保存）</h3> 
<h3><a id="_4"></a>持久化的应用是将内存中的对象存储在硬盘、数据库等位置</h3> 
<h2><a id="_5"></a>二、文本文件的读写模式</h2> 
<h3><a id="1_Pythonopen_6"></a>1. 使用Python打开一个文件：open方法</h3> 
<h3><a id="open1_2_3__7"></a>语法：open(参数1, 参数2, 参数3, …)</h3> 
<h3><a id="2mode___8"></a>参数2：mode —— 文件打开的读写方式</h3> 
<h3><a id="_9"></a>注意：文件的读或者写不能同时进行</h3> 
<h3><a id="2__10"></a>2. 文件打开的模式</h3> 
<h3><a id="w_11"></a>w：只写，先清空内容再写入内容，如果文件不存在，先创建，再写入</h3> 
<h3><a id="a__12"></a>a： 只写，直接在文件末尾追加写，如果文件不存在，先创建，再写入</h3> 
<h3><a id="r__13"></a>r： 只读，如果文件不存在，报错</h3> 
<h3><a id="3__14"></a>3. 打开文件以后操作文件的数据类型</h3> 
<h3><a id="t_text_15"></a>t： 读写的数据类型必须是文本（text）</h3> 
<h3><a id="bbytes_16"></a>b：读写的数据类型必须是二进制（bytes）</h3> 
<h3><a id="_17"></a>上述两种模式各选其一组合使用</h3> 
<h3><a id="wt_tw_at_ta_rt_tr_18"></a>例如：wt、 tw、 at、 ta、 rt、 tr等等</h3> 
<h3><a id="bt_19"></a>二进制文件（图片、音频、视频等）必须以b模式打开，文本文件等要用t模式打开</h3> 
<h2><a id="_20"></a>三、文本文件的写操作</h2> 
<h3><a id="1_open_21"></a>1. open方法的使用</h3> 
<h3><a id="open_22"></a>open方法用于打开一个文件并返回被打开的这个文件对象</h3> 
<h3><a id="open123_23"></a>open(参数1，参数2，参数3，…)</h3> 
<h3><a id="1file___24"></a>参数1：file —— 文件的路径以及文件名（文件路径分为相对路径和绝对路径，编程中仅仅使用相对路径）</h3> 
<h3><a id="2mode___25"></a>参数2：mode —— 文件打开的读写模式</h3> 
<h3><a id="3__encodingencodingutf8utf8gbk_26"></a>参数3：编码方式 —— encoding：一般将encoding写为utf-8，但是有些文件编码不是utf-8，而是gbk等编码</h3> 
<h3><a id="_27"></a>绝对路径：以盘符为参照物，对盘符来说文件的位置</h3> 
<h3><a id="_28"></a>相对路径：以某个文件为参照物，另一个文件的位置</h3> 
<h3><a id="3__29"></a>3. 文本文件的写操作</h3> 
<h3><a id="_30"></a>①打开一个文件，如果文件不存在，创建文件</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./古诗.text'</span><span class="token punctuation">,</span> <span class="token string">'wt'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_34"></a>②向打开的文本文件中写入内容</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'静夜思\n'</span><span class="token punctuation">)</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'唐.李白\n'</span><span class="token punctuation">)</span>
str_1 <span class="token operator">=</span> <span class="token string">'床前明月光，\n疑是地上霜，\n举头望明月，\n低头思故乡。\n'</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'str_1'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_41"></a>③关闭文件</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="text_45"></a>运行后系统生成一个古诗.text的文件，打开如下：</h3> 
<p><img src="https://images2.imgbox.com/8a/5b/aisWEaQh_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="IO_operation_on_closed_file_47"></a>I/O operation on closed file.</h4> 
<h4><a id="IO__input__out_48"></a>I/O —— input / out</h4> 
<h4><a id="IO_49"></a>文件关闭之后不能再进行I/O操作</h4> 
<h2><a id="_50"></a>四、文本文件的读操作</h2> 
<h3><a id="_51"></a>①打开文件（读写同一个文件的编码方式需要保持一致）</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'古诗.text'</span><span class="token punctuation">,</span> <span class="token string">'rt'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_55"></a>②读取数据</h3> 
<h4><a id="1readline_56"></a>1.readline()：每次只读取一行数据，字符串类型</h4> 
<pre><code class="prism language-python">data_1 <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data_1<span class="token punctuation">)</span>

运行结果：静夜思
</code></pre> 
<h4><a id="2read_63"></a>2.read()：能够将文件中的数据一次性读取出来</h4> 
<pre><code class="prism language-python"><span class="token comment"># data_2 = file.read()</span>
<span class="token comment"># print(data_2)</span>

运行结果：床前明月光，
         疑是地上霜，
         举头望明月，
         低头思故乡。
</code></pre> 
<h4><a id="3readlines_73"></a>3.readlines()：一次性将所有行读出来，每一行作为一个元素保存在列表中</h4> 
<pre><code class="prism language-python">data_3 <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data_3<span class="token punctuation">)</span>

运行结果：<span class="token punctuation">[</span><span class="token string">'床前明月光，\n'</span><span class="token punctuation">,</span> <span class="token string">'疑是地上霜，\n'</span><span class="token punctuation">,</span> <span class="token string">'举头望明月，\n'</span><span class="token punctuation">,</span> <span class="token string">'低头思故乡。\n'</span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">]</span>
</code></pre> 
<h4><a id="4_80"></a>4.关闭文件</h4> 
<pre><code class="prism language-python"><span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_84"></a>五、二进制数据的读写</h2> 
<h3><a id="wordppttxtpdf_85"></a>电脑中的所有文件都是以二进制数据保存的。有些文件，例如word、ppt、txt、pdf这些文件，里面保存的信息是供人阅读的，人接受的是文本、十进制等，所以这些信息是经过计算机处理的</h3> 
<h3><a id="encodingb_86"></a>相比于文本文件的读写，二进制数据的读写不用encoding，且只能使用b</h3> 
<h3><a id="1_87"></a>1.二进制文件的读</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'图片1.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment"># 关闭文件</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="2_96"></a>2.二进制文件的写</h3> 
<pre><code class="prism language-python">file1 <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'图片2.jpeg'</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span>
file1<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment"># 关闭文件</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="CSV_104"></a>六、CSV文件的读写操作</h2> 
<h3><a id="CSV_105"></a>①CSV文件的写操作</h3> 
<h3><a id="1_csv_106"></a>1. 导入csv模块</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> csv
</code></pre> 
<h3><a id="2utf8_csv__110"></a>2.以utf-8编码和写模式创建或打开 “学生成绩.csv” 文件</h3> 
<h3><a id="wt__rt__att_111"></a>wt / rt / at，涉及到文本文件类型的读写时，t可以省略不写</h3> 
<h3><a id="newline_windows_r_nMac_rLinux_n_112"></a>将newline改为’ '，是因为windows的换行定义是 \r \n，Mac定义的换行操作为 \r，Linux定义的换行操作为 \n</h3> 
<h3><a id="newline__113"></a>统一将newline改为’ '，抵消掉不同系统产生的换行影响</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'学生成绩.csv'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span> newline<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3csvwriterwriter_117"></a>3.使用csv模块中的writer类对文件对象进行写操作，返回一个具有写功能的writer对象</h3> 
<pre><code class="prism language-python">file_writer <span class="token operator">=</span> csv<span class="token punctuation">.</span>writer<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4_121"></a>4.写入数据</h3> 
<h3><a id="writerow_122"></a>writerow：单行写入，将一个列表看做一行数据，列表中的每个元素是这一行的单元格</h3> 
<h3><a id="writerows_123"></a>writerows：多行写入，将一个二维列表中的每一个一维列表分别写入其对应的一行，一维列表中的每个元素对应这一行的单元格</h3> 
<pre><code class="prism language-python">columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'性别'</span><span class="token punctuation">,</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span> <span class="token string">'成绩'</span><span class="token punctuation">]</span>
students <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'小邱'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'小王'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'小曾'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'小邹'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">]</span>

file_writer<span class="token punctuation">.</span>writerow<span class="token punctuation">(</span>columns<span class="token punctuation">)</span>
file_writer<span class="token punctuation">.</span>writerows<span class="token punctuation">(</span>students<span class="token punctuation">)</span>

<span class="token comment"># 关闭文件</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="csv_134"></a>最后运行打开生成的学生成绩.csv文件，如下显示：</h3> 
<p><img src="https://images2.imgbox.com/97/ca/1RMIP4YC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="CSV_136"></a>②CSV文件的读操作</h3> 
<h3><a id="1_csv_137"></a>1. 导入csv模块</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> csv
</code></pre> 
<h3><a id="2_CSV_141"></a>2. 打开CSV文件</h3> 
<pre><code class="prism language-python"><span class="token builtin">file</span> <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'学生成绩.csv'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3_csvreader_145"></a>3. 使用csv模块的reader类对文件进行读操作，返回包含有数据的一个可迭代对象</h3> 
<h3><a id="_146"></a>可迭代对象：能够遍历的数据对象</h3> 
<pre><code class="prism language-python">file_reader <span class="token operator">=</span> csv<span class="token punctuation">.</span>reader<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> row <span class="token keyword">in</span> file_reader<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span>

<span class="token comment"># 关闭文件</span>
<span class="token builtin">file</span><span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

运行结果：<span class="token punctuation">[</span><span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'性别'</span><span class="token punctuation">,</span> <span class="token string">'年龄'</span><span class="token punctuation">,</span> <span class="token string">'成绩'</span><span class="token punctuation">]</span>
         <span class="token punctuation">[</span><span class="token string">'小邱'</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">,</span> <span class="token string">'21'</span><span class="token punctuation">,</span> <span class="token string">'50'</span><span class="token punctuation">]</span>
         <span class="token punctuation">[</span><span class="token string">'小王'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'23'</span><span class="token punctuation">,</span> <span class="token string">'100'</span><span class="token punctuation">]</span>
         <span class="token punctuation">[</span><span class="token string">'小曾'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'22'</span><span class="token punctuation">,</span> <span class="token string">'100'</span><span class="token punctuation">]</span>
         <span class="token punctuation">[</span><span class="token string">'小邹'</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">,</span> <span class="token string">'25'</span><span class="token punctuation">,</span> <span class="token string">'100'</span><span class="token punctuation">]</span>
</code></pre> 
<h4><a id="Pycharmcsvtxt_161"></a>通过观察发现，Pycharm打开的csv文件和txt文本文件几乎没有差别。</h4> 
<h4><a id="csvcsv_162"></a>csv文件虽然是以表格的样式展示数据，但是csv文件的本质是文本文件。</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e89608a1ed721ad9c963b7d01af9297/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何使用arcmap绘制核密度图（笔记）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9d95d1336b03cc040d050f03f8b7ac63/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用platform总线编写驱动，应用层程序，在应用层通过ioctl控制LED灯流水，当按键KEY1按下，让风扇转动</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>