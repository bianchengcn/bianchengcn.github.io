<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为交换机命令基础入门学习，小白也能看得懂！ - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为交换机命令基础入门学习，小白也能看得懂！" />
<meta property="og:description" content="关注「开源Linux」，选择“设为星标”
回复「学习」，有我为您特别筛选的学习资料~
01
—
基础配置命令
1、用户模式
登陆设备后，直接进入用户模式，尖括号表示用户模式，在这个模式下只能执行少量查看配置的命令；
2、视图模式
用户模式下，输入system-view或者sys进入视图模式，方括号表示视图模式，可执行设备全局配置的命令；
3、交换机改名
这个提示信息，比较烦人。每次更改了什么配置都会显示出来，影响调试。可以使用下面的命令关闭掉
4、进入接口
5、退出此端口
02
—
创建vlan并将端口加入vlan
1、创建vlan
创建单个vlan
批量创建vlan
2、更改端口的链接类型
由于华为交换机的端口出厂时默认都是hybrid类型或auto类型的，所以无法立即加入vlan，需要更改端口的link-type后，才可以加入vlan。单个端口更改方式如下：
为何要选择access类型？？
因为我们是终端PC与交换机相连，要求PC只能只能和上级交换机通信，所以必须只属于1个vlan
以太网端口的链路类型有三种：
Access 类型：端口只能属于1 个VLAN，一般用于交换机与终端用户之间的连接；
Trunk 类型：端口可以属于多个VLAN，可以接收和发送多个VLAN 的报文，一般用于交换机 之间的连接；
Hybrid 类型：端口可以属于多个VLAN，可以接收和发送多个VLAN 的报文，可以用于交换 机之间连接，也可以用于连接用户的计算机。Hybrid 端口可以允许多个VLAN 的报文发送时不携带标签，而Trunk 端口只允许缺省VLAN 的报文，发送时不携带标签。
trunk端口用于交换机相连，pvid必须一致。
access 类型只能属于1 个vlan
规模较大的企业局域网，不建议使用vlan1，所以trunk端口不允许vlan1通过
3、端口加入vlan
以上的操作是单个操作，如果配置端口比较多就很麻烦，下面我们来批量操作。
4、端口的批量操作——端口组
原理就是创建一个端口组，把要更改的端口加入到端口组中，然后统一更改类型加入vlan。也可以理解为群组端口，统一配置类型加入vlan.
批量更改，先更改端口类型，再统一加入某个vlan，如下：
5、vlan的查看
全局查看vlan信息
查看端口与vlan对应关系
6、允许所有vlan通过
03
—
首次登入交换机或路由器
第一次上电和恢复出厂是一样的，我们先说一下恢复出厂设置。
1、恢复出厂设置
注意Y和N的选项，不要输错。
2、设置新密码
新交换机第一次上电，或恢复出厂设置后，要求设置新密码
出厂自带的用户名是admin，密码是admin@huawei.com
3、首次保存配置
第一次保存设置时，需输入文件名，只需按回车
4、设置日期和时间
设置console口的连接方式，可设置为无，仅密码，用户名密码等方式
5、开启必要的服务和功能
开启telnet服务，stp功能，http服务
6、设置vty，telnet登录" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/089e24711752d4e24a11139f27840d40/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-27T08:00:00+08:00" />
<meta property="article:modified_time" content="2021-03-27T08:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为交换机命令基础入门学习，小白也能看得懂！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align: center">关注「开源Linux」，选择“设为星标”<br></p> 
 <p style="text-align: center">回复「学习」，有我为您特别筛选的学习资料~</p> 
 <p style="text-align: center">01</p> 
 <p style="text-align: center">—</p> 
 <p style="text-align: center">基础配置命令</p> 
 <p style="text-align: left"><strong>1、用户模式</strong></p> 
 <p style="text-align: left">登陆设备后，直接进入用户模式，<strong>尖括号</strong>表示用户模式，在这个模式下只能执行少量查看配置的命令；</p> 
 <p><img src="https://images2.imgbox.com/3e/9a/7SZ8PNWc_o.png"></p> 
 <p><strong>2、视图模式</strong><strong></strong></p> 
 <p>用户模式下，输入system-view或者sys进入视图模式，方括号表示视图模式，可执行设备全局配置的命令；</p> 
 <p><img src="https://images2.imgbox.com/ed/f5/3QPvApIP_o.png"></p> 
 <p><strong>3、交换机改名</strong></p> 
 <p><strong><img src="https://images2.imgbox.com/6b/a9/zL0btROF_o.png"></strong></p> 
 <p><strong><img src="https://images2.imgbox.com/26/d0/iuB0NmTe_o.png"></strong></p> 
 <p>这个提示信息，比较烦人。每次更改了什么配置都会显示出来，影响调试。可以使用下面的命令关闭掉</p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/9c/44/pwCSTP5v_o.png"></p> 
 <p><strong>4、进入接口</strong></p> 
 <p style="text-align: center"><strong><img src="https://images2.imgbox.com/48/31/DznZYkBL_o.png"></strong></p> 
 <p><strong>5、退出此端口</strong></p> 
 <p style="text-align: center"><strong><img src="https://images2.imgbox.com/49/22/ARMSqzqv_o.png"></strong></p> 
 <p style="text-align: center">02</p> 
 <p style="text-align: center">—</p> 
 <p style="text-align: center">创建vlan并将端口加入vlan</p> 
 <p><strong>1、创建vlan</strong></p> 
 <p>创建单个vlan</p> 
 <p><img src="https://images2.imgbox.com/3a/66/VrMaiilO_o.png"></p> 
 <p>批量创建vlan</p> 
 <p><img src="https://images2.imgbox.com/36/f1/Qz6HNfkO_o.png"></p> 
 <p><strong>2、更改端口的链接类型</strong></p> 
 <p>由于华为交换机的端口出厂时默认都是hybrid类型或auto类型的，所以无法立即加入vlan，需要更改端口的link-type后，才可以加入vlan。单个端口更改方式如下：</p> 
 <p><img src="https://images2.imgbox.com/54/ef/Ghf04Gex_o.png"></p> 
 <p><strong>为何要选择access类型？？</strong></p> 
 <p>因为我们是终端PC与交换机相连，要求PC只能只能和上级交换机通信，所以必须只属于1个vlan</p> 
 <blockquote> 
  <p><strong>以太网端口的链路类型有三种：</strong></p> 
  <p>Access 类型：端口只能属于1 个VLAN，一般用于交换机与终端用户之间的连接；</p> 
  <p>Trunk 类型：端口可以属于多个VLAN，可以接收和发送多个VLAN 的报文，一般用于交换机 之间的连接；</p> 
  <p>Hybrid 类型：端口可以属于多个VLAN，可以接收和发送多个VLAN 的报文，可以用于交换 机之间连接，也可以用于连接用户的计算机。Hybrid 端口可以允许多个VLAN 的报文发送时不携带标签，而Trunk 端口只允许缺省VLAN 的报文，发送时不携带标签。</p> 
 </blockquote> 
 <ul><li><p>trunk端口用于交换机相连，pvid必须一致。</p></li><li><p>access 类型只能属于1 个vlan</p></li><li><p>规模较大的企业局域网，不建议使用vlan1，所以trunk端口不允许vlan1通过</p></li></ul> 
 <p><strong>3、端口加入vlan</strong></p> 
 <p><strong><img src="https://images2.imgbox.com/00/73/wT5Vu7n9_o.png"></strong></p> 
 <p>以上的操作是单个操作，如果配置端口比较多就很麻烦，下面我们来批量操作。</p> 
 <p><strong>4、端口的批量操作——端口组</strong></p> 
 <p>原理就是创建一个端口组，把要更改的端口加入到端口组中，然后统一更改类型加入vlan。也可以理解为群组端口，统一配置类型加入vlan.</p> 
 <p>批量更改，先更改端口类型，再统一加入某个vlan，如下：</p> 
 <p><img src="https://images2.imgbox.com/3f/7e/FS4Xmpse_o.png"></p> 
 <p><strong>5、vlan的查看</strong></p> 
 <p>全局查看vlan信息</p> 
 <p><img src="https://images2.imgbox.com/6b/84/9uvn7EX7_o.png"></p> 
 <p>查看端口与vlan对应关系</p> 
 <p><img src="https://images2.imgbox.com/73/80/LaU25cto_o.png"></p> 
 <p><strong>6、允许所有vlan通过</strong></p> 
 <p><strong><img src="https://images2.imgbox.com/79/36/txGObXhK_o.png"></strong></p> 
 <p style="text-align: center">03</p> 
 <p style="text-align: center">—</p> 
 <p style="text-align: center">首次登入交换机或路由器</p> 
 <p>第一次上电和恢复出厂是一样的，我们先说一下恢复出厂设置。</p> 
 <p><strong>1、恢复出厂设置</strong></p> 
 <p>注意Y和N的选项，不要输错。</p> 
 <p><img src="https://images2.imgbox.com/bf/7b/qg3OtGsn_o.png"></p> 
 <p><strong>2、设置新密码</strong></p> 
 <p>新交换机第一次上电，或恢复出厂设置后，要求设置新密码</p> 
 <p>出厂自带的用户名是admin，密码是admin@huawei.com</p> 
 <p><img src="https://images2.imgbox.com/5a/4e/DWhNP95H_o.png"></p> 
 <p><strong>3、首次保存配置</strong></p> 
 <p>第一次保存设置时，需输入文件名，只需按回车</p> 
 <p><img src="https://images2.imgbox.com/a9/d5/1j9nO9AR_o.png"></p> 
 <p><strong>4、设置日期和时间</strong></p> 
 <p><strong><img src="https://images2.imgbox.com/fb/67/fhLGQWw1_o.png"></strong></p> 
 <p>设置console口的连接方式，可设置为无，仅密码，用户名密码等方式</p> 
 <p><img src="https://images2.imgbox.com/94/c2/OozBh2WP_o.png"></p> 
 <p><strong>5、开启必要的服务和功能</strong></p> 
 <p>开启telnet服务，stp功能，http服务</p> 
 <p><img src="https://images2.imgbox.com/6f/e7/AZY2UtOC_o.png"></p> 
 <p><strong>6、设置vty，telnet登录</strong></p> 
 <p><strong><img src="https://images2.imgbox.com/c6/9b/UsJkWHA9_o.png"></strong></p> 
 <p><strong>7、设置一个用户用于网页登录</strong></p> 
 <p><strong><img src="https://images2.imgbox.com/88/5d/xhecIf9M_o.png"></strong></p> 
 <p>由于第一次登录时，console口要求用户名密码登录，所以无法删除本地用户admin，此时可退到&lt;&gt;视图，保存设置，退出交换机，再重新登录。由于我们已经将console口的认证方式改为仅需密码，所以可以再次进入aaa，删除用户admin。删除后，再建立admin，权限，服务类型等，均可由我们自己控制。</p> 
 <p><img src="https://images2.imgbox.com/56/f1/Gv0x7PQN_o.png"></p> 
 <p>如遇更新版本的交换机软件，telnet服务要求必须是aaa认证（用户名密码认证），可按上面所述再建立一个用户，service-type设置为telnet。</p> 
 <p><strong>8、关闭交换机自动弹出配置改变告警</strong></p> 
 <p>输入配置命令后设备会提示如下类似信息：</p> 
 <p><img src="https://images2.imgbox.com/54/e1/RBlOpIPC_o.png"></p> 
 <p>这个是配置改变的告警提示信息，不是错误信息，可以配置如下命令屏蔽此信息：</p> 
 <p><img src="https://images2.imgbox.com/22/fe/u1X4KBRo_o.png"></p> 
 <p style="text-align: center">04</p> 
 <p style="text-align: center">—</p> 
 <p style="text-align: center">设置链路聚合</p> 
 <p><img src="https://images2.imgbox.com/7f/6a/Gggqbv5U_o.png"></p> 
 <p>以上命令建立一个聚合端口，并设置了端口的属性</p> 
 <p><img src="https://images2.imgbox.com/9a/e1/98SLceXk_o.png"></p> 
 <p>以上命令将G 0/0/25端口加入聚合端口eth-trunk 1，无需更多设置。可将更多的端口加入聚合端口。</p> 
 <p style="text-align: center">05</p> 
 <p style="text-align: center">—</p> 
 <p style="text-align: center">交换机DHCP</p> 
 <p>开启DHCP功能，设置地址池，并应用</p> 
 <p><img src="https://images2.imgbox.com/55/8a/yXbMFsVT_o.png"></p> 
 <p style="text-align: center">06</p> 
 <p style="text-align: center">—</p> 
 <p style="text-align: center">开启流控制功能，限制某些网段互链</p> 
 <p>主要是限制访客网与办公网、财务网互访</p> 
 <p><img src="https://images2.imgbox.com/c3/01/pl2ewg2O_o.png"></p> 
 <p>注意源地址和目的地址的反向掩码</p> 
 <p><img src="https://images2.imgbox.com/f9/89/w3JDqtvR_o.png"></p> 
 <pre class="has"><code class="language-php">
关注「开源Linux」加星标，提升IT技能

</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6e8ef6ea12a9645e0b0bee72fb896c87/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【牛客】判断链表是否有环</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7b12ffdd18cafaf0a493703813a13fac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue 动态引入图片报错: Error in render: “Error: Cannot find module ‘./avatar.png‘“</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>