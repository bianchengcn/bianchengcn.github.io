<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Godot—2D游戏设计笔记 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Godot—2D游戏设计笔记" />
<meta property="og:description" content="Godot—2D游戏设计笔记（兼MarkDown测试） 文章目录 Godot—2D游戏设计笔记（兼MarkDown测试）一、第一次游戏设计时遇到的问题1.关于针对一张图的学习2.Godot的命名方法
二、官网游戏制作1.制作目标：
（1）设置项目（2）创建玩家场景 （3）编写玩家代码 一、第一次游戏设计时遇到的问题 1.关于针对一张图的学习 在制作过程，未能找到图中的确保对象的子项不可选择，在进行一番大海捞针后，终于在场景 下的模式工具 里找到了这个选项，这里有两个按键：
1.将所选对象锁定到该位置： 锁定节点及其子节点同时无法选中且不能移动
2.确保对象的子项不可选择： 只锁定该节点的子节点，节点本身可以编辑
以及各种鼠标模式（略）
很实用的工具—吸附模式：
吸附模式： 自动吸附对齐
网格吸附： 开启后可以看到一些网格，更好的用于对齐
2.Godot的命名方法
一般来说Godot中形成的江湖规矩是这样的：
节点（类）： 大驼峰命名法
变量函数： 蛇形命名法
常量： 全大写法（ALL_CAPS）
二、官网游戏制作 1.制作目标：
制作一个可以操控的角色，并且可以控制角色躲避NPC敌人，如果碰到NPC敌人就会Game over，再次点击屏幕重新开始。 （1）设置项目 新建项目
一般在开始制作一款游戏，就一定要对游戏的类型和玩法进行确定，否则中途去修改游戏的玩法是非常困难的，最后前功尽弃。
游戏制作在手机端，所以需要调整游戏窗口大小
我们在点击项目 -&gt; 项目设置打开项目设置窗口，然后在左栏中打开 Display -&gt; Window（显示 -&gt; 窗口）选项卡，将“Width”设置为 480，并将“Height”设置为 720。
另外，滚动到该小节的底部，在“Stretch”（拉伸）选项中，将 Mode 设置为“2d”、Aspect 设置为“keep”。这样就可以保证在不同大小的屏幕上，游戏都能够进行一致的比例缩放。
（2）创建玩家场景 构建节点
在构建了一个Area2D节点后命名为Player，然后将其子节点锁定
ctrl&#43;s保存场景。
精灵动画
在player节点里添加一个AnimatedSprite节点，在属性面板找到Frames属性，然后新建SpriteFrames,打开动画帧面板：
点击新建动画按钮，添加 up 和 walk 动画，将素材拖入动画帧。
通过AnimatedSprite节点中的scale设置图标大小比例为（0.5，0.5）。
在Player节点下新建CollisionShape2D节点，用来确定玩家碰撞面积。
新建CapsuleShape2D椭圆型碰撞体积，调整句柄到适当大小。
（3）编写玩家代码 创建新代码
选择Player节点点击
插入如下代码，创建新变量，用来定义初始速度和窗口大小" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/b66d1c15e0d446fbc61a36f657c7658c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-21T13:22:28+08:00" />
<meta property="article:modified_time" content="2022-03-21T13:22:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Godot—2D游戏设计笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Godot2DMarkDown_1"></a>Godot—2D游戏设计笔记（兼MarkDown测试）</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Godot2DMarkDown_1" rel="nofollow">Godot—2D游戏设计笔记（兼MarkDown测试）</a></li><li><ul><li><ul><li><a href="#_5" rel="nofollow">一、第一次游戏设计时遇到的问题</a></li><li><ul><li><a href="#1_11" rel="nofollow">1.关于针对一张图的学习</a></li><li><a href="#2Godotbr_29" rel="nofollow">2.Godot的命名方法<br></a></li></ul> 
    </li><li><a href="#_38" rel="nofollow">二、官网游戏制作</a></li><li><ul><li><a href="#1br_39" rel="nofollow">1.制作目标：<br></a></li><li><ul><li><ul><li><a href="#1_42" rel="nofollow">（1）设置项目</a></li><li><a href="#2_57" rel="nofollow">（2）创建玩家场景</a></li></ul> 
      </li><li><a href="#3_73" rel="nofollow">（3）编写玩家代码</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_5"></a>一、第一次游戏设计时遇到的问题</h4> 
<br> 
<p><img src="https://images2.imgbox.com/58/5b/m29cseoO_o.gif" alt="在这里插入图片描述"></p> 
<p><br><br></p> 
<h5><a id="1_11"></a>1.关于针对一张图的学习</h5> 
<p><img src="https://images2.imgbox.com/1a/ff/pS2M5fJW_o.png" alt="在这里插入图片描述"><br> <br><br><br> 在制作过程，未能找到图中的<strong>确保对象的子项不可选择</strong>，在进行一番大海捞针后，终于在<font color="Red"><em>场景</em></font> 下的<font color="red"><em>模式工具</em></font> 里找到了这个选项，这里有两个按键：<br><br> <img src="https://images2.imgbox.com/f2/10/fgc7Zrqg_o.jpg" alt="在这里插入图片描述" width="200" height="100"></p> 
<br> 
<blockquote> 
 <p><strong>1.将所选对象锁定到该位置：</strong> 锁定节点及其子节点同时无法选中且不能移动<br> <br><strong>2.确保对象的子项不可选择：</strong> 只锁定该节点的子节点，节点本身可以编辑</p> 
</blockquote> 
<p><br>以及<mark>各种鼠标模式</mark>（略）<br> 很实用的工具—吸附模式：<br><br> <img src="https://images2.imgbox.com/81/9b/eBExhwbL_o.jpg" alt="在这里插入图片描述" width="200" height="100"><br> <br></p> 
<blockquote> 
 <p><strong>吸附模式：</strong> 自动吸附对齐<br><br><strong>网格吸附：</strong> 开启后可以看到一些网格，更好的用于对齐<br> <br><br></p> 
</blockquote> 
<h5><a id="2Godotbr_29"></a>2.Godot的命名方法<br></h5> 
<blockquote> 
 <p><strong>一般来说Godot中形成的江湖规矩是这样的：</strong><br> <strong>节点（类）：</strong> 大驼峰命名法<br> <strong>变量函数：</strong> 蛇形命名法<br> <strong>常量：</strong> 全大写法（ALL_CAPS）</p> 
</blockquote> 
<hr> 
<br> 
<h4><a id="_38"></a>二、官网游戏制作</h4> 
<h5><a id="1br_39"></a>1.制作目标：<br></h5> 
<pre><code>制作一个可以操控的角色，并且可以控制角色躲避NPC敌人，如果碰到NPC敌人就会Game over，再次点击屏幕重新开始。
</code></pre> 
<h6><a id="1_42"></a>（1）设置项目</h6> 
<p><strong>新建项目</strong></p> 
<blockquote> 
 <p><strong>一般在开始制作一款游戏，就一定要对游戏的<mark>类型</mark>和<mark>玩法</mark>进行确定，否则中途去修改游戏的玩法是非常困难的，最后前功尽弃。</strong></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/10/22/sgLl70KY_o.jpg" alt="在这里插入图片描述"></p> 
<p>游戏制作在手机端，所以需要调整游戏窗口大小<br><br> 我们在点击项目 -&gt; 项目设置打开项目设置窗口，然后在左栏中打开 Display -&gt; Window（显示 -&gt; 窗口）选项卡，将“Width”设置为 480，并将“Height”设置为 720。</p> 
<p><img src="https://images2.imgbox.com/4e/07/hpwnUGLq_o.jpg" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/58/c7/MFuY4MSD_o.jpg" alt="在这里插入图片描述"><br> 另外，滚动到该小节的底部，在“Stretch”（拉伸）选项中，将 Mode 设置为“2d”、Aspect 设置为“keep”。这样就可以保证在不同大小的屏幕上，游戏都能够进行一致的比例缩放。<br> <img src="https://images2.imgbox.com/77/96/kyzMUKnx_o.jpg" alt="在这里插入图片描述"></p> 
<hr> 
<h6><a id="2_57"></a>（2）创建玩家场景</h6> 
<p><strong>构建节点</strong><br><br> 在构建了一个<code>Area2D</code>节点后命名为<code>Player</code>，然后将其子节点锁定<br> <img src="https://images2.imgbox.com/38/52/zgDladuL_o.jpg" alt="在这里插入图片描述"><kbd>ctrl+s</kbd>保存场景。</p> 
<p><strong>精灵动画</strong><br> 在<code>player</code>节点里添加一个<code>AnimatedSprite</code>节点，在属性面板找到<code>Frames</code>属性，然后<strong>新建SpriteFrames</strong>,打开<code>动画帧</code>面板：<br> <img src="https://images2.imgbox.com/99/8d/pVSreRV0_o.jpg" alt="在这里插入图片描述"><br> 点击新建动画按钮，添加 <em>up</em> 和 <em>walk</em> 动画，将素材拖入动画帧。<br> <img src="https://images2.imgbox.com/05/f2/p3Gx4vyx_o.jpg" alt="在这里插入图片描述"><br> 通过<code>AnimatedSprite</code>节点中的<code>scale</code>设置图标大小比例为（0.5，0.5）。<br> <br><br> 在<code>Player</code>节点下新建<code>CollisionShape2D</code>节点，用来确定玩家碰撞面积。<br> 新建CapsuleShape2D椭圆型碰撞体积，调整句柄到适当大小。<br> <img src="https://images2.imgbox.com/fc/f7/t26fupRw_o.jpg" alt="在这里插入图片描述" width="100" height="120"></p> 
<hr> 
<h6><a id="3_73"></a>（3）编写玩家代码</h6> 
<p><strong>创建新代码</strong><br> 选择<code>Player</code>节点点击<img src="https://images2.imgbox.com/d6/51/5xgFq4sn_o.jpg" alt="在这里插入图片描述"></p> 
<p>插入如下代码，创建新变量，用来定义初始速度和窗口大小</p> 
<pre><code class="prism language-go">extends Area2D

export <span class="token keyword">var</span> speed <span class="token operator">=</span> <span class="token number">400</span> 
<span class="token comment">// How fast the player will move (pixels/sec).</span>
<span class="token keyword">var</span> screen_size # Size of the game window<span class="token punctuation">.</span>
</code></pre> 
<blockquote> 
 <p><strong>export</strong> 关键字可以使自定义变量在属性的Script Variables项目中<mark>可修改</mark></p> 
</blockquote> 
<p><em><strong>因为对象目前只有一个，所以目前只需要将所有代码打在<code>player</code>里即可</strong></em></p> 
<p>用 <code>_ready</code>函数创建获取窗口大小给<code>screen_size</code>函数</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">_ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    screen_size <span class="token operator">=</span> <span class="token function">get_viewport_rect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size
</code></pre> 
<p>然后用<mark>键位映射</mark>分别设置操控键<kbd>up</kbd><kbd>down</kbd><kbd>left</kbd><kbd>right</kbd>四个键位<br> 给键位设置函数：</p> 
<pre><code class="prism language-go"><span class="token keyword">func</span> <span class="token function">_process</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">var</span> velocity <span class="token operator">=</span> Vector2<span class="token punctuation">.</span>ZERO # The player's movement vector<span class="token punctuation">.</span>
    <span class="token keyword">if</span> Input<span class="token punctuation">.</span><span class="token function">is_action_pressed</span><span class="token punctuation">(</span><span class="token string">"move_right"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        velocity<span class="token punctuation">.</span>x <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> Input<span class="token punctuation">.</span><span class="token function">is_action_pressed</span><span class="token punctuation">(</span><span class="token string">"move_left"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        velocity<span class="token punctuation">.</span>x <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> Input<span class="token punctuation">.</span><span class="token function">is_action_pressed</span><span class="token punctuation">(</span><span class="token string">"move_down"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        velocity<span class="token punctuation">.</span>y <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> Input<span class="token punctuation">.</span><span class="token function">is_action_pressed</span><span class="token punctuation">(</span><span class="token string">"move_up"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        velocity<span class="token punctuation">.</span>y <span class="token operator">-=</span> <span class="token number">1</span>
        
		<span class="token comment">//Input.is_action_pressed()函数可以调用键位映射中的键位，对相应变量进行修改</span>
		
    <span class="token keyword">if</span> velocity<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        velocity <span class="token operator">=</span> velocity<span class="token punctuation">.</span><span class="token function">normalized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> speed
        $AnimatedSprite<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        $AnimatedSprite<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token comment">//get_node()的缩写代码是$，所以$AnimatedSprited.play是get_node("AnimatedSprited").play的缩写</span>
</code></pre> 
<p>最后在<code>_porcess</code>函数的最后加入以下代码：</p> 
<pre><code class="prism language-go">	position <span class="token operator">+=</span> velocity <span class="token operator">*</span> delta
	position<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">clamp</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> screen_size<span class="token punctuation">.</span>x<span class="token punctuation">)</span>
	position<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token function">clamp</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> screen_size<span class="token punctuation">.</span>y<span class="token punctuation">)</span>

	<span class="token comment">// 设置position的值</span>

</code></pre> 
<blockquote> 
 <p>_process() 函数的 delta 参数是 帧长度 ——完成上一帧所花费的时间. 使用这个值的话, 可以保证你的移动不会被帧率的变化所影响.</p> 
</blockquote> 
<p>此时可以尝试运行以下本场景</p> 
<blockquote> 
 <p><strong>运行本场景：</strong> 单击<kbd>F6</kbd>键<br> <strong>运行整个项目：</strong> 单击<kbd>F5</kbd>键</p> 
</blockquote> 
<p>运行发现你可以在屏幕上任意移动角色运动即可</p> 
<p><strong>选择动画</strong></p> 
<p>在<code>_process</code>的末尾加上：</p> 
<pre><code class="prism language-go"><span class="token keyword">if</span> velocity<span class="token punctuation">.</span>x <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
    $AnimatedSprite<span class="token punctuation">.</span>animation <span class="token operator">=</span> <span class="token string">"walk"</span>
    $AnimatedSprite<span class="token punctuation">.</span>flip_v <span class="token operator">=</span> <span class="token boolean">false</span>
    
    <span class="token comment">// See the note below about boolean assignment.</span>
    
    $AnimatedSprite<span class="token punctuation">.</span>flip_h <span class="token operator">=</span> velocity<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> <span class="token number">0</span>
elif velocity<span class="token punctuation">.</span>y <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
    $AnimatedSprite<span class="token punctuation">.</span>animation <span class="token operator">=</span> <span class="token string">"up"</span>
    $AnimatedSprite<span class="token punctuation">.</span>flip_v <span class="token operator">=</span> velocity<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">0</span>
</code></pre> 
<blockquote> 
 <p>flip_h和flip_v使用来将动画分别进行水平和竖直翻转的操作。</p> 
</blockquote> 
<p>此时再次按<kbd>F6</kbd>运行本场景，发现程序正常运行即可</p> 
<p>然后在<code>_ready</code>函数中加入：</p> 
<pre><code class="prism language-go">	<span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//在游戏开始时隐藏玩家</span>
</code></pre> 
<p><strong>准备碰撞</strong></p> 
<p>代码中在<mark>extends Area2d</mark>的下面加上</p> 
<pre><code class="prism language-go">	signal hit
</code></pre> 
<p>来通过Godot信号来检测敌人。</p> 
<p>然后找到<code>player</code>节点里属性的右边 <mark>“节点”</mark> 里的<code>hit</code>信号<br> <img src="https://images2.imgbox.com/e5/9e/LgbuYXki_o.jpg" alt="在这里插入图片描述"></p> 
<p>由于敌人将是 <code>RigidBody2D</code> 节点，所以需要 <code>body_entered(body: Node)</code>信号,双击<code>hit</code>信号建立信号连接，直接带点击 ==“连接”==即可</p> 
<p><img src="https://images2.imgbox.com/02/33/VHXnnQhm_o.jpg" alt="在这里插入图片描述"><br> 然后在新建的信号<br> <img src="https://images2.imgbox.com/80/6f/NPrtYWCi_o.jpg" alt="在这里插入图片描述"><br> 下面输入：</p> 
<pre><code class="prism language-go">	<span class="token keyword">func</span> <span class="token function">_on_Player_body_entered</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> # Player disappears after being hit<span class="token punctuation">.</span>
    <span class="token function">emit_signal</span><span class="token punctuation">(</span><span class="token string">"hit"</span><span class="token punctuation">)</span>
    # Must be deferred as we can't change physics properties on a physics callback<span class="token punctuation">.</span>
    $CollisionShape2D<span class="token punctuation">.</span><span class="token function">set_deferred</span><span class="token punctuation">(</span><span class="token string">"disabled"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
</code></pre> 
<p>为了确保不会多次出发<code>hit</code>信号，于是用<code>hide（）</code>将<code>body</code>部分隐藏，利用<code>set_deferred</code>来安全的禁用</p> 
<p>最后再为玩家添加一个函数，用于在开始新游戏时调用来重置玩家。</p> 
<pre><code class="prism language-go">	<span class="token keyword">func</span> <span class="token function">start</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">:</span>
    position <span class="token operator">=</span> pos
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    $CollisionShape2D<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre> 
<p>本章就到此为止了剩下的部分以后再完善</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5001a4c961895689cc88d91f17503601/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">项目经理可用的110种商业分析工具和技术（上）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0fdc3379515c8a101e466f1d2fde806b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JavaScript【FS】文件系统模块</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>