<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue中实现一个自定义全局消息通知组件 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue中实现一个自定义全局消息通知组件" />
<meta property="og:description" content="目录
创建Message组件
注册为全局组件
添加原型方法
使用方法
总结
在Vue项目中,有时候我们需要在任何组件内呈现一个消息通知,比如保存成功、提交错误等等。要实现这个功能,我们可以创建一个自定义的全局组件并注册为原型方法。
创建Message组件 首先创建一个Message.vue组件:
&lt;template&gt; &lt;transition name=&#34;fade&#34;&gt; &lt;div v-if=&#34;isShow&#34; class=&#34;message&#34;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/div&gt; &lt;/transition&gt; &lt;/template&gt; &lt;script&gt; export default { data() { return { isShow: false } } } &lt;/script&gt; &lt;style&gt; .message { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 10px 20px; border-radius: 4px; background: #fff; box-shadow: 0 2px 8px rgba(0, 0, 0, .15); } .fade-enter-active, .fade-leave-active { transition: opacity 0.5s; } .fade-enter, .fade-leave-to { opacity: 0; } &lt;/style&gt; 这个组件通过v-if和过渡效果控制消息显示和隐藏。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/89739623c7cad550e91d116c65460266/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-21T08:50:05+08:00" />
<meta property="article:modified_time" content="2023-12-21T08:50:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue中实现一个自定义全局消息通知组件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%88%9B%E5%BB%BAMessage%E7%BB%84%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BAMessage%E7%BB%84%E4%BB%B6" rel="nofollow">创建Message组件</a></p> 
<p id="%E6%B3%A8%E5%86%8C%E4%B8%BA%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E6%B3%A8%E5%86%8C%E4%B8%BA%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6" rel="nofollow">注册为全局组件</a></p> 
<p id="%E6%B7%BB%E5%8A%A0%E5%8E%9F%E5%9E%8B%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E6%B7%BB%E5%8A%A0%E5%8E%9F%E5%9E%8B%E6%96%B9%E6%B3%95" rel="nofollow">添加原型方法</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-toc" style="margin-left:40px;"><a href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">使用方法</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:40px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d4/eb/zvGCQ8vF_o.png"></p> 
<p>在Vue项目中,有时候我们需要在任何组件内呈现一个消息通知,比如保存成功、提交错误等等。要实现这个功能,我们可以创建一个自定义的全局组件并注册为原型方法。</p> 
<h3 id="%E5%88%9B%E5%BB%BAMessage%E7%BB%84%E4%BB%B6">创建Message组件</h3> 
<p>首先创建一个Message.vue组件:</p> 
<pre><code class="language-html">&lt;template&gt;
  &lt;transition name="fade"&gt;
    &lt;div v-if="isShow" class="message"&gt;
      &lt;slot&gt;&lt;/slot&gt;  
    &lt;/div&gt;
  &lt;/transition&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      isShow: false
    }
  }
}  
&lt;/script&gt;

&lt;style&gt;
.message {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%); 
  padding: 10px 20px;
  border-radius: 4px;
  background: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, .15);
}

.fade-enter-active, .fade-leave-active {
  transition: opacity 0.5s;
}

.fade-enter, .fade-leave-to {
  opacity: 0;
}
&lt;/style&gt;</code></pre> 
<p>这个组件通过v-if和过渡效果控制消息显示和隐藏。</p> 
<h3 id="%E6%B3%A8%E5%86%8C%E4%B8%BA%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6">注册为全局组件</h3> 
<p>然后在main.js中注册该组件:</p> 
<pre><code class="language-javascript">import Message from './Message.vue'

const app = createApp(App)

app.component('Message', Message)</code></pre> 
<p>这样Message组件就可以在所有其他组件内直接使用了。</p> 
<h3 id="%E6%B7%BB%E5%8A%A0%E5%8E%9F%E5%9E%8B%E6%96%B9%E6%B3%95">添加原型方法</h3> 
<p>最后我们在app实例上添加3个方法,用于调用消息组件:</p> 
<pre><code class="language-javascript">app.config.globalProperties.$message = {
  // 成功
  success(options) {
    that.show(options, 'success')
  },

  // 失败
  error(options) {
    that.show(options, 'error')  
  },

  // 展示消息
  show(options, type) {
    // 处理参数
    // 显示消息 
  } 
}</code></pre> 
<p>通过<code>app.config.globalProperties</code>添加原型方法,使其可以在任意组件通过<code>this.$message</code>访问。</p> 
<p>方法接收消息内容和类型,处理后统一通过Message组件显示。</p> 
<h3 id="%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">使用方法</h3> 
<p>之后在其他组件中,可以直接调用:</p> 
<pre><code class="language-javascript">export default {
  mounted() {
    this.$message.success('保存成功!') 
  }  
}</code></pre> 
<p>这样就实现了一个可以全局使用的消息提示组件。</p> 
<h3 id="%E6%80%BB%E7%BB%93">总结</h3> 
<p>通过上面的方式,我们利用了:</p> 
<ol><li>组件化开发消息提示组件</li><li>注册为全局组件</li><li>在app实例挂载原型方法</li></ol> 
<p>使得所有组件都可以方便调用该消息提示,而无需每个页面、组件都引入和实例化它。</p> 
<p>这种方式提高了代码的复用性,也使得逻辑更清晰。我们可以根据这个思路来封装和开发更多的可复用功能。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a4c1537e35914bd76998eac89633703/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">常规pyqt5代码模板</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/66fba90afd9a1969787b4121b7ce9002/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nginx转发ingress-nginx问题记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>