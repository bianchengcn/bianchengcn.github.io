<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux学习[11]磁盘与文件系统(2)：lsblk&amp;blkid&amp;parted&amp;fdisk&amp;gdisk&amp;mkfs - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux学习[11]磁盘与文件系统(2)：lsblk&amp;blkid&amp;parted&amp;fdisk&amp;gdisk&amp;mkfs" />
<meta property="og:description" content="文章目录 前言：1. 磁盘容量1.1 lsblk1.2 blkid1.3 parted 2. 磁盘分区2.1 fdisk/gdisk2.2 磁盘分区实例参考： 3. 磁盘格式化3.1 mkfs.xfs3.2 mkfs.ext43.3 mkfs.vfat 总结： 前言： 写了VMware的磁盘扩容之后，磁盘分区格式化等操作用上了，这篇博客就做一个知识点补充归纳。
这篇博客主要写：
指令磁盘分区容量查看指令:lsblk、blkid、parted；
磁盘分区指令:gdisk/fdisk;
格式化指令：mkfs相关
1. 磁盘容量 1.1 lsblk lsblk真的是yyds了，和指令ls一样是常用指令。前者是磁盘的查看，ls是目录和文件的查看。
一般用法：lsblk 选项与参数 设备
例如：lsblk -d /dev/sda
选项与参数含义-d仅列出磁盘本身，并不会列出该磁盘的分区数据-f同时列出该磁盘内的文件系统名称-i使用 ASCII 的线段输出-m同时输出该设备在 /dev 下面的权限数据 （rwx 的数据）-p列出该设备的完整文件名-t列出该磁盘设备的详细数据，包括磁盘伫列机制、预读写的数据量大小等 以我的虚拟机上的60G磁盘为例进行效果演示。
使用lsblk常用的显示的字段含义如下：
字段名称字段含义NAME设备的文件名，省略 /dev 等前导目录MAJ:MIN主要：次要设备代码RM是否为可卸载设备，如光盘、USB 磁盘等等SIZE容量RO是否为只读设备TYPE种类：磁盘(disk)、分区(partition) 、只读存储器(om)MOUTPOINT挂载点FSTYPE文件系统LABEL标签UUID全域单一识别码 1.2 blkid blkid其实就是lsblk -f中单独显示UUID的一个指令。
所以其对应的含义为：列出设备的UUID；
这里需要注意的是，只有管理员权限才可以列出对应的内容。
下图中我用ubuntu用户输入blkid没有反应，改变为root权限后才可以。
其实也可以直接sudo blkid
如何想查看一个指定的磁盘，在没有管理员权限的情况下可以使用：
指令：sudo blkid /dev/sda
使用这个指令，可能linux系统还会提示你输入管理员密码。
1.3 parted parted指令用来列出磁盘的分区表类型以及分区信息。
一般用法：parted /dev/sda print
这个指令也是需要管理员权限的，别忘加sudo，或者切换到root
这里我们看字段：Partition Table:msdos" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/eefbb059b743fd0ed64c2d52df53a89e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-23T11:41:56+08:00" />
<meta property="article:modified_time" content="2023-06-23T11:41:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux学习[11]磁盘与文件系统(2)：lsblk&amp;blkid&amp;parted&amp;fdisk&amp;gdisk&amp;mkfs</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言：</a></li><li><a href="#1__10" rel="nofollow">1. 磁盘容量</a></li><li><ul><li><a href="#11_lsblk_11" rel="nofollow">1.1 lsblk</a></li><li><a href="#12_blkid_46" rel="nofollow">1.2 blkid</a></li><li><a href="#13_parted_59" rel="nofollow">1.3 parted</a></li></ul> 
  </li><li><a href="#2__73" rel="nofollow">2. 磁盘分区</a></li><li><ul><li><a href="#21_fdiskgdisk_74" rel="nofollow">2.1 fdisk/gdisk</a></li><li><a href="#22__112" rel="nofollow">2.2 磁盘分区实例参考：</a></li></ul> 
  </li><li><a href="#3__117" rel="nofollow">3. 磁盘格式化</a></li><li><ul><li><a href="#31_mkfsxfs_129" rel="nofollow">3.1 mkfs.xfs</a></li><li><a href="#32_mkfsext4_171" rel="nofollow">3.2 mkfs.ext4</a></li><li><a href="#33_mkfsvfat_180" rel="nofollow">3.3 mkfs.vfat</a></li></ul> 
  </li><li><a href="#_187" rel="nofollow">总结：</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言：</h2> 
<p>写了<a href="https://blog.csdn.net/Edwinwzy/article/details/130614205">VMware的磁盘扩容</a>之后，磁盘分区格式化等操作用上了，这篇博客就做一个知识点补充归纳。</p> 
<p>这篇博客主要写：<br> 指令磁盘分区容量查看指令:lsblk、blkid、parted；<br> 磁盘分区指令:gdisk/fdisk;<br> 格式化指令：mkfs相关</p> 
<hr> 
<h2><a id="1__10"></a>1. 磁盘容量</h2> 
<h3><a id="11_lsblk_11"></a>1.1 lsblk</h3> 
<p>lsblk真的是yyds了，和指令ls一样是常用指令。前者是磁盘的查看，ls是目录和文件的查看。<br> 一般用法：<code>lsblk 选项与参数 设备</code><br> 例如：<code>lsblk -d /dev/sda</code></p> 
<table><thead><tr><th>选项与参数</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>仅列出磁盘本身，并不会列出该磁盘的分区数据</td></tr><tr><td>-f</td><td>同时列出该磁盘内的文件系统名称</td></tr><tr><td>-i</td><td>使用 ASCII 的线段输出</td></tr><tr><td>-m</td><td>同时输出该设备在 /dev 下面的权限数据 （rwx 的数据）</td></tr><tr><td>-p</td><td>列出该设备的完整文件名</td></tr><tr><td>-t</td><td>列出该磁盘设备的详细数据，包括磁盘伫列机制、预读写的数据量大小等</td></tr></tbody></table> 
<p>以我的虚拟机上的60G磁盘为例进行效果演示。<br> <img src="https://images2.imgbox.com/a5/f6/SvDqfYrF_o.png" alt=""></p> 
<p>使用lsblk常用的显示的字段含义如下：</p> 
<table><thead><tr><th>字段名称</th><th>字段含义</th></tr></thead><tbody><tr><td>NAME</td><td>设备的文件名，省略 /dev 等前导目录</td></tr><tr><td>MAJ:MIN</td><td>主要：次要设备代码</td></tr><tr><td>RM</td><td>是否为可卸载设备，如光盘、USB 磁盘等等</td></tr><tr><td>SIZE</td><td>容量</td></tr><tr><td>RO</td><td>是否为只读设备</td></tr><tr><td>TYPE</td><td>种类：磁盘(disk)、分区(partition) 、只读存储器(om)</td></tr><tr><td>MOUTPOINT</td><td>挂载点</td></tr><tr><td>FSTYPE</td><td>文件系统</td></tr><tr><td>LABEL</td><td>标签</td></tr><tr><td>UUID</td><td>全域单一识别码</td></tr></tbody></table> 
<hr> 
<h3><a id="12_blkid_46"></a>1.2 blkid</h3> 
<p><code>blkid</code>其实就是<code>lsblk -f</code>中单独显示UUID的一个指令。<br> 所以其对应的含义为：列出设备的UUID；<br> 这里需要注意的是，只有管理员权限才可以列出对应的内容。<br> 下图中我用<code>ubuntu</code>用户输入blkid没有反应，改变为root权限后才可以。<br> 其实也可以直接<code>sudo blkid</code></p> 
<p>如何想查看一个指定的磁盘，在没有管理员权限的情况下可以使用：<br> 指令：<code>sudo blkid /dev/sda</code><br> 使用这个指令，可能linux系统还会提示你输入管理员密码。<br> <img src="https://images2.imgbox.com/f2/18/tZrijBZq_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="13_parted_59"></a>1.3 parted</h3> 
<p>parted指令用来列出磁盘的分区表类型以及分区信息。</p> 
<p>一般用法：<code>parted /dev/sda print</code></p> 
<p>这个指令也是需要管理员权限的，别忘加<mark>sudo</mark>，或者<mark>切换到root</mark></p> 
<p><img src="https://images2.imgbox.com/b9/05/w97AwEyq_o.png" alt="在这里插入图片描述"></p> 
<p>这里我们看字段：<code>Partition Table:msdos</code><br> 我们的是MBR分区表，分区表还有GPT分区。强调这一点是因为不同分区再磁盘分区的时候使用的指令是不一样的。</p> 
<hr> 
<h2><a id="2__73"></a>2. 磁盘分区</h2> 
<h3><a id="21_fdiskgdisk_74"></a>2.1 fdisk/gdisk</h3> 
<p><mark>请注意fdisk对应MBR分区表，gdisk对应GPT分区表。</mark><br> 使用MBR分区表的操作系统例如：ubuntu<br> 使用GPT分区表的操作系统例如：CentOS</p> 
<p>使用指令<code>sudo fdisk /dev/sda</code>进入磁盘分区模式。<br> 前面sudo说明磁盘分区要管理员权限，后面/dev/sda表明对哪个磁盘分区。</p> 
<p><img src="https://images2.imgbox.com/63/eb/Wd6KPk2P_o.png" alt="在这里插入图片描述"><br> 输入m查看指令帮助<br> <img src="https://images2.imgbox.com/82/aa/IOv77pAZ_o.png" alt="在这里插入图片描述"></p> 
<p>这边列个表翻译一下：</p> 
<table><thead><tr><th>指令选项</th><th>含义</th></tr></thead><tbody><tr><td>a</td><td><code>切换可启动标志，对某个分区用a则表示从这个分区启动</code></td></tr><tr><td>b</td><td>编辑嵌套BSD磁盘标签</td></tr><tr><td>c</td><td>切换dos兼容性标志</td></tr><tr><td>d</td><td><code>删除分区</code></td></tr><tr><td>F</td><td>列出可用的未分区空间</td></tr><tr><td>l(小写L)</td><td>列出已知的分区类型</td></tr><tr><td>n</td><td><code>添加新分区</code></td></tr><tr><td>t</td><td><code>更改分区类型</code></td></tr><tr><td>v</td><td>验证分区表</td></tr><tr><td>i</td><td>打印有关分区的信息</td></tr><tr><td>m</td><td>打印这个菜单</td></tr><tr><td>u</td><td>更改显示/输入单位</td></tr><tr><td>x</td><td>额外功能(仅限专家)</td></tr><tr><td>I(大写I)</td><td>从sfdisk脚本文件加载磁盘布局</td></tr><tr><td>O</td><td>将磁盘布局转储到sfdisk脚本文件</td></tr><tr><td>w</td><td><code>将表写入磁盘并保存</code></td></tr><tr><td>q</td><td><code>退出而不保存更改</code></td></tr><tr><td>g</td><td>创建一个新的GPT分区表</td></tr><tr><td>G</td><td>创建一个新的空SGI（IRIX）分区表</td></tr><tr><td>o</td><td>创建一个新的空DOS分区表</td></tr><tr><td>s</td><td>创建一个新的空Sun分区表</td></tr></tbody></table> 
<p>其中标红的是常用的。对磁盘分区的任何操作最后如果不输入w，都是不生效的！！！！</p> 
<h3><a id="22__112"></a>2.2 磁盘分区实例参考：</h3> 
<p>磁盘分区的详细运用可以参考博客：<a href="https://blog.csdn.net/Edwinwzy/article/details/130614205">磁盘分区章节</a></p> 
<hr> 
<h2><a id="3__117"></a>3. 磁盘格式化</h2> 
<p>我们再window上的磁盘格式化大概就是清空数据，回复初始设定这种。但对于刚分好区的磁盘，对磁盘的格式化其实是创建文件系统。</p> 
<p>磁盘格式化的通用指令是<code>mkfs.xxxx</code>这里xxx和文件系统类别有关，xxxx可以是xfs，也可以是ext4等等。</p> 
<p>在命令行输入<code>mkfs</code>接两个<code>tab</code>，就可以知道系统支持哪些种类的文件系统格式化功能。</p> 
<p><img src="https://images2.imgbox.com/c0/10/w61HIsUg_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="31_mkfsxfs_129"></a>3.1 mkfs.xfs</h3> 
<p>一般用法：<code>mkfs.xfs 选项与参数 (数值大小) 设备名称</code>，这个数值大小根据选项与参数来定，有的没有数值。<br> 例如：<code>mkfs.xfs -f /dev/sda</code>这个<code>-f</code>就表示强制格式化，并没有数值。</p> 
<p>mkfs.xfs再CentOS里面用的多，其实我们平常用ubuntu大部分都是用mkfs.ext4.<br> mkfs.xfs的格式化其实很多值都设定为默认的可以了，折射到指令上大概如下例子：</p> 
<p>例：给/dev/sda创建xfs文件系统，保持默认配置<br> 指令：<code>mkfs.xfs /dev/sda</code></p> 
<p>关于单位：下面只要谈到“数值”时，没有加单位则为 Bytes 值，可以用 k,m,g,t,p （小写）等来解释<br> 比较特殊的是 s 这个单位，它指的是 sector 的“个数”</p> 
<table><thead><tr><th>选项与参数</th><th>含义说明</th></tr></thead><tbody><tr><td>-b</td><td>后面接的是 block 容量，可由 512 到 64k，不过最大容量限制为 Linux 的 4k</td></tr><tr><td>-d</td><td>后面接的是重要的 data section 的相关参数值，主要的值有：</td></tr></tbody></table> 
<pre><code>  agcount=数值  ：设置需要几个储存群组的意思（AG），通常与 CPU 有关
  agsize=数值   ：每个 AG 设置为多少容量的意思，通常 agcount/agsize 只选一个设置即可
  file          ：指的是“格式化的设备是个文件而不是个设备”的意思！（例如虚拟磁盘）
  size=数值     ：data section 的容量，亦即你可以不将全部的设备容量用完的意思
  su=数值       ：当有 RAID 时，那个 stripe 数值的意思，与下面的 sw 搭配使用
  sw=数值       ：当有 RAID 时，用于储存数据的磁盘数量（须扣除备份碟与备用碟）
  sunit=数值    ：与 su 相当，不过单位使用的是“几个 sector（512Bytes大小）”的意思
  swidth=数值   ：就是 su*sw 的数值，但是以“几个 sector（512Bytes大小）”来设置
</code></pre> 
<table><thead><tr><th>选项与参数</th><th>含义说明</th></tr></thead><tbody><tr><td>-f</td><td>如果设备内已经有文件系统，则需要使用这个 -f 来强制格式化才行！</td></tr><tr><td>-i</td><td>与 inode 有较相关的设置，主要的设置值有：</td></tr></tbody></table> 
<pre><code>  size=数值     ：最小是 256Bytes 最大是 2k，一般保留 256 就足够使用了！
  internal=[0|1]：log 设备是否为内置？默认为 1 内置，如果要用外部设备，使用下面设置
  logdev=device ：log 设备为后面接的那个设备上头的意思，需设置 internal=0 才可！
  size=数值     ：指定这块登录区的容量，通常最小得要有 512 个 block，大约 2M 以上才行！
</code></pre> 
<table><thead><tr><th>选项与参数</th><th>含义说明</th></tr></thead><tbody><tr><td>-L</td><td>后面接这个文件系统的标头名称 Label name 的意思！</td></tr><tr><td>-r</td><td>指定 realtime section 的相关设置值，常见的有：</td></tr></tbody></table> 
<pre><code>  extsize=数值  ：就是那个重要的 extent 数值，一般不须设置，但有 RAID 时，
                  最好设置与 swidth 的数值相同较佳！最小为 4K 最大为 1G 。
</code></pre> 
<hr> 
<h3><a id="32_mkfsext4_171"></a>3.2 mkfs.ext4</h3> 
<p>一般用法：<code>mkfs.ext4 选项 数值 设备名称</code></p> 
<table><thead><tr><th>选项</th><th>数值</th><th>含义</th></tr></thead><tbody><tr><td>-b</td><td>可取1K,2K,4K</td><td>设置 block 的大小</td></tr><tr><td>-L</td><td>取名任意</td><td>后面接这个设备的标头名称。</td></tr></tbody></table> 
<h3><a id="33_mkfsvfat_180"></a>3.3 mkfs.vfat</h3> 
<p>一般用法：<code>mkfs.vfat 选项 数值 设备名称</code></p> 
<p>写到这，我发现这个两个指令参数确实有点多，同时书上的内容也不全，因此我新开了一篇博客归纳整理。<br> 关于mkfs.ext4，mkfs.vfat的详细介绍请参考我整理的另一篇博客：<br> <a href="https://blog.csdn.net/Edwinwzy/article/details/130748914">mkfs.vfat以及mkfs.ext4命令详解</a></p> 
<h2><a id="_187"></a>总结：</h2> 
<p>这篇文章主要是分区内容查看和磁盘分区，格式化部分因为书上内容有限，所以这篇文章暂时记录的不多。这篇文章结合<a href="https://blog.csdn.net/Edwinwzy/article/details/130614205?spm=1001.2014.3001.5502">磁盘拓展</a>这篇文章实践，学习起来效果回更好一些。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4f4051397bdab81c00a390bef153ad67/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">EPLAN2.9_连接定义点（线号）去斜线方法，自动线号放置与编号</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ab319ea02b49d91f2ba27771bc58ee1b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS7离线安装GCC9.3.0（亲测）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>