<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaScript也可以制作颜色拾取工具了 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaScript也可以制作颜色拾取工具了" />
<meta property="og:description" content="必备工具？ 作为一名前端开发，颜色拾取工具是不是你们必备的工具，像之前都是用的软件的吸管工具来进行吸取颜色，完成自己的页面设计，但现在使用简单的JavaScript也能实现颜色拾取功能，你们知道吗？Chrome 95 推出的EyeDropper API 能够帮助我们轻松地在 Web 应用中创建吸管工具。使用EyeDropper API你可以使用取色器提取当前页面上的颜色。当取色器被激活的时候，它就像一个“放大镜”，使得你可以进行像素精度的颜色选择。在取色器下方显示的是当前像素点的颜色值，颜色值显示格式与你在设置中选择的一致。
制作自己的工具 当然，EyeDropper不仅仅可以用在特殊的需求场景上，我们也可以将其封装成一个工具，集成自己平时办公学习的插件，如上图所示，我们可以将其做成一个Chrome浏览器的插件，这样在平时的设计工作时，需要提取颜色的时候，可以随时调出该页面对颜色进行拾取，更加快捷地完成自己的工作。
如何制作 弹窗组件 使用JavaScript封装一个弹窗组件，可以使用快捷键来控制弹窗的显示，实现代码如下：
/* * @Author: zheng yong tao * @Date: 2021-12-30 00:51:37 * @LastEditors: zheng yong tao * @LastEditTime: 2021-12-30 02:21:36 * @Description: &#34;弹窗组件类封装&#34; */ class Dialog { /** * * @param {String} innerHTML 内嵌页面html * @param {Object} config 弹窗属性配置 * @param {Function} callBack 回调函数 * @param {Number} mode 内嵌模式 -&gt; 1:页面初始化时就创建dom元素并插入页面 2：窗口打开是创建dom元素，关闭时销毁 */ constructor(innerHTML,config = {},callBack,mode = 1){ this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/e9620baffa4872b0b691a04edca2e3ff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-30T01:54:02+08:00" />
<meta property="article:modified_time" content="2022-01-30T01:54:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaScript也可以制作颜色拾取工具了</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/40/88/bXXlhGAt_o.gif" alt="掘金 - Google Chrome 2022_1_30 1_33_34 00_00_00-00_00_30.gif"></p> 
<h3><a id="_1"></a>必备工具？</h3> 
<p>作为一名前端开发，颜色拾取工具是不是你们必备的工具，像之前都是用的软件的吸管工具来进行吸取颜色，完成自己的页面设计，但现在使用简单的JavaScript也能实现颜色拾取功能，你们知道吗？Chrome 95 推出的EyeDropper API 能够帮助我们轻松地在 Web 应用中创建吸管工具。使用EyeDropper API你可以使用取色器提取当前页面上的颜色。当取色器被激活的时候，它就像一个“放大镜”，使得你可以进行像素精度的颜色选择。在取色器下方显示的是当前像素点的颜色值，颜色值显示格式与你在设置中选择的一致。</p> 
<h3><a id="_3"></a>制作自己的工具</h3> 
<p>当然，EyeDropper不仅仅可以用在特殊的需求场景上，我们也可以将其封装成一个工具，集成自己平时办公学习的插件，如上图所示，我们可以将其做成一个Chrome浏览器的插件，这样在平时的设计工作时，需要提取颜色的时候，可以随时调出该页面对颜色进行拾取，更加快捷地完成自己的工作。</p> 
<h3><a id="_6"></a>如何制作</h3> 
<h4><a id="_7"></a>弹窗组件</h4> 
<p>使用JavaScript封装一个弹窗组件，可以使用快捷键来控制弹窗的显示，实现代码如下：</p> 
<pre><code class="prism language-javaScript">/*
 * @Author: zheng yong tao
 * @Date: 2021-12-30 00:51:37
 * @LastEditors: zheng yong tao
 * @LastEditTime: 2021-12-30 02:21:36
 * @Description: "弹窗组件类封装"
 */
class Dialog {
    /**
     * 
     * @param {String} innerHTML 内嵌页面html
     * @param {Object} config  弹窗属性配置
     * @param {Function} callBack 回调函数
     * @param {Number} mode 内嵌模式 -&gt; 1:页面初始化时就创建dom元素并插入页面 2：窗口打开是创建dom元素，关闭时销毁
     */
    constructor(innerHTML,config = {},callBack,mode = 1){
        this.config = config;
        this.mode = mode;
        this.callBack = callBack
        this.innerHTML = innerHTML;
        this.maskId = 'mask-mt';
        this.dialogInit();
        this.generateMask();
        this.generatePreviewContent(innerHTML);
        if(mode == 1){
            this.append();
        }
    }
    //初始化配置信息
    dialogInit(){
        const dialog = document.getElementsByClassName('dialog');
        let dialogId = 'dialog';
        if(dialog) dialogId += "-" + dialog.length;
        this.dialogId = dialogId;
        this.isHide = true;
    }
    //创建遮罩
    generateMask(){
        let mask = document.createElement('div');
        const maskT = document.getElementsByClassName('mask-mt');
        if(maskT &amp;&amp; maskT.length &gt; 0) mask = maskT[0];
        else{
            mask.className = "mask-mt";
            mask.id = this.maskId;
            let maskStyles = {
                position: "fixed",
                height: '100vh',
                width: '100vw',
                backgroundColor: 'grey',
                top: 0,
                opacity:0.8,
                zIndex:2147483646,
                display:'none'
            };
            mask = tagConfingSet(mask,maskStyles);
        }
        this.mask = mask;
    }
    //创建弹窗
    generatePreviewContent(innerHTML){
        let dialog = document.createElement('div');
        dialog.className = "dialog";
        dialog.id = this.dialogId;
        let dialogStyles = {
            position: "fixed",
            height: this.config.height || '70vh',
            width: this.config.width || '50vw',
            backgroundColor: 'white',
            top: this.config.top || "10vh",
            left: this.config.left || "25vw",
            zIndex:2147483647,
            display:"none",
            flexDirection: 'column',
            "background-image": 'url(' + this.config.backgroundImg + ')',
            "background-size": '100%',
            "background-repeat": 'no-repeat',
            opacity:0.7,
        }
        dialog = tagConfingSet(dialog,dialogStyles);
        let icon = `
            &lt;div style="height:16px%;font-size: 16px;"&gt;
                &lt;span class="dialogCloseBtn" title="关闭" style="color:red;float: right;width: 16px;height: 16px;
                            background-color: gainsboro;line-height: 16px;
                            text-align: center;border-radius: 50%;margin: 4.8px;
                            cursor: pointer;font-size: 16px;"&gt;
                    x
                &lt;/span&gt;
            &lt;/div&gt;
        `;
        dialog.innerHTML = icon + innerHTML;
        let closebtn = dialog.getElementsByClassName('dialogCloseBtn')[0];
        closebtn.onclick = ()=&gt;{
            this.close();
        };
        this.dialog = dialog;
    }
    //将节点插入页面html
    append(){
        let ghtml = document.getElementsByTagName('html')[0];
        ghtml.appendChild(this.dialog);
        ghtml.appendChild(this.mask);
    }
    open(){
        this.mask.style.display = 'block';
        this.dialog.style.display = 'flex';
        this.isHide = false;
        if(this.mode == 2){
            this.append();
            this.callBack();
        }
    }
    close(){
        this.dialog.style.display = 'none';
        this.mask.style.display = 'none';
        this.isHide = true;
        if(this.mode == 2){
            this.dialog.remove();
        }
    }
}
</code></pre> 
<h4><a id="_131"></a>生成弹窗并完成对应功能</h4> 
<p>实现颜色提取功能的话其实很简单，就需要几行代码,1、监听按钮的点击；2、创建拾取工具；3、回填拾取的颜色数据。具体代码如下：</p> 
<pre><code class="prism language-javascript">panelDom<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'colorGet'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> eyeDropper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EyeDropper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    panel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> eyeDropper<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        panel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        panelDom<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'colorShow'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>sRGBHex<span class="token punctuation">;</span>
        panelDom<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'colorText'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>sRGBHex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        panel<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_146"></a>说在后面</h3> 
<p>EyeDropper这个API出现，其实也可以给我们带来更多的设计和想象空间，也是一个比较实用的API，感兴趣的同学们可以自己动手去体验一下，感受一下这个新出的API的魅力。</p> 
<h3><a id="_148"></a>相关代码</h3> 
<p>图片展示的插件代码均已开源，且在我前几篇文章中有对这个插件的其他功能进行了比较详细的介绍，详细代码可以到Gitee上查看，地址为：https://gitee.com/zheng_yongtao/chrome-plug-in.git 感兴趣的也可以体验一下试试，或者有兴趣一起扩展该插件的也可以找我沟通沟通，目前插件的开发还是比较粗糙，仍在学习阶段，也希望有同学可以带领我学习，或者一起学习进步。</p> 
<h3><a id="_150"></a>感谢大家</h3> 
<p>感谢大家的观看，希望这篇文章能让你们有所收获。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84c7106946f4434a6d5f4ae1cbc8875f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">cesium 实现雷达波</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/636859778a4a926fd0c224d2f5ad78aa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;基础——结构体</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>