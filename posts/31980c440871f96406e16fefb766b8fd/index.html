<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue3&#43;ts&#43;NaiveUI自定义组件 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue3&#43;ts&#43;NaiveUI自定义组件" />
<meta property="og:description" content="最近接触个项目，有一部分区域有很高的相似度，所以想封装成共通。具体代码如下。
前提：有一个主页面，里面有多个相同区域（例如：
区域1=下拉列表&#43;入力框&#43;...&#43;按钮。
区域2=下拉列表&#43;入力框&#43;...&#43;按钮。
区域3=下拉列表&#43;入力框&#43;...&#43;按钮。
需求，因为有大量相同代码，需要将【下拉列表&#43;入力框&#43;...&#43;按钮。】封装成一个vue文件。
1. 定义共通组件内容 &lt;template&gt; &lt;!-- 循环绑定的模型数据 --&gt; &lt;template v-for=&#34;(item, index) in model.plan&#34; &gt; &lt;div class=&#34;&#34;&gt;固定文言&lt;/div&gt; &lt;div class=&#34;&#34;&gt;单位：{{model.unit}}&lt;/div&gt; &lt;div class=&#34; style=&#34;&#34;&gt; 频度： {{model.frequency}} &lt;/div&gt; &lt;n-grid :cols=&#34;3&#34;&gt; &lt;n-gi :span=&#34;1&#34; class=&#34;&#34;&gt; &lt;n-form-item :key=&#34;index &#43; &#39;下拉列表&#39;&#34; :label=&#34;&#39;下拉列表&#39;&#34; :path=&#34;`${model.checkPath}[${index}].methodSummary`&#34; :rule=&#34;{ required: true, trigger: [&#39;input&#39;, &#39;change&#39;] }&#34; &gt; &lt;n-select v-model:value=&#34;item.methodSummary&#34; class=&#34;&#34; clearable placeholder=&#34;&#34; :options=&#34;model.summaryOptions&#34; /&gt; &lt;/n-form-item&gt; &lt;/n-gi&gt; &lt;n-gi :span=&#34;1&#34; class=&#34;&#34;&gt; ...略 &lt;/n-gi&gt; &lt;/n-grid&gt; &lt;/template&gt; &lt;/template&gt; &lt;script lang=&#34;ts&#34;&gt; export default { name: &#39;CommonInput&#39; } &lt;/script&gt; &lt;script lang=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/31980c440871f96406e16fefb766b8fd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-14T10:23:58+08:00" />
<meta property="article:modified_time" content="2023-03-14T10:23:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue3&#43;ts&#43;NaiveUI自定义组件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近接触个项目，有一部分区域有很高的相似度，所以想封装成共通。具体代码如下。</p> 
<p>前提：有一个主页面，里面有多个相同区域（例如：</p> 
<p>区域1=下拉列表+入力框+...+按钮。</p> 
<p>区域2=下拉列表+入力框+...+按钮。</p> 
<p>区域3=下拉列表+入力框+...+按钮。</p> 
<p>需求，因为有大量相同代码，需要将【下拉列表+入力框+...+按钮。】封装成一个vue文件。</p> 
<h2>1. 定义共通组件内容</h2> 
<pre><code class="language-TypeScript">&lt;template&gt;
    &lt;!-- 循环绑定的模型数据 --&gt;
    &lt;template v-for="(item, index) in model.plan" &gt;
        &lt;div class=""&gt;固定文言&lt;/div&gt;
        &lt;div class=""&gt;单位：{<!-- -->{model.unit}}&lt;/div&gt;
        &lt;div class=" style=""&gt;
            频度： {<!-- -->{model.frequency}}
        &lt;/div&gt;
        &lt;n-grid :cols="3"&gt;
            &lt;n-gi :span="1" class=""&gt;
                &lt;n-form-item
                    :key="index + '下拉列表'"
                    :label="'下拉列表'"
                    :path="`${model.checkPath}[${index}].methodSummary`"
                    :rule="{
                        required: true,
                        trigger: ['input', 'change']
                    }"
                &gt;
                    &lt;n-select
                        v-model:value="item.methodSummary"
                        class=""
                        clearable
                        placeholder=""
                        :options="model.summaryOptions"
                    /&gt;
                &lt;/n-form-item&gt;
            &lt;/n-gi&gt;
            &lt;n-gi :span="1" class=""&gt;
                ...略
            &lt;/n-gi&gt;
        &lt;/n-grid&gt;
    &lt;/template&gt;
&lt;/template&gt;
&lt;script lang="ts"&gt;
    export default {
        name: 'CommonInput'
    }
&lt;/script&gt;

&lt;script lang="ts" setup&gt;
    // 接收主画面参数
    const props = defineProps([
        'title', // 标题
        'unit', // 单位
        'frequency', // 频度
        'summaryOptions',//下拉列表数据
        'monitoringPlan',//循环数据列表
        'checkPath'//必须入力check的固定文字
    ])

    // 定义数据模型
    const model = reactive({
        title: '',
        unit: '',
        frequency: '',
        summaryOptions: [],
        monitoringPlan: [
            {
                methodSummary: '',
                methodDetail: '',
                comment: ''
            }
        ],
        checkPath: ''
    })

    // 将接收的参数给模型赋值
    const handleInit = () =&gt; {
        model.title = props.title
        model.unit = props.unit
        model.frequency = props.frequency
        model.summaryOptions = props.summaryOptions
        model.monitoringPlan = props.monitoringPlan
        model.checkPath = props.checkPath
    }

    // 调用初期化方法
    handleInit()
&lt;/script&gt;</code></pre> 
<h2>2. 主页面嵌入自定义的共通组件</h2> 
<pre><code class="language-TypeScript">&lt;template&gt;
//第一次引用
&lt;CommonInput
    :title="`标题1`"
    :unit="`/m3`"
    :frequency="`小标题1`"
    :summaryOptions="select1"
    :plan="planModel.plan1"
    :checkPath="`plan1`"
&gt;&lt;/CommonInput&gt;

//第二次引用
&lt;CommonInput
    :title="`标题2`"
    :unit="`/m2`"
    :frequency="`小标题2`"
    :summaryOptions="select2"
    :plan="planModel.plan2"
    :checkPath="`plan2`"
&gt;&lt;/CommonInput&gt;

&lt;/template&gt;
&lt;script lang="ts" setup&gt;
// 引入自定义组件
import CommonInput from '@/views/common/index.vue'

    // 定义模型数据
    const planModel = reactive({
        plan1: [
            {
                methodSummary: '',
                methodDetail: '',
                comment: ''
            }
        ],
        plan2: [
            {
                methodSummary: '',
                methodDetail: '',
                comment: ''
            }
        ]
    })
    // 定义下拉列表固定值
    const select1: any = reactive([
        { value: '001', label: '' },
        { value: '002', label: '值1' }
    ])
    const select2: any = reactive([
        { value: '101', label: '' },
        { value: '102', label: '内容1' },
        { value: '103', label: '内容2' }
    ])

    // 下记略
&lt;/script&gt;</code></pre> 
<p>注意事项：无须指定返回值，主画面planModel可以自动取到，小画面更改的数据。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a350308b916cb3e4f14d5bd867836926/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue3&#43;vite项目移动端适配：postcss-pxtorem和amfe-flexible</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/259df79032daa3da783d22cd7cc72403/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">蓝桥杯 算法训练 Python</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>