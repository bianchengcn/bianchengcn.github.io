<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL】MySQL如何查询和筛选存储的JSON数据？ - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【MySQL】MySQL如何查询和筛选存储的JSON数据？" />
<meta property="og:description" content="MySQL如何查询和筛选存储的JSON数据？ 一、背景介绍二、支持的JSON数据类型三、基础数据3.1 创建表3.2 插入 JSON 数据3.3 查询 JSON 数据 四、操作函数4.1 JSON_OBJECT4.2 JSON_ARRAY4.3 JSON_EXTRACT 一、背景介绍 JSON(JavaScript Object Notation)是一种轻量级的数据交换格式，在现代应用程序中得到了广泛的应用。处理和存储非结构化数据变得越来越重要。MySQL 是一种常用的关系型数据库管理系统，为了支持非结构化数据的存储和查询，于是 MySQL引入了对JSON数据类型的支持。
MySQL从5.7.8版本开始添加了对JSON的支持，使得我们可以在MySQL数据库中存储和查询JSON格式的数据。本文将介绍如何使用MySQL查询和筛选存储的JSON数据，并提供相应的代码示例。
二、支持的JSON数据类型 从MySQL 5.7.8版本开始，MySQL引入了对JSON数据类型的支持。MySQL可以存储任意的JSON数据，包括对象、数组、字符串等。并且MySQL还对JSON数据类型还提供了一系列的操作函数和运算符，以便于对JSON数据进行查询和操作。
三、基础数据 3.1 创建表 DROP TABLE IF EXISTS `my_table`; CREATE TABLE `my_table` ( `id` int NOT NULL, `message` json NULL, PRIMARY KEY (`id`) USING BTREE ) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Dynamic; SET FOREIGN_KEY_CHECKS = 1; 上述示例创建了一个名为 my_table 的表，包含一个名为 message 的JSON列。message列可以存储任意的JSON数据。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/04e15414dad895c791ba6f818e451ff2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T20:13:19+08:00" />
<meta property="article:modified_time" content="2024-01-03T20:13:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL】MySQL如何查询和筛选存储的JSON数据？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>MySQL如何查询和筛选存储的JSON数据？</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、背景介绍</a></li><li><a href="#JSON_7" rel="nofollow">二、支持的JSON数据类型</a></li><li><a href="#_11" rel="nofollow">三、基础数据</a></li><li><ul><li><a href="#31__13" rel="nofollow">3.1 创建表</a></li><li><a href="#32__JSON__28" rel="nofollow">3.2 插入 JSON 数据</a></li><li><a href="#33__JSON__42" rel="nofollow">3.3 查询 JSON 数据</a></li></ul> 
  </li><li><a href="#_68" rel="nofollow">四、操作函数</a></li><li><ul><li><a href="#41_JSON_OBJECT_72" rel="nofollow">4.1 JSON_OBJECT</a></li><li><a href="#42_JSON_ARRAY_84" rel="nofollow">4.2 JSON_ARRAY</a></li><li><a href="#43_JSON_EXTRACT_97" rel="nofollow">4.3 JSON_EXTRACT</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、背景介绍</h2> 
<p>JSON(JavaScript Object Notation)是一种轻量级的数据交换格式，在现代应用程序中得到了广泛的应用。处理和存储非结构化数据变得越来越重要。MySQL 是一种常用的关系型数据库管理系统，为了支持非结构化数据的存储和查询，于是 MySQL引入了对JSON数据类型的支持。</p> 
<p>MySQL从5.7.8版本开始添加了对JSON的支持，使得我们可以在MySQL数据库中存储和查询JSON格式的数据。本文将介绍如何使用MySQL查询和筛选存储的JSON数据，并提供相应的代码示例。</p> 
<h2><a id="JSON_7"></a>二、支持的JSON数据类型</h2> 
<p>从MySQL 5.7.8版本开始，MySQL引入了对JSON数据类型的支持。MySQL可以存储任意的JSON数据，包括对象、数组、字符串等。并且MySQL还对JSON数据类型还提供了一系列的操作函数和运算符，以便于对JSON数据进行查询和操作。</p> 
<h2><a id="_11"></a>三、基础数据</h2> 
<h3><a id="31__13"></a>3.1 创建表</h3> 
<pre><code class="prism language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>my_table<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>my_table<span class="token punctuation">`</span></span>  <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>message<span class="token punctuation">`</span></span> json <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">USING</span> <span class="token keyword">BTREE</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token operator">=</span> utf8mb4 <span class="token keyword">COLLATE</span> <span class="token operator">=</span> utf8mb4_general_ci ROW_FORMAT <span class="token operator">=</span> Dynamic<span class="token punctuation">;</span>

<span class="token keyword">SET</span> FOREIGN_KEY_CHECKS <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> 
<p>上述示例创建了一个名为 <code>my_table</code> 的表，包含一个名为 <code>message</code> 的JSON列。<code>message</code>列可以存储任意的JSON数据。</p> 
<h3><a id="32__JSON__28"></a>3.2 插入 JSON 数据</h3> 
<p>要在JSON列中插入数据，可以使用JSON函数将JSON字符串转换为JSON数据类型。以下是一个示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>my_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>message<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'{\"age\": 30, \"name\": \"John\"}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>my_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>message<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'{\"age\": 40, \"name\": \"Mary\"}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>my_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>message<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'{\"age\": 50, \"name\": \"Tom\"}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>my_table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>message<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'{\"age\": 60, \"name\": \"Jermy\"}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上述示例在<code>my_table</code>表中插入了4条记录，其中 <code>message</code> 列包含一个JSON对象。</p> 
<h3><a id="33__JSON__42"></a>3.3 查询 JSON 数据</h3> 
<p>可以使用-&gt;或者-&gt;&gt;运算符来查询JSON数据。-&gt;运算符返回JSON对象的属性值，-&gt;&gt;运算符返回属性值的字符串表示。</p> 
<p>以下是两个</p> 
<blockquote> 
 <p><strong>查询JSON数据的示例1：</strong></p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> message<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token string">'$.name'</span> <span class="token keyword">AS</span> name <span class="token keyword">FROM</span> my_table<span class="token punctuation">;</span>
</code></pre> 
<p><strong>结果如下：</strong></p> 
<p><img src="https://images2.imgbox.com/88/6e/WZFGNG1l_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>查询示例2：</strong></p> 
</blockquote> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_table <span class="token keyword">WHERE</span> JSON_EXTRACT<span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token string">'$.age'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">40</span>
</code></pre> 
<p><strong>结果如下：</strong></p> 
<p><img src="https://images2.imgbox.com/bd/d5/XgeSElSL_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_68"></a>四、操作函数</h2> 
<p>MySQL提供了一系列的JSON数据操作函数，以方便对JSON数据进行查询和操作。以下是一些常用的JSON数据操作函数：</p> 
<h3><a id="41_JSON_OBJECT_72"></a>4.1 JSON_OBJECT</h3> 
<p><code>JSON_OBJECT</code>函数用于创建一个JSON对象。以下是一个示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_OBJECT<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'John'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> message<span class="token punctuation">;</span>
</code></pre> 
<p>上述示例创建了一个名为 <code>message</code> 的JSON对象，包含name和age属性。</p> 
<p><img src="https://images2.imgbox.com/4b/66/bYmgpFFk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="42_JSON_ARRAY_84"></a>4.2 JSON_ARRAY</h3> 
<p><code>JSON_ARRAY</code>函数用于创建一个JSON数组。以下是一个示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_ARRAY<span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> fruits<span class="token punctuation">;</span>
</code></pre> 
<p>上述示例创建了一个名为fruits的JSON数组，包含三个元素。</p> 
<p><img src="https://images2.imgbox.com/8f/d6/iMPY5NzR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="43_JSON_EXTRACT_97"></a>4.3 JSON_EXTRACT</h3> 
<p><code>JSON_EXTRACT</code>函数用于提取JSON数据中的值。以下是一个示例：</p> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span> JSON_EXTRACT<span class="token punctuation">(</span><span class="token string">'{"name": "John", "age": 30}'</span><span class="token punctuation">,</span> <span class="token string">'$.name'</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> name<span class="token punctuation">;</span>
</code></pre> 
<p>上述示例从JSON数据中提取了name属性的值。</p> 
<p><img src="https://images2.imgbox.com/bc/b7/n1D5BitO_o.png" alt="在这里插入图片描述"></p> 
<p>以上只是最基本的用法，关于MySQL操作JSON数据类型的函数还有很多高级用法，等用到的时候再学。</p> 
<p>本文完结！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bb20a3156b1e05c9b94b4cf05a5821f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Flink Watermark和时间语义</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62782e383acc32265e75550d1b836f70/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">阿赵UE学习笔记——7、导入资源</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>