<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>web项目设置统一返回格式教程 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="web项目设置统一返回格式教程" />
<meta property="og:description" content="21. 统一返回数据格式（JSON规则） 项目中将响应封装成json返回，一般我们会将所有的接口数据格式统一，使前端对数据的操作更一致，返回的数据格式包含状态码、返回消息、数据这部分
列表 { &#34;success&#34;: true, &#34;code&#34;: 200, &#34;message&#34;: &#34;成功&#34;, &#34;data&#34;: { &#34;items&#34;: [ { &#34;id&#34;: &#34;1&#34;, &#34;name&#34;: &#34;刘德华&#34;, &#34;intro&#34;: &#34;毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余&#34; } ] } } 分页 { &#34;success&#34;: true, &#34;code&#34;: 20000, &#34;message&#34;: &#34;成功&#34;, &#34;data&#34;: { &#34;total&#34;: 17, &#34;rows&#34;: [ { &#34;id&#34;: &#34;1&#34;, &#34;name&#34;: &#34;刘德华&#34;, &#34;intro&#34;: &#34;毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余&#34; } ] } } 没有返回数据 { &#34;success&#34;: true, &#34;code&#34;: 20000, &#34;message&#34;: &#34;成功&#34;, &#34;data&#34;: {} } 失败 { &#34;success&#34;: false, &#34;code&#34;: 20001, &#34;message&#34;: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/ceb9c05955d607200eab64dc8a6d7255/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-05T12:24:05+08:00" />
<meta property="article:modified_time" content="2022-10-05T12:24:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">web项目设置统一返回格式教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="21_JSON_0"></a>21. 统一返回数据格式（JSON规则）</h4> 
<blockquote> 
 <p>项目中将响应封装成json返回，一般我们会将所有的接口数据格式统一，使前端对数据的操作更一致，返回的数据格式包含状态码、返回消息、数据这部分</p> 
</blockquote> 
<ol><li>列表</li></ol> 
<pre><code>{
  "success": true,
  "code": 200,
  "message": "成功",
  "data": {
    "items": [
      {
        "id": "1",
        "name": "刘德华",
        "intro": "毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余"
      }
    ]
  }
}
</code></pre> 
<ol start="2"><li>分页</li></ol> 
<pre><code>{
  "success": true,
  "code": 20000,
  "message": "成功",
  "data": {
    "total": 17,
    "rows": [
      {
        "id": "1",
        "name": "刘德华",
        "intro": "毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余"
      }
    ]
  }
}
</code></pre> 
<ol start="3"><li>没有返回数据</li></ol> 
<pre><code>{
  "success": true,
  "code": 20000,
  "message": "成功",
  "data": {}
}
</code></pre> 
<ol start="4"><li>失败</li></ol> 
<pre><code>{
  "success": false,
  "code": 20001,
  "message": "失败",
  "data": {}
}
</code></pre> 
<h6><a id="_65"></a>总结</h6> 
<pre><code>{
  "success": 布尔, //响应是否成功
  "code": 数字, //响应码
  "message": 字符串, //返回消息
  "data": HashMap //返回数据，放在键值对中
}
</code></pre> 
<h4><a id="22__76"></a>22. 统一异常处理</h4> 
<blockquote> 
 <p>想让异常结果也显示为统一的返回结果对象，并且统一处理系统的异常信息，那么需要统一异常处理</p> 
</blockquote> 
<h6><a id="1_80"></a>1.统一异常处理配置类</h6> 
<pre><code>/**
 * @author jia
 * @date 2022/8/17
 * @description  统一异常处理类
 */
@ControllerAdvice
public class GlobalExceptionHandler {
    //指定出现什么异常执行这个方法
    @ExceptionHandler(Exception.class)
    @ResponseBody  //为了在也买你返回数据
    public R error(Exception e){
        e.printStackTrace();
        return R.error().message("执行了全局处理异常.....");
    }
}
</code></pre> 
<h6><a id="2__100"></a>2. 特定异常处理</h6> 
<pre><code>//2.特定异常
    @ExceptionHandler(ArithmeticException.class)
    @ResponseBody  //为了返回数据
    public R error(ArithmeticException e){
        e.printStackTrace();
        return R.error().message("执行ArithmeticException异常处理.....");
    }
</code></pre> 
<h6><a id="3_112"></a>3.自定义异常处理</h6> 
<ol><li> <p>创建自定义异常类继承RuntimeException</p> 
  <ol><li>写异常属性</li></ol> <pre><code>/**
 * @author jia
 * @date 2022/8/20
 * @description  自定义异常类
 */

@Data
@AllArgsConstructor  //有参构造
@NoArgsConstructor   //无参构造
public class GuliException extends RuntimeException{
    private Integer code;//状态码
    private String msg; //异常信息
}
</code></pre> </li><li> <p>统一异常类中添加规则</p> <pre><code>//3.自定义异常处理
    @ExceptionHandler(GuliException.class)
    @ResponseBody  //为了返回数据
    public R error(GuliException e){
        e.printStackTrace();
        return R.error().code(e.getCode()).message(e.getMessage());
    }
</code></pre> <p>3.执行自定义异常</p> <pre><code>try {
            int i = 10/0;
        }catch (Exception e){
            //执行自定义异常
            throw new GuliException(20001,"执行了自定义异常处理");
        }
</code></pre> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/46baf0296f950d3e2cfc9430e3ede43e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">项目中统一日志处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b126534304df3f61d36dcbf5c03986e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java项目中导入excel数据，使用EasyExcel框架</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>