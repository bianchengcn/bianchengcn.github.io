<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue 可视化表单设计器 自定义组件 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue 可视化表单设计器 自定义组件" />
<meta property="og:description" content="有一款基于vue的可视化表单编辑器，直接双击或者拖拽组件，便可以创建一个表单，非常方便。今天为大家介绍这款编辑器：
官方地址：Variant Form - 可视化低代码表单
github地址：https://github.com/vform666/variant-form
1.1界面图片
1.如何使用？ 两种使用方法。
第一种，直接引用。正如github上所示，直接安装整个插件使用。
1.1.1 安装：
npm i vform-builds 1.1.2 项目中使用：
/ ******* 引入并全局注册VForm组件 *******/ import Vue from &#39;vue&#39; import App from &#39;./App.vue&#39; import ElementUI from &#39;element-ui&#39; //引入element-ui库 import VForm from &#39;vform-builds&#39; //引入VForm库 import &#39;element-ui/lib/theme-chalk/index.css&#39; //引入element-ui样式 import &#39;vform-builds/dist/VFormDesigner.css&#39; //引入VForm样式 Vue.config.productionTip = false Vue.use(ElementUI) //全局注册element-ui Vue.use(VForm) //全局注册VForm(同时注册了v-form-designer和v-form-render组件) new Vue({ render: h =&gt; h(App), }).$mount(&#39;#app&#39;) 1.1.3 使用编辑组件
&lt;template&gt; &lt;v-form-designer&gt;&lt;/v-form-designer&gt; &lt;/template&gt; &lt;script&gt; export default { data() { return { } } } &lt;/script&gt; &lt;style lang=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/6dddd1d190b3678cee8d6071434bc5e9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-16T16:18:45+08:00" />
<meta property="article:modified_time" content="2023-03-16T16:18:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue 可视化表单设计器 自定义组件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>有一款基于vue的可视化表单编辑器，直接双击或者拖拽组件，便可以创建一个表单，非常方便。今天为大家介绍这款编辑器：</p> 
<p>官方地址：<a href="https://www.vform666.com/" rel="nofollow" title="Variant Form - 可视化低代码表单">Variant Form - 可视化低代码表单</a></p> 
<p>github地址：<a href="https://github.com/vform666/variant-form" title="https://github.com/vform666/variant-form">https://github.com/vform666/variant-form</a></p> 
<p><img alt="" height="687" src="https://images2.imgbox.com/10/99/sDkYO5IG_o.jpg" width="1148"></p> 
<p style="text-align:center;">                 1.1界面图片</p> 
<p style="text-align:center;"></p> 
<h3>1.如何使用？</h3> 
<p>两种使用方法。</p> 
<p>第一种，直接引用。正如github上所示，直接安装整个插件使用。</p> 
<p>1.1.1 安装：</p> 
<pre><code class="language-bash">npm i vform-builds</code></pre> 
<p>1.1.2 项目中使用：</p> 
<pre><code class="language-javascript">/ ******* 引入并全局注册VForm组件  *******/

import Vue from 'vue'
import App from './App.vue'

import ElementUI from 'element-ui'  //引入element-ui库
import VForm from 'vform-builds'  //引入VForm库

import 'element-ui/lib/theme-chalk/index.css'  //引入element-ui样式
import 'vform-builds/dist/VFormDesigner.css'  //引入VForm样式

Vue.config.productionTip = false

Vue.use(ElementUI)  //全局注册element-ui
Vue.use(VForm)  //全局注册VForm(同时注册了v-form-designer和v-form-render组件)

new Vue({
  render: h =&gt; h(App),
}).$mount('#app')</code></pre> 
<p>1.1.3 使用编辑组件</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;v-form-designer&gt;&lt;/v-form-designer&gt;
&lt;/template&gt;

&lt;script&gt;
  export default {
    data() {
      return {
      }
    }
  }
&lt;/script&gt;

&lt;style lang="scss"&gt;
body {
  margin: 0;  /* 如果页面出现垂直滚动条，则加入此行CSS以消除之 */
}
&lt;/style&gt;</code></pre> 
<p>1.1.4 使用渲染组件</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;v-form-render :form-json="formJson" :form-data="formData" :option-data="optionData" ref="vFormRef"&gt;
    &lt;/v-form-render&gt;
    &lt;el-button type="primary" @click="submitForm"&gt;Submit&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  export default {
    data() {
      return {
        formJson: {"widgetList":[],"formConfig":{"labelWidth":80,"labelPosition":"left","size":"","labelAlign":"label-left-align","cssCode":"","customClass":"","functions":"","layoutType":"PC","onFormCreated":"","onFormMounted":"","onFormDataChange":""}},
        formData: {},
        optionData: {}
      }
    },
    methods: {
      submitForm() {
        this.$refs.vFormRef.getFormData().then(formData =&gt; {
          // Form Validation OK
          alert( JSON.stringify(formData) )
        }).catch(error =&gt; {
          // Form Validation failed
          this.$message.error(error)
        })
      }
    }
  }
&lt;/script&gt;</code></pre> 
<p>如果，你的需求不需要定制，那么基本如上所示，就基本够用了。</p> 
<p>如果需要有一些自己的修改，那么需要独立安装所有的依赖。</p> 
<p>1.2.1 独立安装依赖</p> 
<p><img alt="" height="839" src="https://images2.imgbox.com/66/0c/iOWVRrAg_o.png" width="1200"></p> 
<p> 项目的依赖安装完毕之后，我们对其进行一些改造，去到所在的组件，该删除的删除，该隐藏的隐藏。如下：</p> 
<p><img alt="" height="716" src="https://images2.imgbox.com/7b/46/dHLKjL9A_o.png" width="1200"></p> 
<p> 1.2.2 使用注意</p> 
<p>所有ui组件基于element-ui，可以在左侧组件库内双击图标或者鼠标拖拽至中间画布区域，完成布局和字段的填写。</p> 
<p></p> 
<h3>2.自定义组件，扩展组件？</h3> 
<p>自带的组件已经很全了。但是架不住变态需求。比如，要求我们增加一个图片组件。这时候，只能自己根据其内部机制进行扩展了。</p> 
<p>2.1 找到项目中 extension 文件夹 新建组件</p> 
<p><img alt="" height="553" src="https://images2.imgbox.com/42/8c/PpM45OXM_o.png" width="391"></p> 
<p>新建一个image的文件夹，里边新增一个 image-widget.vue的组件。</p> 
<p><strong>注意，</strong>由于他的解析都是按照 xx-widget 这个形式去找组件的，所以必须以‘-widget’结尾命名。</p> 
<p></p> 
<p> 2.2 定义这个图片组件的字段</p> 
<p>所有的字段在项目中都有对应，需要看对应关系的需要到 如下文件中去查看：</p> 
<p><img alt="" height="803" src="https://images2.imgbox.com/27/16/j5ExwddS_o.png" width="1200"></p> 
<p></p> 
<p>我们还是先打开extension中的 extension-schema.js ，在里边最下方增加如下代码（增加的是这个图片组件的字段，用于属性的编辑和组件的渲染），</p> 
<pre><code class="language-javascript">// extension-schema.js ******* 新增图片 字段
export const imageSchema = {
    type: 'image',
    icon: 'picture-upload-field',
    formItemFlag: true,
    options: {
        name: '',
        label: '',
        labelAlign: '',
        labelWidth: null,
        defaultValue: './sign.jpg',
        imageWidth: '100',
        imageHeight: '100',
        labelHidden: false,
        customClass: '',
    }
}
</code></pre> 
<p> 2.3 注册新增组件</p> 
<p>新增了组件需要注册这个组件，否则未来就不能渲染。</p> 
<p>同样在extension文件夹下找到extension-loader.js 文件，在最上方引用组件字段和组件，然后在下方注册组件，并指定组件属性的编辑器，</p> 
<pre><code class="language-javascript">// extension-loader.js

// 首先引入图片组件和图片组件的定义的字段
import {imageSchema} from "@/extension/samples/extension-schema"
import ImageWidget from '@/extension/samples/image/image-widget'

......




// 然后在最后组件 ‘/* 字段组件加载完毕 end */’ 之前 注册我们写好的图片组件

/** 注册自定义图片组件 */
  addCustomWidgetSchema(imageSchema)  //加载组件 Json Schema
  Vue.component(ImageWidget.name, ImageWidget)  //注册组件

  // 这段代码的意思是  如果组件的字段中出现 ‘imageWidth’ 这个属性的时候，那么需要
  // 加载 image-editor 这个属性编辑组件
  // 这个组件怎么写  我们下边再说
  PERegister.registerCPEditor('imageWidth', 'image-editor',
      PEFactory.createInputTextEditor('imageWidth', 'extension.setting.imageWidth'))</code></pre> 
<p> 2.4 新增组件的中英文对照</p> 
<p>因为这个项目用到了i18n国际化，所以需要添加中英文对照。</p> 
<p>找打lang文件夹，找到如下文件</p> 
<p><img alt="" height="279" src="https://images2.imgbox.com/98/61/CNhNzAGI_o.png" width="670"></p> 
<p> 分别添加字段：</p> 
<pre><code class="language-javascript">// us js
export default {
  extension: {
    widgetLabel: {
      card: 'Card',
      alert: 'Alert',
      // 新增的字段  
      image: 'Image'
    },

    setting: {
      cardFolded: 'Folded',
      cardShowFold: 'Show Fold',
      cardWidth: 'Width Of Card',
      cardShadow: 'Shadow',

      alertTitle: 'Title',
      alertType: 'Type',
      description: 'Description',
      closable: 'Closable',
      closeText: 'Text On Close Btn',
      center: 'Center',
      showIcon: 'Show Icon',
      effect: 'Effect',
        
      // 新增的字段
      imageWidth: 'Width',
      imageHeight: 'Height'
        
    },

  }
}


// cn js 
export default {
  extension: {
    widgetLabel: {
      card: '卡片',
      alert: '提示',
      // 新增
      image: '图片'
    },

    setting: {
      cardFolded: '是否收起',
      cardShowFold: '显示折叠按钮',
      cardWidth: '卡片宽度',
      cardShadow: '显示阴影',

      alertTitle: '标题',
      alertType: '类型',
      description: '辅助性文字',
      closable: '是否可关闭',
      closeText: '关闭按钮文字',
      center: '文字居中',
      showIcon: '显示图标',
      effect: '显示效果',
      // 新增
      imageWidth: '宽度',
      imageHeight: '高度'

    },

  }
}

</code></pre> 
<p> 2.5 增加属性编辑器</p> 
<p>我们上边也提高了图片的imagewidth需要使用 image-editor编辑组件来进行编辑，那么我们需找到存放编辑组件的位置，如下图路径</p> 
<p><img alt="" height="803" src="https://images2.imgbox.com/49/0e/sjb3FwA5_o.png" width="1200"></p> 
<p>如图地方新增 image-editor.vue 组件，其内部代码如下：</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- 图片宽度编辑 --&gt;
    &lt;el-form-item :label="i18nt('designer.setting.imageWidth')"&gt;
      &lt;el-input 
      type="text" 
      v-model="optionModel.imageWidth" 
      &gt;&lt;/el-input&gt;
    &lt;/el-form-item&gt;
     &lt;!-- 图片高度编辑 --&gt;
    &lt;el-form-item :label="i18nt('designer.setting.imageHeight')"&gt;
      &lt;el-input 
      type="text" 
      v-model="optionModel.imageHeight" 
      &gt;&lt;/el-input&gt;
    &lt;/el-form-item&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  import i18n from "@/utils/i18n"
  import propertyMixin from "@/components/form-designer/setting-panel/property-editor/propertyMixin"  
  export default {
    name: "image-editor",
    mixins: [i18n, propertyMixin],
    props: {
      designer: Object,
      selectedWidget: Object,
      optionModel: Object,
    },
  }
&lt;/script&gt;

&lt;style scoped&gt;
  .html-content-editor {
    font-size: 14px;
  }
&lt;/style&gt;
</code></pre> 
<p> 写完后，基本上一个自定义的图片编辑器就写好了。他最终会出现在下边的自定义扩展字段：</p> 
<p><img alt="" height="646" src="https://images2.imgbox.com/92/11/9fACswNk_o.png" width="1163"></p> 
<p>2.6 编译项目</p> 
<p>如果你在vue项目内直接预览，问题不大。</p> 
<p>但是注意，如果你是离线预览。也就是说，你把所有的资源全部现在下来，放在一个html文件中预览的时候，需要重新编译。</p> 
<p>运行</p> 
<pre><code class="language-bash">npm run lib-render</code></pre> 
<p>最终生成dist文件，取出lib-render中的VFormRender.umd.min.js，这个就是我们离线版本的js。</p> 
<p>最终附上离线版本的结构：</p> 
<p><img alt="" height="804" src="https://images2.imgbox.com/c5/aa/qlxxaUKh_o.png" width="1200"></p> 
<p>至此，自定义组件就做好了。</p> 
<p>要多看他原始组件如何加载解析的，才能写出自定义组件。</p> 
<p>~ end</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/681f1ce6f9304e9bd9933af6feeada3d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu16安装MySQL</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/62167d5a6f9460448b065abb2dc749dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【MyBatis-Plus】记录一次挺蠢的BUG。。。ServiceImpl＜M extends BaseMapper＜T＞, T＞，其他类注入后不生效</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>