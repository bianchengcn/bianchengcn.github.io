<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java中 Map集合 compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault 方法的区别 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java中 Map集合 compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault 方法的区别" />
<meta property="og:description" content="Java中 Map集合 compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault 方法的区别 一、概述 最近在写代码过程中，发现java map中增加一些方法：compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault ， 在平时开发中要到一些，但是没有仔细对比各个方法之间的区别。 本文将系统性的整理 几个重要的方法区别：
compute 3个方法之间的区别；putIfAbsent 和computeIfAbsent 方法的异同点 ；put 和 putIfAbsent方法的区别。 二、代码演示 1、 get 和 getOrDefault 方法演示 @Test public void getAndgetOrDefaultTest() throws Exception { final HashMap&lt;Object, Object&gt; map = Maps.newHashMap(); map.put(&#34;name&#34;, &#34;名字&#34;); System.out.println(&#34;get 获取存在： &#34; &#43; map.get(&#34;name&#34;)); System.out.println(&#34;get 获取不存在： &#34; &#43; map.get(&#34;hh&#34;)); System.out.println(&#34;getOrDefault 获取存在： &#34; &#43; map.getOrDefault(&#34;name&#34;, &#34; 不存在值&#34;)); System.out.println(&#34;getOrDefault 获取不存在： &#34; &#43; map.getOrDefault(&#34;hh&#34;, &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/87fbc02c9f2acc9cb4187b31931bd6b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-19T11:13:39+08:00" />
<meta property="article:modified_time" content="2023-10-19T11:13:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java中 Map集合 compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault 方法的区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>Java中 Map集合 compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault 方法的区别</h2> 
<p></p> 
<h3 style="background-color:transparent;">一、概述</h3> 
<p>最近在写代码过程中，发现java map中增加一些方法：<u>compute 、computeIfAbsent 、 computeIfPresent、putIfAbsent 、getOrDefault </u>， 在平时开发中要到一些，但是没有仔细对比各个方法之间的区别。 本文将系统性的整理 几个重要的方法区别：</p> 
<ul><li>compute 3个方法之间的区别；</li><li>putIfAbsent 和computeIfAbsent 方法的异同点 ；</li><li>put 和 putIfAbsent方法的区别。</li></ul> 
<h3></h3> 
<h3 style="background-color:transparent;">二、代码演示</h3> 
<h4 style="background-color:transparent;">        1、 get 和 getOrDefault 方法演示</h4> 
<pre><code class="language-java">@Test
public void getAndgetOrDefaultTest() throws Exception {
    final HashMap&lt;Object, Object&gt; map = Maps.newHashMap();
    map.put("name", "名字");
    System.out.println("get 获取存在： " + map.get("name"));
    System.out.println("get 获取不存在： " + map.get("hh"));
    System.out.println("getOrDefault 获取存在： " + map.getOrDefault("name", " 不存在值"));
    System.out.println("getOrDefault 获取不存在： " + map.getOrDefault("hh", " 不存在值"));

}</code></pre> 
<p></p> 
<h4 style="background-color:transparent;">        1.1、get 和 getOrDefault 方法 输出结果</h4> 
<pre><code class="language-java">get 获取存在： 名字
get 获取不存在： null
getOrDefault 获取存在： 名字
getOrDefault 获取不存在：  不存在值</code></pre> 
<p></p> 
<h4 style="background-color:transparent;">        2、 compute / computeIfAbsent / computeIfPresent 方法演示</h4> 
<pre><code class="language-java">/**
 * Description: compute / computeIfAbsent / computeIfPresent
 * &lt;br&gt; 1、compute ： 输入原有key,value 作为参数，可通过逻辑处理，决定返回的value
 * &lt;br&gt; 2、computeIfAbsent ： key对应的value，为空，则添加（覆盖）； 不为空，则不处理
 * &lt;br&gt; 3、computeIfPresent ： key对应的value，不为空，则添加（覆盖）； 为空，则不处理
 * @return void
 * @version v1.0
 * @author wu
 * @date 2023/10/17 10:29
 */
@Test
public void computeAndcomputeIfAbsentTest() throws Exception{
    final HashMap&lt;Object, Object&gt; map = Maps.newHashMap();
    map.put("name","小明");

    System.out.println("compute 存在的 ：" + map.compute("name",(k,v)-&gt;{
        System.out.println("compute -&gt; key ="+k + " ; value="+v);
        return "小红";
    }));
    System.out.println("compute 输出结果 key=name ：" + map.get("name"));
    System.out.println();
    System.out.println("compute 不存在的 ：" + map.compute("hh",(k,v)-&gt;{
        System.out.println("compute -&gt; key ="+k + " ; value="+v);
        return "小红hh";
    }));
    System.out.println("compute 输出结果 key=hh ：" + map.get("hh"));

    System.out.println();
    System.out.println("computeIfAbsent 存在的 ：" + map.computeIfAbsent("name",k-&gt;{
        System.out.println("computeIfAbsent -&gt; key ="+k );
        return "雷丘";
    }));
    System.out.println("computeIfAbsent 输出结果 key=name ：" + map.get("name"));

    System.out.println("computeIfAbsent 不存在的 ：" + map.computeIfAbsent("qq",k-&gt;{
        System.out.println("computeIfAbsent -&gt; key ="+k );
        return "雷丘";
    }));
    System.out.println("computeIfAbsent 输出结果 key=qq ：" + map.get("qq"));

    System.out.println();
    System.out.println("computeIfPresent 存在的 ：" + map.computeIfPresent("name",(k,v)-&gt;{
        System.out.println("computeIfPresent -&gt; key ="+k + "; value ="+v );
        return "杰尼龟";
    }));
    System.out.println("computeIfPresent 输出结果 key=name ：" + map.get("name"));

    System.out.println("computeIfPresent 不存在的 ：" + map.computeIfPresent("tt",(k,v)-&gt;{
        System.out.println("computeIfPresent -&gt; key ="+k + "; value ="+v );
        return "杰尼龟";
    }));
    System.out.println("computeIfPresent 输出结果 key=tt ：" + map.get("tt"));
}</code></pre> 
<h4 style="background-color:transparent;">        2.1、 compute / computeIfAbsent / computeIfPresent 方法 输出结果</h4> 
<pre><code class="language-java">compute -&gt; key =name ; value=小明
compute 存在的 ：小红
compute 输出结果 key=name ：小红

compute -&gt; key =hh ; value=null
compute 不存在的 ：小红hh
compute 输出结果 key=hh ：小红hh

computeIfAbsent 存在的 ：小红
computeIfAbsent 输出结果 key=name ：小红
computeIfAbsent -&gt; key =qq
computeIfAbsent 不存在的 ：雷丘
computeIfAbsent 输出结果 key=qq ：雷丘

computeIfPresent -&gt; key =name; value =小红
computeIfPresent 存在的 ：杰尼龟
computeIfPresent 输出结果 key=name ：杰尼龟
computeIfPresent 不存在的 ：null
computeIfPresent 输出结果 key=tt ：null</code></pre> 
<h4 style="background-color:transparent;">        3、 put 和 putIfAbsent 方法演示</h4> 
<pre><code class="language-java">@Test
public void putAndPutIfAbsentTest() throws Exception {
    final HashMap&lt;Object, Object&gt; map = Maps.newHashMap();
    map.put("name", "小明");
    System.out.println("put 存在的: " + map.put("name","雷丘"));
    System.out.println("put 不存在的: " + map.put("hh","小红"));
    System.out.println("put 方法后，map集合： " + map);

    System.out.println();
    System.out.println("putIfAbsent 存在的: " + map.putIfAbsent("name","安琪拉"));
    System.out.println("putIfAbsent 不存在的: " + map.putIfAbsent("qq","坤哥"));
    System.out.println("putIfAbsent 方法后，map集合： " + map);
}</code></pre> 
<h4 style="background-color:transparent;">        3.1、put 和 putIfAbsent 方法 输出结果</h4> 
<pre><code class="language-java">put 存在的: 小明
put 不存在的: null
put 方法后，map集合： {hh=小红, name=雷丘}

putIfAbsent 存在的: 雷丘
putIfAbsent 不存在的: null
putIfAbsent 方法后，map集合： {hh=小红, qq=坤哥, name=雷丘}</code></pre> 
<h3 style="background-color:transparent;">三、总结</h3> 
<h4 style="background-color:transparent;">        1、get 和 getOrDefault 方法区别：</h4> 
<p>        当map中key不存在是，get方法返回null ； getOrDefault方法，返回的是 default默认值 </p> 
<p></p> 
<h4 style="background-color:transparent;">        2、compute / computeIfAbsent / computeIfPresent 方法区别：</h4> 
<ul><li> 
  <ul><li>compute : 输入原有key,value 作为参数，可通过逻辑处理，决定返回的value</li><li>computeIfAbsent : key对应的value，为空，则添加（覆盖）； 不为空，则不处理 【不存在，添加】</li><li>computeIfPresent : key对应的value，不为空，则添加（覆盖）； 为空，则不处理。【存在，覆盖】</li><li>computeIfAbsent 和 computeIfPresent 刚好相反</li></ul></li></ul> 
<h4 style="background-color:transparent;">        2.1、compute 方法应用： key转换为value</h4> 
<pre><code class="language-java">@Test
public void computeTest() throws Exception {
    final HashMap&lt;Object, Object&gt; map = Maps.newHashMap();
    map.put("name", "小明");

    System.out.println(map.get("name"));
    System.out.println(map.compute("name",(k,v)-&gt;k));
    System.out.println(map.get("name"));
}</code></pre> 
<h4 style="background-color:transparent;">        3、put 和 putIfAbsent 方法区别：</h4> 
<ul><li> 
  <ul><li>put : key存在，覆盖value值；返回 之前的value</li><li>put : key不存在，添加value值；返回 null</li><li>putIfAbsent : key存在，不覆盖value值；返回 存在的value</li><li>putIfAbsent : key不存在，添加value值；返回 null</li><li>put 和 putIfAbsent 区别：key存在，put方法会覆盖；putIfAbsent 不覆盖。【不存在，添加】</li></ul></li></ul> 
<h4 style="background-color:transparent;">        4、computeIfAbsent 和 putIfAbsent 方法：</h4> 
<p>        我们可以看到 computeIfAbsent 和 putIfAbsent 方法的作用都是，<u><strong>key不存在时，则添加；key存在时，则不处理</strong></u>，那么 这2个方法的作用是一样的吗？ 请看下面代码：</p> 
<pre><code class="language-java">@Test
public void putIfAbsentAndComputeIfAbsentTest() throws Exception{
    final HashMap&lt;Object, Object&gt; map = Maps.newHashMap();
    map.put("name", "小明");
    System.out.println("computeIfAbsent key存在：  " + map.computeIfAbsent("name",(k)-&gt;"小红"));
    System.out.println("computeIfAbsent key存在操作后输出 ：" + map.get("name"));

    System.out.println();
    System.out.println("putIfAbsent key存在：  " + map.putIfAbsent("name","雷丘"));
    System.out.println("putIfAbsent key存在操作后输出 ：" + map.get("name"));

    System.out.println();
    System.out.println("computeIfAbsent key不存在：  " + map.computeIfAbsent("age",(k)-&gt;"18"));
    System.out.println("computeIfAbsent key不存在操作后输出 ：" + map.get("age"));

    System.out.println();
    System.out.println("putIfAbsent key不存在：  " + map.putIfAbsent("addr","北京市"));
    System.out.println("putIfAbsent key不存在操作后输出 ：" + map.get("addr"));
}</code></pre> 
<h4>        4.1、输出结果</h4> 
<pre><code class="language-java">computeIfAbsent key存在：  小明
computeIfAbsent key存在操作后输出 ：小明

putIfAbsent key存在：  小明
putIfAbsent key存在操作后输出 ：小明

computeIfAbsent key不存在：  18
computeIfAbsent key不存在操作后输出 ：18

putIfAbsent key不存在：  null
putIfAbsent key不存在操作后输出 ：北京市

</code></pre> 
<h4>        4.2、computeIfAbsent 和 putIfAbsent 方法区别</h4> 
<ul><li>相同点： key 存在时，不能添加成功 ; key 不存在时，才能添加成功</li><li>不同点： key不存在时，putIfAbsent 添加成功后返回 null ; computeIfAbsent 添加成功后，返回添加的value</li><li>computeIfAbsent 方法： 返回的是最终添加的value</li></ul> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/75d1cd1cf7247cfef41b9262586a2077/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何同步 Github 和 Gitee的仓库代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58a01ee6f3f70dededcedca7cdc96c7a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue下拉加载更多数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>