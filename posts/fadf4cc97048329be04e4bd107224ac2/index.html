<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue2&#43;elementUI 下拉树形多选框 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue2&#43;elementUI 下拉树形多选框" />
<meta property="og:description" content="效果如图所示：
1.新建el-select-tree.vue组件
&lt;!-- * 下拉树形选择 --&gt; &lt;template&gt; &lt;el-select ref=&#34;selectTree&#34; :value=&#34;value&#34; v-model=&#34;valueName&#34; :multiple=&#34;multiple&#34; :clearable=&#34;clearable&#34; @clear=&#34;clearHandle&#34; @change=&#34;changeValue&#34;&gt; &lt;el-option :value=&#34;valueName&#34; class=&#34;options&#34;&gt; &lt;el-tree id=&#34;tree-option&#34; ref=&#34;selectTree&#34; :accordion=&#34;accordion&#34; :data=&#34;options&#34; :props=&#34;props&#34; :node-key=&#34;props.value&#34; @node-click=&#34;handleNodeClick&#34;&gt; &lt;span slot-scope=&#34;{ data }&#34;&gt; &lt;i :class=&#34;[data.color != null ? &#39;ification_col&#39; : &#39;&#39;]&#34; :style=&#34;{ &#39;background-color&#39;: data.color }&#34;&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;{{ data.name }} &lt;/span&gt; &lt;/el-tree&gt; &lt;/el-option&gt; &lt;/el-select&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#34;el-tree-select&#34;, props: { // 配置项 props: { type: Object, default: () =&gt; { return { value: &#39;id&#39;, children: &#39;children&#39;, label: &#39;name&#39; } } }, // 选项列表数据(树形结构的对象数组) options: { type: Array, default: () =&gt; { return [] } }, // 初始值（单选） value: { type: Object, default: () =&gt; { return {} } }, // 初始值（多选） valueMultiple: { type: Array, default: () =&gt; { return [] } }, // 可清空选项 clearable: { type: Boolean, default: true }, // 自动收起 accordion: { type: Boolean, default: false }, // 是否多选 multiple: { type: Boolean, default: false } }, data() { return { resultValue: [], // 传给父组件的数组对象值 valueName: this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/fadf4cc97048329be04e4bd107224ac2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-25T15:02:27+08:00" />
<meta property="article:modified_time" content="2023-04-25T15:02:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue2&#43;elementUI 下拉树形多选框</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>效果如图所示：</strong></p> 
</blockquote> 
<p><img alt="" height="274" src="https://images2.imgbox.com/3c/bf/BljfZwI8_o.png" width="494"></p> 
<p><strong> 1.新建el-select-tree.vue组件</strong></p> 
<pre><code class="language-javascript">&lt;!--
 * 下拉树形选择
--&gt;
&lt;template&gt;
    &lt;el-select ref="selectTree" :value="value" v-model="valueName" :multiple="multiple" :clearable="clearable"
        @clear="clearHandle" @change="changeValue"&gt;
        &lt;el-option :value="valueName" class="options"&gt;
            &lt;el-tree id="tree-option" ref="selectTree" :accordion="accordion" :data="options" :props="props"
                :node-key="props.value" @node-click="handleNodeClick"&gt;
                &lt;span slot-scope="{ data }"&gt;
                    &lt;i :class="[data.color != null ? 'ification_col' : '']"
                        :style="{ 'background-color': data.color }"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;{<!-- -->{ data.name }}
                &lt;/span&gt;
            &lt;/el-tree&gt;
        &lt;/el-option&gt;
    &lt;/el-select&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
    name: "el-tree-select",
    props: {
        // 配置项
        props: {
            type: Object,
            default: () =&gt; {
                return {
                    value: 'id',
                    children: 'children',
                    label: 'name'
                }
            }
        },
        // 选项列表数据(树形结构的对象数组)
        options: {
            type: Array,
            default: () =&gt; {
                return []
            }
        },
        // 初始值（单选）
        value: {
            type: Object,
            default: () =&gt; {
                return {}
            }
        },
        // 初始值（多选）
        valueMultiple: {
            type: Array,
            default: () =&gt; {
                return []
            }
        },
        // 可清空选项
        clearable: {
            type: Boolean,
            default: true
        },
        // 自动收起
        accordion: {
            type: Boolean,
            default: false
        },
        // 是否多选
        multiple: {
            type: Boolean,
            default: false
        }
    },
    data() {
        return {
            resultValue: [], // 传给父组件的数组对象值
            valueName: this.multiple ? [] : '' // 输入框显示值
        }
    },
    watch: {
        value() {
            this.resultValue = this.multiple ? this.valueMultiple : this.value;   // 初始值
            this.initHandle()
        }
    },
    mounted() {
        this.resultValue = this.multiple ? this.valueMultiple : this.value;   // 初始值
        this.initHandle();
    },
    methods: {
        // 初始化显示
        initHandle() {
            if (this.resultValue) {
                if (this.multiple) {
                    // 多选 
                    this.resultValue.forEach(item =&gt; this.valueName.push(item.name));
                } else {
                    // 单选
                    this.valueName = this.resultValue.name;
                }
            }
            this.initScroll()
        },
        // 初始化滚动条
        initScroll() {
            this.$nextTick(() =&gt; {
                let scrollWrap = document.querySelectorAll('.el-scrollbar .el-select-dropdown__wrap')[0]
                let scrollBar = document.querySelectorAll('.el-scrollbar .el-scrollbar__bar')
                scrollWrap.style.cssText = 'margin: 0px; max-height: none; overflow: hidden;'
                scrollBar.forEach(ele =&gt; ele.style.width = 0)
            })
        },
        // 切换选项
        handleNodeClick(node) {
            // 设置点击叶子节点后被选中 可以更改为点击父节点也生效
            if (node.children == null || node.children == undefined) {
                if (this.multiple) {
                    // 多选（判重后添加）
                    let num = 0;
                    this.valueName.forEach(item =&gt; {
                        item == node[this.props.label] ? num++ : num;
                    })
                    if (num == 0) {
                        this.valueName.push(node[this.props.label]); // 输入框显示值
                        this.resultValue.push(node);
                    }
                } else {
                    // 单选
                    this.$refs.selectTree.blur();
                    this.valueName = node[this.props.label];
                    this.resultValue = node;
                }

                this.$emit('getValue', this.resultValue);
            }
        },
        // 从输入框中直接删除某个值时
        changeValue(val) {
            if (this.multiple) {
                // 多选（同时删掉传给父组件中多余的值，再传给父组件）
                this.resultValue.map((item, index) =&gt; {
                    let i = val.indexOf(item.name)
                    if (i == -1) {
                        this.resultValue.splice(index, 1)
                    }
                })
                this.$emit('getValue', this.resultValue);
            } else {
                // 单选
                this.$emit('getValue', val);
            }
        },
        // 清除选中
        clearHandle() {
            this.valueName = this.multiple ? [] : ''
            this.resultValue = []
            this.clearSelected()
            this.$emit('getValue', this.resultValue)
        },
        // 清空选中样式
        clearSelected() {
            let allNode = document.querySelectorAll('#tree-option .el-tree-node')
            allNode.forEach((element) =&gt; element.classList.remove('is-current'))
        }
    }
}
&lt;/script&gt;
&lt;style scoped&gt;
.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {
    height: auto;
    max-height: 300px;
    padding: 0;
    overflow: hidden;
    overflow-y: auto;
}

.el-select-dropdown__item.selected {
    font-weight: normal;
}

ul li&gt;&gt;&gt;.el-tree .el-tree-node__content {
    height: auto;
    padding: 0 20px;
}

.el-tree-node__label {
    font-weight: normal;
}

.el-tree&gt;&gt;&gt;.is-current .el-tree-node__label {
    color: #409EFF;
    font-weight: 700;
}

.el-tree&gt;&gt;&gt;.is-current .el-tree-node__children .el-tree-node__label {
    color: #606266;
    font-weight: normal;
}

.el-popper {
    z-index: 9999;
}

.ification_col {
    width: 20px;
    height: 10px;
    display: inline-block;
}
&lt;/style&gt;</code></pre> 
<p><strong>2.页面引入组件使用</strong></p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div class="selectTree"&gt;
    &lt;label&gt;请选择：&lt;/label&gt;
    &lt;!-- 单选 + 默认值 --&gt;
    &lt;!-- &lt;el-select-tree :options="options" :value="value" @getValue="getSelectedValue"&gt;&lt;/el-select-tree&gt; --&gt;
    &lt;!-- 多选 + 默认值 --&gt;
    &lt;el-select-tree :options="options" :multiple="multiple" :valueMultiple="valueMultiple"
      @getValue="getSelectedValue"&gt;&lt;/el-select-tree&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import elSelectTree from '../components/el-select-tree.vue'
export default {
  components: {
    elSelectTree
  },
  data() {
    return {
      // 开启/关 多选/单选
      multiple: true,
      value: {
        id: 3,
        name: '张三'
      },
      valueMultiple: [
        {
          id: 3,
          name: '张三'
        }, {
          id: 4,
          name: '李四'
        }
      ],
      options: [
        {
          id: 1,
          name: '一组',
          children: [{
            id: 2,
            name: '第一队',
            children: [{
              id: 3,
              name: '小张'
            }, {
              id: 4,
              name: '小刘'
            }]
          }]
        },
        {
          id: 5,
          name: '二组',
          children: [{
            id: 6,
            name: '小马'
          }, {
            id: 7,
            name: '小丽'
          }]
        },
        {
          id: 8,
          name: '三组',
          children: [{
            id: 9,
            name: '小韩'
          }, {
            id: 10,
            name: '小钱'
          }]
        }
      ]
    }
  },
  created() {

  },
  methods: {
    // 组件传出来的选中结果
    getSelectedValue(value) {
      console.log('选中的结果值', value)
    }
  }
}
&lt;/script&gt;
&lt;style lang="scss"&gt;&lt;/style&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3a60020d92d0a40c29d75692c17c6040/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python的数据库Class写法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7f30a848a29d484e4bb203fafade4d0a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python学习笔记-18(函数小案例，小练习题等)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>