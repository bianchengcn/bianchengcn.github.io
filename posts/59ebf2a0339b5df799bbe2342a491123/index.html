<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何解决使用若依前后端分离打包部署到服务器上后主包无法找到从包中的文件的问题？如何在 Java 代码中访问 jar 包中的资源文件？ - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何解决使用若依前后端分离打包部署到服务器上后主包无法找到从包中的文件的问题？如何在 Java 代码中访问 jar 包中的资源文件？" />
<meta property="og:description" content="目录 一、说明二、在 Java 代码中访问 jar 包中的资源文件方法1 使用 ClassLoader 类来加载资源并返回其 URL方法2 使用 ResourceUtils.getURL() 方法来获取资源文件的 URL方法3 使用 ClassLoader.getResourceAsStream()方法来加载资源文件。方法4 提取到系统临时文件夹中 一、说明 在使用若依前后端分离打包部署到服务器上后，可能会出现主包无法找到从包中的文件的问题，这个问题通常是由于资源文件没有正确地打包到 jar 包中导致的。本文将介绍如何解决这个问题，包括如何在 Java 代码中访问 jar 包中的资源文件、如何将资源文件复制到系统临时目录中以及如何获取复制后的文件在系统中的绝对路径。
使用若依前后端分离打包部署到服务器上后，主包是ruoyi-admin.jar，如何写路径，才能找到从包下的ruoyi-remote-3.8.5.jar!/burn/burnhex/hex2bin.exe文件？
二、在 Java 代码中访问 jar 包中的资源文件 方法1 使用 ClassLoader 类来加载资源并返回其 URL ClassLoader classLoader = getClass().getClassLoader(); URL resourceUrl = classLoader.getResource(&#34;burn/burnhex/hex2bin.exe&#34;); String resourcePath = resourceUrl.getPath(); 在上面的示例中，我们首先获取当前类的 ClassLoader 实例。然后，我们使用 getResource() 方法加载 burn/burnhex/hex2bin.exe 资源，并返回其 URL。最后，我们可以使用 getPath() 方法获取该资源在文件系统中的路径。
在使用 getResource() 方法时，路径应该是相对于类路径的。因此，如果 ruoyi-remote-3.8.5.jar 文件在类路径下，则可以直接使用 burn/burnhex/hex2bin.exe 路径。如果该文件不在类路径下，则您需要使用绝对路径来加载该资源。例如，如果您的 ruoyi-remote-3.8.5.jar 文件在 /opt/ruoyi/lib 目录下，则可以使用以下路径：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/59ebf2a0339b5df799bbe2342a491123/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-29T09:05:51+08:00" />
<meta property="article:modified_time" content="2024-01-29T09:05:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何解决使用若依前后端分离打包部署到服务器上后主包无法找到从包中的文件的问题？如何在 Java 代码中访问 jar 包中的资源文件？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、说明</a></li><li><a href="#_Java__jar__7" rel="nofollow">二、在 Java 代码中访问 jar 包中的资源文件</a></li><li><ul><li><a href="#1__ClassLoader__URL_9" rel="nofollow">方法1 使用 ClassLoader 类来加载资源并返回其 URL</a></li><li><a href="#2__ResourceUtilsgetURL__URL_24" rel="nofollow">方法2 使用 ResourceUtils.getURL() 方法来获取资源文件的 URL</a></li><li><a href="#3__ClassLoadergetResourceAsStream_34" rel="nofollow">方法3 使用 ClassLoader.getResourceAsStream()方法来加载资源文件。</a></li><li><a href="#4__43" rel="nofollow">方法4 提取到系统临时文件夹中</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、说明</h2> 
<p>在使用若依前后端分离打包部署到服务器上后，可能会出现主包无法找到从包中的文件的问题，这个问题通常是由于资源文件没有正确地打包到 jar 包中导致的。本文将介绍如何解决这个问题，包括如何在 Java 代码中访问 jar 包中的资源文件、如何将资源文件复制到系统临时目录中以及如何获取复制后的文件在系统中的绝对路径。</p> 
<p>使用若依前后端分离打包部署到服务器上后，主包是ruoyi-admin.jar，如何写路径，才能找到从包下的ruoyi-remote-3.8.5.jar!/burn/burnhex/hex2bin.exe文件？</p> 
<h2><a id="_Java__jar__7"></a>二、在 Java 代码中访问 jar 包中的资源文件</h2> 
<h3><a id="1__ClassLoader__URL_9"></a>方法1 使用 ClassLoader 类来加载资源并返回其 URL</h3> 
<pre><code class="prism language-java"><span class="token class-name">ClassLoader</span> classLoader <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">URL</span> resourceUrl <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"burn/burnhex/hex2bin.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> resourcePath <span class="token operator">=</span> resourceUrl<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>在上面的示例中，我们首先获取当前类的 <code>ClassLoader</code> 实例。然后，我们使用 <code>getResource()</code> 方法加载 <code>burn/burnhex/hex2bin.exe</code> 资源，并返回其 URL。最后，我们可以使用 <code>getPath()</code> 方法获取该资源在文件系统中的路径。</p> 
<p>在使用 <code>getResource()</code> 方法时，路径应该是相对于类路径的。因此，如果 <code>ruoyi-remote-3.8.5.jar</code> 文件在类路径下，则可以直接使用 <code>burn/burnhex/hex2bin.exe</code> 路径。如果该文件不在类路径下，则您需要使用绝对路径来加载该资源。例如，如果您的 <code>ruoyi-remote-3.8.5.jar</code> 文件在 <code>/opt/ruoyi/lib</code> 目录下，则可以使用以下路径：</p> 
<pre><code class="prism language-java"><span class="token class-name">URL</span> resourceUrl <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">"/opt/ruoyi/lib/ruoyi-remote-3.8.5.jar!/burn/burnhex/hex2bin.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="2__ResourceUtilsgetURL__URL_24"></a>方法2 使用 ResourceUtils.getURL() 方法来获取资源文件的 URL</h3> 
<p>使用 <code>ResourceUtils.getURL()</code> 方法来获取资源文件的 URL，然后使用 <code>FileUtils.getFile()</code> 方法将其转换为文件对象。这将返回一个 <code>File</code> 对象，可以在您的代码中使用它。</p> 
<pre><code class="prism language-java"><span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token class-name">ResourceUtils</span><span class="token punctuation">.</span><span class="token function">getURL</span><span class="token punctuation">(</span><span class="token string">"classpath:burn/burnhex/hex2bin.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">FileUtils</span><span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="3__ClassLoadergetResourceAsStream_34"></a>方法3 使用 ClassLoader.getResourceAsStream()方法来加载资源文件。</h3> 
<p>由于该文件位于 jar 包中，因此您不能像操作文件系统中的文件一样直接访问它。您需要使用类似于 <code>getResourceAsStream()</code> 的方法来读取 jar 包中的文件。您可以使用 <code>ClassLoader</code> 类的 <code>getResourceAsStream()</code> 方法来获取 jar 包中的资源文件。使用以下代码来获取 <code>burn/burnhex/cmd.bin</code> 文件的 <code>InputStream</code> 对象：</p> 
<pre><code class="prism language-java"><span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"burn/burnhex/hex2bin.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="4__43"></a>方法4 提取到系统临时文件夹中</h3> 
<p>如果您需要在应用程序中频繁地访问 jar 包中的资源文件，那么最好将这些文件提取到文件系统中以提高性能。可以使用类似于以下代码的方法将文件提取到文件系统中：</p> 
<pre><code class="prism language-java"><span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"java.io.tmpdir"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"hex2bin.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"burn/burnhex/hex2bin.exe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span> file<span class="token punctuation">.</span><span class="token function">toPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCopyOption</span><span class="token punctuation">.</span>REPLACE_EXISTING<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> exePath <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这将把 <code>burn/burnhex/hex2bin.exe</code> 文件从 jar 包中提取到系统临时文件夹中的 <code>hex2bin.exe</code> 文件中。然后，您可以使用 <code>file</code> 对象来访问该文件。</p> 
<p>这段代码的作用是将项目中的 <code>hex2bin.exe</code> 文件复制到系统临时目录中，以便后续的操作可以使用该文件。具体来说，这段代码做了以下几件事情：</p> 
<ol><li>创建一个 <code>File</code> 对象 <code>file</code>，该对象表示系统临时目录下的 <code>hex2bin.exe</code> 文件。</li><li>从项目的 <code>burn/burnhex</code> 目录中获取 <code>hex2bin.exe</code> 文件的输入流 <code>inputStream</code>。</li><li>使用 <code>Files.copy</code> 方法将 <code>inputStream</code> 中的数据复制到 <code>file</code> 对应的文件中。</li><li>如果 <code>file</code> 对应的文件已经存在，则使用 <code>StandardCopyOption.REPLACE_EXISTING</code> 选项来覆盖原有的文件。</li><li>使用 <code>file.getAbsolutePath()</code> 方法获取复制后的 <code>hex2bin.exe</code> 文件在系统中的绝对路径</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad0ac4e01a8b14222cbab03f33d97ab9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">编程高手是如何炼成的？1021页Python学习教程，全面专业建议收藏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e0bea97ecb9811c03cbf5da62b810ef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Django模型（三）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>