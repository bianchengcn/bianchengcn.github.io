<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>iOS 自动打包如何配置配置打包证书和profile provision文件 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="iOS 自动打包如何配置配置打包证书和profile provision文件" />
<meta property="og:description" content="Jenkins 打包相关问题记录 打包失败截图：
1、证书找不到 NO certificate matching ‘ ‘ for ‘ ’ code singing is required ….
D791BAD1-390A-4587-A35C-A743A3D88D52.png
由于更新过证书配置，导致新证书没有导入到Jenkins中。
配置步骤：
Jenkins-系统管理-keychains and provisioning profiles managerment
以为 更新 login.keychain 就好了，其实并不然
25DE5B03-AC83-49FA-9677-4E828EBB570F.png
在升级至Mac 10.12 之后 login.keychain 的存储发生改变。
默认 10.12 的钥匙串存储为👇
路径: ~/Library/Keychains/login.keychain-db
A774CF07-6ACC-4A48-A079-0F66B0B8D6C1.png
而10.12之前版本 为
FE243165-275E-41C0-8F8C-8109AAE7DC7A.png
老版本 默认存在 login.keychain 中，而升级到10.12后会存在 login.keychain-db中。
这是第一个注意点。
重点：
由于Jenkins不支持上传文件后缀为 keychain-db的文件。
我们需要做的就是
1、copy ~/Library/Keychains/login.keychain-db
2、rename 为login.keychain
3、upload 至Jenkins keychains and provisioning profiles managerment
4 、done
在进行打包，这次应该可以了吧。
结果。。。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/de25f92e7d32c93aa6b02b591ac98de1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-29T15:00:38+08:00" />
<meta property="article:modified_time" content="2024-01-29T15:00:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">iOS 自动打包如何配置配置打包证书和profile provision文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Jenkins__0"></a>Jenkins 打包相关问题记录</h2> 
<p>打包失败截图：</p> 
<p>1、证书找不到 NO certificate matching ‘ ‘ for ‘ ’ code singing is required ….</p> 
<p><img src="https://images2.imgbox.com/34/dc/bz9Z4Z71_o.png" alt="img"></p> 
<p>D791BAD1-390A-4587-A35C-A743A3D88D52.png</p> 
<p>由于更新过证书配置，导致新证书没有导入到Jenkins中。</p> 
<p>配置步骤：<br> Jenkins-系统管理-keychains and provisioning profiles managerment<br> 以为 更新 login.keychain 就好了，其实并不然</p> 
<p><img src="https://images2.imgbox.com/a6/e4/sfTteQBN_o.png" alt="img"></p> 
<p>25DE5B03-AC83-49FA-9677-4E828EBB570F.png</p> 
<p>在升级至Mac 10.12 之后 login.keychain 的存储发生改变。<br> 默认 10.12 的钥匙串存储为👇<br> 路径: ~/Library/Keychains/login.keychain-db</p> 
<p><img src="https://images2.imgbox.com/7d/b0/YUdueYw2_o.png" alt="img"></p> 
<p>A774CF07-6ACC-4A48-A079-0F66B0B8D6C1.png</p> 
<p>而10.12之前版本 为</p> 
<p><img src="https://images2.imgbox.com/a4/cd/8fe9r8PJ_o.png" alt="img"></p> 
<p>FE243165-275E-41C0-8F8C-8109AAE7DC7A.png</p> 
<p>老版本 默认存在 login.keychain 中，而升级到10.12后会存在 login.keychain-db中。<br> 这是第一个注意点。</p> 
<p>重点：<br> 由于Jenkins不支持上传文件后缀为 keychain-db的文件。<br> 我们需要做的就是<br> 1、copy ~/Library/Keychains/login.keychain-db<br> 2、rename 为login.keychain<br> 3、upload 至Jenkins keychains and provisioning profiles managerment<br> 4 、done</p> 
<p>在进行打包，这次应该可以了吧。<br> 结果。。。</p> 
<p><img src="https://images2.imgbox.com/14/86/0ZrO4qT4_o.png" alt="img"></p> 
<p>1.png</p> 
<p>第二个错误： Command /usr/bin/codesign failed with exit code 1</p> 
<p>Google了一圈，有要clean 工程的，有要获取login.keychain权限的。<br> 最终还是发现在，权限问题上有问题，通过对比，通过xcode 打包，导出的时候发现，有个codesign过程。原来 Jenkins 会获取不到权限。</p> 
<p>由于我们自动化打包使用全局配置，我也是醉了。找了半天。<br> 最后在 Jenkins - 系统设置 - 系统配置</p> 
<p>xcode 配置</p> 
<p><img src="https://images2.imgbox.com/dd/d0/XxE0mTUf_o.png" alt="img"></p> 
<p>6BD03989-FCD2-4B0C-A066-D7406FBAC0B9.png</p> 
<p>根据项目情况，我们分为了开发，和生产，所以配置两个，根据证书名进行区分。</p> 
<p>经过半天的折腾，终于可以再次打包。</p> 
<h6><a id="_73"></a>前提：</h6> 
<p>1、执行以下操作的时候，确保你正确的安装并启动了<a href="https://www.jianshu.com/p/b7eb75a72a9a" rel="nofollow">jenkins</a>，而且安装了插件Keychain and Provisioning Profiles Management<br> 2、下边操作是建立在mac电脑，并安装了xcode环境<br> 3、对苹果的证书要有一定的了解 &gt; <a href="https://www.jianshu.com/p/be0267ebd238" rel="nofollow">苹果证书</a></p> 
<h6><a id="ps__79"></a>ps: 如果没问题则进行以下操作</h6> 
<p>进入jenkins: 系统管理 &gt; Keychain and Provisioning Profiles Management</p> 
<h6><a id="loginkeychain_83"></a>一、上传login.keychain</h6> 
<h6><a id="ps___loginkeychain_1012_loginkeychaindb_85"></a>ps: 这里有一个坑老版本 默认存在 login.keychain 中，而升级到10.12后会存在 login.keychain-db中。</h6> 
<p>login.keychain的路径: ~/Library/Keychains<br> 由于Jenkins不支持上传文件后缀为 keychain-db的文件。<br> 我们需要做的就是<br> 1、复制 keychain-db的文件 到桌面<br> 2、重命名 为login.keychain<br> 3、upload 至Jenkins<br> 4、done</p> 
<p><img src="https://images2.imgbox.com/cf/ae/615UnUrx_o.png" alt="img"></p> 
<p>26A31489-EE1C-40D4-A52F-B64F5F2CC089.png</p> 
<h6><a id="ps_99"></a>ps:这里比较坑的一点就是，这个证书名字居然是自己填写的（我当初一直以为这是选项卡，纠结了好久）</h6> 
<p>则如果有多个证书，则点击Add Code Signing Identity添加<br> 证书位置在mac本的钥匙串访问应用里边，如图:</p> 
<p><img src="https://images2.imgbox.com/c4/1e/sjv5A53O_o.png" alt="img"></p> 
<p>D42AB6FF-D6CB-4ADE-8C24-E61EEFE1094E.png</p> 
<p>完成之后点击save保存，钥匙串就上传完毕了。</p> 
<h6><a id="_110"></a>二、上传描述文件</h6> 
<p>描述文件路径：<code>~/Library/MobileDevice/Provisioning Profiles</code><br> 描述文件的上传和login.keychain的上传方式一样，点击上传成功之后会出现如下界面:</p> 
<p><img src="https://images2.imgbox.com/90/4a/sYFiRVFh_o.png" alt="img"></p> 
<p>435B9604-FE14-4619-BC67-0EA99CA720F1.png</p> 
<p>正确填写路径之后点击保存，描述文件也上传完毕。</p> 
<p>希望以上能帮到你，如有问题请留言。</p> 
<p>参考：https://www.jianshu.com/p/6ab1a13cbea6</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/945b0fdb6f88bf3d8f19f5c30cf017cc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">低代码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69b18a49145878fc01e20e817143448d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">表单常用正则表达式（手机，邮箱，身份证，数字，空格...）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>