<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt IFW基本用法 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt IFW基本用法" />
<meta property="og:description" content="概述 在上一篇文章中简单介绍了Qt IFW的优势，并且介绍了如何下载安装软件，那么，在本篇中来看一下如何使用IFW创建一个最简单的应用安装包，并介绍一些基本用法。
运行示例 在介绍之前我们首先跑一个Qt IFW安装过后自带的一个示例，以startmenu为例，打开安装目录下的example文件夹：
找到startmenu示例：
其目录结构是这样的：
是不是很熟悉，pro文件，不就是Qt的工程文件吗， 这和一个常规的Qt工程项目差不多，那么直接在Qt creator中打开这个startmenu.pro文件，目录结构如下：
然后二话不说，直接编译运行，运行后会弹出一个对话框：
别管它，回到文件夹中找到刚刚编译生成的文件，会发现生成了一个install.exe
ok，这就是最终生成出来的安装包，直接双击运行：
欢迎页面：
选择安装目录
选择需要安装的组件
开始菜单快捷方式
准备安装
这就完成了整个安装流程。
打包文件分析 以上演示了最基础的一个打包流程，那么接下来开始分析目录结构以及配置文件。
目录结构 还是以上面的示例来讲解，其目录结构为：
这里主要包含了两个文件夹，config和packages，其中config下面有一个config.xml文件，packages下面的meta目录包含package.xml和installscript.qs文件
其中，这里最重要的两个文件就是config.xml和package.xml
config.xml：打包文件的基本配置信息package.xml：软件包信息配置文件data：该文件夹存放将要打包的所有文件installscript.qs：软件包信息脚本，在package.xml中引用 创建安装程序 前面通过运行Qt IFW自带的示例已经对打包文件目录结构及基本的运行流程有了大致的了解，那么接下来就看看如何创建一个自己的安装程序。
步骤 创建安装程序必须完成的以下任务：
1.创建一个软件包目录，其中将包含所有配置文件和可安装的软件包。2.创建一个配置文件config.xml，其中包含有关如何构建安装程序二进制文件和联机存储库的信息。3.创建一个软件包信息文件package.xml，其中包含有关可安装组件的信息。4.创建安装程序内容并将其复制到软件包目录，比如上面的data。5.使用该binarycreator工具创建安装程序。 创建配置文件 在config目录中，创建一个config.xml包含以下内容的文件：
基本信息如下：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;Installer&gt; &lt;Name&gt;Your application&lt;/Name&gt; &lt;Version&gt;1.0.0&lt;/Version&gt; &lt;Title&gt;Your application Installer&lt;/Title&gt; &lt;Publisher&gt;Your vendor&lt;/Publisher&gt; &lt;StartMenuDir&gt;Super App&lt;/StartMenuDir&gt; &lt;TargetDir&gt;@HomeDir@/InstallationDirectory&lt;/TargetDir&gt; &lt;/Installer&gt; 说明：
&lt;Name&gt;元素指定程序名称&lt;Version&gt;元素指定的应用程序版本号&lt;Publisher&gt;元素指定软件（Windows控制面板中所示）的发布者。&lt;StartMenuDir&gt;元素指定用于开始菜单中默认程序名称。&lt;TargetDir&gt;元素指定的是程序默认安装位置，其可选的位置可参考这里 配置文件中所有可配置项，请参考这里
创建包装信息文件 要向安装程序提供有关组件的信息，需要创建一个package.xml文件，并包含以下内容，并将其放置在meta目录中：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;Package&gt; &lt;DisplayName&gt;The root component&lt;/DisplayName&gt; &lt;Description&gt;Install this example.&lt;/Description&gt; &lt;Version&gt;0.1.0-1&lt;/Version&gt; &lt;ReleaseDate&gt;2010-09-21&lt;/ReleaseDate&gt; &lt;Licenses&gt; &lt;License name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/07509d7d92e90deec6018c9ef9b993fb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-11-28T19:04:26+08:00" />
<meta property="article:modified_time" content="2019-11-28T19:04:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt IFW基本用法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>概述</h3> 
<p>在<a href="https://blog.csdn.net/luoyayun361/article/details/103262908">上一篇文章中</a>简单介绍了Qt IFW的优势，并且介绍了如何下载安装软件，那么，在本篇中来看一下如何使用IFW创建一个最简单的应用安装包，并介绍一些基本用法。</p> 
<h3><a id="_3"></a>运行示例</h3> 
<p>在介绍之前我们首先跑一个Qt IFW安装过后自带的一个示例，以startmenu为例，打开安装目录下的example文件夹：<br> <img src="https://images2.imgbox.com/2d/b0/VQUS2Y64_o.png" alt="在这里插入图片描述"><br> 找到startmenu示例：<br> <img src="https://images2.imgbox.com/7f/8a/bEzXuHGl_o.png" alt="在这里插入图片描述"></p> 
<p>其目录结构是这样的：<br> <img src="https://images2.imgbox.com/64/d2/5ONMAvrJ_o.png" alt="在这里插入图片描述"><br> 是不是很熟悉，pro文件，不就是Qt的工程文件吗， 这和一个常规的Qt工程项目差不多，那么直接在Qt creator中打开这个startmenu.pro文件，目录结构如下：</p> 
<p><img src="https://images2.imgbox.com/7d/4c/G1V9bdY5_o.png" alt="在这里插入图片描述"></p> 
<p>然后二话不说，直接编译运行，运行后会弹出一个对话框：<br> <img src="https://images2.imgbox.com/69/d3/x2FBVel9_o.png" alt="在这里插入图片描述"><br> 别管它，回到文件夹中找到刚刚编译生成的文件，会发现生成了一个install.exe<br> <img src="https://images2.imgbox.com/95/63/hOxY20lw_o.png" alt="在这里插入图片描述"></p> 
<p>ok，这就是最终生成出来的安装包，直接双击运行：</p> 
<p>欢迎页面：<br> <img src="https://images2.imgbox.com/cd/03/QPcfWVr6_o.png" alt="在这里插入图片描述"><br> 选择安装目录<br> <img src="https://images2.imgbox.com/39/d3/5d3hiLqE_o.png" alt="在这里插入图片描述"><br> 选择需要安装的组件<br> <img src="https://images2.imgbox.com/49/d9/uNNyyqDS_o.png" alt="在这里插入图片描述"><br> 开始菜单快捷方式<br> <img src="https://images2.imgbox.com/20/f7/nZpjHc8M_o.png" alt="在这里插入图片描述"><br> 准备安装<br> <img src="https://images2.imgbox.com/8f/f4/3jLFFZ8p_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/03/77/yMvfZTv6_o.png" alt="在这里插入图片描述"><br> 这就完成了整个安装流程。</p> 
<h3><a id="_36"></a>打包文件分析</h3> 
<p>以上演示了最基础的一个打包流程，那么接下来开始分析目录结构以及配置文件。</p> 
<h4><a id="_39"></a>目录结构</h4> 
<p>还是以上面的示例来讲解，其目录结构为：<br> <img src="https://images2.imgbox.com/09/a2/WnIT4CMA_o.png" alt="在这里插入图片描述"><br> 这里主要包含了两个文件夹，<code>config</code>和<code>packages</code>，其中<code>config</code>下面有一个<code>config.xml</code>文件，packages下面的meta目录包含package.xml和installscript.qs文件</p> 
<p>其中，这里最重要的两个文件就是<code>config.xml</code>和<code>package.xml</code></p> 
<ul><li>config.xml：打包文件的基本配置信息</li><li>package.xml：软件包信息配置文件</li><li>data：该文件夹存放将要打包的所有文件</li><li>installscript.qs：软件包信息脚本，在package.xml中引用</li></ul> 
<h3><a id="_52"></a>创建安装程序</h3> 
<p>前面通过运行Qt IFW自带的示例已经对打包文件目录结构及基本的运行流程有了大致的了解，那么接下来就看看如何创建一个自己的安装程序。</p> 
<h4><a id="_55"></a>步骤</h4> 
<p>创建安装程序必须完成的以下任务：</p> 
<ul><li>1.创建一个软件包目录，其中将包含所有配置文件和可安装的软件包。</li><li>2.创建一个配置文件config.xml，其中包含有关如何构建安装程序二进制文件和联机存储库的信息。</li><li>3.创建一个软件包信息文件package.xml，其中包含有关可安装组件的信息。</li><li>4.创建安装程序内容并将其复制到软件包目录，比如上面的data。</li><li>5.使用该binarycreator工具创建安装程序。</li></ul> 
<h4><a id="_64"></a>创建配置文件</h4> 
<p>在config目录中，创建一个config.xml包含以下内容的文件：<br> 基本信息如下：</p> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Installer&gt;
    &lt;Name&gt;Your application&lt;/Name&gt;
    &lt;Version&gt;1.0.0&lt;/Version&gt;
    &lt;Title&gt;Your application Installer&lt;/Title&gt;
    &lt;Publisher&gt;Your vendor&lt;/Publisher&gt;
    &lt;StartMenuDir&gt;Super App&lt;/StartMenuDir&gt;
    &lt;TargetDir&gt;@HomeDir@/InstallationDirectory&lt;/TargetDir&gt;
&lt;/Installer&gt;
</code></pre> 
<p>说明：</p> 
<ul><li>&lt;Name&gt;元素指定程序名称</li><li>&lt;Version&gt;元素指定的应用程序版本号</li><li>&lt;Publisher&gt;元素指定软件（Windows控制面板中所示）的发布者。</li><li>&lt;StartMenuDir&gt;元素指定用于开始菜单中默认程序名称。</li><li>&lt;TargetDir&gt;元素指定的是程序默认安装位置，其可选的位置<a href="https://doc.qt.io/qtinstallerframework/scripting.html#predefined-variables" rel="nofollow">可参考这里</a></li></ul> 
<p>配置文件中所有可配置项，<a href="https://doc.qt.io/qtinstallerframework/ifw-globalconfig.html" rel="nofollow">请参考这里</a></p> 
<h4><a id="_89"></a>创建包装信息文件</h4> 
<p>要向安装程序提供有关组件的信息，需要创建一个package.xml文件，并包含以下内容，并将其放置在meta目录中：</p> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Package&gt;
    &lt;DisplayName&gt;The root component&lt;/DisplayName&gt;
    &lt;Description&gt;Install this example.&lt;/Description&gt;
    &lt;Version&gt;0.1.0-1&lt;/Version&gt;
    &lt;ReleaseDate&gt;2010-09-21&lt;/ReleaseDate&gt;
    &lt;Licenses&gt;
        &lt;License name="Beer Public License Agreement" file="license.txt" /&gt;
    &lt;/Licenses&gt;
    &lt;Default&gt;script&lt;/Default&gt;
    &lt;Script&gt;installscript.qs&lt;/Script&gt;
    &lt;UserInterfaces&gt;
        &lt;UserInterface&gt;page.ui&lt;/UserInterface&gt;
    &lt;/UserInterfaces&gt;
&lt;/Package&gt;
</code></pre> 
<p>关于包信息文件的详细写法，<a href="https://doc.qt.io/qtinstallerframework/ifw-component-description.html#package-information-file-syntax" rel="nofollow">请参考这里</a></p> 
<h5><a id="_112"></a>指定组件信息</h5> 
<p>以下元素的信息显示在组件选择页面上：</p> 
<ul><li>&lt;DisplayName&gt;元素指定组件的名称 -&gt;(1)</li><li>&lt;Description&gt;元素指定当组件被选择时显示的文本 -&gt;（2）<br> <img src="https://images2.imgbox.com/00/8e/i2LjyPwA_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="_119"></a>指定安装程序版本</h5> 
<p>该元素可以在用户可用时向他们推广更新。</p> 
<h5><a id="_122"></a>添加许可证</h5> 
<p>&lt;License&gt;元素指定包含用于显示的许可检查页面上的许可协议的文本文件的名称：<br> <img src="https://images2.imgbox.com/16/7c/WUwZO2Ct_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_126"></a>选择默认内容</h5> 
<p>&lt;Default&gt;元件指定组件是否是默认选中。该值true将组件设置为选中状态。</p> 
<h4><a id="_129"></a>创建安装程序内容</h4> 
<p>将所有需要打包的文件全部拷贝到data目录下去。</p> 
<h4><a id="_132"></a>开始打包</h4> 
<p>一切准备就绪，开始通过命令行来进行最后的打包动作，在终端通过命令行 切换到Qt IFW安装目录中的bin目录下去，然后执行：</p> 
<pre><code>binarycreator.exe -c config\config.xml -p packages YourInstaller.exe
</code></pre> 
<p>config\config.xml 是上面创建好的配置文件。</p> 
<p>执行完命令后就会自动生成一个安装包exe。这就是最终想要的文件。</p> 
<p>当然，也可以像自带示例那样，直接创建一个工程文件，然后在Qt creator中编译即可自动生成。<br> 以下是工程文件pro的内容示例：</p> 
<pre><code>TEMPLATE = aux

INSTALLER = installer

INPUT = $$PWD/config/config.xml $$PWD/packages
example.input = INPUT
example.output = $$INSTALLER
example.commands = ../../bin/binarycreator -c $$PWD/config/config.xml -p $$PWD/packages ${QMAKE_FILE_OUT}
example.CONFIG += target_predeps no_link combine

QMAKE_EXTRA_COMPILERS += example

OTHER_FILES = README

</code></pre> 
<p>其原理也是执行binarycreator 命令，就不再赘述了。</p> 
<p>ok，以上就是整个Qt IFW打包流程的基本介绍，接下来会在下一篇文章中通过一个实际的项目来做打包文件。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/674a9d70bfc088de0e11a57ef8157f4d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Prometheus联邦模式relabel_configs遇到的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/610856047a3c9b489330e4ed5e3b53ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c语言中int *a，int a和int* a什么区别？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>