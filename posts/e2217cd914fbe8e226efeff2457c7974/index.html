<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>postman接口自动化测试 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="postman接口自动化测试" />
<meta property="og:description" content="Postman除了前面介绍的一些功能，还有其他一些小功能在日常接口测试或许用得上。今天，我们就来盘点一下，如下所示：
1.数据驱动
想要批量执行接口用例，我们一般会将对应的接口用例放在同一个Collection中，然后再通过Runner批量执行。这种方式适用于接口用例参数固定的情况下，但也存在另一个问题，如果每次运行时，接口参数都在变化，该如何操作了？
认真看过前面文章的童鞋可能已经猜到，将变量参数化就可以了。但这种方式，存在也存在另外一个问题，就是需要每次将参数提前设置好，比如在Pre-request Script中设置如下：
pm.environment.set(&#34;username&#34;,&#34;Surpass&#34;) pm.environment.set(&#34;password&#34;,&#34;Surpass&#34;) 使用Pre-request Script设置环境变量并进行赋值不论运行多少次，其实还是用固定的的数据进行测试。
既然以上两种方式都不能解决我们的问题，那将数据写到文件中，然后从文件中读取是不是可以？在Postman中其实也提供了这种方式。
这种用于存放测试数据的文件，一般称之为测试数据集
在Postman中测试数据集支持两种格式csv和json
csv格式
username,password Surpass,Surpass Kevin,Kevin Diana,Diana ... json格式 [ { &#34;username&#34;: &#34;Surpass&#34;, &#34;password&#34;: &#34;Surpass&#34; }, { &#34;username&#34;: &#34;Kevin&#34;, &#34;password&#34;: &#34;Kevin&#34; }, { &#34;username&#34;: &#34;Diana&#34;, &#34;password&#34;: &#34;Diana&#34; } ] 数据格式类似于表格，第一行对应变量名，后面数据对应相应的测试数据
下面来看看操作步骤：
1、打开Run Collection界面，填写运行次数、导入测试数据集，最后点击Run Collection 2、运行结果如下所示： 2.定期任务 Postman提供了一个Monitor功能，支持提交具有定时功能的测试任务，可以按设置的定时器执行接口用例，操作如下所示：
3.接口依赖
接口依赖就是在执行一个接口时，其数据会依赖于其他接口，其本质上是一个接口数据传递的问题。例如：比如在删除用户时，必须要求携带相应的token，而token则是在用户登录后才会产生。
3.1 接口执行顺序
1.默认执行顺序
在Postman中默认的执行顺序，是按照在Collection中的目录顺序执行，即从上到下依次执行。
2.自定义执行顺序
如果按默认的目录顺序执行，通常无法其业务需求，好在Postman提供了一个函数 postman.setNextRequest(&#34;你要跳转的接口名&#34;)，支持跳转到指定接口执行。例如：在执行完接口用户查询后，跳过接口用户新增，直接跳转执行修改密码，示例如下所示：
1、在用户查询接口Tests中添加如下代码：
if(pm.response.code == 200 &amp;&amp; pm.response.text().toString().indexOf(&#34;username&#34;)!=-1 ){ // 如果 响应码为 200 且 返回body中包含username，则代表查询成功 pm." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/e2217cd914fbe8e226efeff2457c7974/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-26T16:56:00+08:00" />
<meta property="article:modified_time" content="2023-12-26T16:56:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">postman接口自动化测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>  Postman除了前面介绍的一些功能，还有其他一些小功能在日常接口测试或许用得上。今天，我们就来盘点一下，如下所示：</p> 
<p>1.数据驱动<br>   想要批量执行接口用例，我们一般会将对应的接口用例放在同一个Collection中，然后再通过Runner批量执行。这种方式适用于接口用例参数固定的情况下，但也存在另一个问题，如果每次运行时，接口参数都在变化，该如何操作了？</p> 
<p>    认真看过前面文章的童鞋可能已经猜到，将变量参数化就可以了。但这种方式，存在也存在另外一个问题，就是需要每次将参数提前设置好，比如在Pre-request Script中设置如下：</p> 
<pre><code class="hljs">pm.environment.set("username","Surpass")
pm.environment.set("password","Surpass")</code></pre> 
<p>使用Pre-request Script设置环境变量并进行赋值不论运行多少次，其实还是用固定的的数据进行测试。</p> 
<p>    既然以上两种方式都不能解决我们的问题，那将数据写到文件中，然后从文件中读取是不是可以？在Postman中其实也提供了这种方式。</p> 
<p>这种用于存放测试数据的文件，一般称之为测试数据集</p> 
<p>    在Postman中测试数据集支持两种格式csv和json</p> 
<p>csv格式</p> 
<pre><code class="hljs">username,password
Surpass,Surpass
Kevin,Kevin
Diana,Diana
...</code></pre> 
<ul><li>json格式</li></ul> 
<pre><code class="hljs">[
	{
		"username": "Surpass",
		"password": "Surpass"
	},
	{
		"username": "Kevin",
		"password": "Kevin"
	},
	{
		"username": "Diana",
		"password": "Diana"
	}
]</code></pre> 
<blockquote> 
 <p>数据格式类似于表格，第一行对应<strong>变量名</strong>，后面数据对应相应的测试数据</p> 
</blockquote> 
<p>    下面来看看操作步骤：</p> 
<ul><li>1、打开Run Collection界面，填写运行次数、导入测试数据集，最后点击Run Collection</li></ul> 
<p><img alt="" height="538" src="https://images2.imgbox.com/27/2c/URN7m40Q_o.png" width="1168"></p> 
<ul><li>2、运行结果如下所示：</li></ul> 
<p><img alt="" height="515" src="https://images2.imgbox.com/0c/8d/Hm5XIqdJ_o.png" width="1151"></p> 
<h6 id="2定期任务">2.定期任务</h6> 
<p>    Postman提供了一个Monitor功能，支持提交具有定时功能的测试任务，可以按设置的定时器执行接口用例，操作如下所示：</p> 
<p><img alt="" height="904" src="https://images2.imgbox.com/6c/d7/v5uFUsB1_o.png" width="808"></p> 
<p>3.接口依赖<br>     接口依赖就是在执行一个接口时，其数据会依赖于其他接口，其本质上是一个接口数据传递的问题。例如：比如在删除用户时，必须要求携带相应的token，而token则是在用户登录后才会产生。</p> 
<p>3.1 接口执行顺序</p> 
<p>1.默认执行顺序<br>     在Postman中默认的执行顺序，是按照在Collection中的目录顺序执行，即从上到下依次执行。<br><img alt="" height="737" src="https://images2.imgbox.com/d3/a7/28LraA8Q_o.png" width="1200"></p> 
<p> </p> 
<p>2.自定义执行顺序<br>    如果按默认的目录顺序执行，通常无法其业务需求，好在Postman提供了一个函数 postman.setNextRequest("你要跳转的接口名")，支持跳转到指定接口执行。例如：在执行完接口用户查询后，跳过接口用户新增，直接跳转执行修改密码，示例如下所示：</p> 
<p>1、在用户查询接口Tests中添加如下代码：</p> 
<pre><code class="hljs">if(pm.response.code == 200 &amp;&amp; pm.response.text().toString().indexOf("username")!=-1 ){
   // 如果 响应码为 200 且 返回body中包含username，则代表查询成功
   pm.test["query"] = true;
 
   var responseBody=pm.response.json()
   var username=responseBody.args.username
   var password=responseBody.args.password
   
   pm.environment.set("modifyUsername",username)
   pm.environment.set("modifyPassword",password)
   
   console.log("go to request : 修改密码")
   postman.setNextRequest("修改密码")
 
}
else{
    pm.test["query"] = false
}</code></pre> 
<ul><li>2、在修改密码接口中Tests中添加如下所示：</li></ul> 
<pre><code class="hljs">console.log("run 修改密码接口")
var responseBody=pm.response.json()
 
var username=responseBody.form.username
var password=responseBody.form.password
 
console.log("修改密码接口 - username",username,"修改密码接口 - password",password)</code></pre> 
<ul><li>3、查看运行结果如下所示：</li></ul> 
<p><img alt="" height="1131" src="https://images2.imgbox.com/9d/f4/8biyUPEu_o.png" width="1157"></p> 
<p>   在使用自定义接口执行顺序时，需要注意以下几点：</p> 
<p>postman.setNextRequest()仅在运行集合测试时生效，即在Run Collection时才生效，单独运行接口时不生效</p> 
<p>postman.setNextRequest()在运行时，在跳转时会忽略跳转时中间包含的接口，跳转后的接口如果仍然有接口则继续运行后续接口，即如果有接口A/B/C/D/E/F,如果设置的跳转条件为A-&gt;D，则最终执行的接口顺序为A-&gt;D-&gt;E-&gt;F，B和C接口被忽略</p> 
<p>跳转指定的接口必须位于同一个Collection内</p> 
<p>postman.setNextRequest()函数不管在Tests脚本中何处被调用，它都只在当前脚本最后才被真正执行。</p> 
<h6 id="%E6%80%BB%E7%BB%93%EF%BC%9A"><strong>总结：</strong></h6> 
<p><strong>感谢每一个认真阅读我文章的人！！！</strong></p> 
<p>作为一位过来人也是希望大家少走一些弯路，如果你不想再体验一次学习时找不到资料，没人解答问题，坚持几天便放弃的感受的话，在这里我给大家分享一些自动化测试的学习资源，希望能给你前进的路上带来帮助</p> 
<p><img alt="" height="822" src="https://images2.imgbox.com/28/13/7YSRXFYv_o.png" width="1068"></p> 
<p class="img-center"><img alt="" height="254" src="https://images2.imgbox.com/b3/02/lVw8T5HO_o.png" width="650"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a9b241e36afd96e53ae6f3188cf6351f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python——基于YOLOV8的车牌识别（源码&#43;教程）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3d69d333ccd5b4cf954dfb4b0df2db88/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">随想011：关于编程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>