<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>gitlab-ci前端在阿里云实现nodejs可持续化集成部署 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="gitlab-ci前端在阿里云实现nodejs可持续化集成部署" />
<meta property="og:description" content="前言 不甘心当一个切图仔，所以什么都要学一下；可持续化集成是一个项目工程架构的问题；但在这篇文章中我将它缩小到了前端的领域内。
必要条件 一台阿里云服务器-2核4G以上(CentOS7-ECS我的心好痛800大洋) 技术栈 linux操作基础git/github/gitlabnodejs环境基础 步骤 阿里云安装git阿里云安装gitlab(8.0开始默认支持gitlab-ci)阿里云安装gitlab-runner写测试.gitlab-ci.ymltag自动运行nodejs项目实践 阿里云安装git 安装Git工具linux：安装Git，使用自带的源安装。
yum install git 阿里云安装gitlab 1.安装依赖包。
sudo yum install -y curl policycoreutils-python openssh-server 2.设置SSH开机自启动并启动SSH服务。
sudo systemctl enable sshd sudo systemctl start sshd 3.添加GitLab软件包仓库。
curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash 4.安装GitLab。
sudo EXTERNAL_URL=&#34;GitLab服务器的公网IP地址&#34; yum install -y gitlab-ce 我的ip是这个39.100.42.98；然后开放了一个8888端口（记得去阿里云管理平台上开放）；所以我的 GitLab服务器的公网IP地址 是 http://39.100.42.98:8888
5.安装成功就可以访问了
6.登录GitLab
在浏览器的地址栏中输入ECS服务器的公网IP即可登录GitLab的界面，第一次登录使用的用户名和密码为 root 和 5iveL!fe。
首次登录会强制用户修改密码。密码修改成功后，输入新密码进行登录。
7.小结：
这个gitlab相对于是一个正常的gitlab/github;我们可以在上面创建自己的项目，它同样支持我们在本地电脑的git连接传输数据(同样需要设置ssh密钥)
参考地址
阿里云安装gitlab-runner 1.官方安装-参考地址
如果你英语不是很好的话也不要担心，其实就是复制那行运行代码运行而已！
2.清华镜像包-参考地址
由于我买的服务器是国内的，不能用官方安装所以只能用清华的镜像包(你懂得万里长城)。安装过程也不难，仔细点，耐心点就ok了。
3.详细的教程
成功后我们服务器上会有一个gitlab-runner文件夹，它会直接同步我们gitlab上开启了runner的项目到它这里。
写测试.gitlab-ci.yml 1.在我们的gitlab上创建一个项目，我命名为ci-vue-cli
2.将该项目克隆到我们的本地电脑，然后在该目录下添加一个.gitlab-ci.yml文件
内容就随便写一个job吧" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/7e9119c8d893cac0e8206045f75b9089/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-04T15:47:07+08:00" />
<meta property="article:modified_time" content="2019-07-04T15:47:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">gitlab-ci前端在阿里云实现nodejs可持续化集成部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>前言</h3> 
<p>不甘心当一个切图仔，所以什么都要学一下；可持续化集成是一个项目工程架构的问题；但在这篇文章中我将它缩小到了前端的领域内。</p> 
<h3><a id="_3"></a>必要条件</h3> 
<ul><li>一台阿里云服务器-2核4G以上(CentOS7-ECS我的心好痛800大洋)</li></ul> 
<h3><a id="_6"></a>技术栈</h3> 
<ul><li>linux操作基础</li><li>git/github/gitlab</li><li>nodejs环境基础</li></ul> 
<h3><a id="_11"></a>步骤</h3> 
<ul><li>阿里云安装git</li><li>阿里云安装gitlab(8.0开始默认支持gitlab-ci)</li><li>阿里云安装gitlab-runner</li><li>写测试.gitlab-ci.yml</li><li>tag自动运行nodejs项目实践</li></ul> 
<h3><a id="git_18"></a>阿里云安装git</h3> 
<p>安装Git工具linux：安装Git，使用自带的源安装。</p> 
<pre><code>yum install git
</code></pre> 
<h3><a id="gitlab_24"></a>阿里云安装gitlab</h3> 
<p>1.安装依赖包。</p> 
<pre><code>sudo yum install -y curl policycoreutils-python openssh-server
</code></pre> 
<p>2.设置SSH开机自启动并启动SSH服务。</p> 
<pre><code>sudo systemctl enable sshd
sudo systemctl start sshd
</code></pre> 
<p>3.添加GitLab软件包仓库。</p> 
<pre><code> curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
</code></pre> 
<p>4.安装GitLab。</p> 
<pre><code>sudo EXTERNAL_URL="GitLab服务器的公网IP地址" yum install -y gitlab-ce
</code></pre> 
<p>我的ip是这个39.100.42.98；然后开放了一个8888端口（记得去阿里云管理平台上开放）；所以我的 GitLab服务器的公网IP地址 是 <code>http://39.100.42.98:8888</code><br> 5.安装成功就可以访问了<br> <img src="https://images2.imgbox.com/3d/66/xRuOyUGN_o.png" alt="在这里插入图片描述"><br> 6.登录GitLab<br> 在浏览器的地址栏中输入ECS服务器的公网IP即可登录GitLab的界面，第一次登录使用的用户名和密码为 root 和 5iveL!fe。<br> 首次登录会强制用户修改密码。密码修改成功后，输入新密码进行登录。</p> 
<p>7.小结：<br> 这个gitlab相对于是一个正常的gitlab/github;我们可以在上面创建自己的项目，它同样支持我们在本地电脑的git连接传输数据(同样需要设置ssh密钥)<br> <a href="https://help.aliyun.com/document_detail/52857.html" rel="nofollow">参考地址</a></p> 
<h3><a id="gitlabrunner_57"></a>阿里云安装gitlab-runner</h3> 
<p>1.官方安装-<a href="https://docs.gitlab.com/runner/install/osx.html" rel="nofollow">参考地址</a><br> 如果你英语不是很好的话也不要担心，其实就是复制那行运行代码运行而已！<br> 2.清华镜像包-<a href="https://docs.gitlab.com/runner/install/osx.html" rel="nofollow">参考地址</a><br> 由于我买的服务器是国内的，不能用官方安装所以只能用清华的镜像包(你懂得万里长城)。安装过程也不难，仔细点，耐心点就ok了。<br> 3.<a href="https://juejin.im/post/5c8ef610f265da67e93c105c" rel="nofollow">详细的教程</a><br> <img src="https://images2.imgbox.com/9d/4b/Rvl5c2C6_o.png" alt="在这里插入图片描述"><br> 成功后我们服务器上会有一个gitlab-runner文件夹，它会直接同步我们gitlab上开启了runner的项目到它这里。</p> 
<h3><a id="gitlabciyml_66"></a>写测试.gitlab-ci.yml</h3> 
<p>1.在我们的gitlab上创建一个项目，我命名为<code>ci-vue-cli</code><br> 2.将该项目克隆到我们的本地电脑，然后在该目录下添加一个<code>.gitlab-ci.yml</code>文件<br> 内容就随便写一个job吧</p> 
<pre><code>job:
  script:
    - whoami
    - pwd
</code></pre> 
<p>记住要将这个项目的runner启动（我gitlab-runner是默认安装的）<br> <img src="https://images2.imgbox.com/00/c7/elCcuBrt_o.jpg" alt="在这里插入图片描述"><br> 3.本地提交代码后，发现我们的job已经启动了，而且成功<br> <img src="https://images2.imgbox.com/89/92/fOfn3mZA_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="tagnodejs_81"></a>tag自动运行nodejs项目实践</h3> 
<p>1.在阿里云上安装nodejs环境<br> 我用的是nvm控制，所以踩了一个npm命令-无效/未定义-的坑</p> 
<p>2.待续。。。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec07341eed70bef105280cd2c769c8d5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">清除（设置）CCS5.5 eclipse的workspace记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c02f74af89ea68ad6954d578437f9e1f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IBatisNet.DataMapper 升级到 1.6.2  之后报错</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>