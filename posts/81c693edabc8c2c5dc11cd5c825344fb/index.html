<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uni-app之android原生插件开发 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="uni-app之android原生插件开发" />
<meta property="og:description" content="一 插件简介
1.1 当HBuilderX中提供的能力无法满足App功能需求，需要通过使用Andorid/iOS原生开发实现时，可使用App离线SDK开发原生插件来扩展原生能力。
1.2 插件类型有两种，Module模式和Component模式
Module模式：能力扩展，无嵌入窗体的UI控件。大部分插件都是属于此类，比如调用计步器API。代码写法为通过js进行require，然后调用该插件对象的方法。如涉及一些弹出框、全屏ui，也仍然属于Module模式。类似于前端里的js sdk。Component模式：在窗体中内嵌显示某个原生ui组件。比如窗体局部内嵌某个地图厂商的map组件，上下混排其他前端内容，就需要把这个原生地图sdk封装为Component模式。代码写法与vue组件相同，在template里写组件标签。类似于前端里的vue组件。 1.3 插件的使用：原生插件开发后，可以上插件市场，也可以不上。如内部使用，则无需上架插件市场。 如需上插件市场，则必须按指定格式压缩为zip包 二 插件的开发
2.1 插件必须在uni-sdk的基础上进行开发，可以快速的下载离线uni-sdk，导入UniPlugin-Hello-AS示例工程，也可以自己新建一个原生android项目，拷贝不要的包和资源进行开发。
2.2 离线uni-sdk下载地址： https://nativesupport.dcloud.net.cn/AppDocs/download/android.html，里面包含必要资源和示例工程。
2.3 上一篇已经新建了一个android项目，并离线打包成功了uni资源项目，下面就在这基础上开发插件
2.4 androidStudio项目右击新建一个插件Module
2.5 选择library，填写module名字，点击finish
2.6 然后在app的build.gradle里面依赖该module
implementation project(&#39;:mylibrary&#39;) 2.6 module里面build.gradle配置相关依赖库
uniapp-v8-release.aar是扩展module主要依赖库，必须导入此依赖库
compileOnly fileTree(include: [&#39;uniapp-v8-release.aar&#39;], dir: &#39;../app/libs&#39;)
com.alibaba:fastjson 也是必须的也依赖上，后面json通信会用到
implementation &#39;com.alibaba:fastjson:1.2.83&#39;
同时为了避免和主app冲突，将全部依赖类型换为compileOnly，意思只本module有效
dependencies {
compileOnly &#39;androidx.appcompat:appcompat:1.5.0&#39;
compileOnly &#39;com.google.android.material:material:1.6.1&#39;
compileOnly &#39;com.alibaba:fastjson:1.2.83&#39;
compileOnly fileTree(include: [&#39;uniapp-v8-release.aar&#39;], dir: &#39;../app/libs&#39;)
}
2.7 创建TestModule类，必须继承 UniModule 类
扩展方法必须加上@UniJSMethod (uiThread = false or true) 注解。UniApp 会根据注解来判断当前方法是否要运行在 UI 线程，和当前方法是否是扩展方法。UniApp是根据反射来进行调用 Module 扩展方法，所以Module中的扩展方法必须是 public 类型。 示例：创建两个方法" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/81c693edabc8c2c5dc11cd5c825344fb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-21T17:18:30+08:00" />
<meta property="article:modified_time" content="2023-12-21T17:18:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uni-app之android原生插件开发</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:#0d0016;"><strong>一 插件简介</strong></span></p> 
<p>1.1 当HBuilderX中提供的能力无法满足App功能需求，需要通过使用Andorid/iOS原生开发实现时，可使用App离线SDK开发原生插件来扩展原生能力。</p> 
<p>1.2 插件类型有两种，Module模式和Component模式</p> 
<blockquote> 
 <ul><li>Module模式：能力扩展，无嵌入窗体的UI控件。大部分插件都是属于此类，比如调用计步器API。代码写法为通过js进行require，然后调用该插件对象的方法。如涉及一些弹出框、全屏ui，也仍然属于Module模式。类似于前端里的js sdk。</li><li>Component模式：在窗体中内嵌显示某个原生ui组件。比如窗体局部内嵌某个地图厂商的map组件，上下混排其他前端内容，就需要把这个原生地图sdk封装为Component模式。代码写法与vue组件相同，在template里写组件标签。类似于前端里的vue组件。</li></ul> 
</blockquote> 
<p>1.3 插件的使用：原生插件开发后，可以上插件市场，也可以不上。如内部使用，则无需上架插件市场。 如需上插件市场，则必须按指定格式压缩为zip包 </p> 
<p><span style="color:#0d0016;"><strong>二 插件的开发</strong></span></p> 
<p>2.1 插件必须在uni-sdk的基础上进行开发，可以快速的下载离线uni-sdk，导入UniPlugin-Hello-AS示例工程，也可以自己新建一个原生android项目，拷贝不要的包和资源进行开发。</p> 
<p>2.2 离线uni-sdk下载地址： <a href="https://nativesupport.dcloud.net.cn/AppDocs/download/android.html" rel="nofollow" title="https://nativesupport.dcloud.net.cn/AppDocs/download/android.html">https://nativesupport.dcloud.net.cn/AppDocs/download/android.html</a>，里面包含必要资源和示例工程。</p> 
<p>2.3 上一篇已经新建了一个android项目，并离线打包成功了uni资源项目，下面就在这基础上开发插件</p> 
<p><img alt="" height="624" src="https://images2.imgbox.com/fb/ec/Ht4ByhAM_o.png" width="1200"></p> 
<p>2.4 androidStudio项目右击新建一个插件Module</p> 
<p><img alt="" height="611" src="https://images2.imgbox.com/e6/92/p4nqaKee_o.png" width="1200"></p> 
<p> 2.5 选择library，填写module名字，点击finish</p> 
<p><img alt="" height="813" src="https://images2.imgbox.com/06/df/pt22fZfK_o.png" width="1200"></p> 
<p>2.6 然后在app的build.gradle里面依赖该module</p> 
<blockquote> 
 <p>implementation project(':mylibrary') </p> 
</blockquote> 
<p><img alt="" height="499" src="https://images2.imgbox.com/74/a7/sdxBwvrp_o.png" width="1200"></p> 
<p>2.6 module里面build.gradle配置相关依赖库</p> 
<p>uniapp-v8-release.aar是扩展module主要依赖库，必须导入此依赖库</p> 
<blockquote> 
 <p>compileOnly fileTree(include: ['uniapp-v8-release.aar'], dir: '../app/libs')</p> 
</blockquote> 
<p>com.alibaba:fastjson 也是必须的也依赖上，后面json通信会用到</p> 
<blockquote> 
 <p>implementation 'com.alibaba:fastjson:1.2.83'</p> 
</blockquote> 
<p>同时为了避免和主app冲突，将全部依赖类型换为compileOnly，意思只本module有效</p> 
<blockquote> 
 <p>dependencies {<!-- --><br>     compileOnly 'androidx.appcompat:appcompat:1.5.0'<br>     compileOnly 'com.google.android.material:material:1.6.1'</p> 
 <p>    compileOnly 'com.alibaba:fastjson:1.2.83'<br>     compileOnly fileTree(include: ['uniapp-v8-release.aar'], dir: '../app/libs')<br> }</p> 
</blockquote> 
<p>2.7 创建TestModule类，必须继承 UniModule 类</p> 
<blockquote> 
 <ul><li>扩展方法必须加上@UniJSMethod (uiThread = false or true) 注解。UniApp 会根据注解来判断当前方法是否要运行在 UI 线程，和当前方法是否是扩展方法。</li><li>UniApp是根据反射来进行调用 Module 扩展方法，所以Module中的扩展方法必须是 public 类型。</li></ul> 
</blockquote> 
<p>示例：创建两个方法</p> 
<pre><code class="language-java">public class TestModule extends UniModule {
    private static final String TAG = "TestModule";
    //run ui thread
    @UniJSMethod(uiThread = true)
    public void testAsyncFunc(JSONObject options, UniJSCallback callback) {
        Log.e(TAG, "testAsyncFunc--"+options);
        if(callback != null) {
            JSONObject data = new JSONObject();
            data.put("code", "success");
            callback.invoke(data);
        }
    }

    //run JS thread
    @UniJSMethod (uiThread = false)
    public JSONObject testSyncFunc(){
        JSONObject data = new JSONObject();
        data.put("code", "success");
        return data;
    }

}</code></pre> 
<p>2.8  注册插件，在androidStudio的assets里面新建dcloud_uniplugins.json，并注册插件信息</p> 
<pre><code class="language-html">{
  "nativePlugins": [
    {
      "plugins": [
        {
          "type": "module",
          "name": "TestModule",
          "class": "com.juai.plugin_module.TestModule"
        }
      ]
    }
  ]
}</code></pre> 
<p><img alt="" height="583" src="https://images2.imgbox.com/ef/7d/uYAHj5XF_o.png" width="1200"></p> 
<p>2.9 回调事件UniJSCallback：JS调用时，有的场景需要返回一些数据，比如以下例子，返回x、y坐标。</p> 
<blockquote> 
 <ul><li><code>invoke</code>调用javascript回调方法，此方法将在调用后被销毁。</li><li><code>invokeAndKeepAlive</code> 调用javascript回调方法并保持回调活动以备以后使用。</li></ul> 
</blockquote> 
<p><strong><span style="color:#0d0016;">三 上面简单的插件module就写好了，下面做一个简单的测试</span></strong></p> 
<p>3.1 在uni-app项目页面里面写一个按钮，调用该插件。首先加一个按钮，并设置点击事件。</p> 
<pre><code class="language-html">&lt;button type="primary" @click="testAsyncFunc"&gt;testAsyncFunc&lt;/button&gt;</code></pre> 
<p>3.2 获取刚写好的TestModule插件 </p> 
<pre><code class="language-javascript">var testModule = uni.requireNativePlugin("TestModule")</code></pre> 
<p> 3.3 methon里面，注册点击事件，并调用原生插件方法</p> 
<pre><code class="language-javascript">testAsyncFunc() {
	// 获取 module
	var testModule = uni.requireNativePlugin("TestModule")
	// 调用异步方法
	testModule.testAsyncFunc({
			'name': 'unimp',
			'age': 1
		},
		e =&gt; {
			uni.showToast({
				title: JSON.stringify(e),
				icon:'none'
			});
		}
	)
}</code></pre> 
<p>3.4 完整vue示例</p> 
<pre><code class="language-javascript">&lt;template&gt;
	&lt;view class="content"&gt;
		&lt;image class="logo" src="/static/logo.png"&gt;&lt;/image&gt;
		&lt;view class="text-area"&gt;
			&lt;text class="title"&gt;{<!-- -->{title}}&lt;/text&gt;
		&lt;/view&gt;
		
		&lt;button type="primary" @click="testAsyncFunc"&gt;testAsyncFunc&lt;/button&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
	export default {
		data() {
			return {
				title: 'Hello'
			}
		},
		onLoad() {

		},
		methods: {
            testAsyncFunc() {
				// 获取 module
				var testModule = uni.requireNativePlugin("TestModule")
				// 调用异步方法
				testModule.testAsyncFunc({
						'name': 'unimp',
						'age': 1
					},
					e =&gt; {
						uni.showToast({
					     	title: JSON.stringify(e),
							icon:'none'
						});
					}
				)
			}
		}
	}
&lt;/script&gt;

&lt;style&gt;
	.content {
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}

	.logo {
		height: 200rpx;
		width: 200rpx;
		margin-top: 200rpx;
		margin-left: auto;
		margin-right: auto;
		margin-bottom: 50rpx;
	}

	.text-area {
		display: flex;
		justify-content: center;
	}

	.title {
		font-size: 36rpx;
		color: #8f8f94;
	}
&lt;/style&gt;
</code></pre> 
<p>3.5 打包app资源<img alt="" height="671" src="https://images2.imgbox.com/c1/36/0yd8OQPu_o.png" width="1091"></p> 
<p>3.7 替换androidStudio项目中的资源包</p> 
<p><img alt="" height="655" src="https://images2.imgbox.com/db/51/rFSuy0qI_o.png" width="1200"></p> 
<p>3.8 运行项目看到刚的按钮已经有了，点击android会获取uni的json数据，说明插件调用成功</p> 
<p><img alt="" height="902" src="https://images2.imgbox.com/d4/99/CGXRVucV_o.jpg" width="406"></p> 
<p>3.9 同时也可以看到androidStudio控制台已经有日志打出，插件调用成功</p> 
<p><img alt="" height="445" src="https://images2.imgbox.com/32/eb/BRYBxifg_o.png" width="1200"></p> 
<p><span style="color:#0d0016;"><strong>四 插件打包</strong></span></p> 
<p>4.1  上面只是android原生离线调试可以，那怎样在uni中来使用这个原生插件呢。首先要生成插件的aar包，在androidStudio侧边栏找到Gradle工具 -&gt; 再找到项目的Task目录 -&gt; other目录 -&gt; 点击assembleRelease，等待编译结束</p> 
<p><img alt="" height="758" src="https://images2.imgbox.com/11/54/Wq31eKea_o.png" width="831"></p> 
<p><img alt="" height="455" src="https://images2.imgbox.com/94/87/GzKAkC35_o.png" width="1200"></p> 
<p>4.2 可以看到再插件module的build下面生成了一个aar</p> 
<p><img alt="" height="589" src="https://images2.imgbox.com/0e/22/q3qDzYZU_o.png" width="824"></p> 
<p>4.3 在uni的项目根目录下创建 nativeplugins 文件夹 -&gt; 再创建插件名目录TestModule -&gt; 再创建android目录，把刚才的aar拷贝到android目录下面</p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/61/06/qse8Zlo0_o.png" width="744"></p> 
<p> 4.4 在插件目录下面创建一个pakage.json来配置插件信息</p> 
<p><img alt="" height="648" src="https://images2.imgbox.com/29/a0/ysiFN2vi_o.png" width="1200"></p> 
<pre><code class="language-XML">{
    "name": "TestModule",
    "id": "TestModule", // 插件标识
    "version": "1.0.0",
    "description": "插件描述信息",
    "_dp_type":"nativeplugin",
    "_dp_nativeplugin":{
        "android": {
			"integrateType":"aar",
            "plugins": [
                {
                    "type": "module",
                    "name": "TestModule", //id为前缀
                    "class": "com.juai.plugin_module.TestModule"
                }
                
            ]
        }
    }
}</code></pre> 
<p>4.5 这个示例比较简单，如果有so库，和jar包，还需要配置这些信息，完成目录结构如下</p> 
<p><img alt="" height="304" src="https://images2.imgbox.com/9f/ac/AQZ1i5N5_o.png" width="507"></p> 
<p> 4.6 在manifest.json中识别本地插件</p> 
<p><img alt="" height="651" src="https://images2.imgbox.com/37/fc/acnBNrH2_o.png" width="1200"></p> 
<p>4.7 可以看到有这个插件</p> 
<p><img alt="" height="586" src="https://images2.imgbox.com/62/2d/2R7JQ194_o.png" width="761"></p> 
<p>4.8 直接标准基座运行是不行的，找不到插件。需要云打包后进行测试</p> 
<p><img alt="" height="648" src="https://images2.imgbox.com/a3/87/q5iAfHrL_o.png" width="1200"></p> 
<p><img alt="" height="253" src="https://images2.imgbox.com/98/0f/7hKtqGpO_o.png" width="1200"></p> 
<p>4.9 选择发行 -&gt; 云打包</p> 
<p><img alt="" height="550" src="https://images2.imgbox.com/bd/bc/XMg6fCZ2_o.png" width="998"></p> 
<p>配置密钥信息</p> 
<p><img alt="" height="934" src="https://images2.imgbox.com/d8/ec/Ei44Uk60_o.png" width="921"></p> 
<p>4.10 打包出错，说package.json里面不能包含注释，那我们去掉再试试</p> 
<p><img alt="" height="539" src="https://images2.imgbox.com/84/8d/ol3jQrot_o.png" width="834"></p> 
<p><img alt="" height="695" src="https://images2.imgbox.com/70/c6/slaDtbOh_o.png" width="1200"></p> 
<p>4.11  重新云打包出现新错误，大概是说最小androidSDk版本太高了，让最小19</p> 
<p><img alt="" height="401" src="https://images2.imgbox.com/43/06/XdvHf2Cs_o.png" width="1200"></p> 
<p><img alt="" height="231" src="https://images2.imgbox.com/69/61/PBJogd8p_o.png" width="1200"></p> 
<p>4.12 那就把minSDK调整为19，重新生成aar，替换原来的aar</p> 
<p><img alt="" height="730" src="https://images2.imgbox.com/ec/95/gX37VuVQ_o.png" width="1200"></p> 
<p>或者在插件module清单文件AndroidManifest.xml里面添加库的冲突配置</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"&gt;

   &lt;uses-sdk tools:overrideLibrary="com.bun.miitmdid,com.juai.plugin_module" /&gt;

    ..............

&lt;/manifest&gt;</code></pre> 
<p>4.13 可以看到打包成功</p> 
<p><img alt="" height="441" src="https://images2.imgbox.com/29/0b/s3iR3quI_o.png" width="1200"></p> 
<p><img alt="" height="501" src="https://images2.imgbox.com/e4/27/IYwx7L3U_o.png" width="1093"></p> 
<p>4.14 我们将该apk运行手机看下，可以正常运行</p> 
<p><img alt="" height="902" src="https://images2.imgbox.com/ec/00/k4Y8R8if_o.jpg" width="406"></p> 
<p>4.15 <span style="color:#fe2c24;">注意：云打包是有次数的，十来次今天就不能云打包了。所以为了节省次数可以选择自定义基座运行或者安心打包</span></p> 
<p><img alt="" height="855" src="https://images2.imgbox.com/d2/fe/ao9HSigz_o.png" width="800"></p> 
<p><strong><span style="color:#0d0016;">五 组件Component开发</span></strong></p> 
<p>5.1 组件Component的介绍：</p> 
<blockquote> 
 <ul><li>Component 扩展 实现特别功能的 Native 控件</li><li>Component 不支持代码中 new Component 创建对象。无法正常使用</li></ul> 
</blockquote> 
<p>5.2 androidStudio新建组件module </p> 
<p><img alt="" height="635" src="https://images2.imgbox.com/df/b7/po2LBckv_o.png" width="1095"></p> 
<p>5.3 添加必须的依赖</p> 
<pre><code class="language-java">compileOnly 'com.alibaba:fastjson:1.2.83'
compileOnly fileTree(include: ['uniapp-v8-release.aar'], dir: '../app/libs')</code></pre> 
<p>5.2  创建TestComponent类，Component 扩展类必须继承 UniComponent, 父容器Component(例如ViewGroup组件)则需要继承UniVContainer</p> 
<pre><code class="language-java">public class TestText extends UniComponent&lt;TextView&gt;</code></pre> 
<p>5.3  UniComponent的initComponentHostView回调函数。构建Component的view时会触发此回调函数。</p> 
<pre><code class="language-java">@Override
protected TextView initComponentHostView(@NonNull Context context) {
    TextView textView = new TextView(context);
    textView.setTextSize(20);
    textView.setTextColor(Color.BLACK);
    return textView;
}
</code></pre> 
<p>5.4 Component 对应的设置属性的方法必须添加注解 @UniComponentProp(name=value(value is attr or style of dsl))</p> 
<pre><code class="language-java">@UniComponentProp(name = "tel")
public void setTel(String telNumber) {
    getHostView().setText("tel: " + telNumber);
}
</code></pre> 
<p>5.5 在app的build.gradle里面添加该组件依赖</p> 
<pre><code class="language-java">implementation project(':ModuleComponent')</code></pre> 
<p>5.6 在app的assets的dcloud_uniplugins.json文件里面注册组件</p> 
<pre><code class="language-java">{
  "plugins": [
	{
	  "type": "component",
	  "name": "myText",
	  "class": "com.juai.modulecomponent.TestText"
	}
  ]
}</code></pre> 
<p>5.7 在uni项目里面添加TestText组件</p> 
<pre><code class="language-html">&lt;template&gt;
    &lt;myText ref="telText" tel="12305" style="width:200;height:100" @onTel="onTel" @click="myTextClick"&gt;&lt;/myText&gt;
&lt;/template&gt;</code></pre> 
<p>5.8 在uni项目的methods里面添加点击事件</p> 
<pre><code class="language-javascript">methods: {		
	myTextClick(e) {
		this.$refs.telText.clearTel();
	}
}</code></pre> 
<p>5.9 完整uni示例</p> 
<pre><code class="language-html">&lt;template&gt;
	&lt;div&gt;
		&lt;myText ref="telText" tel="12305" style="width:200;height:100" @onTel="onTel" @click="myTextClick"&gt;&lt;/myText&gt;
	&lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;  
    export default {  
        methods: {  
			myTextClick(e) {
				this.$refs.telText.clearTel();
			}
        }  
    } 
&lt;/script&gt;  
</code></pre> 
<p>5.10 uni打包app资源</p> 
<p><img alt="" height="730" src="https://images2.imgbox.com/af/9f/wgK5Mv23_o.png" width="1043"></p> 
<p>5.11 复制资源包到androidStudio项目的assets里面</p> 
<p><img alt="" height="491" src="https://images2.imgbox.com/c4/fe/NHA6AwuE_o.png" width="1066"></p> 
<p>5.12  运行出现该组件说明成功，同样打包aar，复制到uni项目里面的nativeplugins目录，并配置pakage.json</p> 
<p><img alt="" height="469" src="https://images2.imgbox.com/dd/50/NjW5wQau_o.png" width="1200"></p> 
<p>5.13 云打包就可以安装真机上运行了 </p> 
<p><img alt="" height="902" src="https://images2.imgbox.com/3b/1c/9nvxMNeE_o.jpg" width="406"></p> 
<p>六 发布插件到DCloud市场</p> 
<p>6.1 上面说了怎样使用本地插件，我们也可以发布插件到市场，这样就能通过远程依赖使用该插件 。发布插件地址：<a href="https://ext.dcloud.net.cn/publish" rel="nofollow" title="https://ext.dcloud.net.cn/publish">https://ext.dcloud.net.cn/publish</a></p> 
<p>6.2 填写名字等基础信息</p> 
<p><img alt="" height="772" src="https://images2.imgbox.com/82/2d/xQyQ20lh_o.png" width="1200"></p> 
<p>6.3  打包插件，生成zip压缩包</p> 
<p><img alt="" height="229" src="https://images2.imgbox.com/ca/43/wa2rG5mi_o.png" width="1200"></p> 
<p><img alt="" height="351" src="https://images2.imgbox.com/85/36/rXeI35Bt_o.png" width="864"></p> 
<p>6.4 上传插件使用说明md文本</p> 
<p><img alt="" height="309" src="https://images2.imgbox.com/32/37/XlOKVlC7_o.png" width="1200"></p> 
<p><img alt="" height="808" src="https://images2.imgbox.com/43/71/iSRzpXcI_o.png" width="966"></p> 
<p>6.5 发布插件，可能会提示未包含插件内容，是因为上面填写的插件id，和压缩包的插件id不一致。我们改为一致</p> 
<p><img alt="" height="386" src="https://images2.imgbox.com/08/ff/V1KX9b9X_o.png" width="836"></p> 
<p><img alt="" height="276" src="https://images2.imgbox.com/f3/fa/zB2z0HHl_o.png" width="939"></p> 
<p>6.6 因为发布插件必须这样格式，我们就修改uni项目中的插件ID名字</p> 
<p><img alt="" height="649" src="https://images2.imgbox.com/b3/71/d18wJTnB_o.png" width="1200"></p> 
<p>6.7 重新发布，可以看到发布成功了</p> 
<p><img alt="" height="716" src="https://images2.imgbox.com/90/a8/BblCBoI9_o.png" width="896"></p> 
<p>6.7 插件发布成功，就跟项目ID关联着，在HBuilder里面选择该插件就可以了</p> 
<p><img alt="" height="656" src="https://images2.imgbox.com/bf/be/e7BWTHt7_o.png" width="1200"></p> 
<p><span style="color:#0d0016;"><strong>七 插件开发总流程</strong></span></p> 
<p>7.1  AndroidStudio增加插件module</p> 
<p><img alt="" height="498" src="https://images2.imgbox.com/82/1e/rSucxMDt_o.png" width="471"></p> 
<p>7.2 AndroidStudio填写插件json清单</p> 
<p><img alt="" height="478" src="https://images2.imgbox.com/cc/c0/FRqCxfry_o.png" width="1200"></p> 
<p>7.3  uni添加三方依赖和配置插件信息</p> 
<p><img alt="" height="425" src="https://images2.imgbox.com/91/c0/KEHN18IU_o.png" width="1200"></p> 
<p>7.4 uni本地生成资源包，供AndroidStudio调试</p> 
<p><img alt="" height="418" src="https://images2.imgbox.com/4c/fb/kLUvz8KK_o.png" width="817"></p> 
<p>7.5 复制uni资源包到AndroidStudio里面调试</p> 
<p><img alt="" height="448" src="https://images2.imgbox.com/17/48/nGT2dsSO_o.png" width="662"> </p> 
<p><span style="color:#fe2c24;"> 7.6 调试通过可以打原生工程aar在uni里面调试</span></p> 
<p><img alt="" height="758" src="https://images2.imgbox.com/8e/fb/Lo8pCVuh_o.png" width="831"></p> 
<p>7.7 复制module里面编译好的aar到uni里面</p> 
<p><img alt="" height="425" src="https://images2.imgbox.com/75/7d/iQOARUy2_o.png" width="1040"></p> 
<p><img alt="" height="307" src="https://images2.imgbox.com/ce/d9/bJkFmVcl_o.png" width="965"></p> 
<p>7.8 然后uni离线打包，或者云打包，或者自定义基座调试</p> 
<p><img alt="" height="550" src="https://images2.imgbox.com/db/88/8TZwgik3_o.png" width="1125"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/51a5cffe26206064466d49ff890cfc60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos7.9安装k8s v1.28.4</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/04f5928374ff07e7e8cb22ded68d14a6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">算法模板之栈图文详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>