<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue实现输入网址生成二维码、解码、下载、更改功能 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue实现输入网址生成二维码、解码、下载、更改功能" />
<meta property="og:description" content="功能：
1.输入网址生成二维码
2.二维码可以下载
3.可以更改二维码中心的图片
4.可以通过本地相册的二维码进行解码
1.下载三个插件 下载vue-qr，用于生成二维码
npm install vue-qr 下载vue-jimp并指定版本号，最新版不行，实现不了 。Jimp 库读取图片数据。Jimp 是一个用于处理图像的 JavaScript 库，它可以从数据中创建图像对象。
npm install jimp@0.16.1 下载jsqr，用于将二维码进行解码
npm install jsqr 2.完整代码如下 不太好讲我直接做了注释，看注释应该能看懂吧
&lt;template&gt; &lt;div class=&#34;content-box&#34;&gt; &lt;div class=&#34;container&#34;&gt; &lt;h1&gt;二维码输入网址生成、下载&lt;/h1&gt; &lt;el-row&gt; &lt;el-col :span=&#34;6&#34;&gt; &lt;el-input v-model=&#34;text&#34; placeholder=&#34;输入要生成二维码的网址&#34;&gt;&lt;/el-input&gt; &lt;/el-col&gt; &lt;el-col :span=&#34;4&#34; :push=&#34;1&#34;&gt; &lt;el-button&gt;&lt;a :href=&#34;href&#34; target=&#34;_blank&#34; download=&#34;已下载二维码&#34; rel=&#34;noopener noreferrer&#34;&gt;下载二维码&lt;/a&gt;&lt;/el-button&gt; &lt;/el-col&gt; &lt;el-col :span=&#34;4&#34; :push=&#34;1&#34;&gt; &lt;input type=&#34;file&#34; @change=&#34;updateImg&#34; name=&#34;file&#34; class=&#34;element&#34; accept=&#34;image/gif,image/jpeg,image/jpg,image/png,image/svg&#34; /&gt; &lt;/el-col&gt; &lt;/el-row&gt; &lt;el-row style=&#34;margin-top: 20px;&#34;&gt; &lt;el-col :span=&#34;6&#34;&gt; &lt;vue-qr qid=&#34;qrid&#34; :text=&#34;text&#34; :size=&#34;size&#34; :bgSrc=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/67879114333df473b7c2db420b966407/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T11:28:06+08:00" />
<meta property="article:modified_time" content="2024-01-09T11:28:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue实现输入网址生成二维码、解码、下载、更改功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>功能：</strong></p> 
<p><strong>1.输入网址生成二维码</strong></p> 
<p><strong>2.二维码可以下载</strong></p> 
<p><strong>3.可以更改二维码中心的图片</strong></p> 
<p><strong>4.可以通过本地相册的二维码进行解码</strong></p> 
<h3>1.下载三个插件</h3> 
<p><strong>下载vue-qr，用于生成二维码</strong></p> 
<pre><code>npm install vue-qr</code></pre> 
<p><strong>下载vue-jimp并指定版本号，最新版不行，实现不了 。Jimp 库读取图片数据。Jimp 是一个用于处理图像的 JavaScript 库，它可以从数据中创建图像对象。</strong></p> 
<pre><code>npm install jimp@0.16.1</code></pre> 
<p><strong>下载jsqr，用于将二维码进行解码</strong></p> 
<pre><code>npm install jsqr</code></pre> 
<h3>2.完整代码如下</h3> 
<p>不太好讲我直接做了注释，看注释应该能看懂吧</p> 
<pre><code class="language-javascript">&lt;template&gt;
    &lt;div class="content-box"&gt;
        &lt;div class="container"&gt;
            &lt;h1&gt;二维码输入网址生成、下载&lt;/h1&gt;
            &lt;el-row&gt;
                &lt;el-col :span="6"&gt;
                    &lt;el-input v-model="text" placeholder="输入要生成二维码的网址"&gt;&lt;/el-input&gt;
                &lt;/el-col&gt;
                &lt;el-col :span="4" :push="1"&gt;
                    &lt;el-button&gt;&lt;a :href="href" target="_blank" download="已下载二维码" rel="noopener noreferrer"&gt;下载二维码&lt;/a&gt;&lt;/el-button&gt;
                &lt;/el-col&gt;
                &lt;el-col :span="4" :push="1"&gt;
                    &lt;input
                        type="file"
                        @change="updateImg"
                        name="file"
                        class="element"
                        accept="image/gif,image/jpeg,image/jpg,image/png,image/svg"
                    /&gt;
                &lt;/el-col&gt;
            &lt;/el-row&gt;
            &lt;el-row style="margin-top: 20px;"&gt;
                &lt;el-col :span="6"&gt;
                    &lt;vue-qr
                        qid="qrid"
                        :text="text"
                        :size="size"
                        :bgSrc="bgSrc"
                        :logoSrc="logoSrc"
                        :callback="callBack"
                        :logoScale="logoScale"
                        :colorDark="colorDark"
                        :colorLight="colorLight"
                        :backgroundColor="backgroundColor"
                    &gt;&lt;/vue-qr&gt;
                &lt;/el-col&gt;
            &lt;/el-row&gt;
            &lt;hr /&gt;
            &lt;h2&gt;解析二维码&lt;/h2&gt;
            &lt;el-row style="margin-top: 20px;"&gt;
                &lt;el-col :span="6"&gt;
                    &lt;input type="file" @change="upload($event)" /&gt;
                &lt;/el-col&gt;
            &lt;/el-row&gt;
            &lt;img :src="image" alt="" srcset="" /&gt;
            {<!-- -->{ result }}
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import VueQr from 'vue-qr';
import Jimp from 'jimp';
import jsQR from 'jsqr';
export default {
    components: {
        VueQr
    },
    data() {
        return {
            href: '',
            text: 'https://element.eleme.cn/#/zh-CN/component/table', // 二维码内容
            size: 150, // 二维码宽高尺寸, 长宽一致, 包含外边距
            bgSrc: '', // 嵌入背景图地址，
            logoSrc: 'https://tse2-mm.cn.bing.net/th/id/OIP-C.mH9YLFEL5YdVxJM82mjVJQAAAA?pid=ImgDet&amp;rs=1', // 嵌入至二维码中心的 LOGO 地址
            margin: 0, // 二维码图像的外边距, 默认20px
            colorDark: '#484848', // 实点的颜色,必须设置深色，浅色会识别不出来
            colorLight: '#42B983', // 空白区的颜色
            backgroundColor: '#EEE', // 背景色
            logoScale: 0.15, // 中间图的尺寸，不要设太大，太大会导致扫码失败的 默认0.2
            dotScale: 0.35, // 数据区域点缩小比例,默认为0.35
            imgUrl: '', //
            result: '',
            image: ''
        };
    },
    mounted() {},
    methods: {
        callBack(base64, pid) {
            this.href = base64;
            console.log(base64, pid);
        },
        // 上传二维码
        upload(event) {
            const file = event.target.files[0];
            this.result = '';
            // 创建一个新的filereader对象，用于读取文件内容
            const fReader = new FileReader();
            // 将选定的文件读取为数据 URL。这将读取文件的内容，并将其转换为 Base64 编码的字符串。这个 Base64 字符串可以用于展示图片，或者上传到服务器。
            fReader.readAsDataURL(file);
            // 文件读取完后执行的回调函数
            fReader.onload = e =&gt; {
                console.log(e, '图片回调');
                // 将读取的的文件内容base64编码字符串赋值给image变量，展示图片
                this.image = e.target.result;
                // 使用 Jimp 库读取图片数据。Jimp 是一个用于处理图像的 JavaScript 库，它可以从数据中创建图像对象。
                Jimp.read(e.target.result)
                    .then(async res =&gt; {
                        console.log(res, 'jimp的图像对象');
                        const { data, width, height } = res.bitmap;
                        try {
                            // 使用 jsQR 库对图像中的二维码进行解码。得到图片原本的数据，data是地址
                            const resolve = await jsQR(data, width, height);
                            console.log(resolve, 'zabuzou1l1-------');
                            this.result = resolve.data;
                            console.log(this.result, '得到数据');
                        } catch (err) {
                            this.result = '识别失败，重新传二维码';
                        }
                    })
                    .catch(err =&gt; {
                        console.error('文件读取错误', err);
                    });
            };
        },
        updateImg(event) {
            // 声明了一个名为 createObjectURL 的变量，它是一个用于创建临时 URL 的函数。这里使用了多个浏览器前缀的不同实现，以兼容不同的浏览器。
            const file = event.target.files[0];
            const createObjectURL = window.createObjectURL || window.URL.createObjectURL || window.webkitURL.createObjectURL;
            // 使用之前声明的 createObjectURL 函数创建一个临时 URL，将其赋值给 logoSrc 变量
            this.logoSrc = createObjectURL(file);
        }
    }
};
&lt;/script&gt;

&lt;style lang="scss" scoped&gt;
.avatar-uploader .el-upload {
    border: 1px dashed #d9d9d9;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}
.avatar-uploader .el-upload:hover {
    border-color: #409eff;
}
.avatar-uploader-icon {
    font-size: 28px;
    color: #8c939d;
    width: 178px;
    height: 178px;
    line-height: 178px;
    text-align: center;
}
.avatar {
    width: 178px;
    height: 178px;
    display: block;
}
.canvas {
    width: 200px;
    height: 200px;
}
&lt;/style&gt;
</code></pre> 
<h3>3.效果</h3> 
<p><img alt="" height="390" src="https://images2.imgbox.com/0a/f2/zDx1ZT2i_o.png" width="805"></p> 
<p><img alt="" height="65" src="https://images2.imgbox.com/40/24/zyomjZgW_o.png" width="234">  </p> 
<h3>4.解决引入报错问题</h3> 
<p>报错内容如下：</p> 
<p id="articleContentId">BREAKING CHANGE: webpack ＜ 5 used to include polyfills for node.js core modules by default.</p> 
<p>原因：webpack5中移除了<a href="https://so.csdn.net/so/search?q=nodejs&amp;spm=1001.2101.3001.7020" title="nodejs">nodejs</a>核心模块的polyfill自动引入，所以需要手动引入</p> 
<p> 安装如下插件</p> 
<pre><code class="language-javascript">npm install node-polyfill-webpack-plugin</code></pre> 
<p>最后在vue.config.js中手动引入即可，如果项目没有vue.config.js可以自己创建一个，这样就算是最新版或者是旧版的jimp都可以运行了</p> 
<pre><code class="language-javascript">const { defineConfig } = require('@vue/cli-service')
const NodePolyfillPlugin = require('node-polyfill-webpack-plugin')
module.exports = defineConfig({
  configureWebpack: {
    plugins: [new NodePolyfillPlugin()]
  }

})
</code></pre> 
<p>文章到此结束，希望对你有所帮助~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e9d724a291930e32cc6101a8e1f422af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue3自定义动画指令的封装&amp;注册&amp;使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98fb1855e71aba383ed1ee9af4329ca1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">常见web安全漏洞_web漏洞</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>