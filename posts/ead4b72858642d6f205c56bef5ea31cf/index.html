<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>uni-app项目之电影预告 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="uni-app项目之电影预告" />
<meta property="og:description" content="目录 一、创建项目1.新建项目2.构建基础页面3.构建tabBar 二、构建首页-轮播图1.使用轮播组件2.禁用原生导航栏达到页面全屏化3.引用组件实现全局变量 三、构建首页-热门电影3.1 使用scoll-view组件3.2 开发自定义组件3.3 父组件向自定义组件传递值3.4 完成评分自定义组件 构建首页-热门预告构建首页-猜你喜欢1. 编写flex布局2. 实现点赞动画效果3.还原动画4.动态渲染列表5. 实现动画数组(修复多个电影同时点赞问题)下拉刷新 构建搜索页面静态搜索页面及搜索框固定在顶部动态获取电影列表分页查询 页面路由api与传参 一、创建项目 开发工具：HBuilderX
Vue版本：Vue3
1.新建项目 2.构建基础页面 1.在pages目录下创建search、me页面
3.构建tabBar tabBar主要在page.json里配置
&#34;tabBar&#34;: { &#34;color&#34;: &#34;#bfbfbf&#34;, &#34;selectedColor&#34;: &#34;#515151&#34;, &#34;backgroundColor&#34;: &#34;#ffffff&#34;, &#34;borderStyle&#34;: &#34;black&#34;, &#34;list&#34;: [ { &#34;pagePath&#34;: &#34;pages/index/index&#34;, &#34;text&#34;: &#34;首页&#34;, &#34;iconPath&#34;: &#34;static/tabBarIco/index.png&#34;, &#34;selectedIconPath&#34;: &#34;static/tabBarIco/index_sel.png&#34; }, { &#34;pagePath&#34;: &#34;pages/search/search&#34;, &#34;text&#34;: &#34;搜索&#34;, &#34;iconPath&#34;: &#34;static/tabBarIco/search.png&#34;, &#34;selectedIconPath&#34;: &#34;static/tabBarIco/search_sel.png&#34; }, { &#34;pagePath&#34;: &#34;pages/me/me&#34;, &#34;text&#34;: &#34;我的&#34;, &#34;iconPath&#34;: &#34;static/tabBarIco/me.png&#34;, &#34;selectedIconPath&#34;: &#34;static/tabBarIco/me_sel.png&#34; } ] } 二、构建首页-轮播图 在App.vue里配置首页公共样式
&lt;style&gt; /*每个页面公共css */ ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/ead4b72858642d6f205c56bef5ea31cf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-01T12:38:32+08:00" />
<meta property="article:modified_time" content="2022-12-01T12:38:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">uni-app项目之电影预告</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、创建项目</a></li><li><ul><li><a href="#1_5" rel="nofollow">1.新建项目</a></li><li><a href="#2_8" rel="nofollow">2.构建基础页面</a></li><li><a href="#3tabBar_12" rel="nofollow">3.构建tabBar</a></li></ul> 
  </li><li><a href="#_43" rel="nofollow">二、构建首页-轮播图</a></li><li><ul><li><a href="#1_56" rel="nofollow">1.使用轮播组件</a></li><li><a href="#2_78" rel="nofollow">2.禁用原生导航栏达到页面全屏化</a></li><li><a href="#3_98" rel="nofollow">3.引用组件实现全局变量</a></li></ul> 
  </li><li><a href="#_152" rel="nofollow">三、构建首页-热门电影</a></li><li><ul><li><a href="#31_scollview_153" rel="nofollow">3.1 使用scoll-view组件</a></li><li><a href="#32__271" rel="nofollow">3.2 开发自定义组件</a></li><li><a href="#33__291" rel="nofollow">3.3 父组件向自定义组件传递值</a></li><li><a href="#34__332" rel="nofollow">3.4 完成评分自定义组件</a></li></ul> 
  </li><li><a href="#_429" rel="nofollow">构建首页-热门预告</a></li><li><a href="#_430" rel="nofollow">构建首页-猜你喜欢</a></li><li><ul><li><a href="#1_flex_431" rel="nofollow">1. 编写flex布局</a></li><li><a href="#2__505" rel="nofollow">2. 实现点赞动画效果</a></li><li><a href="#3_562" rel="nofollow">3.还原动画</a></li><li><a href="#4_573" rel="nofollow">4.动态渲染列表</a></li><li><a href="#5__638" rel="nofollow">5. 实现动画数组(修复多个电影同时点赞问题)</a></li><li><a href="#_678" rel="nofollow">下拉刷新</a></li></ul> 
  </li><li><a href="#_706" rel="nofollow">构建搜索页面</a></li><li><ul><li><a href="#_708" rel="nofollow">静态搜索页面及搜索框固定在顶部</a></li><li><a href="#_866" rel="nofollow">动态获取电影列表</a></li><li><a href="#_933" rel="nofollow">分页查询</a></li></ul> 
  </li><li><a href="#api_990" rel="nofollow">页面路由api与传参</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、创建项目</h2> 
<p>开发工具：HBuilderX<br> Vue版本：Vue3</p> 
<h3><a id="1_5"></a>1.新建项目</h3> 
<p><img src="https://images2.imgbox.com/32/a8/BoWgMGFw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_8"></a>2.构建基础页面</h3> 
<p>1.在pages目录下创建search、me页面<br> <img src="https://images2.imgbox.com/39/8c/1we6ysGJ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3tabBar_12"></a>3.构建tabBar</h3> 
<p>tabBar主要在page.json里配置</p> 
<pre><code class="prism language-css"><span class="token string">"tabBar"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token string">"color"</span><span class="token punctuation">:</span> <span class="token string">"#bfbfbf"</span><span class="token punctuation">,</span>
		<span class="token string">"selectedColor"</span><span class="token punctuation">:</span> <span class="token string">"#515151"</span><span class="token punctuation">,</span>
		<span class="token string">"backgroundColor"</span><span class="token punctuation">:</span> <span class="token string">"#ffffff"</span><span class="token punctuation">,</span>
		<span class="token string">"borderStyle"</span><span class="token punctuation">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>
		<span class="token string">"list"</span><span class="token punctuation">:</span> <span class="token selector">[</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token string">"pagePath"</span><span class="token punctuation">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
				<span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"首页"</span><span class="token punctuation">,</span>
				<span class="token string">"iconPath"</span><span class="token punctuation">:</span> <span class="token string">"static/tabBarIco/index.png"</span><span class="token punctuation">,</span>
				<span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span> <span class="token string">"static/tabBarIco/index_sel.png"</span>
			<span class="token punctuation">}</span><span class="token selector">,</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token string">"pagePath"</span><span class="token punctuation">:</span> <span class="token string">"pages/search/search"</span><span class="token punctuation">,</span>
				<span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"搜索"</span><span class="token punctuation">,</span>
				<span class="token string">"iconPath"</span><span class="token punctuation">:</span> <span class="token string">"static/tabBarIco/search.png"</span><span class="token punctuation">,</span>
				<span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span> <span class="token string">"static/tabBarIco/search_sel.png"</span>
			<span class="token punctuation">}</span><span class="token selector">,</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token string">"pagePath"</span><span class="token punctuation">:</span> <span class="token string">"pages/me/me"</span><span class="token punctuation">,</span>
				<span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token string">"我的"</span><span class="token punctuation">,</span>
				<span class="token string">"iconPath"</span><span class="token punctuation">:</span> <span class="token string">"static/tabBarIco/me.png"</span><span class="token punctuation">,</span>
				<span class="token string">"selectedIconPath"</span><span class="token punctuation">:</span> <span class="token string">"static/tabBarIco/me_sel.png"</span>
			<span class="token punctuation">}</span>
		]
	<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_43"></a>二、构建首页-轮播图</h2> 
<p>在App.vue里配置首页公共样式</p> 
<pre><code class="prism language-css">&lt;style&gt;
	<span class="token comment">/*每个页面公共css */</span>
	<span class="token selector">.page</span><span class="token punctuation">{<!-- --></span>
		<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">background-color</span><span class="token punctuation">:</span> #f7f7f7<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre> 
<h3><a id="1_56"></a>1.使用轮播组件</h3> 
<pre><code class="prism language-css">&lt;template&gt;
	&lt;view class=<span class="token string">"page"</span>&gt;
		
		&lt;<span class="token property">swiper</span> <span class="token punctuation">:</span>indicator-dots=<span class="token string">"true"</span> <span class="token punctuation">:</span>autoplay=<span class="token string">"true"</span> <span class="token punctuation">:</span>circular=<span class="token string">"true"</span> class=<span class="token string">"carousel"</span>&gt;
			&lt;swiper-item&gt;
				&lt;image src=<span class="token string">"/static/carousel/寒战.png"</span> class=<span class="token string">"carousel"</span>&gt;&lt;/image&gt;
			&lt;/swiper-item&gt;
			&lt;swiper-item&gt;
				&lt;image src=<span class="token string">"../../static/carousel/你的婚礼.png"</span> class=<span class="token string">"carousel"</span>&gt;&lt;/image&gt;
			&lt;/swiper-item&gt;
			&lt;swiper-item &gt;
				&lt;image src=<span class="token string">"../../static/carousel/无限战争.png"</span> class=<span class="token string">"carousel"</span>&gt;&lt;/image&gt;
			&lt;/swiper-item&gt;
		&lt;/swiper&gt;
	&lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<p>效果图：<br> <img src="https://images2.imgbox.com/df/02/ftwoDKjx_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_78"></a>2.禁用原生导航栏达到页面全屏化</h3> 
<p>在pages.json里通过配置 navigationStyle为custom，或titleNView为false，来禁用原生导航栏。</p> 
<pre><code class="prism language-css"><span class="token punctuation">{<!-- --></span>
			<span class="token string">"path"</span><span class="token punctuation">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
			<span class="token string">"style"</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
				<span class="token selector">// "navigationBarTitleText": ""
				"app-plus":</span> <span class="token punctuation">{<!-- --></span>
					<span class="token string">"titleNView"</span><span class="token punctuation">:</span> false
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
</code></pre> 
<p>去掉原生导航栏前：<br> <img src="https://images2.imgbox.com/42/c7/V9celZUV_o.png" alt="在这里插入图片描述"></p> 
<p>去掉原生导航栏后：<br> <img src="https://images2.imgbox.com/a0/36/JcpniQEr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_98"></a>3.引用组件实现全局变量</h3> 
<ol><li>创建common目录，新增common.js文件</li></ol> 
<pre><code class="prism language-js"><span class="token keyword">const</span> serverUrl_dev <span class="token operator">=</span> <span class="token string">"http://192.168.31.218:8091"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> serverUrl_prod <span class="token operator">=</span> <span class="token string">"https://www.baidu.com"</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
	serverUrl_dev
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>引用组件</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">import</span> common <span class="token keyword">from</span> <span class="token string">"../../common/common.js"</span>
	
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">carouselList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			
			<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			
			<span class="token comment">//获取common.js中的服务器地址</span>
			<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> common<span class="token punctuation">.</span>serverUrl_dev<span class="token punctuation">;</span>
			
			<span class="token comment">// var serverUrl = me.serverUrl;</span>
			
			uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> serverUrl <span class="token operator">+</span> <span class="token string">'/index/carousel/list'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
					<span class="token keyword">var</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
						<span class="token keyword">var</span> carouselList <span class="token operator">=</span> data<span class="token punctuation">.</span>content<span class="token punctuation">;</span>
						me<span class="token punctuation">.</span>carouselList <span class="token operator">=</span> carouselList<span class="token punctuation">;</span>
						
					<span class="token punctuation">}</span>
					
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre> 
<h2><a id="_152"></a>三、构建首页-热门电影</h2> 
<h3><a id="31_scollview_153"></a>3.1 使用scoll-view组件</h3> 
<ol><li>template</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>scroll<span class="token operator">-</span>view scroll<span class="token operator">-</span>x<span class="token operator">=</span><span class="token string">"true"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"page-block hot"</span><span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"single-poster"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"hotMovie in hotMovieList"</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poster-wrapper"</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>image <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"hotMovie.poster"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-name"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>hotMovie<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>	
					<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-score-wrapper"</span><span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/star-yellow.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/star-yellow.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/star-yellow.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/star-yellow.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/star-white.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
						<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-score"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>hotMovie<span class="token punctuation">.</span>score<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

		<span class="token operator">&lt;</span><span class="token operator">/</span>scroll<span class="token operator">-</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 热门电影 end <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre> 
<ol start="2"><li>js</li></ol> 
<pre><code class="prism language-js"><span class="token comment">//获取热门电影start</span>
	uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">url</span><span class="token operator">:</span>serverUrl <span class="token operator">+</span> <span class="token string">'/index/movie/selByType/hot'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">"GET"</span><span class="token punctuation">,</span>
		<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">var</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">var</span> hotMovieList <span class="token operator">=</span> data<span class="token punctuation">.</span>content<span class="token punctuation">;</span>
				me<span class="token punctuation">.</span>hotMovieList <span class="token operator">=</span> hotMovieList<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//获取热门电影end</span>
</code></pre> 
<ol start="3"><li>css</li></ol> 
<pre><code class="prism language-css"><span class="token comment">/* 热门电影 start */</span>
<span class="token selector">.movie-hot</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 12rpx<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hot-title-wrapper</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>   <span class="token comment">/*flex布局*/</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hot-ico</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 5rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hot-title</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
	<span class="token property">margin-left</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.hot</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
	<span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>  <span class="token comment">/*文字不换行*/</span>
<span class="token punctuation">}</span>

<span class="token selector">.single-poster</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>  <span class="token comment">/*内联块元素，从左到右依次排列，可以设定宽高*/</span>
	<span class="token property">margin-left</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.poster-wrapper</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.poster</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 270rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.movie-name</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
	<span class="token comment">/* 名字超出则省略start */</span>
	<span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
	<span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>   <span class="token comment">/*内容被修剪，多余的内容被隐藏*/</span>
	<span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>  <span class="token comment">/*显示省略符号 ... 来代表被修剪的文本*/</span>
	<span class="token comment">/* 名字超出则省略end */</span>
<span class="token punctuation">}</span>

<span class="token selector">.movie-score-wrapper</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.star-ico</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 10rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.movie-score</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> thin<span class="token punctuation">;</span>
	<span class="token property">margin-top</span><span class="token punctuation">:</span> 6rpx<span class="token punctuation">;</span>
	<span class="token property">margin-left</span><span class="token punctuation">:</span> 2rpx<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> grey<span class="token punctuation">;</span>  <span class="token comment">/*字体颜色*/</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 热门电影 end */</span>
</code></pre> 
<h3><a id="32__271"></a>3.2 开发自定义组件</h3> 
<ol><li> <p>在commpents目录下创建一个组件helloComp<br> <img src="https://images2.imgbox.com/18/6c/4BL7NDOc_o.png" alt="在这里插入图片描述"></p> </li><li> <p>引入组件</p> </li></ol> 
<pre><code class="prism language-js">	<span class="token keyword">import</span> helloComp <span class="token keyword">from</span> <span class="token string">"../../components/helloComp.vue"</span>   <span class="token comment">//引用组件</span>
</code></pre> 
<ol start="3"><li>注册组件</li></ol> 
<pre><code class="prism language-js"><span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>    <span class="token comment">//注册组件</span>
			helloComp
		<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li>使用组件</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>helloComp<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>helloComp<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="33__291"></a>3.3 父组件向自定义组件传递值</h3> 
<ol><li>定义组件内部使用的属性</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template name<span class="token operator">=</span><span class="token string">"helloComp"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 定义组件的名称为helloComp <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"myVal"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"txt"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		
		<span class="token comment">// 定义组件的名称为helloComp</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"helloComp"</span><span class="token punctuation">,</span>
		
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
				<span class="token string-property property">"msg"</span><span class="token operator">:</span> <span class="token string">"你好，这是自定义组件~~~"</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 定义组件内部使用的属性</span>
		<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 自定义一个变量，用于接受父组件(首页或其他页面)传入的参数值 </span>
			<span class="token literal-property property">myVal</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">type</span><span class="token operator">:</span> String   <span class="token comment">//定义这个参数的类型</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<ol start="2"><li>父组件使用参数会传值</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 使用组件 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>helloComp myVal<span class="token operator">=</span><span class="token string">"hello,电影预告"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>helloComp<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/05/BGNd67pX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="34__332"></a>3.4 完成评分自定义组件</h3> 
<p>1.在components目录新增评分组件score.vue</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template name<span class="token operator">=</span><span class="token string">"score"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-score-wrapper"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"showNumber == 1"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"starScore"</span><span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span>image  v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"yellow in yellowStars"</span>
			src<span class="token operator">=</span><span class="token string">"../static/icons/star-yellow.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span>image  v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"white in whiteStars"</span>
			src<span class="token operator">=</span><span class="token string">"../static/icons/star-white.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"star-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-score"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>innerScore<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		
		<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">"score"</span><span class="token punctuation">,</span>
		
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">yellowStars</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
				<span class="token literal-property property">whiteStars</span><span class="token operator">:</span> <span class="token number">5</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// innerScore: {<!-- --></span>
			<span class="token comment">// 	type: Number</span>
			<span class="token comment">// },</span>
			<span class="token comment">// showNum: {<!-- --></span>
			<span class="token comment">// 	type: Number</span>
			<span class="token comment">// }</span>
			<span class="token literal-property property">innerScore</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token comment">//接收父组件传递的值，默认为0</span>
			<span class="token literal-property property">showNumber</span><span class="token operator">:</span> <span class="token number">0</span>    <span class="token comment">//是否显示评分，1为显示，0为不显示</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">var</span> tempScore <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token comment">// debugger;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>innerScore <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerScore <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerScore <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
				tempScore <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>innerScore<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">var</span> yellowStars <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>tempScore<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> whiteStars <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">-</span> yellowStars<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>yellowStars <span class="token operator">=</span> yellowStars<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>whiteStars <span class="token operator">=</span> whiteStars<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>movie<span class="token operator">-</span>score<span class="token operator">-</span>wrapper<span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
	flex<span class="token operator">-</span>direction<span class="token operator">:</span> row<span class="token punctuation">;</span>
	<span class="token literal-property property">width</span><span class="token operator">:</span> 200rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>star<span class="token operator">-</span>ico<span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">width</span><span class="token operator">:</span> 30rpx<span class="token punctuation">;</span>
	<span class="token literal-property property">height</span><span class="token operator">:</span> 30rpx<span class="token punctuation">;</span>
	margin<span class="token operator">-</span>top<span class="token operator">:</span> 10rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>movie<span class="token operator">-</span>score<span class="token punctuation">{<!-- --></span>
	font<span class="token operator">-</span>size<span class="token operator">:</span> 14px<span class="token punctuation">;</span>
	font<span class="token operator">-</span>weight<span class="token operator">:</span> thin<span class="token punctuation">;</span>
	margin<span class="token operator">-</span>top<span class="token operator">:</span> 6rpx<span class="token punctuation">;</span>
	margin<span class="token operator">-</span>left<span class="token operator">:</span> 2rpx<span class="token punctuation">;</span>
	<span class="token literal-property property">color</span><span class="token operator">:</span> grey<span class="token punctuation">;</span>  <span class="token comment">/*字体颜色*/</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span>starScore<span class="token punctuation">{<!-- --></span>
	<span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>
	flex<span class="token operator">-</span>direction<span class="token operator">:</span> row<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<ol start="2"><li>导入score组件</li></ol> 
<pre><code class="prism language-js">	<span class="token keyword">import</span> score <span class="token keyword">from</span> <span class="token string">"../../components/score.vue"</span>
</code></pre> 
<ol start="3"><li>注册组件</li></ol> 
<pre><code class="prism language-js"><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>    <span class="token comment">//注册组件</span>
			helloComp<span class="token punctuation">,</span>
			score
		<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li>使用组件</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>score <span class="token operator">:</span>innerScore<span class="token operator">=</span><span class="token string">"hotMovie.score"</span> showNumber<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>score<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/45/b6/kA4GgsHh_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_429"></a>构建首页-热门预告</h2> 
<h2><a id="_430"></a>构建首页-猜你喜欢</h2> 
<h3><a id="1_flex_431"></a>1. 编写flex布局</h3> 
<p>template:</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 猜你喜欢start <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"page-block movie-hot"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hot-title-wrapper"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/guess-like.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hot-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hot-title"</span><span class="token operator">&gt;</span>猜你喜欢<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"page-block guess-like"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-wrapper"</span><span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/poster/信条.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		 
		 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-info"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-name"</span><span class="token operator">&gt;</span>我的祖国我的祖国我的祖国我的祖国<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>score <span class="token operator">:</span>innerScore<span class="token operator">=</span><span class="token string">"9.1"</span> showNumber<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>score<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-type"</span><span class="token operator">&gt;</span><span class="token number">2018</span> <span class="token operator">/</span> 美国 <span class="token operator">/</span> 科幻 <span class="token operator">/</span> 超级英雄<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-time"</span><span class="token operator">&gt;</span>上映：<span class="token number">2022</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">17</span><span class="token punctuation">(</span>中国大陆<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-author"</span><span class="token operator">&gt;</span> 张国荣<span class="token operator">/</span>张丰毅<span class="token operator">/</span>巩俐<span class="token operator">/</span>葛优<span class="token operator">/</span>英达 <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span><span class="token operator">/</span>view <span class="token operator">&gt;</span>
			 
		 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-praise"</span><span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 猜你喜欢end <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre> 
<p><strong>css:</strong></p> 
<pre><code class="prism language-css"><span class="token comment">/* 猜你喜欢start */</span>
<span class="token selector">.guess-like</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-like-wrapper</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 30rpx 20rpx<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-like-poster</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 180rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 240rpx<span class="token punctuation">;</span>
	<span class="token property">border-radius</span><span class="token punctuation">:</span> 3%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-like-info</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 340rpx<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-movie-name</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* font-size: 14px; */</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
	<span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
	<span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
	<span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-movie-type</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> #808080<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-movie-time</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> #808080<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.guess-movie-author</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> #808080<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 猜你喜欢end */</span>
</code></pre> 
<h3><a id="2__505"></a>2. 实现点赞动画效果</h3> 
<p><strong>template:</strong></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-praise"</span>  @click<span class="token operator">=</span><span class="token string">"praiseMe"</span><span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/praise.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-me"</span><span class="token operator">&gt;</span>点赞<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-me praise-me-opacity"</span> <span class="token operator">:</span>animation<span class="token operator">=</span><span class="token string">"animationData"</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>css:</strong></p> 
<pre><code class="prism language-css"><span class="token selector">.guess-like-praise</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 140rpx<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	
	<span class="token property">border-left</span><span class="token punctuation">:</span> 2px dashed lightgrey<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.praise-ico</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 50rpx<span class="token punctuation">;</span>
	<span class="token property">align-self</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.praise-me</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">align-self</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.praise-me-opacity</span><span class="token punctuation">{<!-- --></span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
	<span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>js:在methods里面添加</strong></p> 
<pre><code class="prism language-js"><span class="token comment">//实现点赞动画效果start</span>
<span class="token function">praiseMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">//构建动画数据，并且通过step来表示这组动画的完成</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">400</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//导出动画数据到view组件，实现组件的动画效果</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//还原动画</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
			<span class="token string-property property">"timingFunction"</span><span class="token operator">:</span> <span class="token string">"step-start"</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">//实现点赞动画效果end</span>
</code></pre> 
<h3><a id="3_562"></a>3.还原动画</h3> 
<pre><code class="prism language-js"><span class="token comment">//还原动画</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token string-property property">"timingFunction"</span><span class="token operator">:</span> <span class="token string">"step-start"</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="4_573"></a>4.动态渲染列表</h3> 
<p><strong>template</strong></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 猜你喜欢start <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"page-block movie-hot"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hot-title-wrapper"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/guess-like.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hot-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hot-title"</span><span class="token operator">&gt;</span>猜你喜欢<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"page-block guess-like"</span> <span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-wrapper"</span> v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(guessLike,gIndex) in guessLikeList"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"guessLike.id"</span><span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span>image <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"guessLike.cover"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		 
		 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-info"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-name"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>guessLike<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>score <span class="token operator">:</span>innerScore<span class="token operator">=</span><span class="token string">"guessLike.score"</span> showNumber<span class="token operator">=</span><span class="token string">"0"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>score<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-type"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>guessLike<span class="token punctuation">.</span>baseInfo<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-movie-time"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>guessLike<span class="token punctuation">.</span>releaseDate<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span><span class="token operator">/</span>view <span class="token operator">&gt;</span>
			 
		 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-praise"</span> <span class="token operator">:</span>data<span class="token operator">-</span>gIndex<span class="token operator">=</span><span class="token string">"gIndex"</span>  @click<span class="token operator">=</span><span class="token string">"praiseMe"</span><span class="token operator">&gt;</span>
			 <span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/praise.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
			 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-me"</span><span class="token operator">&gt;</span>点赞<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-me praise-me-opacity"</span> <span class="token operator">:</span>animation<span class="token operator">=</span><span class="token string">"animationDataArr[gIndex]"</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		 <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 猜你喜欢end <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre> 
<p><strong>js:方法写在methods里面</strong></p> 
<pre><code class="prism language-js"><span class="token comment">// 猜你喜欢start</span>
<span class="token function">guessLike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	
	<span class="token comment">//显示loading</span>
	uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//显示导航栏的loading</span>
	uni<span class="token punctuation">.</span><span class="token function">showNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">var</span> serverUrl <span class="token operator">=</span> common<span class="token punctuation">.</span>serverUrl_dev<span class="token punctuation">;</span>
	uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">url</span><span class="token operator">:</span>serverUrl <span class="token operator">+</span> <span class="token string">'/index/movie/guessLike'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">"GET"</span><span class="token punctuation">,</span>
		<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">var</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">var</span> guessLikeList <span class="token operator">=</span> data<span class="token punctuation">.</span>content<span class="token punctuation">;</span>
				me<span class="token punctuation">.</span>guessLikeList <span class="token operator">=</span> guessLikeList<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//隐藏loading</span>
			uni<span class="token punctuation">.</span><span class="token function">hideNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//隐藏导航条的loading</span>
			uni<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//停止刷新</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 猜你喜欢end</span>
</code></pre> 
<h3><a id="5__638"></a>5. 实现动画数组(修复多个电影同时点赞问题)</h3> 
<p><strong>js</strong></p> 
<pre><code class="prism language-js"><span class="token comment">//实现点赞动画效果start</span>
<span class="token function">praiseMe</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token comment">// console.log(e);</span>
	<span class="token keyword">var</span> gIndex <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>gindex<span class="token punctuation">;</span>
	
	<span class="token comment">//构建动画数据，并且通过step来表示这组动画的完成</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
		<span class="token literal-property property">timingFunction</span><span class="token operator">:</span> <span class="token string">"ease"</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//导出动画数据到view组件，实现组件的动画效果</span>
	<span class="token comment">// this.animationData = this.animation.export();</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>animationDataArr<span class="token punctuation">[</span>gIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//还原动画</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">timingFunction</span><span class="token operator">:</span> <span class="token string">"step-start"</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// this.animationData = this.animation.export();</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>animationDataArr<span class="token punctuation">[</span>gIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
	
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">//实现点赞动画效果end</span>
</code></pre> 
<p><strong>template</strong></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"guess-like-praise"</span> <span class="token operator">:</span>data<span class="token operator">-</span>gIndex<span class="token operator">=</span><span class="token string">"gIndex"</span>  @click<span class="token operator">=</span><span class="token string">"praiseMe"</span><span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/praise.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-me"</span><span class="token operator">&gt;</span>点赞<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	 <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"praise-me praise-me-opacity"</span> <span class="token operator">:</span>animation<span class="token operator">=</span><span class="token string">"animationDataArr[gIndex]"</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_678"></a>下拉刷新</h3> 
<ol><li>在pages.json里开启下拉刷新功能</li></ol> 
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
	<span class="token string-property property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token string-property property">"enablePullDownRefresh"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//开启下拉刷新功能</span>
		<span class="token comment">// "navigationBarTitleText": ""</span>
		<span class="token string-property property">"app-plus"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// "titleNView": false    .//禁用原生导航栏</span>
			<span class="token string-property property">"titleNView"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
				<span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">"transparent"</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>监听下拉刷新动作</li></ol> 
<pre><code class="prism language-js"><span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">// console.log('refresh');</span>
	<span class="token comment">//下拉刷新猜你喜欢数据start</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">guessLike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//下拉刷新猜你喜欢数据end</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h2><a id="_706"></a>构建搜索页面</h2> 
<h3><a id="_708"></a>静态搜索页面及搜索框固定在顶部</h3> 
<p><strong>1.template</strong></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"page"</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span>view clas<span class="token operator">=</span><span class="token string">"search-block page-block"</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"search-ico-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"../../static/icons/search.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"search-ico"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>input <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"search-text"</span> type<span class="token operator">=</span><span class="token string">"text"</span> maxlength<span class="token operator">=</span><span class="token string">"10"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入电影名"</span> focus<span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-list page-block"</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"movie-wrapper"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>image src<span class="token operator">=</span><span class="token string">"http://192.168.31.218:8091/images/movie/1/cover/1.png"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"moive-poster"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

	
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>2.css</strong></p> 
<pre><code class="prism language-css"><span class="token comment">/* 搜索框start */</span>

<span class="token selector">.search-block</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 0rpx 20rpx 20rpx 20rpx<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
<span class="token selector">.search-ico-wrapper</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #eaeaea<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 0rpx 10rpx<span class="token punctuation">;</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 680rpx<span class="token punctuation">;</span>
	<span class="token property">margin-left</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
	<span class="token comment">/* 搜索框悬浮 */</span>
	<span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
	<span class="token property">top</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>
	<span class="token property">z-index</span><span class="token punctuation">:</span> 2000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.search-ico</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 40rpx<span class="token punctuation">;</span>
	<span class="token comment">/* display: flex;
	flex-direction: column;
	justify-content: center; */</span>
<span class="token punctuation">}</span>
<span class="token selector">.search-text</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #eaeaea<span class="token punctuation">;</span>
	
	<span class="token property">height</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 680rpx<span class="token punctuation">;</span>
	<span class="token property">margin-left</span><span class="token punctuation">:</span> 15rpx<span class="token punctuation">;</span>
	<span class="token comment">/* flex: 1; */</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 搜索框end */</span>


<span class="token comment">/* 电影列表start */</span>
<span class="token selector">.page-block</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.movie-list</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> row<span class="token punctuation">;</span>
	<span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
	<span class="token property">justify-content</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 80rpx 10rpx 10rpx 10rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.movie-wrapper</span> <span class="token punctuation">{<!-- --></span>
	<span class="token comment">/* margin: 10rpx; */</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 10rpx 20rpx<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span>
<span class="token selector">.moive-poster</span> <span class="token punctuation">{<!-- --></span>
	<span class="token property">width</span><span class="token punctuation">:</span> 200rpx<span class="token punctuation">;</span>
	<span class="token property">height</span><span class="token punctuation">:</span> 270rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 电影列表end */</span>
</code></pre> 
<h3><a id="_866"></a>动态获取电影列表</h3> 
<p><strong>script</strong></p> 
<pre><code class="prism language-js"><span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
			
			<span class="token keyword">let</span> pageNum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			
			me<span class="token punctuation">.</span>pageNum <span class="token operator">=</span> pageNum<span class="token punctuation">;</span>
			
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">mask</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'onShow加载中...'</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">showNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token keyword">let</span> serverUrl <span class="token operator">=</span> common<span class="token punctuation">.</span>serverUrl_dev<span class="token punctuation">;</span>
			
			<span class="token comment">// 搜索页获取电影列表start</span>
			uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				<span class="token literal-property property">url</span><span class="token operator">:</span> serverUrl <span class="token operator">+</span> <span class="token string">'/search/queryPageList'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
					<span class="token literal-property property">name</span><span class="token operator">:</span> me<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
					<span class="token literal-property property">pageNum</span><span class="token operator">:</span> me<span class="token punctuation">.</span>pageNum<span class="token punctuation">,</span>
					<span class="token literal-property property">pageSize</span><span class="token operator">:</span> me<span class="token punctuation">.</span>pageSize
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onshow加载...'</span><span class="token punctuation">)</span>
					<span class="token keyword">let</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						me<span class="token punctuation">.</span>movieList <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
						me<span class="token punctuation">.</span>total <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
					uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					uni<span class="token punctuation">.</span><span class="token function">hideNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token comment">// 搜索页获取电影列表start </span>
</code></pre> 
<p><strong>template</strong></p> 
<pre><code class="prism language-css">&lt;template&gt;
	&lt;view class=<span class="token string">"page"</span>&gt;

		&lt;view clas=<span class="token string">"search-block page-block"</span>&gt;
			&lt;view class=<span class="token string">"search-ico-wrapper"</span>&gt;
				&lt;image src=<span class="token string">"../../static/icons/search.png"</span> class=<span class="token string">"search-ico"</span>&gt;&lt;/image&gt;
				&lt;input 
					class=<span class="token string">"search-text"</span> 
					confirm-type=<span class="token string">"search"</span> 
					maxlength=<span class="token string">"10"</span> 
					placeholder=<span class="token string">"请输入电影名"</span> 
					@confirm=<span class="token string">"searchMovie"</span>/&gt;
			&lt;/view&gt;
		&lt;/view&gt;

		&lt;view class=<span class="token string">"movie-list page-block"</span>&gt;
			&lt;view class=<span class="token string">"movie-wrapper"</span> v-for=<span class="token string">"movie in movieList"</span>&gt;
				&lt;<span class="token property">image</span> <span class="token punctuation">:</span>src=<span class="token string">"movie.cover"</span> class=<span class="token string">"moive-poster"</span>&gt;&lt;/image&gt;
			&lt;/view&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;
</code></pre> 
<h3><a id="_933"></a>分页查询</h3> 
<p><strong>script</strong></p> 
<pre><code class="prism language-js"><span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">let</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> pageNum <span class="token operator">=</span> me<span class="token punctuation">.</span>pageNum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> name <span class="token operator">=</span> me<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
	<span class="token keyword">let</span> totalPages <span class="token operator">=</span> <span class="token punctuation">(</span>me<span class="token punctuation">.</span>total<span class="token operator">%</span>me<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token punctuation">(</span>me<span class="token punctuation">.</span>total<span class="token operator">/</span>me<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token punctuation">(</span>me<span class="token punctuation">.</span>total<span class="token operator">/</span>me<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'totlal:'</span><span class="token operator">+</span> me<span class="token punctuation">.</span>total <span class="token operator">+</span> <span class="token string">',pageSize:'</span> <span class="token operator">+</span> me<span class="token punctuation">.</span>pageSize <span class="token operator">+</span> <span class="token string">',totalPages:'</span> <span class="token operator">+</span> totalPages <span class="token operator">+</span> <span class="token string">',pageNum:'</span> <span class="token operator">+</span> pageNum<span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pageNum <span class="token operator">&gt;</span> totalPages<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	me<span class="token punctuation">.</span><span class="token function">queryPageList</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> pageNum<span class="token punctuation">,</span> me<span class="token punctuation">.</span>pageSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">queryPageList</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> pageNum<span class="token punctuation">,</span> pageSize</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">var</span> me <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	
	<span class="token comment">// 显示loading条</span>
	uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'加载中...'</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	uni<span class="token punctuation">.</span><span class="token function">showNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token keyword">var</span> url <span class="token operator">=</span> common<span class="token punctuation">.</span>serverUrl_dev<span class="token punctuation">;</span>
	
	<span class="token comment">// 搜索页获取电影列表start</span>
	uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">url</span><span class="token operator">:</span> url <span class="token operator">+</span> <span class="token string">"/search/queryPageList"</span><span class="token punctuation">,</span>
		<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> name<span class="token punctuation">,</span>
			<span class="token literal-property property">pageNum</span><span class="token operator">:</span> pageNum<span class="token punctuation">,</span>
			<span class="token literal-property property">pageSize</span><span class="token operator">:</span> pageSize
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
		<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">var</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">200</span> <span class="token operator">==</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				
				<span class="token keyword">let</span> tempList <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>rows<span class="token punctuation">;</span>
				me<span class="token punctuation">.</span>movieList <span class="token operator">=</span> me<span class="token punctuation">.</span>movieList<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>tempList<span class="token punctuation">)</span><span class="token punctuation">;</span>
				me<span class="token punctuation">.</span>total <span class="token operator">=</span> data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>total<span class="token punctuation">;</span>   <span class="token comment">//获取总记录数</span>
				me<span class="token punctuation">.</span>pageNum <span class="token operator">=</span> pageNum<span class="token punctuation">;</span>     <span class="token comment">//当前页数</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">hideNavigationBarLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token comment">// 搜索页获取电影列表end</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/5e/40/sBEkscJc_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="api_990"></a>页面路由api与传参</h2> 
<p><strong>template:</strong></p> 
<pre><code class="prism language-css">&lt;view class=<span class="token string">"movie-wrapper"</span> v-for=<span class="token string">"movie in movieList"</span>&gt;
	&lt;<span class="token property">image</span> 
		<span class="token punctuation">:</span>src=<span class="token string">"movie.cover"</span> 
		<span class="token punctuation">:</span>data-movieId=<span class="token string">"movie.id"</span>
		@click=<span class="token string">"movieDetail"</span>
		class=<span class="token string">"moive-poster"</span>&gt;
	&lt;/image&gt;
&lt;/view&gt;
</code></pre> 
<p><strong>script:</strong></p> 
<pre><code class="prism language-js"><span class="token comment">// 电影详情页start</span>
<span class="token function">movieDetail</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> movieId <span class="token operator">=</span> e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>movieid<span class="token punctuation">;</span>
	uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">"/pages/movieDetail/movieDetail?id="</span> <span class="token operator">+</span> movieId
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 电影详情页end</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5657e346bd7c4b703f516ad38ffaa5b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">浙大版《C语言程序设计》第四版(何钦铭颜晖) 第5章 函数 课后习题答案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a23cfbf3cb2cd4028f28f1762b47217b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VS2019安装与使用教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>