<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于JAVA中的Class.cast方法 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于JAVA中的Class.cast方法" />
<meta property="og:description" content="今日看到了一片文章就是说的Class.cast()方法，我感觉这篇文章有问题，所以写了一片文章来说明一下cast方法。
我们来看一下JDK中这个方法的源码！
@SuppressWarnings(&#34;unchecked&#34;) public T cast(Object obj) { if (obj != null &amp;&amp; !isInstance(obj)) throw new ClassCastException(cannotCastMsg(obj)); return (T) obj; }
其中return (T) obj;就是强制转换成你所需要的类型，相当于你自己写（假设有A和B两个类，B继承了A类）：
A a = (A) b1; cast方法不过是给你做了一些安全措施而已。下面说明方法中的泛型T，我们参照下面这个列子，将ServletRequest转换成HttpServletRequest：
HttpServletRequest request = HttpServletRequest.class.cast(req);
以下是截图：
这个泛型T就是自动判断你要转换成什么类型，这也是一个安全措施！
网上的这个说法我认为是错误的 （假设有A和B两个类，B继承了A类）： 输出
这个说法是错误的，其实就是把b1类型强制转换成了A类型，此时a指向b1（父类引用指向子类对象），之所以a.getClass()输出的是B类型，这是因为对象在获取Class（a.getClass()）的时候和类.class（A.class）不同(a.getClass()返回引用a运行时真正所指的对象(因为:儿子对象的引用可能会赋给父对象的引用变量中)所属的类的Class的对象)，具体可以参考:http://blog.sina.com.cn/s/blog_7ffb8dd5010127ix.html
如果有错误，请多多指正！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f27e2706a2dde947b47087d8a64c5c13/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-30T15:21:21+08:00" />
<meta property="article:modified_time" content="2018-01-30T15:21:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于JAVA中的Class.cast方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>今日看到了一片文章就是说的Class.cast()方法，我感觉这篇文章有问题，所以写了一片文章来说明一下cast方法。</p> 
<p>我们来看一下JDK中这个方法的源码！</p> 
<p></p> 
<span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">   <strong>@SuppressWarnings("unchecked")</strong></span> 
<strong><br style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"> <span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">    public T cast(Object obj) {<!-- --></span><br style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"> <span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">        if (obj != null &amp;&amp; !isInstance(obj))</span><br style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"> <span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">            throw new ClassCastException(cannotCastMsg(obj));</span><br style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"> <span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">        return (T) obj;</span><br style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"> </strong> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><strong>    }</strong></span></p> 
<p><span style="color:rgb(63,63,63)">其中</span><span style="color:rgb(63,63,63); font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">return (T) obj;就是强制转换成你所需要的类型，相当于你自己写（假设有A和B两个类，B继承了A类）：</span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"></span></p> 
<table border="1" width="200" cellspacing="1" cellpadding="1"><tbody><tr><td>A  a = (A) b1;</td></tr></tbody></table> 
<p>cast方法不过是给你做了一些安全措施而已。下面说明方法中的泛型T，我们参照下面这个列子，将ServletRequest转换成HttpServletRequest：</p> 
<p><strong><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">HttpServletRequest request = HttpServletRequest.class.cast(req);</span><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"></span></strong></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><strong><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">以下是截图：</span><br> </strong></span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><strong><img src="https://images2.imgbox.com/54/8c/XGdKWS5L_o.png" alt="" style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><br> </strong></span></span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><span style="color:rgb(79,79,79); font-family:Arial,Verdana,sans-serif; font-size:14px; text-align:justify; background-color:rgb(255,255,255)"><strong>这个泛型T就是自动判断你要转换成什么类型，这也是一个安全措施！</strong></span></span></span></p> 
<br> 网上的这个说法我认为是错误的 
<span style="font-family:Arial,Verdana,sans-serif; font-size:14px; text-align:justify; background-color:rgb(255,255,255)">（<strong>假设有A和B两个类，B继承了A类</strong>）</span>： 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><img src="https://images2.imgbox.com/82/57/IUDYKHDp_o.png" alt=""><br> </span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><img src="https://images2.imgbox.com/02/4f/VBgGLfQP_o.png" alt="">输出<img src="https://images2.imgbox.com/8a/be/xwj5MDRL_o.png" alt=""><br> </span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)">这个说法是错误的，<strong>其实就是把b1类型强制转换成了A类型，此时a指向b1（父类引用指向子类对象）</strong>，之所以<strong>a.getClass()</strong>输出的是<strong>B类型</strong>，这是因为<strong>对象在获取Class（a.getClass()）</strong>的时候和<strong>类.class（A.class）</strong>不同(<strong><span style="color:rgb(79,79,79); font-family:Arial,Verdana,sans-serif; font-size:14px; text-align:justify; background-color:rgb(255,255,255)">a.getClass()</span><span style="font-family:'宋体'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">返回引用</span><span style="font-family:'Times New Roman'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">a</span><span style="font-family:'宋体'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">运行时真正所指的对象</span><span style="font-family:'Times New Roman'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">(</span><span style="font-family:'宋体'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">因为</span><span style="font-family:'Times New Roman'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">:</span><span style="font-family:'宋体'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">儿子对象的引用可能会赋给父对象的引用变量中</span><span style="font-family:'Times New Roman'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">)</span><span style="font-family:'宋体'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">所属的类的</span><span style="font-family:'Times New Roman'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">Class</span><span style="font-family:'宋体'; line-height:21px; color:rgb(73,73,73); font-size:14px; background-color:rgb(226,226,226)">的对象</span></strong>)，具体可以参考:http://blog.sina.com.cn/s/blog_7ffb8dd5010127ix.html</span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif"><span style="font-size:14px; background-color:rgb(255,255,255)">如果有错误，请多多指正！</span></span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><br> </span></p> 
<p><span style="font-family:Arial,Verdana,sans-serif; font-size:14px; background-color:rgb(255,255,255)"><br> </span></p> 
<p><br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d876767f7a8aafb1d052bd7d574edb0e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">git 使用——git从远程仓库下载项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/caf873d665a3d4bea3bbda47412a43a5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python--操作数据库class</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>