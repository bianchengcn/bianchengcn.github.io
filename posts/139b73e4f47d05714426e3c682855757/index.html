<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>写一个python定时发送消息的脚本——每天跟你女盆友说晚安 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="写一个python定时发送消息的脚本——每天跟你女盆友说晚安" />
<meta property="og:description" content="首先 你要有个女朋友
效果
需要安装几个包
pip install wxpy
pip install wechat_sender
pip install requests
代码如下
from __future__ import unicode_literals from threading import Timer from wxpy import * from wechat_sender import Sender import time,requests bot = Bot(console_qr=2,cache_path=&#39;botoo.pk1&#39;) # 把consol_qr=2去掉，二维码是当做图片弹出来，否则则是以像素的方式打印出来，后面的参数是热登录， def get_news(): # 这里是把今日糍粑每日一句中拿过来的信息发送给你朋友 url = &#34;http://open.iciba.com/dsapi/&#34; r = requests.get(url) contents = r.json()[&#39;content&#39;] translation = r.json()[&#39;translation&#39;] return contents,translation def send_news(): try: ufriend = bot.friends().search(u&#39;Mr-Lee&#39;)[0] # 朋友微信昵称（不是备注，不是微信账号） ufriend.send(get_news()[0]) ufriend.send(get_news()[1][5:]) ufriend.send(u&#39;晚安&#39;) t = Timer(86400,send_news) # 86400是间隔时间（一天） t." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/139b73e4f47d05714426e3c682855757/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-24T17:43:49+08:00" />
<meta property="article:modified_time" content="2018-03-24T17:43:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">写一个python定时发送消息的脚本——每天跟你女盆友说晚安</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>首先 你要有个女朋友</p> 
<p>效果</p> 
<p><img src="https://images2.imgbox.com/24/4f/xGADPsd5_o.png" alt=""><br></p> 
<p>需要安装几个包</p> 
<p>pip install wxpy</p> 
<p>pip install wechat_sender</p> 
<p>pip install requests</p> 
<p>代码如下</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:Menlo;font-size:9pt;"><span style="color:#cc7832;">from </span>__future__ <span style="color:#cc7832;">import </span>unicode_literals
<span style="color:#cc7832;">from </span>threading <span style="color:#cc7832;">import </span>Timer
<span style="color:#cc7832;">from </span>wxpy <span style="color:#cc7832;">import </span>*
<span style="color:#cc7832;">from </span>wechat_sender <span style="color:#cc7832;">import </span>Sender
<span style="color:#cc7832;">import </span>time<span style="color:#cc7832;">,</span>requests

bot = Bot(<span style="color:#aa4926;">console_qr</span>=<span style="color:#6897bb;">2</span><span style="color:#cc7832;">,</span><span style="color:#aa4926;">cache_path</span>=<span style="color:#6a8759;">'botoo.pk1'</span>) <span style="color:#808080;"># 把consol_qr=2去掉，二维码是当做图片弹出来，否则则是以像素的方式打印出来，后面的参数是热登录，
</span><span style="color:#808080;">
</span><span style="color:#cc7832;">def </span><span style="color:#ffc66d;">get_news</span>():
    <span style="color:#808080;"># 这里是把今日糍粑每日一句中拿过来的信息发送给你朋友
</span><span style="color:#808080;">    </span>url = <span style="color:#6a8759;">"http://open.iciba.com/dsapi/"
</span><span style="color:#6a8759;">    </span>r = requests.get(url)
    contents = r.json()[<span style="color:#6a8759;">'content'</span>]
    translation = r.json()[<span style="color:#6a8759;">'translation'</span>]
    <span style="color:#cc7832;">return </span>contents<span style="color:#cc7832;">,</span>translation

<span style="color:#cc7832;">def </span><span style="color:#ffc66d;">send_news</span>():
    <span style="color:#cc7832;">try</span>:
        ufriend = bot.friends().search(<span style="color:#6a8759;">u'Mr-Lee'</span>)[<span style="color:#6897bb;">0</span>] <span style="color:#808080;"># 朋友微信昵称（不是备注，不是微信账号）
</span><span style="color:#808080;">        </span>ufriend.send(get_news()[<span style="color:#6897bb;">0</span>])
        ufriend.send(get_news()[<span style="color:#6897bb;">1</span>][<span style="color:#6897bb;">5</span>:])
        ufriend.send(<span style="color:#6a8759;">u'晚安'</span>)
        t = Timer(<span style="color:#6897bb;">86400</span><span style="color:#cc7832;">,</span>send_news)  <span style="color:#808080;"># 86400是间隔时间（一天）
</span><span style="color:#808080;">        </span>t.start()

    <span style="color:#cc7832;">except</span>:
        ufriend = bot.friends().search(<span style="color:#6a8759;">"L"</span>)[<span style="color:#6897bb;">0</span>]  <span style="color:#808080;"># 你的微信名称，不是微信号
</span><span style="color:#808080;">        </span>ufriend.send(<span style="color:#6a8759;">u'消息发送失败'</span>)

<span style="color:#cc7832;">if </span>__name__ == <span style="color:#6a8759;">'__main__'</span>:
    send_news()</pre> 
<img src="https://images2.imgbox.com/c0/27/PITqcvKc_o.jpg" alt=""> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6150a024fafbbd1dbcbb571d51c718a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mybatis select返回多个list，但为啥只有一条记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/72eb5b411a18d0e0a853cfbadc919287/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">《坦克世界》7周年活动，自动准点秒坦克</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>