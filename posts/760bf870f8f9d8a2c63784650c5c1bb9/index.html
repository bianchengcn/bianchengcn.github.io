<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>coco数据集（yoloV5格式）中生成子类数据集 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="coco数据集（yoloV5格式）中生成子类数据集" />
<meta property="og:description" content="从coco数据集（yoloV5格式）中生成子类数据集。 import os from tqdm import tqdm names = [&#39;person&#39;, &#39;bicycle&#39;, &#39;car&#39;, &#39;motorcycle&#39;, &#39;airplane&#39;, &#39;bus&#39;, &#39;train&#39;, &#39;truck&#39;, &#39;boat&#39;, &#39;traffic light&#39;, &#39;fire hydrant&#39;, &#39;stop sign&#39;, &#39;parking meter&#39;, &#39;bench&#39;, &#39;bird&#39;, &#39;cat&#39;, &#39;dog&#39;, &#39;horse&#39;, &#39;sheep&#39;, &#39;cow&#39;, &#39;elephant&#39;, &#39;bear&#39;, &#39;zebra&#39;, &#39;giraffe&#39;, &#39;backpack&#39;, &#39;umbrella&#39;, &#39;handbag&#39;, &#39;tie&#39;, &#39;suitcase&#39;, &#39;frisbee&#39;, &#39;skis&#39;, &#39;snowboard&#39;, &#39;sports ball&#39;, &#39;kite&#39;, &#39;baseball bat&#39;, &#39;baseball glove&#39;, &#39;skateboard&#39;, &#39;surfboard&#39;, &#39;tennis racket&#39;, &#39;bottle&#39;, &#39;wine glass&#39;, &#39;cup&#39;, &#39;fork&#39;, &#39;knife&#39;, &#39;spoon&#39;, &#39;bowl&#39;, &#39;banana&#39;, &#39;apple&#39;, &#39;sandwich&#39;, &#39;orange&#39;, &#39;broccoli&#39;, &#39;carrot&#39;, &#39;hot dog&#39;, &#39;pizza&#39;, &#39;donut&#39;, &#39;cake&#39;, &#39;chair&#39;, &#39;couch&#39;, &#39;potted plant&#39;, &#39;bed&#39;, &#39;dining table&#39;, &#39;toilet&#39;, &#39;tv&#39;, &#39;laptop&#39;, &#39;mouse&#39;, &#39;remote&#39;, &#39;keyboard&#39;, &#39;cell phone&#39;, &#39;microwave&#39;, &#39;oven&#39;, &#39;toaster&#39;, &#39;sink&#39;, &#39;refrigerator&#39;, &#39;book&#39;, &#39;clock&#39;, &#39;vase&#39;, &#39;scissors&#39;, &#39;teddy bear&#39;, &#39;hair drier&#39;, &#39;toothbrush&#39;] # 类别	图片数量	标注框数量 per_class_size = {&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/760bf870f8f9d8a2c63784650c5c1bb9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-03T12:04:22+08:00" />
<meta property="article:modified_time" content="2022-08-03T12:04:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">coco数据集（yoloV5格式）中生成子类数据集</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="cocoyoloV5_0"></a>从coco数据集（yoloV5格式）中生成子类数据集。</h2> 
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm

names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'person'</span><span class="token punctuation">,</span> <span class="token string">'bicycle'</span><span class="token punctuation">,</span> <span class="token string">'car'</span><span class="token punctuation">,</span> <span class="token string">'motorcycle'</span><span class="token punctuation">,</span> <span class="token string">'airplane'</span><span class="token punctuation">,</span> <span class="token string">'bus'</span><span class="token punctuation">,</span> <span class="token string">'train'</span><span class="token punctuation">,</span> <span class="token string">'truck'</span><span class="token punctuation">,</span> <span class="token string">'boat'</span><span class="token punctuation">,</span> <span class="token string">'traffic light'</span><span class="token punctuation">,</span>
        <span class="token string">'fire hydrant'</span><span class="token punctuation">,</span> <span class="token string">'stop sign'</span><span class="token punctuation">,</span> <span class="token string">'parking meter'</span><span class="token punctuation">,</span> <span class="token string">'bench'</span><span class="token punctuation">,</span> <span class="token string">'bird'</span><span class="token punctuation">,</span> <span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">,</span> <span class="token string">'horse'</span><span class="token punctuation">,</span> <span class="token string">'sheep'</span><span class="token punctuation">,</span> <span class="token string">'cow'</span><span class="token punctuation">,</span>
        <span class="token string">'elephant'</span><span class="token punctuation">,</span> <span class="token string">'bear'</span><span class="token punctuation">,</span> <span class="token string">'zebra'</span><span class="token punctuation">,</span> <span class="token string">'giraffe'</span><span class="token punctuation">,</span> <span class="token string">'backpack'</span><span class="token punctuation">,</span> <span class="token string">'umbrella'</span><span class="token punctuation">,</span> <span class="token string">'handbag'</span><span class="token punctuation">,</span> <span class="token string">'tie'</span><span class="token punctuation">,</span> <span class="token string">'suitcase'</span><span class="token punctuation">,</span> <span class="token string">'frisbee'</span><span class="token punctuation">,</span>
        <span class="token string">'skis'</span><span class="token punctuation">,</span> <span class="token string">'snowboard'</span><span class="token punctuation">,</span> <span class="token string">'sports ball'</span><span class="token punctuation">,</span> <span class="token string">'kite'</span><span class="token punctuation">,</span> <span class="token string">'baseball bat'</span><span class="token punctuation">,</span> <span class="token string">'baseball glove'</span><span class="token punctuation">,</span> <span class="token string">'skateboard'</span><span class="token punctuation">,</span> <span class="token string">'surfboard'</span><span class="token punctuation">,</span>
        <span class="token string">'tennis racket'</span><span class="token punctuation">,</span> <span class="token string">'bottle'</span><span class="token punctuation">,</span> <span class="token string">'wine glass'</span><span class="token punctuation">,</span> <span class="token string">'cup'</span><span class="token punctuation">,</span> <span class="token string">'fork'</span><span class="token punctuation">,</span> <span class="token string">'knife'</span><span class="token punctuation">,</span> <span class="token string">'spoon'</span><span class="token punctuation">,</span> <span class="token string">'bowl'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span>
        <span class="token string">'sandwich'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'broccoli'</span><span class="token punctuation">,</span> <span class="token string">'carrot'</span><span class="token punctuation">,</span> <span class="token string">'hot dog'</span><span class="token punctuation">,</span> <span class="token string">'pizza'</span><span class="token punctuation">,</span> <span class="token string">'donut'</span><span class="token punctuation">,</span> <span class="token string">'cake'</span><span class="token punctuation">,</span> <span class="token string">'chair'</span><span class="token punctuation">,</span> <span class="token string">'couch'</span><span class="token punctuation">,</span>
        <span class="token string">'potted plant'</span><span class="token punctuation">,</span> <span class="token string">'bed'</span><span class="token punctuation">,</span> <span class="token string">'dining table'</span><span class="token punctuation">,</span> <span class="token string">'toilet'</span><span class="token punctuation">,</span> <span class="token string">'tv'</span><span class="token punctuation">,</span> <span class="token string">'laptop'</span><span class="token punctuation">,</span> <span class="token string">'mouse'</span><span class="token punctuation">,</span> <span class="token string">'remote'</span><span class="token punctuation">,</span> <span class="token string">'keyboard'</span><span class="token punctuation">,</span> <span class="token string">'cell phone'</span><span class="token punctuation">,</span>
        <span class="token string">'microwave'</span><span class="token punctuation">,</span> <span class="token string">'oven'</span><span class="token punctuation">,</span> <span class="token string">'toaster'</span><span class="token punctuation">,</span> <span class="token string">'sink'</span><span class="token punctuation">,</span> <span class="token string">'refrigerator'</span><span class="token punctuation">,</span> <span class="token string">'book'</span><span class="token punctuation">,</span> <span class="token string">'clock'</span><span class="token punctuation">,</span> <span class="token string">'vase'</span><span class="token punctuation">,</span> <span class="token string">'scissors'</span><span class="token punctuation">,</span> <span class="token string">'teddy bear'</span><span class="token punctuation">,</span>
        <span class="token string">'hair drier'</span><span class="token punctuation">,</span> <span class="token string">'toothbrush'</span><span class="token punctuation">]</span>

<span class="token comment"># 类别	图片数量	标注框数量</span>
per_class_size <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"person"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">64115</span><span class="token punctuation">,</span> <span class="token number">262465</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bicycle"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3252</span><span class="token punctuation">,</span> <span class="token number">7113</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"car"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">12251</span><span class="token punctuation">,</span> <span class="token number">43867</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"motorcycle"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3502</span><span class="token punctuation">,</span> <span class="token number">8725</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"airplane"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2986</span><span class="token punctuation">,</span> <span class="token number">5135</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bus"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3952</span><span class="token punctuation">,</span> <span class="token number">6069</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"train"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3588</span><span class="token punctuation">,</span> <span class="token number">4571</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"truck"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">6127</span><span class="token punctuation">,</span> <span class="token number">9973</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"boat"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3025</span><span class="token punctuation">,</span> <span class="token number">10759</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"traffic light"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4139</span><span class="token punctuation">,</span> <span class="token number">12884</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"fire hydrant"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1711</span><span class="token punctuation">,</span> <span class="token number">1865</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"stop sign"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1734</span><span class="token punctuation">,</span> <span class="token number">1983</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"parking meter"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">705</span><span class="token punctuation">,</span> <span class="token number">1285</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bench"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">5570</span><span class="token punctuation">,</span> <span class="token number">9838</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bird"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3237</span><span class="token punctuation">,</span> <span class="token number">10806</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"cat"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4114</span><span class="token punctuation">,</span> <span class="token number">4768</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"dog"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4385</span><span class="token punctuation">,</span> <span class="token number">5508</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"horse"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2941</span><span class="token punctuation">,</span> <span class="token number">6587</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"sheep"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1529</span><span class="token punctuation">,</span> <span class="token number">9509</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"cow"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1968</span><span class="token punctuation">,</span> <span class="token number">8147</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"elephant"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2143</span><span class="token punctuation">,</span> <span class="token number">5513</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bear"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">960</span><span class="token punctuation">,</span> <span class="token number">1294</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"zebra"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1916</span><span class="token punctuation">,</span> <span class="token number">5303</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"giraffe"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2546</span><span class="token punctuation">,</span> <span class="token number">5131</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"backpack"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">5528</span><span class="token punctuation">,</span> <span class="token number">8720</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"umbrella"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3968</span><span class="token punctuation">,</span> <span class="token number">11431</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"handbag"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">6841</span><span class="token punctuation">,</span> <span class="token number">12354</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"tie"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3810</span><span class="token punctuation">,</span> <span class="token number">6496</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"suitcase"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2402</span><span class="token punctuation">,</span> <span class="token number">6192</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"frisbee"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2184</span><span class="token punctuation">,</span> <span class="token number">2682</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"skis"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3082</span><span class="token punctuation">,</span> <span class="token number">6646</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"snowboard"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1654</span><span class="token punctuation">,</span> <span class="token number">2685</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"sports ball"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4262</span><span class="token punctuation">,</span> <span class="token number">6347</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"kite"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2261</span><span class="token punctuation">,</span> <span class="token number">9076</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"baseball bat"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2506</span><span class="token punctuation">,</span> <span class="token number">3276</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"baseball glove"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2629</span><span class="token punctuation">,</span> <span class="token number">3747</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"skateboard"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3476</span><span class="token punctuation">,</span> <span class="token number">5543</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"surfboard"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3486</span><span class="token punctuation">,</span> <span class="token number">6126</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"tennis racket"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3394</span><span class="token punctuation">,</span> <span class="token number">4812</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bottle"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">8501</span><span class="token punctuation">,</span> <span class="token number">24342</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"wine glass"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2533</span><span class="token punctuation">,</span> <span class="token number">7913</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"cup"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">9189</span><span class="token punctuation">,</span> <span class="token number">20650</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"fork"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3555</span><span class="token punctuation">,</span> <span class="token number">5479</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"knife"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4326</span><span class="token punctuation">,</span> <span class="token number">7770</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"spoon"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3529</span><span class="token punctuation">,</span> <span class="token number">6165</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bowl"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">7111</span><span class="token punctuation">,</span> <span class="token number">14358</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"banana"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2243</span><span class="token punctuation">,</span> <span class="token number">9458</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"apple"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1586</span><span class="token punctuation">,</span> <span class="token number">5851</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"sandwich"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2365</span><span class="token punctuation">,</span> <span class="token number">4373</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"orange"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1699</span><span class="token punctuation">,</span> <span class="token number">6399</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"broccoli"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1939</span><span class="token punctuation">,</span> <span class="token number">7308</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"carrot"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">51719</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"hot dog"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">8426</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"pizza"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3166</span><span class="token punctuation">,</span> <span class="token number">5821</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"donut"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1523</span><span class="token punctuation">,</span> <span class="token number">7179</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"cake"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2925</span><span class="token punctuation">,</span> <span class="token number">6353</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"chair"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">12774</span><span class="token punctuation">,</span> <span class="token number">38491</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"couch"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4423</span><span class="token punctuation">,</span> <span class="token number">5779</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"potted plant"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4452</span><span class="token punctuation">,</span> <span class="token number">8652</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"bed"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3682</span><span class="token punctuation">,</span> <span class="token number">4192</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"dining table"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">11837</span><span class="token punctuation">,</span> <span class="token number">15714</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"toilet"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3353</span><span class="token punctuation">,</span> <span class="token number">4157</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"tv"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4561</span><span class="token punctuation">,</span> <span class="token number">5805</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"laptop"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3524</span><span class="token punctuation">,</span> <span class="token number">4970</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"mouse"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1876</span><span class="token punctuation">,</span> <span class="token number">2262</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"remote"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3076</span><span class="token punctuation">,</span> <span class="token number">5703</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"keyboard"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2115</span><span class="token punctuation">,</span> <span class="token number">2855</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"cell phone"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4803</span><span class="token punctuation">,</span> <span class="token number">6434</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"microwave"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1547</span><span class="token punctuation">,</span> <span class="token number">1673</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"oven"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2877</span><span class="token punctuation">,</span> <span class="token number">3334</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"toaster"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">217</span><span class="token punctuation">,</span> <span class="token number">225</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"sink"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4678</span><span class="token punctuation">,</span> <span class="token number">5610</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"refrigerator"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">2360</span><span class="token punctuation">,</span> <span class="token number">2637</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"book"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">5332</span><span class="token punctuation">,</span> <span class="token number">24715</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"clock"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">4659</span><span class="token punctuation">,</span> <span class="token number">6334</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"vase"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">3593</span><span class="token punctuation">,</span> <span class="token number">6613</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"scissors"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">947</span><span class="token punctuation">,</span> <span class="token number">1481</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"teddy bear"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">6087</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"hair drier"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">189</span><span class="token punctuation">,</span> <span class="token number">198</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"toothbrush"</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token number">1007</span><span class="token punctuation">,</span> <span class="token number">1954</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span>

SKIP_NONE_IMG <span class="token operator">=</span> <span class="token boolean">True</span>

per_class_size <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>per_class_size<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span>d<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
sub_names <span class="token operator">=</span> <span class="token punctuation">[</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> key <span class="token keyword">in</span> per_class_size<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
sub_names_index_dict <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>key<span class="token punctuation">:</span> i <span class="token keyword">for</span> i<span class="token punctuation">,</span> key <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>sub_names<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>sub_names_index_dict<span class="token punctuation">)</span>

coco2017_root_dir <span class="token operator">=</span> <span class="token string">"/home/dzhang/data/mscoco/"</span>
coco2017_coco_train_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>coco2017_root_dir<span class="token punctuation">,</span> <span class="token string">"train2017"</span><span class="token punctuation">)</span>
coco2017_coco_val_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>coco2017_root_dir<span class="token punctuation">,</span> <span class="token string">"val2017"</span><span class="token punctuation">)</span>
coco2017_train_img_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>coco2017_coco_train_dir<span class="token punctuation">,</span> <span class="token string">"images"</span><span class="token punctuation">)</span>
coco2017_val_img_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>coco2017_coco_val_dir<span class="token punctuation">,</span> <span class="token string">"images"</span><span class="token punctuation">)</span>
sub_coco_root_dir <span class="token operator">=</span> coco2017_root_dir<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"mscoco"</span><span class="token punctuation">,</span> <span class="token string">"mscoco_%dobj"</span> <span class="token operator">%</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>sub_names<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sub_coco_train_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>sub_coco_root_dir<span class="token punctuation">,</span> <span class="token string">"train2017"</span><span class="token punctuation">)</span>
sub_coco_val_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>sub_coco_root_dir<span class="token punctuation">,</span> <span class="token string">"val2017"</span><span class="token punctuation">)</span>
sub_coco_train_img_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>sub_coco_train_dir<span class="token punctuation">,</span> <span class="token string">"images"</span><span class="token punctuation">)</span>
sub_coco_val_img_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>sub_coco_val_dir<span class="token punctuation">,</span> <span class="token string">"images"</span><span class="token punctuation">)</span>
sub_coco_train_label_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>sub_coco_train_dir<span class="token punctuation">,</span> <span class="token string">"labels"</span><span class="token punctuation">)</span>
sub_coco_val_label_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>sub_coco_val_dir<span class="token punctuation">,</span> <span class="token string">"labels"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>sub_coco_root_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"mkdir -p %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>sub_coco_train_label_dir<span class="token punctuation">)</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"mkdir -p %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>sub_coco_val_label_dir<span class="token punctuation">)</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"ln -s %s %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>coco2017_train_img_dir<span class="token punctuation">,</span> sub_coco_train_img_dir<span class="token punctuation">)</span><span class="token punctuation">)</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"ln -s %s %s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>coco2017_val_img_dir<span class="token punctuation">,</span> sub_coco_val_img_dir<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">create_sub</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> root_dir<span class="token punctuation">,</span> root_img_dir<span class="token punctuation">,</span> root_label_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    lines <span class="token operator">=</span> <span class="token boolean">None</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>coco2017_root_dir<span class="token punctuation">,</span> file_path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    lines <span class="token operator">=</span> <span class="token punctuation">[</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">]</span>

    sub_lines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span>lines<span class="token punctuation">)</span><span class="token punctuation">:</span>
        img_path <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
        label_file_path <span class="token operator">=</span> line<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"images"</span><span class="token punctuation">,</span> <span class="token string">"labels/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">".jpg"</span><span class="token punctuation">,</span> <span class="token string">".txt"</span><span class="token punctuation">)</span>
        label_lines <span class="token operator">=</span> <span class="token boolean">None</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>label_file_path<span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            label_lines <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
        label_lines <span class="token operator">=</span> <span class="token punctuation">[</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> label_lines<span class="token punctuation">]</span>
        sub_label_lines<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> label_str <span class="token keyword">in</span> label_lines<span class="token punctuation">:</span>
            label <span class="token operator">=</span> label_str<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span>
            c <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>label<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> names<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token keyword">not</span> <span class="token keyword">in</span> sub_names<span class="token punctuation">:</span>
                <span class="token keyword">continue</span>
            label<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"%d"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>sub_names_index_dict<span class="token punctuation">[</span>names<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            label <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>label<span class="token punctuation">)</span>
            sub_label_lines<span class="token punctuation">.</span>append<span class="token punctuation">(</span>label<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>sub_label_lines<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> SKIP_NONE_IMG<span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
        img_abs_path <span class="token operator">=</span> <span class="token string">"%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_img_dir<span class="token punctuation">,</span> img_path<span class="token punctuation">)</span><span class="token punctuation">)</span>
        label_abs_path <span class="token operator">=</span> <span class="token string">"%s"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_label_dir<span class="token punctuation">,</span> img_path<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">".jpg"</span><span class="token punctuation">,</span> <span class="token string">".txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        sub_lines<span class="token punctuation">.</span>append<span class="token punctuation">(</span>img_abs_path<span class="token punctuation">)</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>label_abs_path<span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            <span class="token keyword">for</span> line <span class="token keyword">in</span> sub_label_lines<span class="token punctuation">:</span>
                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"%s\n"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_dir<span class="token punctuation">,</span> file_path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> sub_lines<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"%s\n"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span>
create_sub<span class="token punctuation">(</span><span class="token string">"train2017.txt"</span><span class="token punctuation">,</span> sub_coco_root_dir<span class="token punctuation">,</span> sub_coco_train_img_dir<span class="token punctuation">,</span> sub_coco_train_label_dir<span class="token punctuation">)</span>
create_sub<span class="token punctuation">(</span><span class="token string">"val2017.txt"</span><span class="token punctuation">,</span> sub_coco_root_dir<span class="token punctuation">,</span> sub_coco_val_img_dir<span class="token punctuation">,</span> sub_coco_val_label_dir<span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bd0bba675f200d1753f6988a1f6ace39/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">win11壁纸被锁定更换不了 win11更换壁纸教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e88744d200a6740dc0251663fea8e0d2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySQL标准差和方差函数使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>