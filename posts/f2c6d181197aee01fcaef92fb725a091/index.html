<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Jcef应用浅析 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Jcef应用浅析" />
<meta property="og:description" content="CEF应用浅析
一、CEF简介
a) CEF是一款基于Chromium浏览器的嵌入式框架，提供了基本的浏览器功能。包括自定义插件、各种协议、Javascript对象访问和扩展。一些可选的功能包括，资源加载、导航、上下文目录、打印等；值得一提的是，它对HTML5的支持和性能与Google Chrome浏览器同样优秀。
b) CEF包括CEF1、CEF2和CEF3三个大版本。其中，CEF1仅支持单线程，CEF2已经被废弃，所以现在基本是使用CEF3进行开发。
c) 如果希望了解更多相关内容，可以访问它的网站
https://bitbucket.org/chromiumembedded/cef/wiki/Home
d) 由于CEF是基于Chromium内核的，所以CEF支持的操作系统也会有限制。参考下表
Branch Date
Release Branch
Chromium Version
CEF1
CEF3
Windows Build Requirements
Mac OS X Build Requirements
Linux Build Requirements
Dec 2011
963
17
Yes
No
WinXP&#43;, VS2008, Win7 SDK
OS X 10.6-10.7, 10.5&#43; SDK, Xcode 3.2.6
Ubuntu 10.04&#43;, Debian Squeeze&#43;
Feb 2012
1025
18
Yes
No
WinXP&#43;, VS2008, Win7 SDK
OS X 10.6-10.7, 10.5&#43; SDK, Xcode 3.2.6-4.x" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/f2c6d181197aee01fcaef92fb725a091/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-06-24T17:35:26+08:00" />
<meta property="article:modified_time" content="2015-06-24T17:35:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Jcef应用浅析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>CEF<span style="font-family:宋体">应用浅析</span></p> 
<p>一、CEF<span style="font-family:宋体">简介</span></p> 
<p>a) CEF<span style="font-family:宋体">是一款基于</span><span style="font-family:Times New Roman">Chromium</span><span style="font-family:宋体">浏览器的嵌入式框架，提供了基本的浏览器功能。包括自定义插件、各种协议、</span><span style="font-family:Times New Roman">Javascript</span><span style="font-family:宋体">对象访问和扩展。一些可选的功能包括，资源加载、导航、上下文目录、打印等；值得一提的是，它对</span><span style="font-family:Times New Roman">HTML5</span><span style="font-family:宋体">的支持和性能与</span><span style="font-family:Times New Roman">Google Chrome</span><span style="font-family:宋体">浏览器同样优秀。</span></p> 
<p>b) CEF<span style="font-family:宋体">包括</span><span style="font-family:Times New Roman">CEF1</span><span style="font-family:宋体">、</span><span style="font-family:Times New Roman">CEF2</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">CEF3</span><span style="font-family:宋体">三个大版本。其中，</span><span style="font-family:Times New Roman">CEF1</span><span style="font-family:宋体">仅支持单线程，</span><span style="font-family:Times New Roman">CEF2</span><span style="font-family:宋体">已经被废弃，所以现在基本是使用</span><span style="font-family:Times New Roman">CEF3</span><span style="font-family:宋体">进行开发。</span></p> 
<p>c) 如果希望了解更多相关内容，可以访问它的网站</p> 
<p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/wiki/Home" rel="nofollow noopener noreferrer"><span style="color:#00ff">https://bitbucket.org/chromiumembedded/cef/wiki/Home</span></a></p> 
<p>d) 由于<span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">是基于</span><span style="font-family:Times New Roman">Chromium</span><span style="font-family:宋体">内核的，所以</span><span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">支持的操作系统也会有限制。参考下表</span></p> 
<table><tbody><tr><td> <p>Branch Date</p> </td><td> <p>Release Branch</p> </td><td> <p>Chromium Version</p> </td><td> <p>CEF1</p> </td><td> <p>CEF3</p> </td><td> <p>Windows Build Requirements</p> </td><td> <p>Mac OS X Build Requirements</p> </td><td> <p>Linux Build Requirements</p> </td></tr><tr><td> <p>Dec 2011</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/963?at=963" rel="nofollow noopener noreferrer">963</a></p> </td><td> <p>17</p> </td><td> <p>Yes</p> </td><td> <p>No</p> </td><td> <p>WinXP+, VS2008, Win7 SDK</p> </td><td> <p>OS X 10.6-10.7, 10.5+ SDK, Xcode 3.2.6</p> </td><td> <p>Ubuntu 10.04+, Debian Squeeze+</p> </td></tr><tr><td> <p>Feb 2012</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1025?at=1025" rel="nofollow noopener noreferrer">1025</a></p> </td><td> <p>18</p> </td><td> <p>Yes</p> </td><td> <p>No</p> </td><td> <p>WinXP+, VS2008, Win7 SDK</p> </td><td> <p>OS X 10.6-10.7, 10.5+ SDK, Xcode 3.2.6-4.x</p> </td><td> <p>Ubuntu 10.04+, Debian Squeeze+</p> </td></tr><tr><td> <p>Apr 2012</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1084?at=1084" rel="nofollow noopener noreferrer">1084</a></p> </td><td> <p>19</p> </td><td> <p>Yes</p> </td><td> <p>No</p> </td><td> <p>WinXP+, VS2008, Win7 SDK</p> </td><td> <p>OS X 10.6-10.7, 10.5+ SDK, Xcode 3.2.6-4.x</p> </td><td> <p>Ubuntu 10.04+, Debian Squeeze+</p> </td></tr><tr><td> <p>Aug 2012</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1180?at=1180" rel="nofollow noopener noreferrer">1180</a></p> </td><td> <p>21</p> </td><td> <p>Yes</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010, Win7 SDK</p> </td><td> <p>OS X 10.6-10.7, 10.5+ SDK, Xcode 3.2.6-4.x</p> </td><td> <p>Ubuntu 12.04+, Debian Squeeze+</p> </td></tr><tr><td> <p>Oct 2012</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1271?at=1271" rel="nofollow noopener noreferrer">1271</a></p> </td><td> <p>23</p> </td><td> <p>Yes</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010, Win7 SDK</p> </td><td> <p>OS X 10.6-10.8, 10.6+ SDK, Xcode 3.2.6-4.x</p> </td><td> <p>Ubuntu 12.04+, Debian Squeeze+</p> </td></tr><tr><td> <p>Jan 2013</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1364?at=1364" rel="nofollow noopener noreferrer">1364</a></p> </td><td> <p>25</p> </td><td> <p>Yes</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010, Win8 SDK, Ninja (optional)</p> </td><td> <p>OS X 10.6-10.8, Xcode 3.2.6-4.x, Ninja (optional)</p> </td><td> <p>Ubuntu 12.04+, Debian Squeeze+, Ninja (optional)</p> </td></tr><tr><td> <p>Apr 2013</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1453?at=1453" rel="nofollow noopener noreferrer">1453</a></p> </td><td> <p>27</p> </td><td> <p>Yes</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010, Win8 SDK, Ninja (optional)</p> </td><td> <p>OS X 10.6-10.8, 10.6+ SDK, Xcode 3.2.6-4.x, Ninja (optional)</p> </td><td> <p>Ubuntu 12.04+, Debian Squeeze+, Ninja (optional)</p> </td></tr><tr><td> <p>Jul 2013</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1547?at=1547" rel="nofollow noopener noreferrer">1547</a></p> </td><td> <p>29</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010-2012, Win8 SDK, Ninja (optional)</p> </td><td> <p>OS X 10.6-10.8, 10.6+ SDK, Xcode 3.2.6-4.x, Ninja (optional)</p> </td><td> <p>Ubuntu 12.04+, Debian Squeeze+, Ninja</p> </td></tr><tr><td> <p>Oct 2013</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1650?at=1650" rel="nofollow noopener noreferrer">1650</a></p> </td><td> <p>31</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010-2012, Win8 SDK, Ninja (optional)</p> </td><td> <p>OS X 10.6-10.9, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr><tr><td> <p>Jan 2014</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1750?at=1750" rel="nofollow noopener noreferrer">1750</a></p> </td><td> <p>33</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2010-2013, Win8 SDK, Ninja</p> </td><td> <p>OS X 10.6-10.9, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr><tr><td> <p>Apr 2014</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/1916?at=1916" rel="nofollow noopener noreferrer">1916</a></p> </td><td> <p>35</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2013, Win8 SDK, Ninja</p> </td><td> <p>OS X 10.6-10.9, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr><tr><td> <p>Aug 2014</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/2062?at=2062" rel="nofollow noopener noreferrer">2062</a></p> </td><td> <p>37</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2013, Win8 SDK, Ninja</p> </td><td> <p>OS X 10.6-10.9, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr><tr><td> <p>Oct 2014</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/2171?at=2171" rel="nofollow noopener noreferrer">2171</a></p> </td><td> <p>39</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2013u4, Win8.1 SDK, Ninja</p> </td><td> <p>OS X 10.6-10.9, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr><tr><td> <p>Jan 2015</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/2272?at=2272" rel="nofollow noopener noreferrer">2272</a></p> </td><td> <p>41</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2013u4, Win8.1 SDK, Ninja</p> </td><td> <p>OS X 10.6-10.10, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja, 64-bit only</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr><tr><td> <p>Apr 2015</p> </td><td> <p><a target="_blank" href="https://bitbucket.org/chromiumembedded/cef/src/2357?at=2357" rel="nofollow noopener noreferrer">2357</a></p> </td><td> <p>43</p> </td><td> <p>No</p> </td><td> <p>Yes</p> </td><td> <p>WinXP+, VS2013u4, Win8.1 SDK, Ninja</p> </td><td> <p>OS X 10.6-10.10, 10.6+ SDK, Xcode 3.2.6-5.x, Ninja, 64-bit only</p> </td><td> <p>Ubuntu 12.04+, Debian Wheezy+, Ninja</p> </td></tr></tbody></table> 
<p> </p> 
<p>e) 如果需要下载<span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">可以到如下链接中下载</span></p> 
<p>CEF<span style="font-family:宋体">相关下载</span></p> 
<p><a target="_blank" href="http://www.magpcss.net/cef_downloads/index.php" rel="nofollow noopener noreferrer"><span style="color:#00ff">http://www.magpcss.net/cef_downloads/index.php</span></a></p> 
<p>CEF3<span style="font-family:宋体">相关下载</span></p> 
<p><a target="_blank" href="https://cefbuilds.com/#branch_trunk" rel="nofollow noopener noreferrer"><span style="color:#00ff">https://cefbuilds.com/#branch_trunk</span></a></p> 
<p>f) 尝试使用的话，可以在下载包中，找到<span style="font-family:Times New Roman">cefsimple.exe</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">cefclient.exe</span><span style="font-family:宋体">，通过使用可以了解更多的相关特性。</span></p> 
<p>二、JCEF<span style="font-family:宋体">简介</span></p> 
<p>a) JCEF<span style="font-family:宋体">项目对</span><span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">进行了一层</span><span style="font-family:Times New Roman">Java</span><span style="font-family:宋体">封装。使用</span><span style="font-family:Times New Roman">JNI</span><span style="font-family:宋体">调用</span><span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">的功能。</span></p> 
<p>三、CEF<span style="font-family:宋体">编译</span></p> 
<p>a) 由于目前需要<span style="font-family:Times New Roman">Windows</span><span style="font-family:宋体">下的</span><span style="font-family:Times New Roman">cef</span><span style="font-family:宋体">，我这里只说一下</span><span style="font-family:Times New Roman">Windows</span><span style="font-family:宋体">下的编译方式。</span></p> 
<p>b) 首先，你的机器必须安装了<span style="font-family:Times New Roman">Visual Studio 2013 Update4</span></p> 
<p>c) 然后，需要安装<span style="font-family:Times New Roman">depot_tools</span></p> 
<p>d) 还需要安装<span style="font-family:Times New Roman">Windows 8.1 SDK</span></p> 
<p>e) 安装<span style="font-family:Times New Roman">GYP</span><span style="font-family:宋体">也是必须的</span></p> 
<p>f) 由于我这里只是使用了<span style="font-family:Times New Roman">Visual Studio</span><span style="font-family:宋体">进行编译，其他帮助可以参考</span></p> 
<p><a target="_blank" href="http://dev.chromium.org/developers/how-tos" rel="nofollow noopener noreferrer"><span style="color:#00ff">http://dev.chromium.org/developers/how-tos</span></a></p> 
<p>g) 设置环境变量，<span style="font-family:Times New Roman">set GYP_GENERATORS=msvs</span></p> 
<p>h) 进入加压后的文件</p> 
<p>i) 主要是使用<span style="font-family:Times New Roman">GYP</span><span style="font-family:宋体">生成</span><span style="font-family:Times New Roman">Visual Studio</span><span style="font-family:宋体">需要的项目配置文件</span><span style="font-family:Times New Roman">.sln</span></p> 
<p>gclient runhooks</p> 
<p>j) 然后使用<span style="font-family:Times New Roman">Visual Studio</span><span style="font-family:宋体">打开，生成</span><span style="font-family:Times New Roman">cefclient</span><span style="font-family:宋体">或</span><span style="font-family:Times New Roman">cefsimple</span><span style="font-family:宋体">就可以了</span></p> 
<p>k) 具体的过程参考</p> 
<p>https://bitbucket.org/chromiumembedded/cef/wiki/BranchesAndBuilding.md</p> 
<p>l) CEF<span style="font-family:宋体">的使用方法参考</span></p> 
<p>https://bitbucket.org/chromiumembedded/cef/wiki/GeneralUsage.md</p> 
<p>四、JCEF<span style="font-family:宋体">编译</span></p> 
<p>a) 编译<span style="font-family:Times New Roman">JCEF</span><span style="font-family:宋体">可以在</span><span style="font-family:Times New Roman">Windows, Linux</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">Mac OS X for 64-bit Oracle 7 Java</span><span style="font-family:宋体">目标上，</span><span style="font-family:Times New Roman">32</span><span style="font-family:宋体">位没有测试，这里我测试了</span><span style="font-family:Times New Roman">Windows 7</span><span style="font-family:宋体">，可以编译通过，使用的是</span><span style="font-family:Times New Roman">"1.7.0_25"</span></p> 
<p>b) GYP<span style="font-family:宋体">、</span><span style="font-family:Times New Roman">Visual Studio 2013</span><span style="font-family:宋体">、</span><span style="font-family:Times New Roman">depot_tools</span><span style="font-family:宋体">是必须的，</span><span style="font-family:Times New Roman">GYP</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">depot_tools</span><span style="font-family:宋体">的路径配置到</span><span style="font-family:Times New Roman">PATH</span><span style="font-family:宋体">中</span></p> 
<p>c) 配置<span style="font-family:Times New Roman">gclient</span></p> 
<p>gclient config --unmanaged --name=src </p> 
<p><a target="_blank" href="https://bitbucket.org/chromiumembedded/java-cef.git" rel="nofollow noopener noreferrer"><span style="color:#00ff">https://bitbucket.org/chromiumembedded/java-cef.git</span></a> </p> 
<p>d) 下载<span style="font-family:Times New Roman">JCEF</span><span style="font-family:宋体">和第三方依赖</span></p> 
<p>gclient sync --jobs 8 --force --nohooks</p> 
<p>e) 在<span style="font-family:Times New Roman">src/third_party/cef/README.jcef</span><span style="font-family:宋体">中，看当前的</span><span style="font-family:Times New Roman">JCEF</span><span style="font-family:宋体">支持什么</span><span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">版本，不要看错，</span><span style="font-family:Times New Roman">http://magpcss.org/ceforum/</span><span style="font-family:宋体">里的帖子好多都是因为这个造成的</span></p> 
<p>f) 然后去<span style="font-family:Times New Roman">http://cefbuilds.com</span><span style="font-family:宋体">里下载，这里我使用的</span><span style="font-family:Times New Roman">win32</span><span style="font-family:宋体">，下载的是</span><span style="font-family:Times New Roman">win32</span><span style="font-family:宋体">的一个版本，放到</span><span style="font-family:Times New Roman">src/third_party/cef/win32</span><span style="font-family:宋体">下</span></p> 
<p>g) 在<span style="font-family:Times New Roman">src</span><span style="font-family:宋体">下使用</span><span style="font-family:Times New Roman">gclient runhooks</span><span style="font-family:宋体">生成</span><span style="font-family:Times New Roman">.sln</span><span style="font-family:宋体">文件，用</span><span style="font-family:Times New Roman">Visual Studio</span><span style="font-family:宋体">编译生成目标文件，目标可以是</span><span style="font-family:Times New Roman">Debug</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">Release</span><span style="font-family:宋体">的，生成的目录也不相同</span></p> 
<p>h) 接着在当前<span style="font-family:Times New Roman">shell</span><span style="font-family:宋体">中定义变量</span></p> 
<p>set GYP_GENERATORS=msvs</p> 
<p>set GYP_DEFINES=jcef_platform=win32 jdk_directory="C:\JDK7_25"</p> 
<p>i) 在<span style="font-family:Times New Roman">src/tools</span><span style="font-family:宋体">中，</span><span style="font-family:Times New Roman">compile.bat win32</span><span style="font-family:宋体">编译，会在</span><span style="font-family:Times New Roman">src/out/win32</span><span style="font-family:宋体">下生成</span></p> 
<p>j) 使用<span style="font-family:Times New Roman">src/tools/run.bat win32 Debug detailed</span><span style="font-family:宋体">运行</span></p> 
<p>k) 如果路径不对，看下脚本吧</p> 
<p>l) 最后，使用<span style="font-family:Times New Roman">src/tools/make_distrib.bat win32</span><span style="font-family:宋体">打包，在</span><span style="font-family:Times New Roman">src/binary_distrib/win32</span><span style="font-family:宋体">下可以找到</span></p> 
<p>五、JCEF<span style="font-family:宋体">使用</span></p> 
<p>a) 基于<span style="font-family:Times New Roman">JCEF</span><span style="font-family:宋体">开发，需要使用到</span><span style="font-family:Times New Roman">CEF</span><span style="font-family:宋体">生成的</span><span style="font-family:Times New Roman">libcef.dll</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">jcef.dll</span><span style="font-family:宋体">等文件，还需要</span><span style="font-family:Times New Roman">jcef.jar</span><span style="font-family:宋体">包</span></p> 
<p>b) 可以参考<span style="font-family:Times New Roman">tests.detailed.MainFrame</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">tests.simple.MainFrame</span></p> 
<p>c) 由于我这里的主要需求是使用浏览器加载<span style="font-family:Times New Roman">html</span><span style="font-family:宋体">字符串，字符串中包括</span><span style="font-family:Times New Roman">js</span><span style="font-family:宋体">、</span><span style="font-family:Times New Roman">css</span><span style="font-family:宋体">和图片等内容，直接使用</span><span style="font-family:Times New Roman">loadUrl</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">loadString</span><span style="font-family:宋体">都不能达到要求</span></p> 
<p>d) loadUrl<span style="font-family:宋体">只能加载</span><span style="font-family:Times New Roman">url</span><span style="font-family:宋体">页面，</span><span style="font-family:Times New Roman">loadString</span><span style="font-family:宋体">不能解析</span><span style="font-family:Times New Roman">html</span><span style="font-family:宋体">字符串中的文件元素</span></p> 
<p>e) 这里参考了<span style="font-family:Times New Roman">tests.detailed.MainFrame</span><span style="font-family:宋体">的</span><span style="font-family:Times New Roman">ClientSchemeHandler</span><span style="font-family:宋体">类</span></p> 
<p>f) 具体步骤如下</p> 
<p>i. CefApp.addAppHandler()<span style="font-family:宋体">添加一个</span><span style="font-family:Times New Roman">CefAppHandlerAdapter</span><span style="font-family:宋体">的子类</span></p> 
<p>ii. 在<span style="font-family:Times New Roman">CefAppHandlerAdapter</span><span style="font-family:宋体">的子类的</span><span style="font-family:Times New Roman">onRegisterCustomSchemes</span><span style="font-family:宋体">方法中，使用</span><span style="font-family:Times New Roman">registrar.addCustomScheme</span><span style="font-family:宋体">添加一个自定义的</span><span style="font-family:Times New Roman">scheme</span><span style="font-family:宋体">名</span></p> 
<p>iii. 在<span style="font-family:Times New Roman">CefAppHandlerAdapter</span><span style="font-family:宋体">的子类的</span><span style="font-family:Times New Roman">onContextInitialized</span><span style="font-family:宋体">方法中，使用</span><span style="font-family:Times New Roman">cefApp.registerSchemeHandlerFactory</span><span style="font-family:宋体">，把自定义的</span><span style="font-family:Times New Roman">sheme</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">domain</span><span style="font-family:宋体">名称与自定义的</span><span style="font-family:Times New Roman">CefSchemeHandlerFactory</span><span style="font-family:宋体">映射</span></p> 
<p>iv. 每次<span style="font-family:Times New Roman">CefSchemeHandlerFactory.create</span><span style="font-family:宋体">时，返回一个自定义的</span><span style="font-family:Times New Roman">CefResourceHandlerAdapter</span></p> 
<p>v. 可以通过改变<span style="font-family:Times New Roman">processRequest</span><span style="font-family:宋体">中的</span><span style="font-family:Times New Roman">html</span><span style="font-family:宋体">信息来加载</span><span style="font-family:Times New Roman">html</span><span style="font-family:宋体">字符串</span></p> 
<p>vi. Html<span style="font-family:宋体">中包含的文件元素，可以手动加载如</span><span style="font-family:Times New Roman">html</span><span style="font-family:宋体">中，因为</span><span style="font-family:Times New Roman">html</span><span style="font-family:宋体">解析是先解析</span><span style="font-family:Times New Roman">html</span><span style="font-family:宋体">字符串，然后对于其中的文件信息在进行请求</span></p> 
<p>g) 但<span style="font-family:Times New Roman">JCEF</span><span style="font-family:宋体">对于</span><span style="font-family:Times New Roman">SWT</span><span style="font-family:宋体">的支持不太好，可以参考</span><span style="font-family:Times New Roman">Javacef</span><span style="font-family:宋体">，这个是一个国人写的，不过，我测试了一下，在我机器上，有些不太稳定，没有深究，可以学习和借鉴，</span></p> 
<p>https://code.google.com/p/javacef/</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1eb7032b2413924d3baf113402463ef1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Log4j详细使用教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7874dc1c0342f18a90c47d7560d6635f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">K-mediods算法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>