<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>react&#43;ts搭建 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="react&#43;ts搭建" />
<meta property="og:description" content="一、通过create-react-app脚手架创建项目
npx create-react-app testproject --template typescript
在vscode中打开项目，可以看到顺利生成了react项目且组件的后缀为tsx,此时说明成功创建了react&#43;typescript项目的雏形
在项目根目录下，运行npm run start，成功启动项目
npm run start
二、配置路由
npm i react-router-dom@5.2.0 react-router-config @types/react-router-config @types/react-router-dom -S
src目录下创建views文件夹，views内创建Home，Contact，About，Navbar四个tsx文件，其中Navbar用来控制路由，其他三个页面用来展示
Home:
import React, { Component } from &#34;react&#34;;
export default class Home extends Component {
render() {
return (
&lt;div className=&#34;home&#34;&gt;
&lt;div className=&#34;container&#34;&gt;
&lt;h3 className=&#34;center&#34;&gt; Home页面&lt;/h3&gt;
&lt;p&gt;欢迎来到首页&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
);
}
}
Contact:
import React, { Component } from &#34;react&#34;;
export default class Contact extends Component {" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/cb049262254255da1505a351bb905d19/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-19T10:43:54+08:00" />
<meta property="article:modified_time" content="2022-04-19T10:43:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">react&#43;ts搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一、通过create-react-app脚手架创建项目<br> npx create-react-app testproject --template typescript<br>  在vscode中打开项目，可以看到顺利生成了react项目且组件的后缀为tsx,此时说明成功创建了react+typescript项目的雏形</p> 
<p> 在项目根目录下，运行npm run start，成功启动项目</p> 
<p>npm run start</p> 
<p>二、配置路由<br> npm i react-router-dom@5.2.0 react-router-config @types/react-router-config @types/react-router-dom -S<br> src目录下创建views文件夹，views内创建Home，Contact，About，Navbar四个tsx文件，其中Navbar用来控制路由，其他三个页面用来展示</p> 
<p>Home:</p> 
<p>import React, { Component } from "react";<br>  <br> export default class Home extends Component {<!-- --><br>   render() {<!-- --><br>     return (<br>       &lt;div className="home"&gt;<br>         &lt;div className="container"&gt;<br>           &lt;h3 className="center"&gt; Home页面&lt;/h3&gt;<br>           &lt;p&gt;欢迎来到首页&lt;/p&gt;<br>         &lt;/div&gt;<br>       &lt;/div&gt;<br>     );<br>   }<br> }<br> Contact:</p> 
<p>import React, { Component } from "react";<br>  <br> export default class Contact extends Component {<!-- --><br>   render() {<!-- --><br>     return (<br>       &lt;div className="contact"&gt;<br>         &lt;div className="container"&gt;<br>           &lt;h3 className="center"&gt; Contact页面&lt;/h3&gt;<br>           &lt;p&gt;欢迎来到联系我们页面！&lt;/p&gt;<br>         &lt;/div&gt;<br>       &lt;/div&gt;<br>     );<br>   }<br> }<br> About:</p> 
<p>import React, { Component } from "react";<br>  <br> export default class About extends Component {<!-- --><br>   render() {<!-- --><br>     return (<br>       &lt;div className="about"&gt;<br>         &lt;div className="container"&gt;<br>           &lt;h3 className="center"&gt; About页面&lt;/h3&gt;<br>           &lt;p&gt;欢迎来到关于我们页面！&lt;/p&gt;<br>         &lt;/div&gt;<br>       &lt;/div&gt;<br>     );<br>   }<br> }<br> Navbar:</p> 
<p>import React, { Component } from "react";<br>  <br> export default class Navbar extends Component {<!-- --><br>     render() {<!-- --><br>         return (<br>             &lt;nav className="nav-wrapper"&gt;<br>                 &lt;div className="list"&gt;<br>                     &lt;ul&gt;<br>                         &lt;li&gt;&lt;a href='/'&gt;Home&lt;/a&gt;&lt;/li&gt;<br>                         &lt;li&gt;&lt;a href='/about'&gt;About&lt;/a&gt;&lt;/li&gt;<br>                         &lt;li&gt;&lt;a href='/contact'&gt;Contact&lt;/a&gt;&lt;/li&gt;<br>                     &lt;/ul&gt;<br>                 &lt;/div&gt;<br>             &lt;/nav&gt;<br>         )<br>     }<br> }</p> 
<p><br> src目录下创建routes文件夹，同时创建index.ts，使用RouteConfig对路由进行统一管理</p> 
<p>// 导入路由组件<br> import Home from '../views/Home'<br> import About from '../views/About'<br> import Contact from '../views/Contact'<br> // 导入路由管理工具<br> import {RouteConfig} from 'react-router-config'<br>  <br> const routes:RouteConfig = [<br>   {<!-- --><br>     path:'/',<br>     exact:true,<br>     component:Home<br>   },<br>   {<!-- --><br>     path:'/about',<br>     exact:true,<br>     component:About<br>   },<br>   {<!-- --><br>     path:'/contact',<br>     exact:true,<br>     component:Contact<br>   }<br> ]<br>  <br> export default routes;</p> 
<p><br>  App.tsx中引入Route，Navbar和路由管理工具</p> 
<p>import React from "react";<br> // 引入路由导航栏<br> import Navbar from "./views/Navbar";<br> // 引入routes组件<br> import routes from "./routes";<br> // 引入包管理工具<br> import { renderRoutes, RouteConfig } from "react-router-config";<br> import "./App.css";<br>  <br> function App() {<!-- --><br>   return (<br>     &lt;div className="App"&gt;<br>       &lt;Navbar /&gt;<br>  <br>       {/* 设置routes的类型为RouteConfig[]，否则报错 */}<br>       {renderRoutes(routes as RouteConfig[])}<br>     &lt;/div&gt;<br>   );<br> }<br>  <br> export default App;</p> 
<p><br> 根目录index.tsx中这样定义</p> 
<p>import React from "react";<br> import ReactDOM from "react-dom";<br> import "./index.css";<br> import App from "./App";<br> import reportWebVitals from "./reportWebVitals";<br> import { BrowserRouter as Router } from "react-router-dom";<br>  <br> ReactDOM.render(<br>   &lt;React.StrictMode&gt;<br>     &lt;Router&gt;<br>       &lt;App /&gt;<br>     &lt;/Router&gt;<br>   &lt;/React.StrictMode&gt;,<br>   document.getElementById("root")<br> );<br>  <br> // If you want to start measuring performance in your app, pass a function<br> // to log results (for example: reportWebVitals(console.log))<br> // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals<br> reportWebVitals();<br>  至此，路由配置就完成了，启动项目如果出现以下错误，</p> 
<p> 运行命令</p> 
<p>npm i react-router@5.2.0 -s<br>  然后重新运行即可，你的页面应该是这样的</p> 
<p> 有点难看是吧，我们给App添加一点样式</p> 
<p>* {<!-- --><br>   padding: 0;<br>   margin: 0;<br> }<br>  <br> h1 {<!-- --><br>   text-align: center;<br>   font-size: 45px;<br>   font-family: Arial, Helvetica, sans-serif;<br>   color: rgb(6, 0, 32);<br>   padding: 40px;<br> }<br>  <br> .list {<!-- --><br>   display: flex;<br>   justify-content: center;<br>   width: 100%;<br> }<br>  <br> .list ul li {<!-- --><br>   list-style: none;<br>   margin: 42px;<br>   text-align: center;<br> }<br>  <br> a {<!-- --><br>   text-decoration: none;<br>   color: rgb(0, 0, 0);<br>   font-size: 18px;<br>   font-family: Arial, Helvetica, sans-serif;<br>   padding: 14px 25px;<br>   background-color: transparent;<br>   border: 2px solid rgb(12, 0, 66);<br> }<br>  <br> a:hover {<!-- --><br>   background-color: rgb(12, 0, 66);<br>   color: rgb(255, 255, 255);<br> }</p> 
<p><br> 三、配置less<br>  第一种方式：暴露配置的方式<br> npm run eject<br> 此时项目多出了config文件夹</p> 
<p></p> 
<p>安装less和less-loader</p> 
<p>npm i less less-loader -S<br> 仿照sass修改config目录下的webpack.config.js：</p> 
<p>1. 找到config目录下的webpack.config.js文件，在50-70行之间有个cssRegex，在此处添加</p> 
<p></p> 
<p>// less<br> const lessRegex = /\.less$/;<br> const lessModuleRegex = /\.module\.less$/;<br> 2. 在webpack.config.js文件500多行有个sassRegex，模仿写对应的lessRegex</p> 
<p>// less<br>             {<!-- --><br>               test: lessRegex,<br>               exclude: lessModuleRegex,<br>               use: getStyleLoaders(<br>                 {<!-- --><br>                   importLoaders: 2,<br>                   sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,<br>                 },<br>                 'less-loader'<br>               ),<br>               sideEffects: true,<br>             },<br>             // less<br>             {<!-- --><br>               test: lessModuleRegex,<br>               use: getStyleLoaders(<br>                 {<!-- --><br>                   importLoaders: 2,<br>                   sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,<br>                   modules: true,<br>                   getLocalIdent: getCSSModuleLocalIdent,<br>                 },<br>                 'less-loader'<br>               ),<br>             },<br> 3.重新启动项目，创建less文件并引入</p> 
<p>样式生效，说明less配置成功</p> 
<p>这种方式有个不好的地方，就是会产生很多不必要的js文件，且这个操作不可逆，等到后期项目上传时造成代码冗余，不好维护。</p> 
<p>第二种方式：找到config.js文件直接修改<br> 1.找到文件路径：node_modules\react-scripts\config\webpack.config.js</p> 
<p> 2.在60-80行之间有个cssRegex，在此处添加</p> 
<p>// less<br> const lessRegex = /\.less$/;<br> const lessModuleRegex = /\.module\.less$/;<br> 3. 在550多行有个sassRegex，模仿写对应的lessRegex</p> 
<p>// less<br>             {<!-- --><br>               test: lessRegex,<br>               exclude: lessModuleRegex,<br>               use: getStyleLoaders(<br>                 {<!-- --><br>                   importLoaders: 2,<br>                   sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,<br>                 },<br>                 "less-loader"<br>               ),<br>               sideEffects: true,<br>             },<br>             // less<br>             {<!-- --><br>               test: lessModuleRegex,<br>               use: getStyleLoaders(<br>                 {<!-- --><br>                   importLoaders: 2,<br>                   sourceMap: isEnvProduction &amp;&amp; shouldUseSourceMap,<br>                   modules: true,<br>                   getLocalIdent: getCSSModuleLocalIdent,<br>                 },<br>                 "less-loader"<br>               ),<br>             },<br> 3.重新启动项目，创建less文件并引入</p> 
<p>.about{<!-- --><br>   .container{<!-- --><br>     font-size: 22px;<br>     p{<!-- --><br>       color: red;<br>     }<br>   }<br>   }<br> 样式生效，说明less配置成功</p> 
<p>四、配置sass<br> 通过create-react-app创建的react项目，其实是默认已经配置好sass的，所以我们先尝试在项目中引入sass文件</p> 
<p>会发生如下报错：</p> 
<p>解决方法：执行下面的命令</p> 
<p>npm i sass -s<br>  然后重新运行即可，样式生效</p> 
<p>五、配置px2rem自适应<br> 第一种方式：暴露config<br> 1. 安装lib-flexible、pxtorem，postcss</p> 
<p>npm i lib-flexible postcss-pxtorem postcss postcss-loader postcss-preset-env postcss-flexbugs-fixes -s<br> 2.配置config/webpack.config.js，在config目录下找到webpack.config.js文件，加入</p> 
<p>const px2rem = require('postcss-pxtorem');</p> 
<p><br> 3. 然后再下面代码中加入下面这行</p> 
<p>px2rem({<!-- --><br>        rootValue: 75,<br>        propWhiteList: [],<br>        minPixelValue: 2,<br>        exclude: /node_modules/i,<br>        unitPrecision: 5,<br>        propList: ['*']<br> }), //设计稿根据750px(iphone6)</p> 
<p><br>  也可以使用一下代码覆盖loader</p> 
<p>      {<!-- --><br>         // Options for PostCSS as we reference these options twice<br>         // Adds vendor prefixing based on your specified browser support in<br>         // package.json<br>         loader: require.resolve('postcss-loader'),<br>         options: {<!-- --><br>           postcssOptions: {<!-- --><br>             // Necessary for external CSS imports to work<br>             // https://github.com/facebook/create-react-app/issues/2677<br>             ident: 'postcss',<br>             config: false,<br>             plugins: !useTailwind<br>               ? [<br>                   'postcss-nested',<br>                   'postcss-flexbugs-fixes',<br>                   [<br>                     'postcss-preset-env',<br>                     {<!-- --><br>                       autoprefixer: {<!-- --><br>                         flexbox: 'no-2009',<br>                       },<br>                       stage: 3<br>                     },<br>                   ],<br>                   // Adds PostCSS Normalize as the reset css with default options,<br>                   // so that it honors browserslist config in package.json<br>                   // which in turn let's users customize the target behavior as per their needs.<br>                   px2rem({<!-- --><br>                     rootValue: 37.5,<br>                     selectorBlackList  : [], //过滤<br>                     propList   : ['*'],<br>                     minPixelValue: 2,<br>                     exclude: /node_modules/i<br>                   }), //设计稿根据750px(iphone6)<br>                 'postcss-normalize',<br>                 ]<br>               : [<br>                   'tailwindcss',<br>                   'postcss-flexbugs-fixes',<br>                   [<br>                     'postcss-preset-env',<br>                     {<!-- --><br>                       autoprefixer: {<!-- --><br>                         flexbox: 'no-2009',<br>                       },<br>                       stage: 3,<br>                     },<br>                   ],<br>                   px2rem({<!-- --><br>                     rootValue: 37.5,<br>                     selectorBlackList  : [], //过滤<br>                     propList   : ['*'],<br>                     minPixelValue: 2,<br>                     exclude: /node_modules/i<br>                     }), //设计稿根据750px(iphone6)<br>                 ],<br>           },<br>           sourceMap: isEnvProduction ? shouldUseSourceMap : isEnvDevelopment,<br>         },<br>       },<br> 4. src目录下找到index入口文件，在文件上面加入</p> 
<p>import 'lib-flexible'; </p> 
<p>5. 找到public/index.html文件，加入如下代码：</p> 
<p>&lt;meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"<br>         name="viewport"/&gt;</p> 
<p>6. 重新运行项目，一般就可以看到px转rem了。</p> 
<p>.contact {<!-- --><br>   .container {<!-- --><br>     font-size: 36px;<br>  <br>     .center {<!-- --><br>       color: blue;<br>     }<br>     p {<!-- --><br>       font-size: 24px;<br>     }<br>     button {<!-- --><br>       width: 100px;<br>       height: 45px;<br>       background: #ccc;<br>       color: #fff;<br>     }<br>   }<br> }<br>  第二种方式：直接在config文件中修改<br> 1.找到文件路径：node_modules\react-scripts\config\webpack.config.js</p> 
<p> 2.配置webpack.config.js，加入如下代码：</p> 
<p>const px2rem = require('postcss-pxtorem');</p> 
<p><br> 3. 然后再下面代码中加入下面这行</p> 
<p>px2rem({<!-- --><br>        rootValue: 75,<br>        propWhiteList: [],<br>        minPixelValue: 2,<br>        exclude: /node_modules/i,<br>        unitPrecision: 5,<br>        propList: ['*']<br> }), //设计稿根据750px(iphone6)</p> 
<p><br> 也可以使用一下代码覆盖loader</p> 
<p>      {<!-- --><br>         // Options for PostCSS as we reference these options twice<br>         // Adds vendor prefixing based on your specified browser support in<br>         // package.json<br>         loader: require.resolve('postcss-loader'),<br>         options: {<!-- --><br>           postcssOptions: {<!-- --><br>             // Necessary for external CSS imports to work<br>             // https://github.com/facebook/create-react-app/issues/2677<br>             ident: 'postcss',<br>             config: false,<br>             plugins: !useTailwind<br>               ? [<br>                   'postcss-nested',<br>                   'postcss-flexbugs-fixes',<br>                   [<br>                     'postcss-preset-env',<br>                     {<!-- --><br>                       autoprefixer: {<!-- --><br>                         flexbox: 'no-2009',<br>                       },<br>                       stage: 3<br>                     },<br>                   ],<br>                   // Adds PostCSS Normalize as the reset css with default options,<br>                   // so that it honors browserslist config in package.json<br>                   // which in turn let's users customize the target behavior as per their needs.<br>                   px2rem({<!-- --><br>                     rootValue: 37.5,<br>                     selectorBlackList  : [], //过滤<br>                     propList   : ['*'],<br>                     minPixelValue: 2,<br>                     exclude: /node_modules/i<br>                   }), //设计稿根据750px(iphone6)<br>                 'postcss-normalize',<br>                 ]<br>               : [<br>                   'tailwindcss',<br>                   'postcss-flexbugs-fixes',<br>                   [<br>                     'postcss-preset-env',<br>                     {<!-- --><br>                       autoprefixer: {<!-- --><br>                         flexbox: 'no-2009',<br>                       },<br>                       stage: 3,<br>                     },<br>                   ],<br>                   px2rem({<!-- --><br>                     rootValue: 37.5,<br>                     selectorBlackList  : [], //过滤<br>                     propList   : ['*'],<br>                     minPixelValue: 2,<br>                     exclude: /node_modules/i<br>                     }), //设计稿根据750px(iphone6)<br>                 ],<br>           },<br>           sourceMap: isEnvProduction ? shouldUseSourceMap : isEnvDevelopment,<br>         },<br>       },<br> 4. src目录下找到index入口文件，在文件上面加入</p> 
<p>import 'lib-flexible'; <br>  <br> 5. 找到public/index.html文件，加入如下代码：</p> 
<p>&lt;meta content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"<br>         name="viewport"/&gt;</p> 
<p>6. 重新运行项目，一般就可以看到px转rem了。</p> 
<p>存在问题：当设备宽度超过540后，样式就固定在540不再改变了</p> 
<p>解决方法：在node-modules =&gt; lib-flexible =&gt; flexible.js中找到refreshRem修改其中的width值为设计稿宽度即可</p> 
<p>六、配置axios和反向代理<br> 1. 安装axios 和 http-proxy-middleware（后面反向代理会用到）</p> 
<p>npm i axios http-proxy-middleware -s<br> 2. 在src目录下创建api文件夹，然后创建 index.ts 和 request.ts 文件</p> 
<p>//index.ts<br>  <br> import {Service} from './request';<br> //获取汽车列表<br> export function getCarList(config: { page: string; }){<!-- --><br>     const params = new URLSearchParams()<br>     params.append('page',config.page);<br>  <br>     return Service({<!-- --><br>         url:'./api/getCarList',<br>         data:params<br>     })<br> }<br>  <br>  <br> //request.ts<br>  <br> import axios from "axios";<br>  <br> declare module 'axios' {<!-- --><br>      export interface AxiosResponse&lt;T = any&gt; extends Promise&lt;T&gt; {}<br>  }<br>  <br> export const Service = axios.create({<!-- --><br>   timeout: 3000, //延迟时间<br>   method: "POST",<br>   headers: {<!-- --><br>     "pc-token": "4a82b23dbbf3b23fd8aa291076e660ec",<br>     "content-Type": "application/x-www-form-urlencoded",<br>   },<br> });<br>  <br> //请求拦截<br> Service.interceptors.request.use((config) =&gt; config);<br>  <br> //响应拦截<br> Service.interceptors.response.use(<br>   (response) =&gt; response.data,<br>   (err) =&gt; console.log(err)<br> );<br> 3. 配置代理，可以访问到后台的服务器地址</p> 
<p>在src文件夹中创建setupProxy.js内容配置如下</p> 
<p>const {createProxyMiddleware} = require('http-proxy-middleware');<br>  <br> module.exports = function(app) {<!-- --><br>   app.use('/api', createProxyMiddleware({ <br>     target: 'http://www.ibugthree.com/oldcar/',//后台服务器地址<br>     changeOrigin: true,<br>     pathRewrite: {<!-- --><br>     '^/api': '',<br>     },}))<br> };<br> 在新版本中已经默认设置代理的文件夹名为setupProxy.js</p> 
<p>  到这里所有配置就基本完成，在组件中调用即可</p> 
<p>import React, { Component } from "react";<br> import "./contact.scss";<br> //导入要使用的接口<br> import { getCarList } from "../api/index";<br>  <br> export default class Contact extends Component {<!-- --><br>   // 定义方法<br>   getList() {<!-- --><br>     getCarList({ page: "1" }).then((res) =&gt; console.log(res));<br>   }<br>   render() {<!-- --><br>     return (<br>       &lt;div className="contact"&gt;<br>         &lt;div className="container"&gt;<br>           &lt;h3 className="center"&gt; Contact页面&lt;/h3&gt;<br>           &lt;p&gt;欢迎来到联系我们页面！&lt;/p&gt;<br>           {/* 点击事件调用 */}<br>           &lt;button onClick={this.getList}&gt;获取数据&lt;/button&gt;<br>         &lt;/div&gt;<br>       &lt;/div&gt;<br>     );<br>   }<br> }</p> 
<p><br>  </p> 
<p> 七、配置redux<br> 1. 安装redux</p> 
<p>npm i redux react-redux -s<br> 2.在src路径下创建store文件夹，文件假中创建两个文件action.ts和index.ts两个文件</p> 
<p>action中定义type，然后返回设置状态的type和函数</p> 
<p>export const SET_AGE = "set_age";<br> export const SET_NAME = "set_name";<br>  <br> export const setAge = function (n: number) {<!-- --><br>   return {<!-- --><br>     type: SET_AGE,<br>     n: n,<br>   };<br> };<br> export const setName = function (name: string) {<!-- --><br>   return {<!-- --><br>     type: SET_NAME,<br>     name: name,<br>   };<br> };<br> index文件中取出redux中的createStore，以及action中的type，最后需要将createStore返回出去，并且需要传递一个函数，定义这个函数时有两个参数，一个是状态，一个是action，使用switch判断action中的type，当所有条件都不成立时，将所有的状态返回，有条件成立时，就通过扩展运算符将state展开，并且对age进行操作（...state）；</p> 
<p>import { createStore } from "redux";<br> import { SET_AGE, SET_NAME } from "./action";<br>  <br> interface User {<!-- --><br>   name: string;<br>   age: number;<br> }<br>  <br> const common: User = {<!-- --><br>   name: "张三123",<br>   age: 18,<br> };<br>  <br> function user(state = common, action: any) {<!-- --><br>   switch (action.type) {<!-- --><br>     case SET_AGE:<br>       return {<!-- --><br>         ...state,<br>         age: state.age + action.n,<br>       };<br>     case SET_NAME:<br>       return {<!-- --><br>         ...state,<br>         name: action.name,<br>       };<br>     default:<br>       return state;<br>   }<br> }<br>  <br> export default createStore(user);<br> 3. 在主入口文件index.tsx中进行redux的连接和store的引用</p> 
<p>import React from "react";<br> import ReactDOM from "react-dom";<br> import "./index.css";<br> import App from "./App";<br> import reportWebVitals from "./reportWebVitals";<br> // 引入路由组件<br> import { BrowserRouter as Router } from "react-router-dom";<br> // 引入移动端自适应<br> import "lib-flexible";<br> //引入rootReducer组件<br> import { Provider } from "react-redux";<br> import store from "./store";<br>  <br> ReactDOM.render(<br>   &lt;React.StrictMode&gt;<br>     {/* provider组件将所有的组件包裹起来，用绑定属性的形式绑定store到组件中 */}<br>     &lt;Provider store={store}&gt;<br>       &lt;Router&gt;<br>         &lt;App /&gt;<br>       &lt;/Router&gt;<br>     &lt;/Provider&gt;<br>   &lt;/React.StrictMode&gt;,<br>   document.getElementById("root")<br> );<br>  <br> reportWebVitals();<br> 4. 在App中进行配置</p> 
<p>import React from "react";<br> // 引入路由导航栏<br> import Navbar from "./views/Navbar";<br> // 引入routes组件<br> import routes from "./routes";<br> // 引入包管理工具<br> import { renderRoutes, RouteConfig } from "react-router-config";<br> import "./App.css";<br> // 引入connect连接组件<br> import {connect} from "react-redux"<br>  <br>  <br> function App() {<!-- --><br>   return (<br>     &lt;div className="App"&gt;<br>       &lt;Navbar /&gt;<br>       {/* 设置routes的类型为RouteConfig[]，否则报错 */}<br>       {renderRoutes(routes as RouteConfig[])}<br>     &lt;/div&gt;<br>   );<br> }<br>  <br> //进行连接<br> export default connect((props,state)=&gt;Object.assign({},props,state),{})(App);<br> 5.组件中使用redux</p> 
<p>    1. 引入connect和action中的方法</p> 
<p>    2. 定义props和state类型</p> 
<p>    3. 修改render中的html结构，定义属性和方法调用</p> 
<p>    4. connect连接属性并导出</p> 
<p>import React, { Component } from "react";<br> import "./about.less";<br> // redux<br> import { connect } from "react-redux";<br> import { setName, setAge } from "../store/action";<br>  <br> interface Props {<!-- --><br>   setAge: Function;<br>   setName: Function;<br>   age: number;<br>   name: string;<br> }<br>  <br> interface State {}<br>  <br> class About extends Component&lt;Props,State&gt; {<!-- --><br>   refs:any = React.createRef()<br>   // eslint-disable-next-line @typescript-eslint/no-useless-constructor<br>   constructor(props:Props){<!-- --><br>     super(props)<br>   }<br>   changeAge(){<!-- --><br>     this.props.setAge(1);<br>     console.log(this.props);<br>   }<br>   changeName(){<!-- --><br>     let name:number = this.refs.value<br>     this.props.setName(name)<br>     console.log(this.refs);<br>     this.refs.value = ''<br>   }<br>   render() {<!-- --><br>     return (<br>       &lt;div className="about"&gt;<br>         &lt;div className="container"&gt;<br>           &lt;h3 className="center"&gt; About页面&lt;/h3&gt;<br>           &lt;p&gt;欢迎来到关于我们页面！&lt;/p&gt;<br>         &lt;/div&gt;<br>         &lt;div&gt;<br>           &lt;p&gt;名字是：{this.props.name}&lt;/p&gt;<br>           &lt;input ref={(input: HTMLInputElement) =&gt; this.refs = input}  type="text" /&gt; <br>           &lt;button onClick={this.changeName.bind(this)}&gt;修改姓名&lt;/button&gt;<br>           &lt;p&gt;年龄是：{this.props.age}&lt;/p&gt; <br>           &lt;button onClick={this.changeAge.bind(this)}&gt;修改年龄&lt;/button&gt;<br>         &lt;/div&gt;<br>       &lt;/div&gt;<br>     );<br>   }<br> }<br>  <br> export default connect((props,state)=&gt;Object.assign({},props,state),{<!-- --><br>   setAge,setName<br> })(About);</p> 
<p><br> 八、配置别名@<br> 一、暴露方法<br> 1.打开 config 文件夹下的 webpack.config.js 文件</p> 
<p> 2.搜索 alias</p> 
<p> 3.参照如下格式，设置路径别名</p> 
<p>alias: {<!-- --><br>         // Support React Native Web<br>         // https://www.smashingmagazine.com/2016/08/a-glimpse-into-the-future-with-react-native-for-web/<br>         'react-native': 'react-native-web',<br>         // Allows for better profiling with ReactDevTools<br>         ...(isEnvProductionProfile &amp;&amp; {<!-- --><br>           'react-dom$': 'react-dom/profiling',<br>           'scheduler/tracing': 'scheduler/tracing-profiling',<br>         }),<br>         ...(modules.webpackAliases || {}),<br>         // 文件路径别名<br>         '@': path.resolve(__dirname, '../src'),<br>         '@view': path.resolve(__dirname, '../src/view'),<br>       },<br> 二、直接在config文件中修改<br> 1.找到文件路径：node_modules\react-scripts\config\webpack.config.js</p> 
<p>其他步骤同上！！</p> 
<p>需要特别注意的是： webpack配置进行改动后，都需要重新启动项目，不然不生效</p> 
<p>九、配置antd-mobile<br> 1.在项目中安装antd-mobile 使用</p> 
<p>npm install antd-mobile<br> //或<br> yarn add antd-mobile<br> 2.在项目中Home.tsx文件中导入要使用的组件</p> 
<p>import React, { Component } from "react";<br> //使用组件直接在组件中进行使用即可<br> import { Button } from 'antd-mobile';<br>  <br> export default class Home extends Component {<!-- --><br>   render() {<!-- --><br>     return (<br>       &lt;div className="home"&gt;<br>         &lt;div className="container"&gt;<br>           &lt;h3 className="center"&gt; Home页面&lt;/h3&gt;<br>           &lt;p&gt;欢迎来到首页&lt;/p&gt;<br>           &lt;Button color='primary'&gt;按钮&lt;/Button&gt;<br>         &lt;/div&gt;<br>       &lt;/div&gt;<br>     );<br>   }<br> }<br> 完成之后，你就能在react项目使用antd-mobile的样式文件进行构建自己的页面了</p> 
<p>至此，react项目创建和配置完成</p> 
<p>如有问题，请及时沟通<br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/132ff2f75244ba940fb4196e3a76489c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">初始webshell&#43;中国菜刀的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9d4d45e408650d880cda0e93e7dfae58/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">记录一次将学习项目从github到gitee</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>