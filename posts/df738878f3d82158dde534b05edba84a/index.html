<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unity 中的 DrawCall - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Unity 中的 DrawCall" />
<meta property="og:description" content="Unity DrawCall是游戏中一个非常重要的概念，也是开发者在优化游戏性能时需要重点考虑的问题。本文将会从以下几个方面详细介绍Unity DrawCall的相关知识：
1. 什么是DrawCall
2. DrawCall的影响因素
3. 如何减少DrawCall的数量
4. Unity中DrawCall的优化手段
一、什么是DrawCall？
在理解DrawCall之前，我们要先知道渲染引擎的工作方式。在大多数游戏中，渲染引擎会首先处理场景中的每一个物体，将其转换为一系列的三角形和顶点。随后，这些三角形和顶点将被发送到GPU进行处理和渲染，最终形成输出图像。
一个DrawCall表示一次将物体（或者场景中的所有三角形）发送到GPU进行处理和渲染的操作。也就是说，当我们在游戏中添加物体，或者为它们设置新的材质或者纹理时，都会导致DrawCall数量增加。
通常情况下，任何绘制或渲染操作都会对DrawCall数量产生影响。因此，在游戏设计的过程中，我们应该尽可能地减少DrawCall的数量，以提高游戏的性能。
二、DrawCall的影响因素
下面是几个可能导致DrawCall数量增加的因素：
1. 物体数量：不同的游戏物体会生成不同数量的DrawCall。
2. 网格和三角形数量：一个物体的三角形数量越多，它的DrawCall数量就越高。
3. 材质数量：在游戏中使用不同数量的材料和纹理也会影响DrawCall数量。
4. 相同物体排序：当多个相同的物体重叠在一起时，会产生更多的DrawCall数量。
三、如何减少DrawCall的数量
为了减轻渲染引擎的工作负担，提高游戏性能，我们可以采取以下措施：
1. 合并网格
合并网格是一种有效的方法，可以将多个物体合并为一个大的物体。使用该方法可以将物体数量减少，从而减少DrawCall的数量。在Unity中，可以通过将多个游戏物体添加到父物体并为其设置合适的网格，将其合并为一个单独的物体。
2. 使用LOD模型
Level of Detail（LOD）模型是一种方法，通过在距离相机较远时使用更简单的模型来减少三角形的数量。LOD模型可以显著减少DrawCall数量，从而提高游戏性能。在Unity中，可以通过使用Unity Pro版本中的LOD Group组件来实现。
3. 合并材料和纹理
Unity的批量处理功能可以将许多物体合并为一个DrawCall。当多个物体使用的材质和纹理相同时，它们可以被合并为一个batch。可以使用图集或纹理集等技术将多个材料和纹理组合成一个batch，从而减少DrawCall数量。
4. 避免过度半透明的材料
半透明材料会增加游戏中的DrawCall数量。尤其当一个半透明物体放在另一个半透明物体上时，开销会非常昂贵。因此，在游戏中应该尽量减少半透明材料的使用。
5. 使用Culling技术
Culling是一种用于从屏幕外剔除不可见对象的技术。使用Culling技术，只有在屏幕上可见的物体才会被渲染，从而减少DrawCall的数量。
四、Unity中DrawCall的优化手段
除了上述几种方法，Unity中还提供了许多其他的DrawCall优化方法。
1. 合并Mesh
在Unity中，可以使用MeshCombiner组件将多个网格对象合并成一个大网格对象。该方法可以减少DrawCall的数量，同时还可以减少GPU带宽的使用。在使用该方法时，我们需要注意保持原始物体的转换和状态不变，以确保游戏的行为和显示效果不受影响。
2. Batching
Unity的批处理功能可以将多个网格或物体合并为一个大的物体，从而减少DrawCall的数量。在Unity中，开发者可以通过将多个游戏物体放置在一个空物体的层次结构中，将它们合并成一个Batch。Batching是一种非常高效的方法，可以大大减少DrawCall的数量。
3. 静态Batching
静态Batching是一种只能用于被标记为“静态”的游戏对象的批量渲染方法。静态对象的网格和材质应该是不可更改的。在使用该方法时，Unity将会使用一个单独的DrawCall来处理所有静态物体，从而减少DrawCall的数量。这种方法对游戏中静态元素的渲染效果特别好。
4. 动态Batching
与静态批处理不同，动态批处理可以用于所有类型的游戏对象。动态批处理通过将这些物体分组而不需要更改它们的网格或材质来优化游戏中的DrawCall。此外，动态批处理还可以快速绘制多个对象。
5. GPU Instance
GPU Instance是一种可以通过使用GPU能力来实现对大量重复几何对象的快速渲染的技术。GPU Instance可以提高渲染速度，减少DrawCall数量。在使用GPU Instance时，只需将一个大网格复制多次，然后将其发送到GPU进行渲染。
总结
通过使用上述的优化方案，我们可以显著减少游戏中的DrawCall数量，从而提高游戏性能。其中，网格合并、LOD模型、材质和纹理合并、Culling技术等，是常用的DrawCall优化手段。通过使用这些方法，我们可以充分发挥现代计算机系统的性能，从而为玩家带来更好的游戏体验。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/df738878f3d82158dde534b05edba84a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-03T16:02:27+08:00" />
<meta property="article:modified_time" content="2023-04-03T16:02:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unity 中的 DrawCall</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        Unity DrawCall是游戏中一个非常重要的概念，也是开发者在优化游戏性能时需要重点考虑的问题。本文将会从以下几个方面详细介绍Unity DrawCall的相关知识：</p> 
<p>1. 什么是DrawCall</p> 
<p>2. DrawCall的影响因素</p> 
<p>3. 如何减少DrawCall的数量</p> 
<p>4. Unity中DrawCall的优化手段</p> 
<p></p> 
<p>一、什么是DrawCall？</p> 
<p>在理解DrawCall之前，我们要先知道渲染引擎的工作方式。在大多数游戏中，渲染引擎会首先处理场景中的每一个物体，将其转换为一系列的三角形和顶点。随后，这些三角形和顶点将被发送到GPU进行处理和渲染，最终形成输出图像。</p> 
<p>一个DrawCall表示一次将物体（或者场景中的所有三角形）发送到GPU进行处理和渲染的操作。也就是说，当我们在游戏中添加物体，或者为它们设置新的材质或者纹理时，都会导致DrawCall数量增加。</p> 
<p>通常情况下，任何绘制或渲染操作都会对DrawCall数量产生影响。因此，在游戏设计的过程中，我们应该尽可能地减少DrawCall的数量，以提高游戏的性能。</p> 
<p>二、DrawCall的影响因素</p> 
<p>下面是几个可能导致DrawCall数量增加的因素：</p> 
<p>1. 物体数量：不同的游戏物体会生成不同数量的DrawCall。</p> 
<p>2. 网格和三角形数量：一个物体的三角形数量越多，它的DrawCall数量就越高。</p> 
<p>3. 材质数量：在游戏中使用不同数量的材料和纹理也会影响DrawCall数量。</p> 
<p>4. 相同物体排序：当多个相同的物体重叠在一起时，会产生更多的DrawCall数量。</p> 
<p>三、如何减少DrawCall的数量</p> 
<p>为了减轻渲染引擎的工作负担，提高游戏性能，我们可以采取以下措施：</p> 
<p>1. 合并网格</p> 
<p>合并网格是一种有效的方法，可以将多个物体合并为一个大的物体。使用该方法可以将物体数量减少，从而减少DrawCall的数量。在Unity中，可以通过将多个游戏物体添加到父物体并为其设置合适的网格，将其合并为一个单独的物体。</p> 
<p>2. 使用LOD模型</p> 
<p>Level of Detail（LOD）模型是一种方法，通过在距离相机较远时使用更简单的模型来减少三角形的数量。LOD模型可以显著减少DrawCall数量，从而提高游戏性能。在Unity中，可以通过使用Unity Pro版本中的LOD Group组件来实现。</p> 
<p>3. 合并材料和纹理</p> 
<p>Unity的批量处理功能可以将许多物体合并为一个DrawCall。当多个物体使用的材质和纹理相同时，它们可以被合并为一个batch。可以使用图集或纹理集等技术将多个材料和纹理组合成一个batch，从而减少DrawCall数量。</p> 
<p>4. 避免过度半透明的材料</p> 
<p>半透明材料会增加游戏中的DrawCall数量。尤其当一个半透明物体放在另一个半透明物体上时，开销会非常昂贵。因此，在游戏中应该尽量减少半透明材料的使用。</p> 
<p>5. 使用Culling技术</p> 
<p>Culling是一种用于从屏幕外剔除不可见对象的技术。使用Culling技术，只有在屏幕上可见的物体才会被渲染，从而减少DrawCall的数量。</p> 
<p>四、Unity中DrawCall的优化手段</p> 
<p>除了上述几种方法，Unity中还提供了许多其他的DrawCall优化方法。</p> 
<p>1. 合并Mesh</p> 
<p>在Unity中，可以使用MeshCombiner组件将多个网格对象合并成一个大网格对象。该方法可以减少DrawCall的数量，同时还可以减少GPU带宽的使用。在使用该方法时，我们需要注意保持原始物体的转换和状态不变，以确保游戏的行为和显示效果不受影响。</p> 
<p>2. Batching</p> 
<p></p> 
<p>Unity的批处理功能可以将多个网格或物体合并为一个大的物体，从而减少DrawCall的数量。在Unity中，开发者可以通过将多个游戏物体放置在一个空物体的层次结构中，将它们合并成一个Batch。Batching是一种非常高效的方法，可以大大减少DrawCall的数量。</p> 
<p>3. 静态Batching</p> 
<p>静态Batching是一种只能用于被标记为“静态”的游戏对象的批量渲染方法。静态对象的网格和材质应该是不可更改的。在使用该方法时，Unity将会使用一个单独的DrawCall来处理所有静态物体，从而减少DrawCall的数量。这种方法对游戏中静态元素的渲染效果特别好。</p> 
<p></p> 
<p>4. 动态Batching</p> 
<p>与静态批处理不同，动态批处理可以用于所有类型的游戏对象。动态批处理通过将这些物体分组而不需要更改它们的网格或材质来优化游戏中的DrawCall。此外，动态批处理还可以快速绘制多个对象。</p> 
<p>5. GPU Instance</p> 
<p>GPU Instance是一种可以通过使用GPU能力来实现对大量重复几何对象的快速渲染的技术。GPU Instance可以提高渲染速度，减少DrawCall数量。在使用GPU Instance时，只需将一个大网格复制多次，然后将其发送到GPU进行渲染。</p> 
<p>总结</p> 
<p>通过使用上述的优化方案，我们可以显著减少游戏中的DrawCall数量，从而提高游戏性能。其中，网格合并、LOD模型、材质和纹理合并、Culling技术等，是常用的DrawCall优化手段。通过使用这些方法，我们可以充分发挥现代计算机系统的性能，从而为玩家带来更好的游戏体验。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d1f241c48824673ea4b358767e52db60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python pyqt5 全选 和反选 demo</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5d1739e3e40ce1768ee0e959da6b2ade/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java基础知识汇总</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>