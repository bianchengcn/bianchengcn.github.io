<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NLTK组块分析 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NLTK组块分析" />
<meta property="og:description" content="任务 将昨天完成的已进行词性标注的摘要列进行组块分析，并将两个结果放到Excel中进行的对比分析
代码 import nltk from nltk.tokenize import sent_tokenize from stanfordcorenlp import StanfordCoreNLP from nltk.tree import Tree import numpy as np import pandas as pd import re nlp = StanfordCoreNLP(r&#39;E:\网页下载\stanford-corenlp-4.2.2&#39;)#程序内调用 def chunking(word_broken): # 写一个匹配名词的模式 pattern = &#34;&#34;&#34; NP: {&lt;DT&gt;&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;*&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;&#43;}#必有定词修饰，包含前置定语与后置定语两种情形 {&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;*&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;&#43;}#无定词修饰 &#34;&#34;&#34; # 定义组块分析器 chunker=nltk.RegexpParser(pattern) result=chunker.parse(word_broken) return result path=&#39;E://网页下载/20210915-ASML-高被引专利.csv&#39; path_end=&#39;E://网页下载/0-500_processed_1.csv&#39; with open(path,encoding=&#34;utf-8&#34;) as file: d = pd.read_csv(file) df1=pd.DataFrame(d[&#34;摘要&#34;]) value_1=[] value_2=[] data={&#34;摘要分词&#34;:value_1,&#34;组块分析&#34;:value_2} for row in df1[&#39;摘要&#39;]: text = re.sub(&#39;%&#39;,&#39;&#39;,row) text = re." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/5e2bc3ab05cc7c1a182f92130636f4b6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-14T17:33:15+08:00" />
<meta property="article:modified_time" content="2021-09-14T17:33:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NLTK组块分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>任务</h2> 
<p>将昨天完成的已进行词性标注的摘要列进行组块分析，并将两个结果放到Excel中进行的对比分析</p> 
<h2><a id="_3"></a>代码</h2> 
<pre><code>import nltk
from nltk.tokenize import sent_tokenize
from stanfordcorenlp import StanfordCoreNLP
from nltk.tree import Tree
import numpy as np
import pandas as pd
import re

nlp = StanfordCoreNLP(r'E:\网页下载\stanford-corenlp-4.2.2')#程序内调用


def chunking(word_broken):
	# 写一个匹配名词的模式
	pattern = """
	NP: {&lt;DT&gt;&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;*&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;+}#必有定词修饰，包含前置定语与后置定语两种情形
	{&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;*&lt;VBG|VBN&gt;*&lt;JJ.*&gt;*&lt;VBG|VBN&gt;*&lt;NN.*&gt;+}#无定词修饰
	"""
	# 定义组块分析器
	chunker=nltk.RegexpParser(pattern)
	result=chunker.parse(word_broken)
	return result


		
path='E://网页下载/20210915-ASML-高被引专利.csv'
path_end='E://网页下载/0-500_processed_1.csv'

with open(path,encoding="utf-8") as file:
	d = pd.read_csv(file)
	df1=pd.DataFrame(d["摘要"])

value_1=[]
value_2=[]
data={"摘要分词":value_1,"组块分析":value_2}
for row in df1['摘要']:
	text = re.sub('%','',row)
	text = re.sub('[\d]','',text)
	text = re.sub(r'\-','_',text)
	sents=sent_tokenize(text)
	words=[]
	chunk=[]
	for sent in sents:
		word=nlp.pos_tag(sent)#词性标注，列表内元素为元组
		result=chunking(word)
		words.append(word)
		chunk.append(result)
	tree=nltk.Tree('SS',chunk)
	value_1.append(words)
	value_2.append(tree)
df2=pd.DataFrame(data)
df2.to_csv(path_end,columns=["摘要分词","组块分析"])	
nlp.close()
#35秒
#33秒
</code></pre> 
<h2><a id="_60"></a>总结</h2> 
<h3><a id="CHUNKING_61"></a>一、组块分析——CHUNKING</h3> 
<h4><a id="1Noun_Phrase_Chunking_62"></a>1、Noun Phrase Chunking（名词短语词块划分）</h4> 
<pre><code>grammar = "NP:{&lt;DT&gt;?&lt;JJ&gt;*&lt;NN&gt;}"
</code></pre> 
<p>补充概念：<br> 词缝：一个不包含在词块中的一个词符序列。以下划线部分就是一个词缝<br> 来自 <a href="https://blog.csdn.net/Q_s_qiu/article/details/107198638">https://blog.csdn.net/Q_s_qiu/article/details/107198638</a><br> <img src="https://images2.imgbox.com/a1/80/TqWIGwvY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2Exploring_Text_Corpora_72"></a>2、Exploring Text Corpora（用正则表达式进行词块划分）</h4> 
<p>一个正则表达式字符串中，可以写多个正则表达式，词块划分器轮流应用其规则，依次的更新词块结构，直到所有规则都被调用完，返回划分完的词块结构。当匹配重叠时，最左边的匹配优先。</p> 
<h3><a id="_75"></a>二、数据输出</h3> 
<p>学到了如何同时将两列导入到Excel中</p> 
<h3><a id="_77"></a>三、分块后结构</h3> 
<p>chunking分块之后，为一个树结构，比如：<br> <img src="https://images2.imgbox.com/f5/2f/d4UqKoXc_o.png" alt="s"><br> 其中，s为根节点，而其余词语NP结构为其子节点，为同级关系，如下图所示：<br> <img src="https://images2.imgbox.com/e7/a5/lgeB9XFI_o.png" alt="在这里插入图片描述"><br> 但若将一段话以一句一句的形式进行分块，可以写成：</p> 
<pre><code>words=[]
for sent in sents:
	word_1=wo_broken(sent)#分词
	word_2=chunking(word_1)#分块，返回结果为树结构
	words.append(word_2)
tree=nltk.Tree('SS',words)
</code></pre> 
<p>可参照：https://blog.csdn.net/wangsiji_buaa/article/details/79973578<br> 处理完结果为：<br> <img src="https://images2.imgbox.com/28/7b/4dulFMeF_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/5e/7d/BcWzhGMs_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c9e605b82cbebe648c8cb17685be18d5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Andriod Studio显示Manifest merger failed with multiple errors的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2d245aedd86885ea2466fa3d780be6c4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JAVA的Socket详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>