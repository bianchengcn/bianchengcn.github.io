<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€Springã€‘å…«ç§å¸¸è§BeanåŠ è½½æ–¹å¼ - ç¼–ç¨‹ä¸­å›½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ã€Springã€‘å…«ç§å¸¸è§BeanåŠ è½½æ–¹å¼" />
<meta property="og:description" content="ğŸš©æœ¬æ–‡å·²æ”¶å½•è‡³ä¸“æ ï¼šSpringå®¶æ—å­¦ä¹ ä¹‹æ—…
ä¸€.å¼•å…¥ (1) æ¦‚è¿° â€‹ å…³äºbeançš„åŠ è½½æ–¹å¼ï¼Œspringæä¾›äº†å„ç§å„æ ·çš„å½¢å¼ã€‚å› ä¸ºspringç®¡ç†beanæ•´ä½“ä¸Šæ¥è¯´å°±æ˜¯ç”±springç»´æŠ¤å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥beançš„åŠ è½½å¯ä»¥ä»å¤§çš„æ–¹é¢åˆ’åˆ†æˆ2ç§å½¢å¼ï¼š
å·²çŸ¥ç±»é€šè¿‡ï¼ˆç±»å.classï¼‰äº¤ç»™springç®¡ç†å·²çŸ¥ç±»åé€šè¿‡ï¼ˆç±»åå­—ç¬¦ä¸²ï¼‰å¹¶äº¤ç»™springç®¡ç†ã€‚ ä¸¤ç§å½¢å¼å†…éƒ¨å…¶å®éƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡springçš„BeanDefinitionå¯¹è±¡åˆå§‹åŒ–springçš„beanã€‚
beançš„å®šä¹‰ç”±å‰æœŸxmlé…ç½®é€æ­¥æ¼”åŒ–æˆæ³¨è§£é…ç½®ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡åå°„æœºåˆ¶åŠ è½½ç±»åååˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡å°±æ˜¯springç®¡æ§çš„bean@Importæ³¨è§£å¯ä»¥æŒ‡å®šåŠ è½½æŸä¸€ä¸ªç±»ä½œä¸ºspringç®¡æ§çš„beanï¼Œå¦‚æœè¢«åŠ è½½çš„ç±»ä¸­è¿˜å…·æœ‰@Beanç›¸å…³çš„å®šä¹‰ï¼Œä¼šè¢«ä¸€åŒåŠ è½½springå¼€æ”¾å‡ºäº†è‹¥å¹²ç§å¯ç¼–ç¨‹æ§åˆ¶çš„beançš„åˆå§‹åŒ–æ–¹å¼ï¼Œé€šè¿‡åˆ†æ”¯è¯­å¥ç”±å›ºå®šçš„åŠ è½½beanè½¬æˆäº†å¯ä»¥é€‰æ‹©beanæ˜¯å¦åŠ è½½æˆ–è€…é€‰æ‹©åŠ è½½å“ªä¸€ç§bean æœ¬æ–‡ä»‹ç»å…«ç§å¸¸è§çš„beanåŠ è½½æ–¹å¼ï¼š
xmlxml&#43;æ³¨è§£æ³¨è§£@Importå¯¼å…¥ä½¿ç”¨registeræ–¹æ³•ç¼–ç¨‹å½¢å¼æ³¨å†Œ@Importå¯¼å…¥å®ç°ImportSelectoræ¥å£çš„ç±»@Importå¯¼å…¥å®ç°ImportBeanDefinitionRegistraræ¥å£çš„ç±»@Importå¯¼å…¥å®ç°BeanDefinitionRegistryPostProcessoræ¥å£çš„ç±» æ­¤å¤–è¿˜ä»‹ç»ä¸€äº›ç›¸å…³æ¶‰åŠçŸ¥è¯†
@Beanå®šä¹‰FactoryBeanæ¥å£@ImportResource@Configurationæ³¨è§£çš„proxyBeanMethodså±æ€§ (2) ç¯å¢ƒæ­å»º åœ¨å¼€å§‹è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä»‹ç»ä¸€ä¸‹æµ‹è¯•æ‰€ç”¨çš„ç¯å¢ƒã€‚
åˆ›å»ºMavenå·¥ç¨‹ï¼Œå¯ä»¥é€‰æ‹©å¯¼å…¥å¦‚ä¸‹Springåæ ‡ç”¨äºæµ‹è¯• &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;5.3.9&lt;/version&gt; &lt;/dependency&gt; &lt;!-- æ¼”ç¤ºåŠ è½½ç¬¬ä¸‰æ–¹bean--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;druid&lt;/artifactId&gt; &lt;version&gt;1.1.16&lt;/version&gt; &lt;/dependency&gt; åˆ›å»ºä¸€äº›ç”¨äºåç»­ç¤ºä¾‹æ¼”ç¤ºçš„bean
äºŒ.å…«ç§åŠ è½½æ–¹å¼ (1) XMLæ–¹å¼ â€‹ æœ€åˆçº§çš„beançš„åŠ è½½æ–¹å¼å…¶å®å¯ä»¥ç›´å‡»springç®¡æ§beançš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±æ˜¯æä¾›ç±»åï¼Œç„¶åspringå°±å¯ä»¥ç®¡ç†äº†ã€‚æ‰€ä»¥ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯ç»™å‡ºbeançš„ç±»åï¼Œè‡³äºå†…éƒ¨å°±æ˜¯é€šè¿‡åå°„æœºåˆ¶åŠ è½½æˆclassã€‚
åˆ›å»ºSpringçš„xmlé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å…¶ä¸­çš„ &lt;bean/&gt;æ ‡ç­¾åŠ è½½beanï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å£°æ˜åŠ è½½è‡ªå·±åˆ›å»ºçš„bean,ä¹Ÿå¯ä»¥åŠ è½½ç¬¬ä¸‰æ–¹å¼€å‘çš„beanã€‚ &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;&gt; &lt;!--xmlæ–¹å¼å£°æ˜ è‡ªå·± å¼€å‘çš„bean--&gt; &lt;bean class=&#34;com.guanzhi.bean.Cat&#34;/&gt; &lt;bean class=&#34;com.guanzhi.bean.Dog&#34;/&gt; &lt;!--xmlæ–¹å¼å£°æ˜ ç¬¬ä¸‰æ–¹ å¼€å‘çš„bean--&gt; &lt;bean class=&#34;com.alibaba.druid.pool.DruidDataSource&#34;/&gt; &lt;/beans&gt; æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æˆåŠŸåŠ è½½äº†è¿™äº›bean public class App { public static void main(String[] args) { // åŠ è½½é…ç½®æ–‡ä»¶ ApplicationContext ctx = new ClassPathXmlApplicationContext(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/854ac89b6cee8072926bec7c298422af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-30T13:28:19+08:00" />
<meta property="article:modified_time" content="2023-03-30T13:28:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹ä¸­å›½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹ä¸­å›½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€Springã€‘å…«ç§å¸¸è§BeanåŠ è½½æ–¹å¼</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>ğŸš©æœ¬æ–‡å·²æ”¶å½•è‡³ä¸“æ ï¼š<a href="https://blog.csdn.net/m0_66570338/category_12227955.html">Springå®¶æ—å­¦ä¹ ä¹‹æ—…</a></p> 
</blockquote> 
<h2><a id="_2"></a>ä¸€.å¼•å…¥</h2> 
<h3><a id="1__4"></a>(1) æ¦‚è¿°</h3> 
<p>â€‹ å…³äºbeançš„åŠ è½½æ–¹å¼ï¼Œspringæä¾›äº†å„ç§å„æ ·çš„å½¢å¼ã€‚å› ä¸ºspringç®¡ç†beanæ•´ä½“ä¸Šæ¥è¯´å°±æ˜¯<strong>ç”±springç»´æŠ¤å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œæ‰€ä»¥beançš„åŠ è½½å¯ä»¥ä»å¤§çš„æ–¹é¢åˆ’<strong>åˆ†æˆ2ç§å½¢å¼</strong>ï¼š</p> 
<ul><li><strong>å·²çŸ¥ç±»</strong>é€šè¿‡ï¼ˆ<code>ç±»å.class</code>ï¼‰äº¤ç»™springç®¡ç†</li><li><strong>å·²çŸ¥ç±»å</strong>é€šè¿‡ï¼ˆ<code>ç±»åå­—ç¬¦ä¸²</code>ï¼‰å¹¶äº¤ç»™springç®¡ç†ã€‚</li></ul> 
<p>ä¸¤ç§å½¢å¼å†…éƒ¨å…¶å®éƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡springçš„<code>BeanDefinition</code>å¯¹è±¡åˆå§‹åŒ–springçš„beanã€‚</p> 
<ol><li>beançš„å®šä¹‰ç”±å‰æœŸxmlé…ç½®é€æ­¥æ¼”åŒ–æˆæ³¨è§£é…ç½®ï¼Œæœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯é€šè¿‡åå°„æœºåˆ¶åŠ è½½ç±»åååˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡å°±æ˜¯springç®¡æ§çš„bean</li><li>@Importæ³¨è§£å¯ä»¥æŒ‡å®šåŠ è½½æŸä¸€ä¸ªç±»ä½œä¸ºspringç®¡æ§çš„beanï¼Œå¦‚æœè¢«åŠ è½½çš„ç±»ä¸­è¿˜å…·æœ‰@Beanç›¸å…³çš„å®šä¹‰ï¼Œä¼šè¢«ä¸€åŒåŠ è½½</li><li>springå¼€æ”¾å‡ºäº†è‹¥å¹²ç§å¯ç¼–ç¨‹æ§åˆ¶çš„beançš„åˆå§‹åŒ–æ–¹å¼ï¼Œé€šè¿‡åˆ†æ”¯è¯­å¥ç”±å›ºå®šçš„åŠ è½½beanè½¬æˆäº†å¯ä»¥é€‰æ‹©beanæ˜¯å¦åŠ è½½æˆ–è€…é€‰æ‹©åŠ è½½å“ªä¸€ç§bean</li></ol> 
<p>æœ¬æ–‡ä»‹ç»å…«ç§å¸¸è§çš„beanåŠ è½½æ–¹å¼ï¼š</p> 
<ol><li>xml</li><li>xml+æ³¨è§£</li><li>æ³¨è§£</li><li>@Importå¯¼å…¥</li><li>ä½¿ç”¨registeræ–¹æ³•ç¼–ç¨‹å½¢å¼æ³¨å†Œ</li><li>@Importå¯¼å…¥å®ç°ImportSelectoræ¥å£çš„ç±»</li><li>@Importå¯¼å…¥å®ç°ImportBeanDefinitionRegistraræ¥å£çš„ç±»</li><li>@Importå¯¼å…¥å®ç°BeanDefinitionRegistryPostProcessoræ¥å£çš„ç±»</li></ol> 
<p>æ­¤å¤–è¿˜ä»‹ç»ä¸€äº›ç›¸å…³æ¶‰åŠçŸ¥è¯†</p> 
<ol><li>@Beanå®šä¹‰FactoryBeanæ¥å£</li><li>@ImportResource</li><li>@Configurationæ³¨è§£çš„proxyBeanMethodså±æ€§</li></ol> 
<h3><a id="2__34"></a>(2) ç¯å¢ƒæ­å»º</h3> 
<p>åœ¨å¼€å§‹è®²è§£ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆä»‹ç»ä¸€ä¸‹æµ‹è¯•æ‰€ç”¨çš„ç¯å¢ƒã€‚</p> 
<ol><li>åˆ›å»ºMavenå·¥ç¨‹ï¼Œå¯ä»¥é€‰æ‹©å¯¼å…¥å¦‚ä¸‹Springåæ ‡ç”¨äºæµ‹è¯•</li></ol> 
<pre><code class="prism language-xml">		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--     æ¼”ç¤ºåŠ è½½ç¬¬ä¸‰æ–¹bean--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ol start="2"><li>åˆ›å»ºä¸€äº›ç”¨äºåç»­ç¤ºä¾‹æ¼”ç¤ºçš„bean<br> <img src="https://images2.imgbox.com/90/3b/YaS72zWi_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol> 
<h2><a id="_58"></a>äºŒ.å…«ç§åŠ è½½æ–¹å¼</h2> 
<h3><a id="1_XML_60"></a>(1) XMLæ–¹å¼</h3> 
<p>â€‹ æœ€åˆçº§çš„beançš„åŠ è½½æ–¹å¼å…¶å®å¯ä»¥ç›´å‡»springç®¡æ§beançš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±æ˜¯<strong>æä¾›ç±»å</strong>ï¼Œç„¶åspringå°±å¯ä»¥ç®¡ç†äº†ã€‚æ‰€ä»¥ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯ç»™å‡ºbeançš„ç±»åï¼Œè‡³äºå†…éƒ¨å°±æ˜¯é€šè¿‡åå°„æœºåˆ¶åŠ è½½æˆclassã€‚</p> 
<ol><li>åˆ›å»ºSpringçš„xmlé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å…¶ä¸­çš„ <code>&lt;bean/&gt;</code>æ ‡ç­¾åŠ è½½beanï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å£°æ˜<strong>åŠ è½½è‡ªå·±åˆ›å»ºçš„bean,ä¹Ÿå¯ä»¥åŠ è½½ç¬¬ä¸‰æ–¹å¼€å‘çš„bean</strong>ã€‚</li></ol> 
<pre><code class="prism language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;
    
    &lt;!--xmlæ–¹å¼å£°æ˜ è‡ªå·± å¼€å‘çš„bean--&gt;
    &lt;bean class="com.guanzhi.bean.Cat"/&gt;
    &lt;bean class="com.guanzhi.bean.Dog"/&gt;

    &lt;!--xmlæ–¹å¼å£°æ˜ ç¬¬ä¸‰æ–¹ å¼€å‘çš„bean--&gt;
    &lt;bean class="com.alibaba.druid.pool.DruidDataSource"/&gt;
    
&lt;/beans&gt;
</code></pre> 
<ol start="2"><li>æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æˆåŠŸåŠ è½½äº†è¿™äº›bean</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// åŠ è½½é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æ‰€æœ‰å·²åŠ è½½beançš„åç§°</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰“å°æŸ¥çœ‹</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> names<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>å¯åŠ¨æˆ‘ä»¬å¯ä»¥å‘ç°æˆåŠŸåŠ è½½åˆ°äº†ä¸Šè¿°é…ç½®çš„ä¸‰ä¸ªbean<br> <img src="https://images2.imgbox.com/83/8f/khJvcGMJ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol> 
<h3><a id="2_XML_102"></a>(2) XML+æ³¨è§£æ–¹å¼</h3> 
<p>â€‹ ç”±äºæ–¹å¼ä¸€ç§éœ€è¦å°†springç®¡æ§çš„beanå…¨éƒ¨å†™åœ¨xmlæ–‡ä»¶ä¸­ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è¯´éå¸¸ä¸å‹å¥½ï¼Œæ‰€ä»¥å°±æœ‰äº†ç¬¬äºŒç§æ–¹å¼ã€‚<strong>å“ªä¸€ä¸ªç±»è¦å—åˆ°springç®¡æ§åŠ è½½æˆbeanï¼Œå°±åœ¨è¿™ä¸ªç±»çš„ä¸Šé¢åŠ ä¸€ä¸ªæ³¨è§£</strong>ï¼Œè¿˜å¯ä»¥é¡ºå¸¦èµ·ä¸€ä¸ªbeançš„åå­—ï¼ˆidï¼‰ã€‚è¿™é‡Œ<strong>å¯ä»¥ä½¿ç”¨çš„æ³¨è§£æœ‰@Componentä»¥åŠä¸‰ä¸ªè¡ç”Ÿæ³¨è§£@Serviceã€@Controllerã€@Repository</strong>ã€‚</p> 
<ol><li>ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸Šè¿°Catç±»å’ŒMouseç±»ä¸­åŠ ä¸Šæ³¨è§£</li></ol> 
<pre><code class="prism language-JAVA">package com.guanzhi.bean;

@Component("tom")
public class Cat {
}
</code></pre> 
<pre><code class="prism language-JAVA">package com.guanzhi.bean;

@Service
public class Mouse {
}
</code></pre> 
<p>â€‹ å½“ç„¶ï¼Œç”±äºæˆ‘ä»¬æ— æ³•åœ¨ç¬¬ä¸‰æ–¹æä¾›çš„æŠ€æœ¯æºä»£ç ä¸­å»æ·»åŠ ä¸Šè¿°4ä¸ªæ³¨è§£ï¼Œå› æ­¤å½“ä½ <strong>éœ€è¦åŠ è½½ç¬¬ä¸‰æ–¹å¼€å‘çš„bean</strong>çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ–¹å¼å®šä¹‰æ³¨è§£å¼çš„beanã€‚<strong>å°†<code>@Bean</code>å®šä¹‰åœ¨ä¸€ä¸ªæ–¹æ³•ä¸Šæ–¹ï¼Œå½“å‰æ–¹æ³•çš„è¿”å›å€¼å°±å¯ä»¥äº¤ç»™springç®¡æ§</strong>ï¼Œæ³¨æ„ï¼Œ<strong>è¿™ä¸ªæ–¹æ³•æ‰€åœ¨çš„ç±»ä¸€å®šè¦å®šä¹‰åœ¨@Configurationä¿®é¥°çš„ç±»</strong>ä¸­ã€‚</p> 
<pre><code class="prism language-JAVA">package com.guanzhi.config;

@Configuration
public class DbConfig {
    @Bean
    public DruidDataSource dataSource(){
        DruidDataSource ds = new DruidDataSource();
        return ds;
    }
}
</code></pre> 
<p>â€‹ 2. ä»…ä»…å¦‚æ­¤è¿˜æ˜¯ä¸å¤Ÿï¼Œä¸Šé¢æä¾›çš„<strong>åªæ˜¯beançš„å£°æ˜ï¼Œspringå¹¶æ²¡æœ‰æ„ŸçŸ¥åˆ°è¿™äº›ä¸œè¥¿</strong>ã€‚æƒ³è®©springæ„ŸçŸ¥åˆ°è¿™äº›å£°æ˜ï¼Œå¿…é¡»è®¾ç½®springå»æ£€æŸ¥è¿™äº›ç±»ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹åˆ—<strong>xmlé…ç½®è®¾ç½®springå»æ£€æŸ¥å“ªäº›åŒ…</strong>ï¼Œå‘ç°å®šäº†å¯¹åº”æ³¨è§£ï¼Œå°±å°†å¯¹åº”çš„ç±»çº³å…¥springç®¡æ§èŒƒå›´ï¼Œå£°æ˜æˆbeanã€‚</p> 
<pre><code class="prism language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
    "&gt;
    &lt;!--æŒ‡å®šæ‰«æåŠ è½½beançš„ä½ç½®--&gt;
    &lt;context:component-scan base-package="com.guanzhi.bean,com.guanzhi.config"/&gt;
&lt;/beans&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/06/1djocXwR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<ol start="3"><li>åŒæ ·æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æˆåŠŸåŠ è½½äº†è¿™äº›bean</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// åŠ è½½é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æ‰€æœ‰å·²åŠ è½½beançš„åç§°</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰“å°æŸ¥çœ‹</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> names<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>å¯åŠ¨æˆ‘ä»¬å¯ä»¥å‘ç°æˆåŠŸåŠ è½½åˆ°äº†ä¸Šè¿°é…ç½®çš„ä¸‰ä¸ªbean<br> <img src="https://images2.imgbox.com/e4/7e/Xq2zSfCC_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol> 
<p>æ–¹å¼äºŒå£°æ˜beançš„æ–¹å¼æ˜¯ç›®å‰ä¼ä¸šä¸­è¾ƒä¸ºå¸¸è§çš„beançš„å£°æ˜æ–¹å¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ã€‚æ–¹å¼ä¸€ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥æŸ¥é˜…å½“å‰springç¯å¢ƒä¸­å®šä¹‰äº†å¤šå°‘ä¸ªæˆ–è€…è¯´å¤šå°‘ç§beanï¼Œä½†æ˜¯æ–¹å¼äºŒ<strong>æ²¡æœ‰ä»»ä½•ä¸€ä¸ªåœ°æ–¹å¯ä»¥æŸ¥é˜…æ•´ä½“ä¿¡æ¯ï¼Œåªæœ‰å½“ç¨‹åºè¿è¡Œèµ·æ¥æ‰èƒ½æ„ŸçŸ¥åˆ°åŠ è½½äº†å¤šå°‘ä¸ªbean</strong>ã€‚</p> 
<h3><a id="3__182"></a>(3) æ³¨è§£æ–¹å¼å£°æ˜é…ç½®ç±»</h3> 
<p>â€‹ æ–¹å¼äºŒå·²ç»å®Œç¾çš„ç®€åŒ–äº†beançš„å£°æ˜ï¼Œä»¥åå†ä¹Ÿä¸ç”¨å†™èŒ«èŒ«å¤šçš„é…ç½®ä¿¡æ¯äº†ã€‚ä»”ç»†è§‚å¯Ÿxmlé…ç½®æ–‡ä»¶ï¼Œä¼šå‘ç°è¿™ä¸ªæ–‡ä»¶ä¸­<strong>åªå‰©äº†æ‰«æåŒ…</strong>è¿™å¥è¯ï¼Œäºæ˜¯å°±æœ‰äººæå‡ºï¼Œ<strong>ä½¿ç”¨javaç±»æ›¿æ¢æ‰è¿™ç§å›ºå®šæ ¼å¼</strong>çš„é…ç½®ï¼Œæ‰€ä»¥ä¸‹é¢è¿™ç§æ ¼å¼å°±å‡ºç°äº†ã€‚</p> 
<ol><li>å®šä¹‰ä¸€ä¸ªç±»å¹¶ä½¿ç”¨<code>@ComponentScan</code>æ›¿ä»£åŸå§‹xmlé…ç½®ä¸­çš„åŒ…æ‰«æè¿™ä¸ªåŠ¨ä½œï¼Œå…¶å®åŠŸèƒ½åŸºæœ¬ç›¸åŒã€‚</li></ol> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.guanzhi.bean"</span><span class="token punctuation">,</span><span class="token string">"com.guanzhi.config"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>åŒæ ·æˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦æˆåŠŸåŠ è½½äº†è¿™äº›bean</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// åŠ è½½é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è·å–æ‰€æœ‰å·²åŠ è½½beançš„åç§°</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// æ‰“å°æŸ¥çœ‹</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> names<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li>å¯åŠ¨æˆ‘ä»¬å¯ä»¥å‘ç°æˆåŠŸåŠ è½½äº†è¿™äº›bean<br> <img src="https://images2.imgbox.com/e0/ec/M7WcoEau_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></li></ol> 
<h3><a id="4_Import_214"></a>(4) @Importæ³¨è§£æ³¨å…¥</h3> 
<p>â€‹ ä½¿ç”¨æ‰«æçš„æ–¹å¼åŠ è½½beanæ˜¯ä¼ä¸šçº§å¼€å‘ä¸­å¸¸è§çš„beançš„åŠ è½½æ–¹å¼ï¼Œä½†æ˜¯ç”±äºæ‰«æçš„æ—¶å€™ä¸ä»…å¯ä»¥åŠ è½½åˆ°ä½ è¦çš„ä¸œè¥¿ï¼Œè¿˜æœ‰å¯èƒ½åŠ è½½åˆ°å„ç§å„æ ·çš„ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿ã€‚</p> 
<p>â€‹ æœ‰äººå°±ä¼šå¥‡æ€ªï¼Œä¼šæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæ¯”å¦‚ä½ æ‰«æäº†com.guanzhi.serviceåŒ…ï¼Œåæ¥å› ä¸ºä¸šåŠ¡éœ€è¦ï¼Œåˆæ‰«æäº†com.guanzhi.daoåŒ…ï¼Œä½ å‘ç°com.guanzhiåŒ…ä¸‹é¢åªæœ‰serviceå’Œdaoè¿™ä¸¤ä¸ªåŒ…ï¼Œè¿™å°±ç®€å•äº†ï¼Œç›´æ¥æ‰«æcom.guanzhiå°±è¡Œäº†ã€‚ä½†æ˜¯ä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼Œåå¤©åä½ åŠ å…¥äº†ä¸€ä¸ªå¤–éƒ¨ä¾èµ–åŒ…ï¼Œé‡Œé¢ä¹Ÿæœ‰com.guanzhiåŒ…ï¼Œè¿™ä¸‹ä¾¿åŠ è½½äº†è®¸å¤šä¸éœ€è¦çš„ä¸œè¥¿ã€‚</p> 
<p>â€‹ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§<strong>ç²¾å‡†åˆ¶å¯¼çš„åŠ è½½æ–¹å¼</strong>ï¼Œä½¿ç”¨<code>@Import</code>æ³¨è§£å°±å¯ä»¥è§£å†³ä½ çš„é—®é¢˜ã€‚å®ƒå¯ä»¥åŠ è½½æ‰€æœ‰çš„ä¸€åˆ‡ï¼Œ<strong>åªéœ€è¦åœ¨æ³¨è§£çš„å‚æ•°ä¸­å†™ä¸ŠåŠ è½½çš„ç±»å¯¹åº”çš„.class</strong>å³å¯ã€‚æœ‰äººå°±ä¼šè§‰å¾—ï¼Œè¿˜è¦è‡ªå·±æ‰‹å†™ï¼Œå¤šéº»çƒ¦ï¼Œä¸å¦‚æ‰«æå¥½ç”¨ã€‚ ä½†æ˜¯ä»–å¯ä»¥æŒ‡å®šåŠ è½½å•Šï¼Œå¥½çš„å‘½åè§„èŒƒé…åˆ@ComponentScanå¯ä»¥è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œä½†æ˜¯@Importæ³¨è§£æ‹¥æœ‰å…¶é‡è¦çš„åº”ç”¨åœºæ™¯ã€‚æœ‰æ²¡æœ‰æƒ³è¿‡å‡å¦‚ä½ è¦åŠ è½½çš„beanæ²¡æœ‰ä½¿ç”¨@Componentä¿®é¥°å‘¢ï¼Ÿè¿™ä¸‹å°±æ— è§£äº†ï¼Œè€Œ@Importå°±æ— éœ€è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¢«å¯¼å…¥çš„beanæ— éœ€ä½¿ç”¨æ³¨è§£å£°æ˜ä¸ºbean</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æ­¤å½¢å¼å¯ä»¥æœ‰æ•ˆçš„é™ä½æºä»£ç ä¸SpringæŠ€æœ¯çš„è€¦åˆåº¦ï¼Œåœ¨springæŠ€æœ¯åº•å±‚åŠè¯¸å¤šæ¡†æ¶çš„æ•´åˆä¸­å¤§é‡ä½¿ç”¨</p> 
<p>é™¤äº†åŠ è½½beanï¼Œè¿˜å¯ä»¥ä½¿ç”¨@Importæ³¨è§£<strong>åŠ è½½é…ç½®ç±»</strong>ã€‚å…¶å®æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ã€‚</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">Dbconfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="5_bean_245"></a>(5) ç¼–ç¨‹å½¢å¼æ³¨å†Œbean</h3> 
<p>â€‹ å‰é¢ä»‹ç»çš„åŠ è½½beançš„æ–¹å¼éƒ½æ˜¯åœ¨<strong>å®¹å™¨å¯åŠ¨é˜¶æ®µå®Œæˆ</strong>beançš„åŠ è½½ï¼Œä¸‹é¢è¿™ç§æ–¹å¼å°±æ¯”è¾ƒç‰¹æ®Šäº†ï¼Œå¯ä»¥åœ¨<strong>å®¹å™¨åˆå§‹åŒ–å®Œæˆåæ‰‹åŠ¨åŠ è½½bean</strong>ã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ç°<strong>ç¼–ç¨‹å¼æ§åˆ¶beançš„åŠ è½½</strong>ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AnnotationConfigApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ä¸Šä¸‹æ–‡å®¹å™¨å¯¹è±¡å·²ç»åˆå§‹åŒ–å®Œæ¯•åï¼Œæ‰‹å·¥åŠ è½½bean</span>
        ctx<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Mouse</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€‹ å…¶å®è¿™ç§æ–¹å¼å‘è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ¯”å¦‚å®¹å™¨ä¸­å·²ç»æœ‰äº†æŸç§ç±»å‹çš„beanï¼Œå†åŠ è½½ä¼šä¸ä¼šè¦†ç›–å‘¢ï¼Ÿè¿™éƒ½æ˜¯è¦æ€è€ƒå’Œå…³æ³¨çš„é—®é¢˜ã€‚</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AnnotationConfigApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ä¸Šä¸‹æ–‡å®¹å™¨å¯¹è±¡å·²ç»åˆå§‹åŒ–å®Œæ¯•åï¼Œæ‰‹å·¥åŠ è½½bean</span>
        ctx<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">registerBean</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œå¯ä»¥å‘ç°ï¼ŒååŠ è½½çš„è¦†ç›–äº†ä¹‹å‰åŠ è½½çš„<br> <img src="https://images2.imgbox.com/cf/55/a1sPHtL4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="6_ImportSelector_280"></a>(6) å¯¼å…¥å®ç°ImportSelectoræ¥å£çš„ç±»</h3> 
<p>â€‹ åœ¨æ–¹å¼äº”ä¸­ï¼Œæˆ‘ä»¬æ„Ÿå—äº†beançš„åŠ è½½å¯ä»¥è¿›è¡Œç¼–ç¨‹åŒ–çš„æ§åˆ¶ï¼Œæ·»åŠ ifè¯­å¥å°±å¯ä»¥å®ç°beançš„åŠ è½½æ§åˆ¶äº†ã€‚ä½†æ˜¯æ¯•ç«Ÿæ˜¯åœ¨å®¹å™¨åˆå§‹åŒ–åå®ç°beançš„åŠ è½½æ§åˆ¶ï¼Œé‚£æ˜¯å¦å¯ä»¥åœ¨<strong>å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¿›è¡Œæ§åˆ¶</strong>å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¿…é¡»çš„ã€‚<strong>å®ç°ImportSelectoræ¥å£çš„ç±»å¯ä»¥è®¾ç½®åŠ è½½çš„beançš„å…¨è·¯å¾„ç±»åï¼Œè®°å¾—ä¸€ç‚¹ï¼Œåªè¦èƒ½ç¼–ç¨‹å°±èƒ½åˆ¤å®šï¼Œèƒ½åˆ¤å®šæ„å‘³ç€å¯ä»¥æ§åˆ¶ç¨‹åºçš„è¿è¡Œèµ°å‘ï¼Œè¿›è€Œæ§åˆ¶ä¸€åˆ‡ã€‚</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">ImportSelector</span> <span class="token punctuation">{<!-- --></span> 
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// å„ç§æ¡ä»¶çš„åˆ¤å®šï¼Œåˆ¤å®šå®Œæ¯•åï¼Œå†³å®šæ˜¯å¦è£…è½½æŒ‡å®šçš„bean</span>
        <span class="token comment">// åˆ¤æ–­æ˜¯å¦æ»¡è¶³xxæ¡ä»¶ï¼Œæ»¡è¶³åˆ™åŠ è½½xxï¼Œå¦åˆ™xx</span>
        <span class="token keyword">boolean</span> flag <span class="token operator">=</span> metadata<span class="token punctuation">.</span><span class="token function">hasAnnotation</span><span class="token punctuation">(</span><span class="token string">"org.springframework.context.annotation.Configuration"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.guanzhi.bean.Dog"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.guanzhi.bean.Cat"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>åœ¨é…ç½®ç±»ä¸­å¯¼å…¥</p> 
<pre><code class="prism language-java"><span class="token comment">//@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ç¼–å†™æµ‹è¯•ç±»</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> names<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"----------------------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿è¡Œå¯ä»¥å‘ç°ï¼Œæ ¹æ®MyImportSelectorä¸­çš„åˆ¤æ–­æ¡ä»¶ï¼Œå¦‚æœåœ¨SpringConfigåŠ ä¸ŠConfigurationæ³¨è§£å¾—æ‰“å°com.guanzhi.bean.Catï¼Œå¦åˆ™æ‰“å°com.guanzhi.bean.Dogã€‚å¦‚æ­¤æˆ‘ä»¬ä¾¿å®ç°äº†Beançš„åŠ¨æ€åŠ è½½ã€‚</p> 
<h3><a id="7_ImportBeanDefinitionRegistrar_326"></a>(7) å¯¼å…¥å®ç°ImportBeanDefinitionRegistraræ¥å£çš„ç±»</h3> 
<p>â€‹ æ–¹å¼å…­ä¸­æä¾›äº†ç»™å®šç±»å…¨è·¯å¾„ç±»åæ§åˆ¶beanåŠ è½½çš„å½¢å¼ï¼Œå¦‚æœå¯¹springçš„beançš„åŠ è½½åŸç†æ¯”è¾ƒç†Ÿæ‚‰çš„å°ä¼™ä¼´çŸ¥é“ï¼Œå…¶å®beançš„åŠ è½½ä¸æ˜¯ä¸€ä¸ªç®€ç®€å•å•çš„å¯¹è±¡ï¼Œ<strong>springä¸­å®šä¹‰äº†ä¸€ä¸ªå«åšBeanDefinitionçš„ä¸œè¥¿ï¼Œå®ƒæ‰æ˜¯æ§åˆ¶beanåˆå§‹åŒ–åŠ è½½çš„æ ¸å¿ƒ</strong>ã€‚BeanDefinitionæ¥å£ä¸­ç»™å‡ºäº†è‹¥å¹²ç§æ–¹æ³•ï¼Œå¯ä»¥æ§åˆ¶beançš„ç›¸å…³å±æ€§ã€‚è¯´ä¸ªæœ€ç®€å•çš„ï¼Œåˆ›å»ºçš„å¯¹è±¡æ˜¯å•ä¾‹è¿˜æ˜¯éå•ä¾‹ï¼Œåœ¨BeanDefinitionä¸­å®šä¹‰äº†scopeå±æ€§å°±å¯ä»¥æ§åˆ¶è¿™ä¸ªã€‚</p> 
<p>å¦‚æœä½ æ„Ÿè§‰æ–¹å¼å…­æ²¡æœ‰ç»™ä½ å¼€æ”¾å‡ºè¶³å¤Ÿçš„å¯¹beançš„æ§åˆ¶æ“ä½œï¼Œé‚£ä¹ˆæ–¹å¼ä¸ƒä½ å€¼å¾—æ‹¥æœ‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åå®ç°<code>ImportBeanDefinitionRegistrar</code>æ¥å£çš„æ–¹å¼å®šä¹‰beanï¼Œå¹¶ä¸”è¿˜å¯ä»¥è®©ä½ <strong>å¯¹beançš„åˆå§‹åŒ–è¿›è¡Œæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶</strong>.</p> 
<p><img src="https://images2.imgbox.com/c7/7f/BcP2svyR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRegistrar</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> 	
            <span class="token class-name">BeanDefinitionBuilder</span><span class="token punctuation">.</span><span class="token function">rootBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token string">"dog"</span><span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åœ¨é…ç½®ç±»ä¸­å¯¼å…¥</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">MyRegistrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æµ‹è¯•</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> name <span class="token operator">:</span> names<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h3><a id="8_BeanDefinitionRegistryPostProcessor_369"></a>(8) å¯¼å…¥å®ç°BeanDefinitionRegistryPostProcessoræ¥å£çš„ç±»</h3> 
<p>â€‹ ä¸Šè¿°ä¸ƒç§æ–¹å¼éƒ½æ˜¯åœ¨å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¿›è¡Œbeançš„åŠ è½½æˆ–è€…å£°æ˜ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªbugã€‚è¿™ä¹ˆå¤šç§æ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´å¦‚æœæœ‰å†²çªæ€ä¹ˆåŠï¼Ÿè°èƒ½æœ‰æœ€ç»ˆè£å®šæƒï¼Ÿè¿™æ˜¯ä¸ªå¥½é—®é¢˜ï¼Œå½“æŸç§ç±»å‹çš„beanè¢«æ¥äºŒè¿ä¸‰çš„ä½¿ç”¨å„ç§æ–¹å¼åŠ è½½åï¼Œåœ¨ä½ å¯¹æ‰€æœ‰åŠ è½½æ–¹å¼çš„åŠ è½½é¡ºåºæ²¡æœ‰å®Œå…¨ç†è§£æ¸…æ™°ä¹‹å‰ï¼Œä½ è¿˜çœŸä¸çŸ¥é“æœ€åè°è¯´äº†ç®—ã€‚</p> 
<p>â€‹ BeanDefinitionRegistryPostProcessorï¼Œçœ‹åå­—çŸ¥é“ï¼ŒBeanDefinitionæ„æ€æ˜¯beanå®šä¹‰ï¼ŒRegistryæ³¨å†Œçš„æ„æ€ï¼ŒPoståç½®ï¼ŒProcessorå¤„ç†å™¨ï¼Œå…¨ç§°beanå®šä¹‰åå¤„ç†å™¨,åœ¨æ‰€æœ‰beanæ³¨å†Œéƒ½åŠ è½½å®Œåï¼Œå®ƒæ˜¯æœ€åä¸€ä¸ªè¿è¡Œçš„,å®ç°å¯¹å®¹å™¨ä¸­beançš„æœ€ç»ˆè£å®š.</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyPostProcessor</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistryPostProcessor</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postProcessBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> 
            <span class="token class-name">BeanDefinitionBuilder</span><span class="token punctuation">.</span><span class="token function">rootBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token string">"Dog"</span><span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>ä½¿ç”¨ä¸ä¸Šè¿°ä¸€è‡´</p> 
<h2><a id="_389"></a>ä¸‰.ç›¸å…³è¡¥å……</h2> 
<h3><a id="1_FactroyBean_391"></a>(1) FactroyBeanæ¥å£</h3> 
<p>â€‹ springæä¾›äº†ä¸€ä¸ªæ¥å£<code>FactoryBean</code>ï¼Œä¹Ÿå¯ä»¥ç”¨äºå£°æ˜beanï¼Œåªä¸è¿‡<strong>å®ç°äº†FactoryBeanæ¥å£çš„ç±»é€ å‡ºæ¥çš„å¯¹è±¡ä¸æ˜¯å½“å‰ç±»çš„å¯¹è±¡ï¼Œè€Œæ˜¯FactoryBeanæ¥å£æ³›å‹æŒ‡å®šç±»å‹çš„å¯¹è±¡</strong>ã€‚å¦‚ä¸‹åˆ—ï¼Œé€ å‡ºæ¥çš„beanå¹¶ä¸æ˜¯DogFactoryBeanï¼Œè€Œæ˜¯Dogã€‚è¿™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å¯¹è±¡åˆå§‹åŒ–å‰åšä¸€äº›äº‹æƒ…ã€‚</p> 
<pre><code class="prism language-JAVA">// åˆ›å»ºä¸€ä¸ªç±»å®ç°FactoryBeanæ¥å£
public class DogFactoryBean implements FactoryBean&lt;Dog&gt; {
    @Override
    public Dog getObject() throws Exception {
        Dog dog = new Dog();
        // æ‰©å±•è¦åšçš„å…¶ä»–äº‹æƒ….....
        return dog;
    }
    @Override
    public Class&lt;?&gt; getObjectType() {
        return Dog.class;
    }
    // æ˜¯å¦ä¸ºå•ä¾‹
    @Override
    public boolean isSingleton() {
        return true;
    }
}
</code></pre> 
<p>â€‹ æœ‰äººè¯´ï¼Œæ³¨é‡Šä¸­çš„ä»£ç å†™å…¥Dogçš„æ„é€ æ–¹æ³•ä¸å°±è¡Œäº†å—ï¼Ÿå¹²å˜›è¿™ä¹ˆè´¹åŠ²è½¬ä¸€åœˆï¼Œè¿˜å†™ä¸ªç±»ï¼Œè¿˜è¦å®ç°æ¥å£ï¼Œå¤šéº»çƒ¦å•Šã€‚è¿˜çœŸä¸ä¸€æ ·ï¼Œä½ å¯ä»¥ç†è§£ä¸ºDogæ˜¯ä¸€ä¸ªæŠ½è±¡åå‰¥ç¦»çš„ç‰¹åˆ«å¹²å‡€çš„æ¨¡å‹ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨çš„æ—¶å€™å¿…é¡»è¿›è¡Œä¸€ç³»åˆ—çš„åˆå§‹åŒ–åŠ¨ä½œã€‚<strong>åªä¸è¿‡æ ¹æ®æƒ…å†µä¸åŒï¼Œåˆå§‹åŒ–åŠ¨ä½œä¸åŒè€Œå·²</strong>ã€‚å¦‚æœå†™å…¥Dogï¼Œæˆ–è®¸åˆå§‹åŒ–åŠ¨ä½œAå½“å‰å¹¶ä¸èƒ½æ»¡è¶³ä½ çš„éœ€è¦ï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±è¦åšä¸€ä¸ªDogBçš„æ–¹æ¡ˆäº†ã€‚å¦‚æ­¤ï¼Œä½ å°±è¦åšä¸¤ä¸ªDogç±»ã€‚è€Œä½¿ç”¨FactoryBeanæ¥å£å°±å¯ä»¥å®Œç¾è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p> 
<p>â€‹ <strong>é€šå¸¸å®ç°äº†FactoryBeanæ¥å£çš„ç±»ä½¿ç”¨@Beançš„å½¢å¼è¿›è¡ŒåŠ è½½</strong>ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨@Componentå»å£°æ˜DogFactoryBeanï¼Œåªè¦è¢«æ‰«æåŠ è½½åˆ°å³å¯ã€‚</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.guanzhi.bean"</span><span class="token punctuation">,</span><span class="token string">"com.guanzhi.config"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">DogFactoryBean</span> <span class="token function">dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DogFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2_XMLbean_430"></a>(2) æ³¨è§£å¯¼å…¥XMLé…ç½®çš„bean</h3> 
<p>â€‹ ç”±äºæ—©èµ·å¼€å‘çš„ç³»ç»Ÿå¤§éƒ¨åˆ†éƒ½æ˜¯é‡‡ç”¨xmlçš„å½¢å¼é…ç½®beanï¼Œç°åœ¨çš„ä¼ä¸šçº§å¼€å‘åŸºæœ¬ä¸Šä¸ç”¨è¿™ç§æ¨¡å¼äº†ã€‚ä½†æ˜¯å¦‚æœä½ ç‰¹åˆ«å¹¸è¿ï¼Œéœ€è¦åŸºäºä¹‹å‰çš„ç³»ç»Ÿè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œè¿™å°±å°´å°¬äº†ã€‚<strong>æ–°å¼€å‘çš„ç”¨æ³¨è§£æ ¼å¼ï¼Œä¹‹å‰å¼€å‘çš„æ˜¯xmlæ ¼å¼</strong>ã€‚è¿™ä¸ªæ—¶å€™å¯ä¸æ˜¯è®©ä½ é€‰æ‹©ç”¨å“ªç§æ¨¡å¼çš„ï¼Œè€Œæ˜¯ä¸¤ç§è¦åŒæ—¶ä½¿ç”¨ã€‚springæä¾›äº†ä¸€ä¸ªæ³¨è§£å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<code>@ImportResource</code>ï¼Œåœ¨<strong>é…ç½®ç±»ä¸Šç›´æ¥å†™ä¸Šè¦è¢«èåˆçš„xmlé…ç½®æ–‡ä»¶å</strong>å³å¯ï¼Œç®—çš„ä¸Šä¸€ç§å…¼å®¹æ€§è§£å†³æ–¹æ¡ˆã€‚</p> 
<pre><code class="prism language-JAVA">@Configuration
@ComponentScan("com.guanzhi")
@ImportResource("applicationContext.xml")
public class SpringConfig {
}
</code></pre> 
<h3><a id="3_proxyBeanMethods_442"></a>(3) proxyBeanMethodså±æ€§</h3> 
<p>â€‹ å‰é¢çš„ä¾‹å­ä¸­ç”¨åˆ°äº†@Configurationè¿™ä¸ªæ³¨è§£ï¼Œå®ƒ<strong>å¯ä»¥ä¿éšœé…ç½®ç±»ä¸­ä½¿ç”¨æ–¹æ³•åˆ›å»ºçš„beançš„å”¯ä¸€æ€§</strong>ï¼Œä½¿æˆ‘ä»¬å¾—åˆ°çš„å¯¹è±¡æ˜¯ä»å®¹å™¨ä¸­è·å–çš„è€Œä¸æ˜¯é‡æ–°åˆ›å»ºçš„ã€‚åªéœ€ä¸º@Configurationæ³¨è§£è®¾ç½®<strong>proxyBeanMethodså±æ€§å€¼ä¸ºtrue</strong>å³å¯ï¼Œç”±äºæ­¤å±æ€§<strong>é»˜è®¤å€¼ä¸ºtrue</strong>ï¼Œæ‰€ä»¥å¾ˆå°‘çœ‹è§æ˜ç¡®ä¹¦å†™çš„ï¼Œé™¤éæƒ³æ”¾å¼ƒæ­¤åŠŸèƒ½ã€‚</p> 
<pre><code class="prism language-JAVA">@Configuration(proxyBeanMethods = true)
public class SpringConfig {
    @Bean
    public Cat cat(){
        return new Cat();
    }
}
</code></pre> 
<p>â€‹ ä¸‹é¢é€šè¿‡å®¹å™¨å†è°ƒç”¨ä¸Šé¢çš„catæ–¹æ³•æ—¶ï¼Œå¾—åˆ°çš„å°±æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚æ³¨æ„ï¼Œ<strong>å¿…é¡»ä½¿ç”¨springå®¹å™¨å¯¹è±¡è°ƒç”¨æ­¤æ–¹æ³•æ‰æœ‰ä¿æŒbeanå”¯ä¸€æ€§çš„ç‰¹æ€§</strong>ã€‚æ­¤ç‰¹æ€§åœ¨å¾ˆå¤šåº•å±‚æºç ä¸­æœ‰åº”ç”¨ï¼Œåœ¨MQä¸­ä¹Ÿåº”ç”¨äº†æ­¤ç‰¹æ€§ã€‚</p> 
<pre><code class="prism language-JAVA">public class App {
    public static void main(String[] args) {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);

        SpringConfig springConfig = ctx.getBean("springConfig", SpringConfig.class);
        System.out.println(springConfig.cat());
        System.out.println(springConfig.cat());
        System.out.println(springConfig.cat());
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/07/ZqVHWVKY_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/af844ae8560c841833953eaa2d7cc690/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">Oracleç”¨æˆ·å¯†ç è¿‡æœŸï¼Œä¿®æ”¹æ°¸ä¸è¿‡æœŸ</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/37b89d1e5af00486da27c49b8141d227/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">chatdocè¯»æ–‡çŒ®</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹ä¸­å›½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>