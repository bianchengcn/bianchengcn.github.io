<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows沙盒技术调研 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows沙盒技术调研" />
<meta property="og:description" content="转载自：移动云开发者社区
一、 Windows沙盒技术介绍
Windows沙盒提供了轻型桌面环境，可安全地隔离运行应用程序。 沙盒环境中Windows软件保持&#34;沙盒&#34;状态，并独立于主机运行。沙盒是临时的， 关闭后，将删除所有软件和文件以及状态。每次打开应用程序时，都会获得沙盒的全新的实例。安装在主机上的软件和应用程序不会直接在沙盒中提供。如果需要沙盒环境中可用的特定Windows，则必须在环境中显式安装它们。
（一）Windows沙盒具有以下属性：
· 部分Windows系统支持： 此功能所需的一切内容都包含在Windows 10 专业版和Enterprise。 无需下载 VHD。
· 用户： 每次Windows沙盒运行时，它都像全新安装沙盒Windows。
· 可释放：设备上不会保留任何内容。 当用户关闭应用程序时，将放弃所有内容。
· 安全：使用基于硬件的虚拟化进行内核隔离。 它依赖 Microsoft 虚拟机监控程序运行单独的内核，该内核将沙Windows与主机隔离。
· 高效： 使用集成的内核计划程序、智能内存管理和虚拟 GPU。
（二）启动沙盒的必备条件
· Windows 10 专业版、Enterprise 或教育版 18305 或 Windows 11 (Windows 沙盒当前在家庭版Windows不受支持)
· AMD64 体系结构
· BIOS 中启用的虚拟化功能
· 建议至少 4 GB 的 RAM (8 GB)
· 建议使用 SSD 至少 1 GB (SSD)
· 在四个内核中 (两个 CPU 内核，建议使用超线程)
二、 本地环境测试" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/4f99de911995a475bb2cd32cd53b6f70/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-28T16:14:35+08:00" />
<meta property="article:modified_time" content="2021-09-28T16:14:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows沙盒技术调研</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>转载自：<a href="https://ecloud.10086.cn/api/query/developer/user/home.html#L2FwaS9xdWVyeS9kZXZlbG9wZXIvYmxvZy9ibG9nZGV0YWlsLmh0bWw/YmxvZ19pZD00NDRlNmM5ZTE0YmE0NjAyOWU2NGZkYWYxOTljMmE1ZA==" rel="nofollow" title="移动云开发者社区">移动云开发者社区</a></p> 
<p><strong>一、 Windows沙盒技术介绍</strong></p> 
<p>Windows沙盒提供了轻型桌面环境，可安全地隔离运行应用程序。 沙盒环境中Windows软件保持"沙盒"状态，并独立于主机运行。沙盒是临时的， 关闭后，将删除所有软件和文件以及状态。每次打开应用程序时，都会获得沙盒的全新的实例。安装在主机上的软件和应用程序不会直接在沙盒中提供。如果需要沙盒环境中可用的特定Windows，则必须在环境中显式安装它们。</p> 
<p><strong>（一）Windows沙盒具有以下属性：</strong></p> 
<p>· 部分Windows系统支持： 此功能所需的一切内容都包含在Windows 10 专业版和Enterprise。 无需下载 VHD。</p> 
<p>· 用户： 每次Windows沙盒运行时，它都像全新安装沙盒Windows。</p> 
<p>· 可释放：设备上不会保留任何内容。 当用户关闭应用程序时，将放弃所有内容。</p> 
<p>· 安全：使用基于硬件的虚拟化进行内核隔离。 它依赖 Microsoft 虚拟机监控程序运行单独的内核，该内核将沙Windows与主机隔离。</p> 
<p>· 高效： 使用集成的内核计划程序、智能内存管理和虚拟 GPU。</p> 
<p><strong>（二）启动沙盒的必备条件</strong></p> 
<p>· Windows 10 专业版、Enterprise 或教育版 18305 或 Windows 11 (Windows 沙盒当前在家庭版Windows不受支持)</p> 
<p>· AMD64 体系结构</p> 
<p>· BIOS 中启用的虚拟化功能</p> 
<p>· 建议至少 4 GB 的 RAM (8 GB)</p> 
<p>· 建议使用 SSD 至少 1 GB (SSD)</p> 
<p>· 在四个内核中 (两个 CPU 内核，建议使用超线程)</p> 
<p></p> 
<p><strong>二、 本地环境测试</strong></p> 
<p>本地机器：HP EliteBook 830，Windows10专业版操作系统，16G RAM，相关配置如下：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bc/3a/aQlb2zXX_o.png"></p> 
<p></p> 
<p>打开windows 功能，勾选沙盒功能，重启电脑。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/dd/22/RIsoevSv_o.png"></p> 
<p></p> 
<p></p> 
<p>找到沙盒应用，点击打开沙盒环境</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/07/6a/PGFo6lJK_o.png"></p> 
<p></p> 
<p>进入到沙盒内部，是一个全新的windows桌面，可以上网，也可以下载和安装软件，沙盒中安装的软件不会影响到host环境，一旦关闭沙盒则全部数据均会被删除，下次进入沙箱又是一个崭新的环境。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6b/75/BUE42HYm_o.png"></p> 
<p>沙盒中系统配置，Windows 10企业版操作系统，4G RAM，存储C盘39G（host主机是177G C盘）。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c2/92/xkfqZ9EL_o.png"></p> 
<p></p> 
<p>三、 技术原理分析</p> 
<p>Windows沙盒定位：提供传统虚拟机无法提供的安全性、密度和性能。</p> 
<p>（一）沙盒操作系统映像管理</p> 
<p>由于Windows沙盒运行与主机相同的操作系统映像，因此已增强为通过称为"直接映射"的技术将相同的物理内存页用作操作系统二进制文件的主机。 例如当ntdll.dll* 加载到沙盒中的内存中时，它将使用与在主机上加载的二进制文件相同的物理页。 与传统的 VM 相比，主机和沙盒之间的内存共享会导致较小的内存占用，而不会损害有价值的主机密钥。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/75/40/G0Ho41Ps_o.png"></p> 
<p></p> 
<p>（二）沙盒内存管理</p> 
<p>传统 VM 会静态地分配主机内存。 当资源需求发生变化时，传统VM 具有用于调整其资源需求的部分机制。沙盒则是与主机协作以动态确定如何分配主机资源。 此方法类似于进程通常在主机上占用内存的方式。 如果主机具有内存压力，它可以从沙盒回收内存，就像进程回收内存一样。</p> 
<p>（三）沙盒CPU分配</p> 
<p>Windows沙盒允许像主机线程一样规划沙盒的虚拟处理器，host主机上的高优先级任务可以抢占沙盒中不太重要的工作。这意味着最重要的工作将优先进行，无论工作位于主机上还是容器中。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f1/50/pFkinOGi_o.png"></p> 
<p></p> 
<p>（四）沙盒GPU分配</p> 
<p>硬件加速呈现是提供流畅且响应迅速的用户体验的关键，尤其是对于图形密集型用户。 Microsoft 与图形生态系统合作伙伴合作，将新式图形虚拟化功能直接集成到 DirectX 和 Windows Display Driver Model (WDDM) 中，这是 Windows 使用的驱动程序模型。此功能允许沙盒内运行的程序与主机上运行的应用程序竞争 GPU 资源。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1e/7b/smdtAzMW_o.png"></p> 
<p>（五）与Hyper-v虚拟机对比</p> 
<p>开通沙盒无需打开Hyper-v管理器创建虚拟机，沙盒更为轻量化，进程化，不占用太多的存储和计算资源，且关闭后相关资源会完全释放出来。</p> 
<p>（六）与云桌面对比</p> 
<p>沙盒运行在本地主机上，占用本地计算和存储资源，使用体验和桌面类似，但不涉及远程桌面访问。</p> 
<p>沙盒可通过windows admin center统一管理。</p> 
<p>四、 总结</p> 
<p>Windows沙盒介于传统虚机和传统桌面之间，具备传统桌面的各项功能，同时又比虚机更轻量更安全，适合应用于未知应用软件测试等场景，唯一缺陷是退出后安装的软件及数据均会被删除</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/99e802e933e376f8a9edd1698970cd93/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">UGUI检测不规则图片点击</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/895a94ef053bad7ed17a108ffe68e1ec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">最基本的Makefile编写</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>