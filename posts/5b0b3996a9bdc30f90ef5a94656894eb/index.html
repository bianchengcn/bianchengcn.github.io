<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Unity场景优化工具：Mesh Baker 基础教程（贴图篇） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Unity场景优化工具：Mesh Baker 基础教程（贴图篇）" />
<meta property="og:description" content="目录
前言
一、Mash Baker是什么？
二、使用步骤
1.打开场景
2.将Texture Baker添加到场景中
3.使用Texture Baker生成贴图集
4.烘焙新的模型并使每个模型独立
总结
前言 模型贴图整合是3D游戏中美术资源优化的重要环节，我们通常把多个模型的贴图集成到一张2048大小的贴图集中，以达到减少贴图和材质球的数量来节省资源。但是面对成百上千的模型，纹理贴图，法线贴图，高光贴图等等，每种贴图集合成大图，再分别对一次UV，结果是累死，各种贴图还未必对得上位置……，那使用 Mesh Baker 我们可以批量自动拼合贴图并映射UV，大多数工作只需在 Unity 中来完成，免去在三维软件中手动调整UV的烦恼。话不多说，上教程。
使用后：多个模型共用一个材质球，使用一张大贴图（图片来源网络） 使用前：一个模型对应一个材质球，使用一张小贴图（图片来源网络） 一、Mash Baker是什么？ Mash Baker 用于 Unity 有优化模型场景的一种工具，该工具是为了解决场景模型数量过多导致运行时产生较高的DrawCall而创建的。
以下是官方的对于这款插件的介绍。
提高性能！结合网格和材料以减少批量！ Mesh Baker 是一个强大的工具包，具有灵活的非破坏性工作流程，用于优化道具和场景。 Unity 最著名的优化工具。自 2012 年以来的五星级支持和更新。
* 为道具组创建图集或纹理数组
* 在大型复杂场景中查找、分组和组合网格
* 修改道具预制件以使用图集材料
* 支持 URP、HDRP、标准管道
* 适用于内置和自定义着色器
* 为使用色调的材料创建地图集
* 支持多种材质的道具
* 处理平铺纹理
* 结合自定义并向蒙皮网格添加道具
* 创建可定制的蒙皮网格角色
* 将蒙皮网格与混合形状相结合
* UV、法线、切线自动调整
*光照贴图支持
*混合搭配灵活的工作流程工具
* 运行时 API
二、使用步骤 1.打开场景 如果导入的模型都集中在世界原点，这将不利于我们后面的操作，我们需要把模型分开 分开放置，方便我们后续的操作 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/5b0b3996a9bdc30f90ef5a94656894eb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-29T19:07:43+08:00" />
<meta property="article:modified_time" content="2022-07-29T19:07:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Unity场景优化工具：Mesh Baker 基础教程（贴图篇）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E4%B8%80%E3%80%81Mash%20Baker%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81Mash%20Baker%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" rel="nofollow">一、Mash Baker是什么？</a></p> 
<p id="%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4" rel="nofollow">二、使用步骤</a></p> 
<p id="1.%E6%89%93%E5%BC%80%E5%9C%BA%E6%99%AF-toc" style="margin-left:40px;"><a href="#1.%E6%89%93%E5%BC%80%E5%9C%BA%E6%99%AF" rel="nofollow">1.打开场景</a></p> 
<p id="2.%E5%B0%86Texture%20Baker%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%9C%BA%E6%99%AF%E4%B8%AD-toc" style="margin-left:40px;"><a href="#2.%E5%B0%86Texture%20Baker%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%9C%BA%E6%99%AF%E4%B8%AD" rel="nofollow">2.将Texture Baker添加到场景中</a></p> 
<p id="3.%E4%BD%BF%E7%94%A8Texture%20Baker%E7%94%9F%E6%88%90%E8%B4%B4%E5%9B%BE%E9%9B%86-toc" style="margin-left:40px;"><a href="#3.%E4%BD%BF%E7%94%A8Texture%20Baker%E7%94%9F%E6%88%90%E8%B4%B4%E5%9B%BE%E9%9B%86" rel="nofollow">3.使用Texture Baker生成贴图集</a></p> 
<p id="4.%E7%83%98%E7%84%99%E6%96%B0%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%B9%B6%E4%BD%BF%E6%AF%8F%E4%B8%AA%E6%A8%A1%E5%9E%8B%E7%8B%AC%E7%AB%8B-toc" style="margin-left:40px;"><a href="#4.%E7%83%98%E7%84%99%E6%96%B0%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%B9%B6%E4%BD%BF%E6%AF%8F%E4%B8%AA%E6%A8%A1%E5%9E%8B%E7%8B%AC%E7%AB%8B" rel="nofollow">4.烘焙新的模型并使每个模型独立</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E5%89%8D%E8%A8%80">前言</h2> 
<p>模型贴图整合是3D游戏中美术资源优化的重要环节，我们通常把多个模型的贴图集成到一张2048大小的贴图集中，以达到减少贴图和材质球的数量来节省资源。但是面对成百上千的模型，纹理贴图，法线贴图，高光贴图等等，每种贴图集合成大图，再分别对一次UV，结果是累死，各种贴图还未必对得上位置……，那使用 Mesh Baker 我们可以批量自动拼合贴图并映射UV，大多数工作只需在 Unity 中来完成，免去在三维软件中手动调整UV的烦恼。话不多说，上教程。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" src="https://images2.imgbox.com/b9/e9/JZvYLWp8_o.png"> 
  <figcaption>
    使用后：多个模型共用一个材质球，使用一张大贴图（图片来源网络） 
  </figcaption> 
 </figure> 
</div> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" src="https://images2.imgbox.com/4d/03/URDx5Oql_o.png"> 
  <figcaption>
    使用前：一个模型对应一个材质球，使用一张小贴图（图片来源网络） 
  </figcaption> 
 </figure> 
</div> 
<h2 id="%E4%B8%80%E3%80%81Mash%20Baker%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><a id="pandas_16"></a>一、Mash Baker是什么？</h2> 
<p>Mash Baker 用于 Unity 有优化模型场景的一种工具，该工具是为了解决场景模型数量过多导致运行时产生较高的DrawCall而创建的。</p> 
<p>以下是官方的对于这款插件的介绍。</p> 
<p>提高性能！结合网格和材料以减少批量！ Mesh Baker 是一个强大的工具包，具有灵活的非破坏性工作流程，用于优化道具和场景。 Unity 最著名的优化工具。自 2012 年以来的五星级支持和更新。<br><br> * 为道具组创建图集或纹理数组<br> * 在大型复杂场景中查找、分组和组合网格<br> * 修改道具预制件以使用图集材料<br> * 支持 URP、HDRP、标准管道<br> * 适用于内置和自定义着色器<br> * 为使用色调的材料创建地图集<br> * 支持多种材质的道具<br> * 处理平铺纹理<br> * 结合自定义并向蒙皮网格添加道具<br> * 创建可定制的蒙皮网格角色<br> * 将蒙皮网格与混合形状相结合<br> * UV、法线、切线自动调整<br> *光照贴图支持<br> *混合搭配灵活的工作流程工具<br> * 运行时 API</p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><a id="_19"></a>二、使用步骤</h2> 
<h3 id="1.%E6%89%93%E5%BC%80%E5%9C%BA%E6%99%AF"><a id="1_20"></a>1.打开场景</h3> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1200" src="https://images2.imgbox.com/61/13/k7LXPQLp_o.png" width="1200"> 
  <figcaption>
    如果导入的模型都集中在世界原点，这将不利于我们后面的操作，我们需要把模型分开 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1200" src="https://images2.imgbox.com/b3/33/pMTR3k8z_o.png" width="1200"> 
  <figcaption>
    分开放置，方便我们后续的操作 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<h3 id="2.%E5%B0%86Texture%20Baker%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%9C%BA%E6%99%AF%E4%B8%AD"><a id="2_34"></a>2.将Texture Baker添加到场景中</h3> 
<p>如果你已经在项目中导入了Mesh Baker插件则在Unity菜单栏中找到以下路径来添加场景组件</p> 
<p><strong>GameObject </strong>&gt;<strong> Create Other </strong>&gt;<strong> Mesh Baker </strong>&gt;<strong> TextureBaker and Mesh Baker </strong></p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1040" src="https://images2.imgbox.com/2d/8e/Wfu8C3Xm_o.png" width="1200"> 
  <figcaption>
    这将在Hierarchy窗口中生成一个名为TextureBaker对象 
  </figcaption> 
 </figure> 
</div> 
<p>可以看到这款插件的功能非常强大，此篇主要是讲贴图的优化，所以选择<strong>TextureBaker and Mesh Baker </strong>是我们适用的功能。</p> 
<p></p> 
<h3 id="3.%E4%BD%BF%E7%94%A8Texture%20Baker%E7%94%9F%E6%88%90%E8%B4%B4%E5%9B%BE%E9%9B%86">3.使用Texture Baker生成贴图集</h3> 
<p>让我们选中Hierarchy窗口中的TextureBaker组件，我们可以看到右侧inspector窗口中有着许多复杂的设置，请不用担心，我将在实践中介绍他们的作用。</p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/8f/f1/mDYN2H62_o.png" width="1200"></p> 
<p> 我们先进行操作的是MB3_Texture Baker (Script)里的参数，所以让我们把MB3_ Mesh Baker Grouper (Script)折叠起来。下图是对插件功能的解释说明。</p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/27/bc/6TjBJCpi_o.png" width="1200"></p> 
<p> 选中我们要导入的场景对象，拖放到图中的添加窗口栏。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1094" src="https://images2.imgbox.com/78/8b/JOke5woD_o.png" width="595"> 
  <figcaption>
    为了方便我们一次导入所有，我们先给它打个组，之后只拖它的父对象即可，这里我将父对象命名为Building 
  </figcaption> 
 </figure> 
</div> 
<p> 先在Hierarchy中高亮选择TextureBaker组件，然后直接按住父对象（Building）拖放到inspector中的对象添加窗口。</p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/31/58/m9m3ASp9_o.png" width="1200"></p> 
<p> 对象导入后，我们需要继续进行MB3_Texture Baker (Script)的设置，由于对象过多，我们直接折叠列表。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1200" src="https://images2.imgbox.com/53/ee/hjJivhdh_o.png" width="1200"> 
  <figcaption>
    这些选项的理解是我看了官方教程后的总结，解释不正确还请反馈 
  </figcaption> 
 </figure> 
</div> 
<p>我们首先点击<strong>Create Empty Assets For Combined Material </strong>这将给我们的贴图集和共享材质提供一个存放位置并且会自动生成一个贴图和材质。</p> 
<p class="img-center"><img alt="" height="712" src="https://images2.imgbox.com/d3/0b/ImklWGwp_o.png" width="1184"></p> 
<p>让我们在Project中找到我们所保存的路径，看看发生了什么。 </p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/6b/f6/izVDOh1q_o.png" width="1200"></p> 
<p> 这里我是用标准着色Standard</p> 
<p class="img-center"><img alt="" height="385" src="https://images2.imgbox.com/53/b3/5uVQbjY8_o.png" width="420"></p> 
<p> 之后让我们回到TextureBakery的Inspector中，我们可以看到，在<strong>Texture Baker Result</strong>（存放结果的地方）自动填上了刚才生成的文件，此外<strong>Combined Mesh Material</strong> 中也自动填上了新生成的材质球。</p> 
<p class="img-center"><img alt="" height="608" src="https://images2.imgbox.com/0d/94/7VmQrt8t_o.png" width="593"></p> 
<p> 点击过后，根据对象的数量，及其复杂程度，我们需要等待个十几、几十秒，甚至是分钟！让插件来合并贴图。我建议一次不要搞太多以防万一（虽然到目前我还没遇到过崩溃的情况）。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="536" src="https://images2.imgbox.com/9e/e4/cjKwFW9z_o.png" width="1106"> 
  <figcaption>
    恭喜你，你已经成功一半了 
  </figcaption> 
 </figure> 
</div> 
<h3></h3> 
<h3 id="4.%E7%83%98%E7%84%99%E6%96%B0%E7%9A%84%E6%A8%A1%E5%9E%8B%E5%B9%B6%E4%BD%BF%E6%AF%8F%E4%B8%AA%E6%A8%A1%E5%9E%8B%E7%8B%AC%E7%AB%8B">4.烘焙新的模型并使每个模型独立</h3> 
<p>MB3_Texture Baker (Script)的使用到这里就结束了，我们在Inspector面板中将它折叠。并展开<br><strong>MB3_ Mesh Baker Grouper (Script)</strong>，你可以看到又是一大堆参数设置，请不要烦恼，在这里我们并不需要做很多改动。接下来我将对部分设置进行解释。</p> 
<p class="img-center"><img alt="" height="1200" src="https://images2.imgbox.com/ae/5f/E63ycmew_o.png" width="1200"></p> 
<p> 首先我们要使每个子对象都可以独立选择并移动变换，我们先看上图黄色框内找到<strong>Cluster Type</strong>（集群类型），切换为<strong>Agglomerative</strong>这个选择使按照物体本身来划分，最适合我们。然后我们点击<strong>Click To Build Clusters</strong>按钮来构建集群。</p> 
<p class="img-center"><img alt="" height="382" src="https://images2.imgbox.com/92/72/zEffBbIz_o.png" width="602"></p> 
<p> 这个时候你在Scene窗口仔细观察，会发现模型被一圈圈的曲线包裹，这类似于碰撞网格一样的东西，每一个被包裹的将会分到一个组内，成为一个独立的模型。</p> 
<p class="img-center"><img alt="" height="784" src="https://images2.imgbox.com/c2/91/OQCRH0zP_o.png" width="1200"></p> 
<p> 现在的包裹曲线数量并不多，我需要每个模型都有自己的包裹曲线，这样每个模型就是一个组，以达到独立模型子对象的目的。这个时候我们可以看到有个滑块叫<strong>Max Distance</strong>（最大距离）我们将他调至最左，在滑动的过程中，观察场景中包裹曲线的变化。</p> 
<p class="img-center"><img alt="" height="783" src="https://images2.imgbox.com/16/5c/XHcLL36m_o.png" width="1200"></p> 
<p> 这个时候我们需要生成一个记录分组信息的组件，在烘焙时插件会读取该组件的分组信息，来进行烘焙分组。我们将inspectior面板滚动到最底部，点击<strong>Generate Mesh Bakers</strong>，如果跳出提示我们点击OK即可。此时在Hierarchy面板中会多出一个名字超长的组件，这就是用来记录分组信息的组件，我们不用管它。此时我们接着点击<strong>Bake All Child MeshBakers(烘焙所有子对象)</strong>。</p> 
<p class="img-center"><img alt="" height="680" src="https://images2.imgbox.com/5c/cd/L4HnuD21_o.png" width="594"></p> 
<p> 在Hierarchy窗口中，你会多出来很多对象，没错，这就是我们烘焙出来的新对象。目前这些对象与原对象处于重叠状态，我们将它拖出来。选择名称为0结尾的Mesh按住Shift再点击最后一个Mesh将其全部选中。在Scene窗口中将他移动与原对象分开。</p> 
<p class="img-center"><img alt="" height="784" src="https://images2.imgbox.com/c7/7c/4hdQ3vMJ_o.png" width="1200"></p> 
<p> 插件生成的对象几乎和我们原对象一样！烘焙出来的对象有些反光，这是因为我们没有调整材质球的<strong>Smoothness，</strong>我们将它归零。此时我们随便点击一个对象并在Inspectior中查看它所使用的材质球，不出所料，使用的正是我们新生成的材质球，我们再选择其他对象查看，使用的也是相同的材质球</p> 
<p>恭喜，整个新生成的对象所使用的材质都是同一个，这达到了我们的目的！</p> 
<p></p> 
<p><strong>总结</strong></p> 
<p>以上就是使用Mesh Baker批量合并贴图的基础教程，本文仅仅简单介绍了Mesh Baker中Texture Baker功能的使用，而Mesh Baker的强大之处不仅仅只有这些。有关更多Mesh Baker的介绍可以前往官方论坛进行查看。</p> 
<p><a class="link-info" href="https://forum.unity.com/threads/mesh-baker-by-digital-opus-released.159258/" rel="nofollow" title="论坛">论坛</a></p> 
<p><a class="link-info" href="https://www.youtube.com/playlist?list=PLCzm-udM-shncdtvrieqgi-hHDU1kt0d4" rel="nofollow" title="油管官方教程">油管官方教程</a></p> 
<p><a class="link-info" href="https://indienova.com/u/umegame/blogread/2339" rel="nofollow" title="资料参考：3D美术资源优化—材质贴图篇">资料参考：3D美术资源优化—材质贴图篇</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ba415e0a40a5d11c00ed7d47dd5a6094/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第五篇：开启网络功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/382ce30306c9de56b2791261c37e9e14/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python数据库sqlite3详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>