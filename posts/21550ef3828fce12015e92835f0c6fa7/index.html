<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据分析】numpy基础第三天 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据分析】numpy基础第三天" />
<meta property="og:description" content="前言 本文只会讲解最常用的加、减、乘、除，点乘（或叫矩阵乘法）、还有广播机制。
本文代码 链接提取码：1024 第1部分：基础数学计算 使用NumPy进行基本的数学运算是十分直观和简单的。下面我们将展示一些基本的加、减、乘、除运算。
和一个数字加减乘除 让我们首先创建一个简单的数组：
import numpy as np arr = np.array([[1, 2], [-1, 4]]) 现在，我们将展示如何把一个整数与数组中的每个元素进行加减乘除。
和整数3的乘法 arr * 3 该操作将会输出：
array([[ 3, 6], [-3, 12]]) 和整数3的加法 arr &#43; 3 该操作将会输出：
array([[4, 5], [2, 7]]) 和整数3的减法 arr - 3 该操作将会输出：
array([[-2, -1], [-4, 1]]) 和整数3的除法 arr / 3 该操作将会输出：
array([[ 0.33333333, 0.66666667], [-0.33333333, 1.33333333]]) 相同形状矩阵之间的加减乘除 当两个矩阵形状相同，NumPy允许进行元素级的运算。
相同形状矩阵之间的乘法 A = np.array([[1, 2], [-1, 4]]) B = np.array([[2, 0], [3, 4]]) A * B 输出结果是：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/21550ef3828fce12015e92835f0c6fa7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-26T12:40:53+08:00" />
<meta property="article:modified_time" content="2024-01-26T12:40:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据分析】numpy基础第三天</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_1"></a>前言</h2> 
<p>本文只会讲解最常用的<code>加</code>、<code>减</code>、<code>乘</code>、<code>除</code>，<code>点乘（或叫矩阵乘法）</code>、还有<code>广播机制</code>。</p> 
<h3><a id="_5"></a>本文代码</h3> 
<ul><li><a href="https://pan.baidu.com/s/1sBN6cgLwY6n09CYn4vS8XQ?pwd=1024" rel="nofollow">链接</a></li><li>提取码：1024</li></ul> 
<h3><a id="1_9"></a>第1部分：基础数学计算</h3> 
<p>使用NumPy进行基本的数学运算是十分直观和简单的。下面我们将展示一些基本的加、减、乘、除运算。</p> 
<h4><a id="_13"></a>和一个数字加减乘除</h4> 
<p>让我们首先创建一个简单的数组：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

arr <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，我们将展示如何把一个整数与数组中的每个元素进行加减乘除。</p> 
<h5><a id="3_26"></a>和整数3的乘法</h5> 
<pre><code class="prism language-python">arr <span class="token operator">*</span> <span class="token number">3</span>
</code></pre> 
<p>该操作将会输出：</p> 
<pre><code>array([[ 3,  6],
       [-3, 12]])
</code></pre> 
<h5><a id="3_39"></a>和整数3的加法</h5> 
<pre><code class="prism language-python">arr <span class="token operator">+</span> <span class="token number">3</span>
</code></pre> 
<p>该操作将会输出：</p> 
<pre><code>array([[4, 5],
       [2, 7]])
</code></pre> 
<h5><a id="3_52"></a>和整数3的减法</h5> 
<pre><code class="prism language-python">arr <span class="token operator">-</span> <span class="token number">3</span>
</code></pre> 
<p>该操作将会输出：</p> 
<pre><code>array([[-2, -1],
       [-4,  1]])
</code></pre> 
<h5><a id="3_65"></a>和整数3的除法</h5> 
<pre><code class="prism language-python">arr <span class="token operator">/</span> <span class="token number">3</span>
</code></pre> 
<p>该操作将会输出：</p> 
<pre><code>array([[ 0.33333333,  0.66666667],
       [-0.33333333,  1.33333333]])
</code></pre> 
<h4><a id="_78"></a>相同形状矩阵之间的加减乘除</h4> 
<p>当两个矩阵形状相同，NumPy允许进行元素级的运算。</p> 
<h5><a id="_82"></a>相同形状矩阵之间的乘法</h5> 
<pre><code class="prism language-python">A <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

A <span class="token operator">*</span> B
</code></pre> 
<p>输出结果是：</p> 
<pre><code>array([[ 2,  0],
       [-3, 16]])
</code></pre> 
<p>以上代码执行的逻辑相当于对矩阵的<code>对应位置</code>的元素进行相乘，如下图所示，其余的加法、减法、除法的也是同理。<br> <img src="https://images2.imgbox.com/48/c6/1pKxlLVl_o.png" alt="在这里插入图片描述"></p> 
<center>
  图1 
</center> 
<h5><a id="_102"></a>相同形状矩阵之间的加法</h5> 
<pre><code class="prism language-python">A <span class="token operator">+</span> B
</code></pre> 
<p>输出结果是：</p> 
<pre><code>array([[3, 2],
       [2, 8]])
</code></pre> 
<h5><a id="_115"></a>相同形状矩阵之间的减法</h5> 
<pre><code class="prism language-python">A <span class="token operator">-</span> B
</code></pre> 
<p>输出结果是：</p> 
<pre><code>array([[-1,  2],
       [-4,  0]])
</code></pre> 
<h5><a id="_128"></a>相同形状矩阵之间的除法</h5> 
<pre><code class="prism language-python">A <span class="token operator">/</span> B  <span class="token comment"># 不必担心这里的红色警告，请看下文，这并不是你的问题。</span>
</code></pre> 
<p>在Numpy的除法运算中，如果除数中包含0，则会收到警告，但程序不会停止，该位置的结果会是无穷（inf）。</p> 
<p>输出结果是：</p> 
<pre><code>array([[ 0.5       ,         inf],
       [-0.33333333,  1.        ]])
</code></pre> 
<h3><a id="_141"></a>点乘</h3> 
<p>点乘（dot product）或矩阵乘法在NumPy中非常重要，但是在数据分析上应用较少，了解即可。</p> 
<pre><code class="prism language-python">X1 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
X2 <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

X3 <span class="token operator">=</span> np<span class="token punctuation">.</span>dot<span class="token punctuation">(</span>X1<span class="token punctuation">,</span> X2<span class="token punctuation">)</span>
</code></pre> 
<p>输出结果是：</p> 
<pre><code>array([[21, 24, 27],
       [47, 54, 61]])
</code></pre> 
<p>图2展示了点乘（矩阵乘法）的逻辑</p> 
<p>下面用<code>虚线</code>框住的矩阵里面的东西，代表下面：<br> 左边矩阵<code>第一行</code>，和右边矩阵<code>第一列</code>，逐个相乘再求和，得到输出矩阵的<code>第一行第一列</code>上的<code>单个元素</code>。</p> 
<p>左边矩阵的<code>列轴的大小</code>，必须与右边矩阵的<code>行轴的大小</code>相等。<br> <img src="https://images2.imgbox.com/d3/aa/DjvxV8Sh_o.png" alt="在这里插入图片描述"></p> 
<center>
  图2 
</center> 
<h3><a id="2_168"></a>第2部分：统计函数</h3> 
<p>NumPy内置的统计函数可以简化数据分析的工作。</p> 
<pre><code class="prism language-python">c <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"平均值："</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"中位数："</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>median<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"标准差："</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>std<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'最大值'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'最小值'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span><span class="token builtin">min</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>这段代码会输出数组的平均值、中位数、标准差、最大值和最小值。</p> 
<h3><a id="3_184"></a>第3部分：广播机制</h3> 
<p>NumPy的广播机制允许对不同形状的数组进行数学运算。这是NumPy强大的功能之一，但也是比较抽象的概念。</p> 
<p>简单来说，广播机制会按照一定的规则扩展数组的形状，使其匹配，然后进行运算。</p> 
<h4><a id="_190"></a>通过代码案例感受广播</h4> 
<p>下面代码的广播机制的逻辑将会展示在下面的图中。</p> 
<pre><code class="prism language-python">A <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

C <span class="token operator">=</span> A <span class="token operator">+</span> B
</code></pre> 
<p>输出结果是：</p> 
<pre><code>array([[ 0,  1,  2],
       [10, 11, 12],
       [20, 21, 22],
       [30, 31, 32]])
</code></pre> 
<p>对于上面的代码的广播机制，请看下图：<br> <img src="https://images2.imgbox.com/32/d8/8WDKNHVL_o.png" alt="在这里插入图片描述"></p> 
<center>
  图3 
</center> 
<h4><a id="_212"></a>广播机制的具体规则</h4> 
<p>广播机制遵循四个基本规则，确保形状不完全匹配的数组也能进行运算。<br> 建议结合更下面的<code>逐条规则剖析刚才的广播代码</code>的文段来理解<code>广播机制的具体规则</code>。</p> 
<p>NumPy的通用函数中，要求输入的数组形状，也就是<code>shape</code>属性是一致的，当数组的<code>shape</code>不相等的时候，则会使用<code>广播机制</code>。<strong>调整数组使得shape一样</strong>，不过，需满足一定规则，否则将出错。这些规则可归结为以下四条：</p> 
<ol><li>让所有输入数组都<strong>向其中shape最长的数组看齐</strong>，shape中不足的部分都通过在前面<strong>加1补齐</strong>；如：a：2x3x2；b：3x2；则b向a看齐，在b的前面加1：变为：1x3x2</li><li>输出数组的shape是输入数组shape的<strong>各个轴上的最大值</strong>；</li><li>如果输入数组的某个轴和输出数组（由参与计算的数组中的各个轴的最大值组成，请看规则2）的对应轴的<strong>长度相同或者其长度为1</strong>时，这个数组能够用来计算，否则出错；</li><li>当输入数组的<strong>某个轴的长度为1时，沿着此轴运算时都用此轴上的仅有的一组值进行计算</strong>。</li></ol> 
<h4><a id="_223"></a>逐条规则剖析刚才的广播代码</h4> 
<p>我们刚才讲过的广播机制的代码如下所示：</p> 
<pre><code class="prism language-python">A <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
B <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

C <span class="token operator">=</span> A <span class="token operator">+</span> B
</code></pre> 
<p>输出结果是：</p> 
<pre><code>array([[ 0,  1,  2],
       [10, 11, 12],
       [20, 21, 22],
       [30, 31, 32]])
</code></pre> 
<ol><li>满足规则1：数组A的<code>shape</code>为(4,1)，有4行1列，数组B的<code>shape</code>为(3,)，<code>加1补齐</code>后，即有1行3列。</li><li>满足规则2：C是输出数组，它的形状是输入数组的<code>各个轴上的最大值</code>，数组A拥有<code>最大的行轴</code>，有4行；数组B只有一行，但是有3列，这是<code>最大的列轴</code>。</li><li>满足规则3：输出数组为C，shape为(4, 3)，对于shape为(4, 1)的数组A，行轴大小刚好与数组C相等，列轴大小为1，数组B同理。</li><li>满足规则4：如上面的<code>图3</code>所示。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/85fe33391c187ec39d693712ddc5370f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">绘图提高篇 | Python/R 双Y轴绘制</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/df69d6ecb2179086bf1d494a0156c624/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java8 映射方法（map，flatMap）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>