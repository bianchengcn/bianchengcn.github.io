<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows11通过Hyper-V创建VM，然后通过vscode连接vm进行开发 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows11通过Hyper-V创建VM，然后通过vscode连接vm进行开发" />
<meta property="og:description" content="这边需要在win11上建立vm来部署docker(这边不能用windows版本的docker destop)，学习了下，记录。
下载系统镜像 首先下载系统镜像：https://releases.ubuntu.com/focal/
这边使用的是ubuntu20.04.6 LTS (Focal Fossa) ，Server install image （无桌面版本）
启用hyper-v 在control-panel里面的 Programs and Features 里面的 Turn Windows features on or off里面，找到hyper-v，打开它，然后重启机器
使用hyper-v创建VM 重启之后找到hyper-v Manager
打开之后我们先新建Switch Manager
选择Exteral,然后选择create
然后自定义你的名字，网络类型根据你宿主机使用的网络类型来进行选择，使用网线就选择第二个，使用wifi的话就选择第一个wifi6。选择完成之后直接确定就行了
然后开始新建VM，点击new，选择vm
这里自定义你的vm名字，下面的check box一定要勾上，自定义vm创建的位置，避免默认创建到C盘，之后占用C太多空间。尽量选择到其他盘去。
然后第一代还是第二代，看你个人需求进行选择
第一代虚拟机是基于传统的 BIOS 和 IDE 控制器的虚拟机，支持大多数来宾操作系统，包括 32 位和 64 位的 Windows 和 Linux。第一代虚拟机可以使用旧版网络适配器来通过 PXE 启动，也可以从 IDE 控制器的虚拟硬盘或虚拟 DVD 启动。第一代虚拟机还支持软盘控制器和 COM 端口等设备。
第二代虚拟机是基于 UEFI 和 SCSI 控制器的虚拟机，支持大多数 64 位版本的 Windows 和较新版本的 Linux 和 FreeBSD 操作系统。第二代虚拟机可以使用标准网络适配器来通过 PXE 启动，也可以从 SCSI 控制器的虚拟硬盘或虚拟 DVD 启动。第二代虚拟机还支持安全启动、动态内存和在线调整大小等功能。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/fef1bc457dedaca9dd1b1c48de95d303/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-31T14:49:38+08:00" />
<meta property="article:modified_time" content="2024-01-31T14:49:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows11通过Hyper-V创建VM，然后通过vscode连接vm进行开发</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>这边需要在win11上建立vm来部署docker(这边不能用windows版本的docker destop)，学习了下，记录。</p> 
</blockquote> 
<h3>下载系统镜像</h3> 
<p>首先下载系统镜像：<a href="https://releases.ubuntu.com/focal/" rel="nofollow" title="https://releases.ubuntu.com/focal/">https://releases.ubuntu.com/focal/</a><br> 这边使用的是ubuntu20.04.6 LTS (Focal Fossa) ，Server install image （无桌面版本）</p> 
<h3>启用hyper-v</h3> 
<p>在control-panel里面的 Programs and Features 里面的 Turn Windows features on or off里面，找到hyper-v，打开它，然后重启机器</p> 
<p><img alt="" height="588" src="https://images2.imgbox.com/7a/88/L7Vv0CvA_o.png" width="1098"></p> 
<h3> 使用hyper-v创建VM</h3> 
<p><img alt="" height="689" src="https://images2.imgbox.com/09/07/vs02uy2L_o.png" width="833"></p> 
<p>重启之后找到hyper-v Manager</p> 
<p>打开之后我们先新建Switch Manager</p> 
<p><img alt="" height="769" src="https://images2.imgbox.com/87/92/FOf6kwPR_o.png" width="1200"></p> 
<p> 选择Exteral,然后选择create</p> 
<p><img alt="" height="520" src="https://images2.imgbox.com/69/29/Y9pLJN4J_o.png" width="582"></p> 
<p>然后自定义你的名字，网络类型根据你宿主机使用的网络类型来进行选择，使用网线就选择第二个，使用wifi的话就选择第一个wifi6。选择完成之后直接确定就行了</p> 
<p> <img alt="" height="521" src="https://images2.imgbox.com/47/92/sYLjMFhp_o.png" width="460"></p> 
<p> 然后开始新建VM，点击new，选择vm</p> 
<p><img alt="" height="826" src="https://images2.imgbox.com/2d/5a/w7KTTYjl_o.png" width="1200"></p> 
<p> 这里自定义你的vm名字，下面的check box一定要勾上，自定义vm创建的位置，避免默认创建到C盘，之后占用C太多空间。尽量选择到其他盘去。</p> 
<p><img alt="" height="570" src="https://images2.imgbox.com/aa/18/XzwixzHB_o.png" width="830"></p> 
<p> 然后第一代还是第二代，看你个人需求进行选择<img alt="" height="518" src="https://images2.imgbox.com/f3/fa/qPmDGq58_o.png" width="692"></p> 
<p>第一代虚拟机是基于传统的 BIOS 和 IDE 控制器的虚拟机，支持大多数来宾操作系统，包括 32 位和 64 位的 Windows 和 Linux。第一代虚拟机可以使用旧版网络适配器来通过 PXE 启动，也可以从 IDE 控制器的虚拟硬盘或虚拟 DVD 启动。第一代虚拟机还支持软盘控制器和 COM 端口等设备。</p> 
<p>第二代虚拟机是基于 UEFI 和 SCSI 控制器的虚拟机，支持大多数 64 位版本的 Windows 和较新版本的 Linux 和 FreeBSD 操作系统。第二代虚拟机可以使用标准网络适配器来通过 PXE 启动，也可以从 SCSI 控制器的虚拟硬盘或虚拟 DVD 启动。第二代虚拟机还支持安全启动、动态内存和在线调整大小等功能。</p> 
<p>总的来说，第二代虚拟机比第一代虚拟机具有更高的性能和更多的功能，但不支持一些较旧的操作系统和设备。因此，建议在可能的情况下使用第二代虚拟机，除非有特殊的需求或兼容性问题。</p> 
<p> 这里是给你的vm分配运行内存，根据自己的需求（因为我们会涉及到一个mssql 的docker image，它的要求是2G以上，所以分配一个2G以上的就可以了）</p> 
<p><img alt="" height="524" src="https://images2.imgbox.com/26/eb/CXIjXjih_o.png" width="696"></p> 
<p> 然后是网络选择，选择你一开始创建的的switch名字就行<br><img alt="" height="542" src="https://images2.imgbox.com/dd/6b/THGuKfMH_o.png" width="714"></p> 
<p>这边配置你的虚拟硬盘放哪里，以及他的大小，根据自己情况配置就行 </p> 
<p> <img alt="" height="527" src="https://images2.imgbox.com/03/75/ikclXL4d_o.png" width="695"></p> 
<p> 选择系统镜像，指向我们一开始下载好的ubuntu的iso<br><img alt="" height="536" src="https://images2.imgbox.com/a2/b1/wDivpo6b_o.png" width="702"></p> 
<p> 然后会出现一个review，确认没有问题就可以开始创建了。</p> 
<p><img alt="" height="276" src="https://images2.imgbox.com/4c/8d/75iazGTu_o.png" width="967"></p> 
<p>选中新建的vm，右键，选择connect </p> 
<p><img alt="" height="275" src="https://images2.imgbox.com/a3/a4/CbxAZb8E_o.png" width="556"></p> 
<h3>初始化系统 </h3> 
<p>点击start </p> 
<p><img alt="" height="497" src="https://images2.imgbox.com/03/19/SlmxSVCB_o.png" width="639"></p> 
<p> 选择安装进程的语言，回车确认</p> 
<p><img alt="" height="569" src="https://images2.imgbox.com/9c/07/U5Zx0DtS_o.png" width="637"></p> 
<p> 继续回车</p> 
<p> <img alt="" height="578" src="https://images2.imgbox.com/c0/dc/itJXoVyk_o.png" width="631"></p> 
<p> 然后等待<br><img alt="" height="497" src="https://images2.imgbox.com/69/20/beynoRaS_o.png" width="636"></p> 
<p> 选择系统的语言，回车确认<img alt="" height="781" src="https://images2.imgbox.com/65/5c/9A90PLz0_o.png" width="1107"></p> 
<p> variant语言和layout语言是用来设置虚拟机的键盘布局的。variant语言是指键盘的变体，比如中文键盘有普通和拼音两种变体，英文键盘有美式和英式两种变体。layout语言是指键盘的布局，比如QWERTY或者AZERTY等。不同的variant语言和layout语言会影响虚拟机中的按键映射。<br> 默认选择成一样的就行</p> 
<p><img alt="" height="645" src="https://images2.imgbox.com/2e/ce/ZtzFTLJ9_o.png" width="1097">这里会显示网络detail，我这边demo用的内部交换机，所以没有显示ip，如果是一开始建立的外部交换机，应该会显示一个ip在这里，回车就行了 </p> 
<p><img alt="" height="929" src="https://images2.imgbox.com/a4/4f/5un8VQph_o.png" width="1112"></p> 
<p> 然后是代理设置，没有的话就继续回车</p> 
<p><img alt="" height="650" src="https://images2.imgbox.com/46/2d/0SMiA5D6_o.png" width="1137"></p> 
<p> 镜像地址，没有特殊需要设置就回车继续<br><img alt="" height="579" src="https://images2.imgbox.com/46/b4/i7J1wFdw_o.png" width="1139"></p> 
<p> 这边是挂载硬盘，和具体空间分配<br><img alt="" height="625" src="https://images2.imgbox.com/8c/49/JNF9ox7X_o.png" width="1076">然后设置你的用户名，servername 密码 </p> 
<p> <img alt="" height="564" src="https://images2.imgbox.com/31/22/TdmvIm7i_o.png" width="1148"></p> 
<p> 然后等待<br><img alt="" height="825" src="https://images2.imgbox.com/4b/a8/OilpALr9_o.png" width="1086"></p> 
<p> 等看到这里的时候，选择rebootnow<img alt="" height="867" src="https://images2.imgbox.com/66/71/7xD3uYDl_o.png" width="1140"></p> 
<p> 如果看到这个，直接回车跳过就行了</p> 
<p><img alt="" height="426" src="https://images2.imgbox.com/b8/43/CsyrDfEJ_o.png" width="626"></p> 
<p> 然后等待<br><img alt="" height="893" src="https://images2.imgbox.com/9e/f1/FJmUcEq3_o.png" width="1055"></p> 
<p> 看到这里的时候就可以进行登录了，输入你一开始设置的账户名和密码</p> 
<p> <img alt="" height="235" src="https://images2.imgbox.com/70/f6/9FTX0Uxb_o.png" width="466"></p> 
<p>登录成功之后就可以看到这样<img alt="" height="565" src="https://images2.imgbox.com/4c/7a/LukSobmn_o.png" width="836"></p> 
<p> 输入df -h就可以看到具体储存分配 (我是为了测试，分配的比较小，根据实际情况分配你的磁盘空间，尽量大一点，非桌面版本扩容有点麻烦)</p> 
<p><img alt="" height="223" src="https://images2.imgbox.com/db/79/6gygNB3O_o.png" width="631"></p> 
<p> 输入ip address ，这里看到这个vm的ip这个需要记录下。之后用vscode需要用</p> 
<p><img alt="" height="247" src="https://images2.imgbox.com/ae/d7/bXf2yZAK_o.png" width="832"></p> 
<h3> 使用VSCODE 连接vm</h3> 
<p>在vscode插件里面搜索sftp，安装。<br><img alt="" height="787" src="https://images2.imgbox.com/76/c9/5A0rDypi_o.png" width="1200"></p> 
<p> 安装之后，按ctrl+shift+p，找到sftp的config<br><img alt="" height="496" src="https://images2.imgbox.com/58/e3/lyGIIurG_o.png" width="1200"></p> 
<p> 然后填写刚刚的IP，然后是你的用户名密码</p> 
<p> <img alt="" height="253" src="https://images2.imgbox.com/5e/8b/TvsSF4n9_o.png" width="539"></p> 
<p> 然后切换到这个sftp的tab里面</p> 
<p><img alt="" height="429" src="https://images2.imgbox.com/ea/1b/NawmtWg8_o.png" width="431"></p> 
<p> 然后在你的项目右键，然后选择open ssh in terminal</p> 
<p><img alt="" height="120" src="https://images2.imgbox.com/22/5c/T7lhnSKH_o.png" width="662"></p> 
<p> 然后再terminal里面输入密码<img alt="" height="297" src="https://images2.imgbox.com/67/3e/U0WKvT0f_o.png" width="1098"></p> 
<p> 就成功连接上了<br><img alt="" height="271" src="https://images2.imgbox.com/95/c4/QwFeVX9x_o.png" width="625"></p> 
<p> 然后还是在项目那里右键，选择upload folder，就可以把你的开发代码同步到你的vm里面了，<br><img alt="" height="188" src="https://images2.imgbox.com/25/1a/O782Gq78_o.png" width="223"></p> 
<p> 这样你在项目里面写的一些dockerfile也可以直接同步到vm上了</p> 
<p>然后在terminal就可以用ls进行查看，因为涉及到代码目录结构，我就不展示了</p> 
<p></p> 
<p>如果接下来需要安装docker 请参考我这篇blog：<br> ​​​​​​​<a href="https://blog.csdn.net/Damien_J_Scott/article/details/135953442" title="Linux ubuntu 20.4.6安装docker-CSDN博客">Linux ubuntu 20.4.6安装docker-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/26663c88e1d8cea38a6d5ce5a69197e2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">动手实践WebVR 全景</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/86d5b11fb2c07de3305df9a7b4c34220/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BEV感知（1）--BEV感知算法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>