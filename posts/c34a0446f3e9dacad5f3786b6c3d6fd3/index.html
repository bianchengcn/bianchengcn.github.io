<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Springæ¡†æ¶å­¦ä¹  -- è¯»å–å’Œå­˜å‚¨Beanå¯¹è±¡ - ç¼–ç¨‹ä¸­å›½çš„åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Springæ¡†æ¶å­¦ä¹  -- è¯»å–å’Œå­˜å‚¨Beanå¯¹è±¡" />
<meta property="og:description" content="ç›®å½• ğŸš€ğŸš€
å›é¡¾
getBean()æ–¹æ³•çš„ä½¿ç”¨Â æ ¹æ®nameæ¥è·å–å¯¹è±¡
å†è°ˆgetBean()
(1) é…ç½®æ‰«æè·¯å¾„
(2) æ·»åŠ æ³¨è§£
â‘  springæ³¨è§£ç®€ä»‹Â â‘¡ å¯¹ç±»æ³¨è§£çš„ä½¿ç”¨
â‘¢ æ³¨è§£Beanå¯¹è±¡çš„å‘½åé—®é¢˜
â‘£ æ–¹æ³•åŠ Beanæ³¨è§£
(3) @Bean æ³¨è§£çš„é‡å‘½å
(4) è·å–Beanå¯¹è±¡ -- å¯¹è±¡è£…é…Â å±æ€§æ³¨å…¥
å±æ€§æ³¨å…¥ä¼˜ç¼ºç‚¹
setteræ³¨å…¥Â setteræ³¨å…¥ä¼˜ç¼ºç‚¹
æ„é€ æ–¹æ³•æ³¨å…¥ (å®˜æ–¹æ¨è)
æ„é€ æ–¹æ³•ä¼˜ç¼ºç‚¹
(5) å¦å¤–ä¸€ç§æ³¨å…¥å…³é”®å­—: @Resource
(6) åŒä¸€ä¸ªå˜é‡å¤šä¸ª@Beanæ³¨å…¥æŠ¥é”™
æ€»ç»“Â ğŸ˜åˆ›ä½œä¸æ˜“å¤šå¤šæ”¯æŒğŸ«¡Â å›é¡¾ å›å¿†ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰æ˜¯å¦‚ä½•å­˜å‚¨å’Œä½¿ç”¨Beanå¯¹è±¡çš„, é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨springé…ç½®æ–‡ä»¶å†™å…¥Beanå¯¹è±¡, æˆ–è€…è¯´æ˜¯springå®¹å™¨ä¸­æ³¨å…¥Beanå¯¹è±¡:
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;&gt; &lt;bean id=&#34;user1&#34; class=&#34;org.example.User&#34;&gt;&lt;/bean&gt; &lt;bean id=&#34;user2&#34; class=&#34;org.example.User&#34;&gt;&lt;/bean&gt; &lt;/beans&gt; ç„¶ååœ¨å¯åŠ¨ç±»ä¸­newå‡ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡, è¦ä¹ˆä½¿ç”¨BeanFactory, è¦ä¹ˆä½¿ç”¨ApplicationContext, ç„¶åè°ƒç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­çš„getBeanæ–¹æ³•, æ¥è·å–åˆ°å¯¹åº”çš„Beanå¯¹è±¡.Â ä½†æ˜¯æˆ‘æ¯æ¬¡ä½¿ç”¨éƒ½è¦å»åœ¨springé…ç½®æ–‡ä»¶ä¸­å†™å…¥beanæ ‡ç­¾, ç„¶åå†™ä¸Šå¯¹åº”idå’Œç±». è¿™äº›æ­¥éª¤è¿‡äºç¹ç, äºæ˜¯springçš„ä½œè€…å°±åˆ›é€ å‡ºäº†ä¸€ç§æ›´ç®€å•çš„æ–¹å¼, é‚£å°±æ˜¯ç›´æ¥åœ¨å¯¹åº”çš„ç±»ä¸‹é¢å†™ä¸Šæ³¨è§£, æ³¨è§£ä¸­å¡«å…¥id, å°±çœå»äº†å†™è·¯å¾„çš„ç—›è‹¦." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/c34a0446f3e9dacad5f3786b6c3d6fd3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-23T17:02:14+08:00" />
<meta property="article:modified_time" content="2023-11-23T17:02:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹ä¸­å›½çš„åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹ä¸­å›½çš„åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Springæ¡†æ¶å­¦ä¹  -- è¯»å–å’Œå­˜å‚¨Beanå¯¹è±¡</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>ç›®å½• ğŸš€ğŸš€</strong></p> 
<p id="%E5%9B%9E%E9%A1%BE-toc" style="margin-left:0px;"><a href="#%E5%9B%9E%E9%A1%BE" rel="nofollow">å›é¡¾</a></p> 
<p id="getBean()%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%C2%A0-toc" style="margin-left:0px;"><a href="#getBean%28%29%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%C2%A0" rel="nofollow">getBean()æ–¹æ³•çš„ä½¿ç”¨Â </a></p> 
<p id="%E6%A0%B9%E6%8D%AEname%E6%9D%A5%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1-toc" style="margin-left:40px;"><a href="#%E6%A0%B9%E6%8D%AEname%E6%9D%A5%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1" rel="nofollow">æ ¹æ®nameæ¥è·å–å¯¹è±¡</a></p> 
<p id="%E5%86%8D%E8%B0%88getBean()-toc" style="margin-left:40px;"><a href="#%E5%86%8D%E8%B0%88getBean%28%29" rel="nofollow">å†è°ˆgetBean()</a></p> 
<p id="(1)%20%E9%85%8D%E7%BD%AE%E6%89%AB%E6%8F%8F%E8%B7%AF%E5%BE%84-toc" style="margin-left:0px;"><a href="#%281%29%20%E9%85%8D%E7%BD%AE%E6%89%AB%E6%8F%8F%E8%B7%AF%E5%BE%84" rel="nofollow">(1) é…ç½®æ‰«æè·¯å¾„</a></p> 
<p id="(2)%20%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3-toc" style="margin-left:0px;"><a href="#%282%29%20%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3" rel="nofollow">(2) æ·»åŠ æ³¨è§£</a></p> 
<p id="%E2%91%A0%20spring%E6%B3%A8%E8%A7%A3%E7%AE%80%E4%BB%8B%C2%A0-toc" style="margin-left:40px;"><a href="#%E2%91%A0%20spring%E6%B3%A8%E8%A7%A3%E7%AE%80%E4%BB%8B%C2%A0" rel="nofollow">â‘  springæ³¨è§£ç®€ä»‹Â </a></p> 
<p id="%E2%91%A1%20%E5%AF%B9%E7%B1%BB%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:40px;"><a href="#%E2%91%A1%20%E5%AF%B9%E7%B1%BB%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">â‘¡ å¯¹ç±»æ³¨è§£çš„ä½¿ç”¨</a></p> 
<p id="%E2%91%A2%20%E6%B3%A8%E8%A7%A3Bean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%91%BD%E5%90%8D%E9%97%AE%E9%A2%98-toc" style="margin-left:40px;"><a href="#%E2%91%A2%20%E6%B3%A8%E8%A7%A3Bean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%91%BD%E5%90%8D%E9%97%AE%E9%A2%98" rel="nofollow">â‘¢ æ³¨è§£Beanå¯¹è±¡çš„å‘½åé—®é¢˜</a></p> 
<p id="%E2%91%A3%20%E6%96%B9%E6%B3%95%E5%8A%A0Bean%E6%B3%A8%E8%A7%A3-toc" style="margin-left:40px;"><a href="#%E2%91%A3%20%E6%96%B9%E6%B3%95%E5%8A%A0Bean%E6%B3%A8%E8%A7%A3" rel="nofollow">â‘£ æ–¹æ³•åŠ Beanæ³¨è§£</a></p> 
<p id="(3)%20%40Bean%20%E6%B3%A8%E8%A7%A3%E7%9A%84%E9%87%8D%E5%91%BD%E5%90%8D-toc" style="margin-left:0px;"><a href="#%283%29%20%40Bean%20%E6%B3%A8%E8%A7%A3%E7%9A%84%E9%87%8D%E5%91%BD%E5%90%8D" rel="nofollow">(3) @Bean æ³¨è§£çš„é‡å‘½å</a></p> 
<p id="(4)%20%E8%8E%B7%E5%8F%96Bean%E5%AF%B9%E8%B1%A1%20--%20%E5%AF%B9%E8%B1%A1%E8%A3%85%E9%85%8D%C2%A0-toc" style="margin-left:0px;"><a href="#%284%29%20%E8%8E%B7%E5%8F%96Bean%E5%AF%B9%E8%B1%A1%20--%20%E5%AF%B9%E8%B1%A1%E8%A3%85%E9%85%8D%C2%A0" rel="nofollow">(4) è·å–Beanå¯¹è±¡ -- å¯¹è±¡è£…é…Â </a></p> 
<p id="%C2%A0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5-toc" style="margin-left:40px;"><a href="#%C2%A0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5" rel="nofollow">Â å±æ€§æ³¨å…¥</a></p> 
<p id="%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5%E4%BC%98%E7%BC%BA%E7%82%B9-toc" style="margin-left:40px;"><a href="#%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5%E4%BC%98%E7%BC%BA%E7%82%B9" rel="nofollow">å±æ€§æ³¨å…¥ä¼˜ç¼ºç‚¹</a></p> 
<p id="setter%E6%B3%A8%E5%85%A5%C2%A0-toc" style="margin-left:40px;"><a href="#setter%E6%B3%A8%E5%85%A5%C2%A0" rel="nofollow">setteræ³¨å…¥Â </a></p> 
<p id="%C2%A0setter%E6%B3%A8%E5%85%A5%E4%BC%98%E7%BC%BA%E7%82%B9-toc" style="margin-left:40px;"><a href="#%C2%A0setter%E6%B3%A8%E5%85%A5%E4%BC%98%E7%BC%BA%E7%82%B9" rel="nofollow">Â setteræ³¨å…¥ä¼˜ç¼ºç‚¹</a></p> 
<p id="%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5%20(%E5%AE%98%E6%96%B9%E6%8E%A8%E8%8D%90)-toc" style="margin-left:40px;"><a href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5%20%28%E5%AE%98%E6%96%B9%E6%8E%A8%E8%8D%90%29" rel="nofollow">æ„é€ æ–¹æ³•æ³¨å…¥ (å®˜æ–¹æ¨è)</a></p> 
<p id="%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%BC%98%E7%BC%BA%E7%82%B9-toc" style="margin-left:40px;"><a href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%BC%98%E7%BC%BA%E7%82%B9" rel="nofollow">æ„é€ æ–¹æ³•ä¼˜ç¼ºç‚¹</a></p> 
<p id="(5)%20%E5%8F%A6%E5%A4%96%E4%B8%80%E7%A7%8D%E6%B3%A8%E5%85%A5%E5%85%B3%E9%94%AE%E5%AD%97%3A%20%40Resource-toc" style="margin-left:0px;"><a href="#%285%29%20%E5%8F%A6%E5%A4%96%E4%B8%80%E7%A7%8D%E6%B3%A8%E5%85%A5%E5%85%B3%E9%94%AE%E5%AD%97%3A%20%40Resource" rel="nofollow">(5) å¦å¤–ä¸€ç§æ³¨å…¥å…³é”®å­—: @Resource</a></p> 
<p id="(6)%20%E5%90%8C%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%A4%9A%E4%B8%AA%40Bean%E6%B3%A8%E5%85%A5%E6%8A%A5%E9%94%99-toc" style="margin-left:0px;"><a href="#%286%29%20%E5%90%8C%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%A4%9A%E4%B8%AA%40Bean%E6%B3%A8%E5%85%A5%E6%8A%A5%E9%94%99" rel="nofollow">(6) åŒä¸€ä¸ªå˜é‡å¤šä¸ª@Beanæ³¨å…¥æŠ¥é”™</a></p> 
<p id="%E6%80%BB%E7%BB%93%C2%A0-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93%C2%A0" rel="nofollow">æ€»ç»“Â </a></p> 
<hr> 
<p><s><em>ğŸ˜åˆ›ä½œä¸æ˜“å¤šå¤šæ”¯æŒğŸ«¡Â </em></s></p> 
<hr> 
<h2 id="%E5%9B%9E%E9%A1%BE">å›é¡¾</h2> 
<p>Â  Â  Â  Â  å›å¿†ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰æ˜¯å¦‚ä½•å­˜å‚¨å’Œä½¿ç”¨Beanå¯¹è±¡çš„, é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨springé…ç½®æ–‡ä»¶å†™å…¥Beanå¯¹è±¡, æˆ–è€…è¯´æ˜¯springå®¹å™¨ä¸­æ³¨å…¥Beanå¯¹è±¡:</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;
        &lt;bean id="user1" class="org.example.User"&gt;&lt;/bean&gt;
        &lt;bean id="user2" class="org.example.User"&gt;&lt;/bean&gt;
&lt;/beans&gt;</code></pre> 
<p>Â  Â  Â  Â  ç„¶ååœ¨å¯åŠ¨ç±»ä¸­newå‡ºä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡, è¦ä¹ˆä½¿ç”¨BeanFactory, è¦ä¹ˆä½¿ç”¨ApplicationContext, ç„¶åè°ƒç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­çš„getBeanæ–¹æ³•, æ¥è·å–åˆ°å¯¹åº”çš„Beanå¯¹è±¡.Â </p> 
<p>Â  Â  Â  Â  ä½†æ˜¯æˆ‘æ¯æ¬¡ä½¿ç”¨éƒ½è¦å»åœ¨springé…ç½®æ–‡ä»¶ä¸­å†™å…¥beanæ ‡ç­¾, ç„¶åå†™ä¸Šå¯¹åº”idå’Œç±». è¿™äº›æ­¥éª¤è¿‡äºç¹ç, äºæ˜¯springçš„ä½œè€…å°±åˆ›é€ å‡ºäº†ä¸€ç§æ›´ç®€å•çš„æ–¹å¼, é‚£å°±æ˜¯ç›´æ¥åœ¨å¯¹åº”çš„ç±»ä¸‹é¢å†™ä¸Šæ³¨è§£, æ³¨è§£ä¸­å¡«å…¥id, å°±çœå»äº†å†™è·¯å¾„çš„ç—›è‹¦.</p> 
<p>Â  Â  Â  Â  æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥ç›´æ¥é€šè¿‡ä¸€è¡Œæ³¨è§£, æ¥ä»£æ›¿æˆ‘ä»¬ä¹‹å‰è¦å†™ä¸€è¡Œé…ç½®çš„å°´å°¬äº†,</p> 
<p>Â  Â  Â  Â  ä¸è¿‡åœ¨å†™æ³¨è§£ä¹‹å‰éœ€è¦ä¸€ç‚¹å‡†å¤‡å·¥ä½œ.</p> 
<p>Â  Â  Â  Â  é¦–å…ˆåœ¨è¿™ä¹‹å‰æˆ‘ä»¬åº”è¯¥å»äº†è§£ä¸€ä¸‹è·å–Beanå¯¹è±¡çš„æ–¹æ³•, ä¹Ÿå°±æ˜¯getBeanæ–¹æ³•</p> 
<h2 id="getBean()%E6%96%B9%E6%B3%95%E7%9A%84%E4%BD%BF%E7%94%A8%C2%A0">getBean()æ–¹æ³•çš„ä½¿ç”¨Â </h2> 
<p>Â  Â  Â  Â  Â springå®¹å™¨æä¾›äº†äº”ç§è·å–Beançš„æ–¹æ³•, å¯ä»¥æ ¹æ®Beançš„nameæ¥è·å–Bean, ä¹Ÿå¯ä»¥æ ¹æ®classType æ¥è·å–Beanå¯¹è±¡, æ‰€æœ‰çš„æ ¹æ®Beançš„nameæ¥è·å–Beançš„æ–¹æ³•, æœ€ååº•å±‚éƒ½ä¼šè°ƒç”¨ä¸‹é¢çš„doGetBeanæ–¹æ³•æ¥è·å–Beanå¯¹è±¡</p> 
<h3 id="%E6%A0%B9%E6%8D%AEname%E6%9D%A5%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1">æ ¹æ®nameæ¥è·å–å¯¹è±¡</h3> 
<p>Â  Â  Â  Â  Â spring å®¹å™¨æä¾›äº†ä¸‰ç§æ ¹æ®Bean çš„nameæ¥è·å–Beançš„æ–¹æ³•;</p> 
<pre><code class="language-java">        BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("springConfig.xml"));
        User user = (User) beanFactory.getBean("user");
        User user1 = (User) beanFactory.getBean("user", User.class);
        User user2 = (User) beanFactory.getBean("user", new OrderUser());</code></pre> 
<ul><li>Â getBean("user") æ˜¯æ ¹æ®Beançš„name æ¥è·å–Beanå¯¹è±¡</li><li>Â getBean("user", User.class) æ˜¯æ ¹æ®Beançš„nameæ¥è·å–Bean, ç„¶ååˆ¤æ–­Beanæ˜¯å¦å±äºUserç±»</li><li>Â  getBean("user", new OrderUser());åˆ™æ˜¯ä½¿ç”¨è‡ªå®šä¹‰çš„æ–¹æ³•æ¥ç”ŸæˆBeanå¯¹è±¡</li></ul> 
<p>Â  Â  Â  Â  ä¸Šé¢ä¸‰ç§æ–¹æ³•éƒ½ä¼šè°ƒç”¨doGetBeanæ–¹æ³•æ¥ç”ŸæˆBeanå¯¹è±¡, ä¸‹é¢æ˜¯doGetBeanæ–¹æ³•çš„åŸç :</p> 
<pre><code class="language-java">protected &lt;T&gt; T doGetBean(
    String name, @Nullable Class&lt;T&gt; requiredType, @Nullable Object[] args, boolean typeCheckOnly)
    throws BeansException {

    // nameæœ‰å¯èƒ½æ˜¯ &amp;xxx æˆ–è€… xxxï¼Œå¦‚æœnameæ˜¯&amp;xxxï¼Œé‚£ä¹ˆbeanNameå°±æ˜¯xxx
    // nameæœ‰å¯èƒ½ä¼ å…¥è¿›æ¥çš„æ˜¯åˆ«åï¼Œé‚£ä¹ˆbeanNameå°±æ˜¯id
    String beanName = transformedBeanName(name);
    Object beanInstance;

    // Eagerly check singleton cache for manually registered singletons.
    Object sharedInstance = getSingleton(beanName);
    if (sharedInstance != null &amp;&amp; args == null) {
        // å¦‚æœsharedInstanceæ˜¯FactoryBeanï¼Œé‚£ä¹ˆå°±è°ƒç”¨getObject()è¿”å›å¯¹è±¡
        beanInstance = getObjectForBeanInstance(sharedInstance, name, beanName, null);
    }
</code></pre> 
<p>Â  Â  Â  Â  çœŸæ­£çš„BeanNameæ¥è‡ªè¿™ä¸ªtransformedBeanName(name) æ–¹æ³•;Â </p> 
<p>Â  Â  Â  Â  ä¸‹é¢æ˜¯è¿™ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°:</p> 
<pre><code class="language-java">protected String transformedBeanName(String name) {
    return canonicalName(BeanFactoryUtils.transformedBeanName(name));
}
</code></pre> 
<p>Â  Â  Â  Â  Â é¡ºè—¤æ‘¸ç“œ. å…ˆæ¥çœ‹çœ‹BeanFactoryUtils.transformedBeanName(name) çš„å®ç°:</p> 
<pre><code class="language-java">public static String transformedBeanName(String name) {
    Assert.notNull(name, "'name' must not be null");
    if (!name.startsWith(BeanFactory.FACTORY_BEAN_PREFIX)) {
        return name;
    }
    return transformedBeanNameCache.computeIfAbsent(name, beanName -&gt; {
        do {
            beanName = beanName.substring(BeanFactory.FACTORY_BEAN_PREFIX.length());
        }
        while (beanName.startsWith(BeanFactory.FACTORY_BEAN_PREFIX));
        return beanName;
    });
}
</code></pre> 
<p>Â  Â  Â  Â  Â ä»€ä¹ˆæ˜¯BeanFactory.<span style="color:#511b78;"><strong>FACTORY_BEAN_PREFIX</strong></span>?</p> 
<p class="img-center"><img alt="" height="146" src="https://images2.imgbox.com/9a/da/VGQ6sL6n_o.png" width="567"></p> 
<p>Â  Â  Â  Â  ç¿»é˜…åŸç å¯ä»¥çŸ¥é“è¿™ä¸ªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡, å€¼ä¸º"&amp;".</p> 
<p>Â  Â  Â  Â  æˆ‘ä»¬å†æ¥çœ‹çœ‹Stringçš„subStringæ–¹æ³•:<img alt="" height="59" src="https://images2.imgbox.com/d4/69/RJLAiIcz_o.png" width="763"></p> 
<p>Â  Â  Â  Â  Â ç»“åˆåŸç , ä¹Ÿå°±æ˜¯è¯´beanNameçš„ç”Ÿæˆä¸º:</p> 
<pre><code class="language-java">beanName = beanName.subString(1);</code></pre> 
<p>Â  Â  Â  Â  é‡Œå±‚æ˜¯ä¸€ä¸ªdo whileå¾ªç¯, ä¹Ÿå°±æ˜¯å…ˆå»æ‰ä¸€ä¸ªå­—ç¬¦, ç„¶åå¾ªç¯æŸ¥çœ‹beanNameçš„å‰é¢æ˜¯å¦æœ‰"&amp;"å­—ç¬¦, å¦‚æœæœ‰å°±ä¸€ç›´å»æ‰è¿™&amp;å­—ç¬¦.Â </p> 
<p>Â  Â  Â  Â  å¦‚æœä¼ è¿›æ¥çš„nameä»ä¸€å¼€å§‹å°±ä¸æ˜¯&amp;å­—ç¬¦å¼€å¤´çš„å­—ç¬¦ä¸², é‚£ä¹ˆå°±ç›´æ¥è¿”å›å½“å‰çš„name.Â </p> 
<p>Â  Â  Â  Â  æ€»ç»“æ¥è¯´å°±æ˜¯Â BeanFactoryUtils.transformedBeanName(name) æ˜¯å»æ‰nameå‰é¢çš„æ‰€æœ‰çš„&amp;å­—ç¬¦</p> 
<p>Â  Â  Â  Â  æ¥ä¸‹æ¥å›å¤´çœ‹çœ‹è¿™ä¸ªcanonicalNameæ–¹æ³•:</p> 
<pre><code class="language-java">protected String transformedBeanName(String name) {
    return canonicalName(BeanFactoryUtils.transformedBeanName(name));
}
</code></pre> 
<p>Â  Â  Â  Â  Â çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°:</p> 
<pre><code class="language-java">public String canonicalName(String name) {
    String canonicalName = name;
    // Handle aliasing...
    String resolvedName;
    do {
        resolvedName = this.aliasMap.get(canonicalName);
        if (resolvedName != null) {
            canonicalName = resolvedName;
        }
    }
    while (resolvedName != null);
    return canonicalName;
}
</code></pre> 
<p>Â è§£æ:</p> 
<ul><li>String name ä¸ºä¸Šé¢ä¸€å±‚å‡½æ•°BeanFactoryUtils.transformedBeanName(name) ä¼ è¿‡æ¥çš„å»æ‰å¼€å¤´çš„æ‰€æœ‰çš„&amp;å­—ç¬¦çš„å­—ç¬¦ä¸².</li><li>æ­¤å‡½æ•°é‡Œé¢é¦–å…ˆä½¿ç”¨canonicalNameå­—ç¬¦ä¸²å¯¹è±¡å°†è¿™ä¸ªå»æ‰&amp;çš„å­—ç¬¦ä¸²ç»™å­˜èµ·æ¥äº†.</li><li>åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡: resolvedName</li><li>éšåè¿›å…¥dowhileå¾ªç¯, é¦–å…ˆæ˜¯è°ƒç”¨äº†this.aliasMap.get(canonicalName);</li><li>aliasMapæ˜¯ä¸€ä¸ªhashMap, è¿™é‡Œè°ƒç”¨getæ–¹æ³•æ‹¿åˆ°key = canonicalName, å¦‚æœå¯¹åº”valueå€¼ä¸ä¸ºç©º, é‚£ä¹ˆå°±å°†è¿™ä¸ªå€¼èµ‹å€¼ç»™canonicalName, ç„¶åè¿”å›è¿™ä¸ªå€¼canonicalName.</li></ul> 
<p><img alt="" height="41" src="https://images2.imgbox.com/37/c5/uJkOzpSU_o.png" width="875"></p> 
<p>Â Â Â Â Â Â Â Â Beançš„åˆ«åå­˜æ”¾åœ¨ä¸€ä¸ªaliasMapä¸­ï¼Œå…¶ä¸­KEY=åˆ«åï¼ŒVALUE=beanName/åˆ«åï¼Œæ ¹æ®åˆ«åä»aliasMapä¸­æ‹¿åˆ°çš„å¯èƒ½æ˜¯çœŸæ­£çš„beanNameï¼Œä¹Ÿå¯èƒ½è¿˜æ˜¯ä¸€ä¸ªåˆ«åï¼Œæ‰€ä»¥ç”¨do-whileå¾ªç¯ï¼Œç›´åˆ°æ‹¿å‡ºæ¥çš„åå­—ä»aliasMapå†æ‰¾ä¸åˆ°å¯¹åº”çš„å€¼ï¼Œé‚£ä¹ˆè¯¥åå­—å°±æ˜¯çœŸæ­£çš„beanNameäº†</p> 
<p>Â Â Â Â Â Â Â Â å¯¹bean è¿›è¡Œå®šä¹‰çš„æ—¶å€™ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨id å‘½åï¼Œä¸ºäº†æä¾›å¤šä¸ªåˆ«åï¼Œä½¿ç”¨aliasæ¥æŒ‡å®šï¼Œè¿™äº›æ‰€æœ‰çš„åç§°éƒ½æŒ‡å‘åŒä¸€ä¸ªbean:</p> 
<pre><code class="language-XML">&lt;bean class="User1" name="user1"/&gt;
&lt;alias name="user1" alias="user2,user3"/&gt;
</code></pre> 
<h3 id="%E5%86%8D%E8%B0%88getBean()">å†è°ˆgetBean()</h3> 
<p>Â  Â  Â  Â  æˆ‘ä»¬æ˜æ˜å°±å¯ä»¥æ ¹æ®ä¸€ä¸ªString nameæ¥é”å®šä¸€ä¸ªBeanå¯¹è±¡, ä¸ºä»€ä¹ˆåé¢è¿˜éœ€è¦ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•° XXX.class??</p> 
<p>Â  Â  Â  Â  é¦–å…ˆæˆ‘ä»¬å¦‚æœä¼ å…¥xxx.class, æˆ‘ä»¬åœ¨è·å–Beanå¯¹è±¡çš„æ—¶å€™, æ˜¯è¿”å›ä¸€ä¸ªObjectç±»å‹çš„å¯¹è±¡, è¿™ä¸ªæ—¶å€™è¿˜éœ€è¦æˆ‘ä»¬è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹, ä½†æ˜¯è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šå‡ºé”™. ä¹Ÿå°±æ˜¯è¯´, å¦‚æœå°†å…¶è½¬æ¢æˆäº†ä¸€ä¸ªä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ç±», é‚£ä¹ˆåœ¨è¿è¡ŒæœŸé—´å°±ä¼šæŠ›å‡ºå¼‚å¸¸.Â  Â  Â  Â Â </p> 
<p>Â  Â  Â  Â  æˆ‘ä»¬ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªclass,Â æ­¤æ–¹æ³•æ›´å®‰å…¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç¼–è¯‘é˜¶æ®µå°±å‘ç°é”™è¯¯è€Œä¸æ˜¯åœ¨è¿è¡Œé˜¶æ®µã€‚Â </p> 
<p><img alt="" height="55" src="https://images2.imgbox.com/97/a4/9g59SHpn_o.png" width="702"></p> 
<h2 id="(1)%20%E9%85%8D%E7%BD%AE%E6%89%AB%E6%8F%8F%E8%B7%AF%E5%BE%84">(1) é…ç½®æ‰«æè·¯å¾„</h2> 
<p>Â  Â  Â  Â  Â æƒ³è¦å°†å¯¹è±¡æˆåŠŸå­˜å‚¨åˆ°å®¹å™¨ä¸­, æˆ‘ä»¬éœ€è¦å…ˆé…ç½®ä¸€ä¸‹å­˜å‚¨å¯¹è±¡çš„æ‰«æè·¯å¾„, åªæœ‰è¢«æ‰«æåˆ°çš„åŒ…ä¸‹çš„ç±», æ·»åŠ æ³¨è§£æ‰èƒ½è¢«æˆåŠŸçš„è¯†åˆ«åˆ°å¹¶è¢«ä¿å­˜åˆ°å®¹å™¨ä¸­.</p> 
<p>Â  Â  Â  Â  é¦–å…ˆæˆ‘ä»¬æ‹¿ä¸‹é¢è¿™ä¸ªè¿™ä¸ªç›®å½•ç»“æ„ä¸ºä¾‹:</p> 
<p class="img-center"><img alt="" height="227" src="https://images2.imgbox.com/29/ef/ceDSxEgi_o.png" width="407"></p> 
<p>Â å…¶ä¸­Userç±»çš„ä»£ç å¦‚ä¸‹:</p> 
<pre><code class="language-java">package org.example;

public class User {
    public void sayHi() {
        System.out.println("hello, how are you?");
    }
}
</code></pre> 
<p>Studentçš„ä»£ç å¦‚ä¸‹:</p> 
<pre><code class="language-java">package org.select;

public class Student {
    public void sayHi() {
        System.out.println("hello student!! ");
    }
}
</code></pre> 
<p>Â Â Â Â Â Â Â Â ä¸‹é¢æˆ‘ä»¬é¦–å…ˆæ·»åŠ æ‰«æè·¯å¾„, æˆ‘ä»¬æ‰«æselectåŒ…ä¸‹çš„æ‰€æœ‰çš„ç±», äºæ˜¯å°±åœ¨springé…ç½®æ–‡ä»¶ä¸­å†™å…¥å…¶æ‰«æè·¯å¾„:</p> 
<pre><code class="language-XML">&lt;content:component-scan base-package="org.select"&gt;&lt;/content:component-scan&gt;</code></pre> 
<p>Â  Â  Â  Â  å°†å…¶è®¿é—®springé…ç½®æ–‡ä»¶çš„beansæ ‡ç­¾ä¸­:</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:content="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"&gt;

        &lt;content:component-scan base-package="org.select"&gt;&lt;/content:component-scan&gt;
&lt;/beans&gt;</code></pre> 
<p>Â  Â  Â  Â  -- å…¶å®æ·»åŠ è¿™ä¸ªæ‰«æè·¯å¾„ å°±æ˜¯ä¸ºäº†æ›´åŠ ç²¾ç¡®çš„æ‰«æå‡ºéœ€è¦çš„ç±»çš„æ‰€åœ¨çš„åŒ…, ä¸ºäº†æ›´ä½³çš„æ€§èƒ½</p> 
<h2 id="(2)%20%E6%B7%BB%E5%8A%A0%E6%B3%A8%E8%A7%A3">(2) æ·»åŠ æ³¨è§£</h2> 
<p>Â  Â  Â  Â  æƒ³è¦é€šè¿‡æ·»åŠ æ³¨è§£çš„æ–¹å¼æ¥å­˜å‚¨Beanå¯¹è±¡, é‚£ä¹ˆé¦–å…ˆå°±éœ€è¦å»äº†è§£ä¸€ä¸‹springçš„æ³¨è§£:</p> 
<h3 id="%E2%91%A0%20spring%E6%B3%A8%E8%A7%A3%E7%AE%80%E4%BB%8B%C2%A0">â‘  springæ³¨è§£ç®€ä»‹Â </h3> 
<p>Springçš„æ³¨è§£æ˜¯ä¸€ç§ç”¨äºç®€åŒ–é…ç½®å’Œå¼€å‘çš„æ–¹å¼ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´è½»æ¾åœ°ä½¿ç”¨Springæ¡†æ¶ã€‚ä¸‹é¢æ˜¯å‡ ä¸ªå¸¸ç”¨çš„Springæ³¨è§£çš„ä»‹ç»ï¼š</p> 
<ol><li> <p>@Autowiredï¼šç”¨äºè‡ªåŠ¨è£…é…ä¾èµ–å…³ç³»ã€‚å½“Springå®¹å™¨éœ€è¦ä¸ºä¸€ä¸ªå±æ€§æ³¨å…¥ä¸€ä¸ªbeanæ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾ä¸è¯¥å±æ€§ç±»å‹åŒ¹é…çš„beanï¼Œå¹¶å°†å…¶è‡ªåŠ¨æ³¨å…¥åˆ°å±æ€§ä¸­ã€‚</p> </li><li> <p>@Qualifierï¼šç”¨äºæŒ‡å®šè¦æ³¨å…¥çš„beançš„åç§°ã€‚å½“æœ‰å¤šä¸ªä¸å±æ€§ç±»å‹åŒ¹é…çš„beanæ—¶ï¼Œå¯ä»¥ä½¿ç”¨@Qualifieræ³¨è§£æ¥æŒ‡å®šè¦æ³¨å…¥çš„beançš„åç§°ã€‚</p> </li><li> <p>@Componentï¼šç”¨äºå°†ä¸€ä¸ªç±»æ ‡è®°ä¸ºSpringå®¹å™¨çš„ç»„ä»¶ã€‚è¢«æ ‡è®°ä¸º@Componentçš„ç±»å°†è¢«Springè‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œä¸ºbeanã€‚</p> </li><li> <p>@Controllerï¼šç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä½œä¸ºSpring MVCçš„æ§åˆ¶å™¨ã€‚è¢«æ ‡è®°ä¸º@Controllerçš„ç±»å°†å¤„ç†HTTPè¯·æ±‚å¹¶è¿”å›ç›¸åº”çš„è§†å›¾ã€‚</p> </li><li> <p>@Serviceï¼šç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä½œä¸ºä¸šåŠ¡é€»è¾‘å±‚çš„ç»„ä»¶ã€‚è¢«æ ‡è®°ä¸º@Serviceçš„ç±»é€šå¸¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œå¹¶è¢«å…¶ä»–ç»„ä»¶è°ƒç”¨ã€‚</p> </li><li> <p>@Repositoryï¼šç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä½œä¸ºæ•°æ®è®¿é—®å±‚çš„ç»„ä»¶ã€‚è¢«æ ‡è®°ä¸º@Repositoryçš„ç±»é€šå¸¸ç”¨äºè®¿é—®æ•°æ®åº“æˆ–å…¶ä»–æŒä¹…åŒ–å­˜å‚¨ã€‚</p> </li><li> <p>@Configurationï¼šç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä½œä¸ºSpringçš„é…ç½®ç±»ã€‚è¢«æ ‡è®°ä¸º@Configurationçš„ç±»é€šå¸¸åŒ…å«äº†ä¸€äº›ç”¨äºé…ç½®Springå®¹å™¨çš„beanå®šä¹‰ã€‚</p> </li><li> <p>@Beanï¼šç”¨äºåœ¨é…ç½®ç±»ä¸­å®šä¹‰ä¸€ä¸ªbeanã€‚è¢«æ ‡è®°ä¸º@Beançš„æ–¹æ³•å°†è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å…¶æ³¨å†Œä¸ºSpringå®¹å™¨çš„beanã€‚</p> </li><li> <p>@Valueï¼šç”¨äºæ³¨å…¥å±æ€§å€¼ã€‚å¯ä»¥å°†@Valueæ³¨è§£åº”ç”¨äºå±æ€§ä¸Šï¼Œä»è€Œå°†å±æ€§å€¼ä»é…ç½®æ–‡ä»¶ä¸­æ³¨å…¥åˆ°å±æ€§ä¸­ã€‚</p> </li></ol> 
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨@Autowiredå’Œ@Qualifieræ³¨è§£çš„ç¤ºä¾‹ï¼š</p> 
<pre><code class="language-java">@Component
public class MyComponent {
    @Autowired
    @Qualifier("myBean")
    private MyBean myBean;
    
    // ...
}</code></pre> 
<p>Â  Â  Â  Â  æ¥ä¸‹æ¥æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¯¥å¦‚ä½•ä½¿ç”¨...!!!</p> 
<h3 id="%E2%91%A1%20%E5%AF%B9%E7%B1%BB%E6%B3%A8%E8%A7%A3%E7%9A%84%E4%BD%BF%E7%94%A8">â‘¡ å¯¹ç±»æ³¨è§£çš„ä½¿ç”¨</h3> 
<pre><code class="language-java">BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("springConfig.xml"));
        Student student = beanFactory.getBean("student", Student.class);
        student.sayHi();</code></pre> 
<p>Â è¾“å‡º:<br><img alt="" height="83" src="https://images2.imgbox.com/45/e2/XXD0yvU8_o.png" width="400"></p> 
<p>Â  Â  Â  Â  ä½¿ç”¨springå®¹å™¨æ‰‹åŠ¨æ·»åŠ Beanå¯¹è±¡å’Œæ‰«ææ³¨è§£Beanå¯¹è±¡æ˜¯å¯ä»¥æ··ç”¨çš„.</p> 
<h3 id="%E2%91%A2%20%E6%B3%A8%E8%A7%A3Bean%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%91%BD%E5%90%8D%E9%97%AE%E9%A2%98">â‘¢ æ³¨è§£Beanå¯¹è±¡çš„å‘½åé—®é¢˜</h3> 
<p>Â  Â  Â  Â  ä½¿ç”¨æ³¨è§£è®¿é—®Beanå¯¹è±¡, é‚£ä¹ˆgetBeanä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å¼€å¤´å­—æ¯ç›´æ¥å°å†™å³å¯, ä½†æ˜¯å¦‚æœé¦–å­—æ¯å’Œç¬¬äºŒä¸ªå­—æ¯éƒ½æ˜¯å¤§å†™, é‚£ä¹ˆå¼€å¤´ä¸€ä¸ªå­—æ¯å°å†™æ˜¯é”™è¯¯çš„, è¿™ä¸ªæ—¶å€™ç›´æ¥ä½¿ç”¨åŸæ¥çš„ç±»åå³å¯.Â </p> 
<p>å…¶æºç å¦‚ä¸‹:</p> 
<pre><code class="language-java">public static String decapitalize(String name) {
 if (name == null || name.length() == 0) {
 return name;
 }
 // å¦‚æœç¬¬â¼€ä¸ªå­—âºŸå’Œç¬¬â¼†ä¸ªå­—âºŸéƒ½ä¸ºâ¼¤å†™çš„æƒ…å†µï¼Œæ˜¯æŠŠ bean çš„â¾¸å­—âºŸä¹Ÿâ¼¤å†™å­˜å‚¨äº†
 if (name.length() &gt; 1 &amp;&amp; Character.isUpperCase(name.charAt(1)) &amp;&amp;
 Character.isUpperCase(name.charAt(0))){
 return name;
 }
 // å¦åˆ™å°±å°†â¾¸å­—âºŸâ¼©å†™
 char chars[] = name.toCharArray();
 chars[0] = Character.toLowerCase(chars[0]);
 return new String(chars);
}</code></pre> 
<p>ä¸¾ä¸ªä¾‹å­, æœ‰ä¸‰ä¸ªç±», ä»–ä»¬æ·»åŠ äº†æ³¨è§£, ç„¶åä½¿ç”¨getBeanæ–¹æ³•å–å‡ºå»Beanå¯¹è±¡, å¦‚ä¸‹:Â </p> 
<p><img alt="" height="410" src="https://images2.imgbox.com/4a/2e/Fl3XHDcp_o.png" width="1200"></p> 
<p>Â  Â  Â  Â  å…¶ä¸­ç¬¬äºŒç§å°±ä¼šæ‰¾ä¸åˆ°Beanå¯¹è±¡.</p> 
<h3 id="%E2%91%A3%20%E6%96%B9%E6%B3%95%E5%8A%A0Bean%E6%B3%A8%E8%A7%A3">â‘£ æ–¹æ³•åŠ Beanæ³¨è§£</h3> 
<p>Â  Â  Â  Â  ä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªTest1ç±», æ­¤ç±»ä¸­æœ‰ä¸¤ä¸ªå­—æ®µ, åŒæ—¶å®ç°äº†å…¶toStringæ–¹æ³•, ä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡æ·»åŠ Beanæ³¨è§£çš„æ–¹æ³•æ¥å°†è¿™ä¸ªç±»æ³¨å…¥åˆ°å®¹å™¨:</p> 
<pre><code class="language-java">package org.example2;

/**
 * æ™®é€šçš„æ–‡ç« å®ä½“ç±»
 */
public class Test1 {
    private int age;
    private String name;

    @Override
    public String toString() {
        return "Test1{" +
                "age=" + age +
                ", name='" + name + '\'' +
                '}';
    }
}
</code></pre> 
<p>Â  Â  Â  Â  ä½†æ˜¯@Beanæ³¨è§£å¿…é¡»é…åˆäº”å¤§ç±»æ³¨è§£ä¸€èµ·ä½¿ç”¨</p> 
<pre><code class="language-java">package org.select;

/**
 * æ™®é€šçš„æ–‡ç« å®ä½“ç±»
 */
public class Test1 {
    private int age;
    private String name;

    @Override
    public String toString() {
        return "Test1{" +
                "age=" + age +
                ", name='" + name + '\'' +
                '}';
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
</code></pre> 
<p>Â  Â  Â  Â  æ·»åŠ Beanæ³¨è§£å’Œäº”å¤§ç±»æ³¨è§£:</p> 
<pre><code class="language-java">package org.example2;

import org.select.Test1;
import org.springframework.context.annotation.Bean;
import org.springframework.stereotype.Controller;

@Controller
public class RetTest1 {
    @Bean
    public Test1 returnTest() {
        Test1 test1 = new Test1();
        test1.setAge(18);
        test1.setName("å¼ ä¸‰");
        return test1;
    }
}
</code></pre> 
<p>Â  Â  Â  Â  æ–‡ç« ç›®å½•ç»“æ„:</p> 
<p><img alt="" height="262" src="https://images2.imgbox.com/77/c7/kkw8N8Ah_o.png" width="243"></p> 
<p>Â  Â  Â  Â  æ·»åŠ æ‰«æè·¯å¾„:</p> 
<pre><code class="language-XML">&lt;content:component-scan base-package="org.example2"&gt;&lt;/content:component-scan&gt;</code></pre> 
<p>Â  Â  Â  Â  Â é…ç½®ä¸Šä¸‹æ–‡, ä½¿ç”¨getBeanè·å–Test1 çš„å¯¹è±¡</p> 
<pre><code class="language-java">ApplicationContext context = new ClassPathXmlApplicationContext("springConfig.xml");
//        BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource("springConfig.xml"));
        RetTest1 retTest1 = context.getBean("retTest1", RetTest1.class);
        retTest1.sayHi();
        Test1 test1 = context.getBean("test1", Test1.class);
        System.out.println(test1.toString());</code></pre> 
<p>Â  Â  Â  Â  Â -- è¾“å‡ºç»“æœå¦‚ä¸‹:</p> 
<p><img alt="" height="116" src="https://images2.imgbox.com/76/42/ayqaDMOe_o.png" width="439"></p> 
<p>Â  Â  Â  Â  å¯ä»¥å‘ç°, ä¸€ä¸ªç±»çš„æ–¹æ³•æ·»åŠ äº†@Beanæ³¨è§£, è¿™ä¸ª@Beanæ³¨è§£å¯ä»¥è®©è¢«æ ‡è®°çš„æ–¹æ³•è¿”å›çš„å¯¹è±¡å­˜å‚¨è¿›å…¥å®¹å™¨, åŒæ—¶@Beanéœ€è¦é…åˆäº”å¤§ç±»æ³¨è§£è¿›è¡Œ, æ‰€ä»¥è¢«äº”å¤§ç±»æ³¨è§£æ ‡è®°çš„ç±»å¯¹è±¡åŒæ ·ä¹Ÿä¼šè¢«å­˜å…¥å®¹å™¨.</p> 
<p>Â  Â  Â  Â  éœ€è¦æ³¨æ„çš„æ˜¯, ä½¿ç”¨@Beanæ³¨è§£çš„æ—¶å€™, è¿™é‡Œå¦‚æœå»ä½¿ç”¨BeanFactoryå»è·å–ä¸Šä¸‹æ–‡çš„è¯, å°±ä¼šæ‰¾ä¸åˆ°@Beanæ³¨è§£çš„æ–¹æ³•è¿”å›çš„ç±».</p> 
<p>Â  Â  Â  Â  è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯, æœ€å@Beanæ³¨è§£çš„æ–¹æ³•, åœ¨è·å–è¿™ä¸ªç±»çš„æ—¶å€™, getBeanä¸­çš„å‚æ•°æ˜¯@Beanæ³¨è§£çš„æ–¹æ³•å, è€Œä¸æ˜¯ç±»å.</p> 
<p><img alt="" height="162" src="https://images2.imgbox.com/0d/34/MyeN8u2a_o.png" width="922"></p> 
<p>Â  Â  Â  Â  å¦‚æœå°†ApplicationContext è·å–çš„ä¸Šä¸‹æ–‡å¯¹è±¡æ¢æˆ BeanFactory, å°±ä¼šæ˜¾ç¤ºå¦‚ä¸‹:<br><img alt="" height="194" src="https://images2.imgbox.com/4d/30/jZ3Ir1yo_o.png" width="1200"></p> 
<blockquote> 
 <p>Â  Â  Â  Â  åŸå› å®šä½:<br> Â Â Â Â Â Â Â Â ä½¿ç”¨`new XmlBeanFactory(new ClassPathResource("bean.xml"))`å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡æ˜¯æ— æ³•è¯»å–Springæ³¨è§£é…ç½®æ–‡ä»¶çš„ï¼Œå› ä¸º`XmlBeanFactory`åªèƒ½è§£æXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè€Œæ— æ³•è§£ææ³¨è§£é…ç½®ã€‚è€Œ`ClassPathXmlApplicationContext`å¯ä»¥åŒæ—¶è§£æXMLå’Œæ³¨è§£é…ç½®æ–‡ä»¶ï¼Œå› æ­¤ä½¿ç”¨`new ClassPathXmlApplicationContext("bean.xml")`å¯ä»¥æˆåŠŸè¯»å–Springæ³¨è§£é…ç½®æ–‡ä»¶ã€‚</p> 
</blockquote> 
<p>Â  Â  Â  Â  æ‰€ä»¥æˆ‘ä»¬åœ¨IDEAä¸­ä½¿ç”¨BeanFactoryçš„æ—¶å€™å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåˆ é™¤çº¿:<br><img alt="" height="135" src="https://images2.imgbox.com/44/33/r2iWJgFm_o.png" width="959"><br> Â  Â  Â  Â  æ­¤åˆ é™¤çº¿çš„æ„æ€æ˜¯ IDEA ä¸æ¨èä½¿ç”¨è¿™ä¸ªæ–¹æ³•, è€Œä¸æ˜¯è¯´ä¸èƒ½ç”¨, ä¸æ¨èä½¿ç”¨çš„åŸå› æ˜¯æ­¤æ–¹æ³•å·²ç»è¿‡æ—¶, æœ‰æ›´å¥½, æ›´å®‰å…¨çš„æ–¹æ³•æ›¿ä»£. ä¾‹å¦‚ ApplicationContext.</p> 
<p></p> 
<h2 id="(3)%20%40Bean%20%E6%B3%A8%E8%A7%A3%E7%9A%84%E9%87%8D%E5%91%BD%E5%90%8D">(3) @Bean æ³¨è§£çš„é‡å‘½å</h2> 
<p>Â Â Â Â Â Â Â Â Â ä»¥ä¸‹æ˜¯@Beanæ³¨è§£çš„æºç , æˆ‘ä»¬å¯ä»¥å‚è€ƒå‚è€ƒ</p> 
<pre><code class="language-java">//
// Source code recreated from a .class file by IntelliJ IDEA
// (powered by FernFlower decompiler)
//

package org.springframework.context.annotation;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import org.springframework.beans.factory.annotation.Autowire;
import org.springframework.core.annotation.AliasFor;

@Target({ElementType.METHOD, ElementType.ANNOTATION_TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Bean {
    @AliasFor("name")
    String[] value() default {};

    @AliasFor("value")
    String[] name() default {};

    /** @deprecated */
    @Deprecated
    Autowire autowire() default Autowire.NO;

    boolean autowireCandidate() default true;

    String initMethod() default "";

    String destroyMethod() default "(inferred)";
}
</code></pre> 
<p>Â  Â  Â  Â  åœ¨ä½¿ç”¨@Beanæ³¨è§£çš„æ—¶å€™, å¯ä»¥é€šè¿‡name å±æ€§æ¥å¯¹Beanè¿›è¡Œé‡æ–°å‘½å, ä¾‹å¦‚å°†ä¸‹é¢ä¸€ä¸ªåä¸ºmyBeançš„Beanå¯¹è±¡é‡æ–°å‘½åä¸ºnewName:</p> 
<pre><code class="language-java">@Bean(name = "newName")
public MyBean myBean() {
    return new MyBean();
}</code></pre> 
<p>Â  Â  Â  Â  æˆ–è€…æ˜¯ç›´æ¥åœ¨é‡Œé¢ä¼ å…¥å­—ç¬¦ä¸², å³name = æ­¤å­—ç¬¦ä¸²</p> 
<p class="img-center"><img alt="" height="170" src="https://images2.imgbox.com/3a/06/koVcjsJo_o.png" width="280"></p> 
<p>Â Â Â Â Â Â Â Â æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>@Bean</code>æ³¨è§£çš„<code>value</code>å±æ€§æ¥è¿›è¡Œé‡å‘½åï¼Œä¾‹å¦‚ï¼š</p> 
<pre><code class="language-java">@Bean(name = "newName")
public MyBean myBean() {
    return new MyBean();
}</code></pre> 
<p>Â  Â  Â  Â  Â æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹è¿™ä¸‰ç§æ–¹å¼:</p> 
<p class="img-center"><img alt="" height="215" src="https://images2.imgbox.com/fc/28/odoHK3UJ_o.png" width="427"></p> 
<p>Â  Â  Â  Â  @Beanæ”¯æŒæŒ‡å®šå¤šä¸ªåˆ«åÂ </p> 
<p>Â  Â  Â  Â  Â <strong>éœ€è¦æ³¨æ„çš„æ˜¯, ä¸ç®¡æ˜¯value è¿˜æ˜¯ name æ¥å‘½åè¿™ä¸ªBeanæ³¨è§£, éƒ½ä¸èƒ½å†ä½¿ç”¨åŸæ¥çš„æ–¹æ³•åæ¥è·å–è¿™ä¸ªBeanå¯¹è±¡äº†</strong>.</p> 
<p class="img-center"><img alt="" height="143" src="https://images2.imgbox.com/11/6f/wuSJpgPB_o.png" width="337"></p> 
<p>Â  Â  Â  Â  ä¸ç®¡æ˜¯valueè¿˜æ˜¯name. å®ƒä»¬éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„, å¯ä»¥ä¼ å…¥å¤šä¸ªåˆ«å:</p> 
<pre><code class="language-java"> @Bean( value = {"newName","newName2","newName3"})
    public Test1 test1() {
        Test1 test1 = new Test1();
        test1.setAge(18);
        test1.setName("å¼ ä¸‰");
        return test1;
    }</code></pre> 
<p>Â  Â  Â  Â  ä½†æ˜¯è¿™å‡ ä¸ªåå­—newName, newName2,newName3éƒ½æ˜¯æŒ‡çš„åŒä¸€ä¸ªç±».Â </p> 
<p>Â  Â  Â  Â  éœ€è¦æ³¨æ„çš„ä¸€ä¸ªé—®é¢˜æ˜¯, å¦‚æœæˆ‘è¿ç»­æœ‰ä¸‰ä¸ªæ–¹æ³•æˆ–è€…æ˜¯æ›´å¤šçš„æ–¹æ³•éƒ½ç”¨çš„åŒä¸€ä¸ªBeanåˆ«å, å¦‚ä¸‹:</p> 
<pre><code class="language-java">    @Bean("getTest1")
    public Test1 test1() {
        Test1 test1 = new Test1();
        test1.setAge(18);
        test1.setName("å¼ ä¸‰");
        return test1;
    }

    @Bean("getTest1")
    public Test1 test2() {
        Test1 test1 = new Test1();
        test1.setAge(17);
        test1.setName("æå››");
        return test1;
    }
    @Bean("getTest1")
    public Test1 test3() {
        Test1 test1 = new Test1();
        test1.setAge(19);
        test1.setName("ç‹äº”");
        return test1;
    }</code></pre> 
<p>Â  Â  Â  Â  Â è¿™ä¸ªæ—¶å€™æˆ‘å†å»è®¿é—®è¿™ä¸ªgetTest1è¿™ä¸ªBeanå¯¹è±¡, å°†ä¼šè¾“å‡ºå“ªä¸€ä¸ª??</p> 
<p>-- è¾“å‡º:</p> 
<p><img alt="" height="87" src="https://images2.imgbox.com/de/2f/HM3pIL7M_o.png" width="534"></p> 
<p>Â  Â  Â  Â  ä»ç»“æœä¸Šæ¥çœ‹æ˜¯è¾“å‡ºçš„ç¬¬ä¸€ä¸ª,Â  å…¶å®è¿™ä¸ªæ˜¯å’Œå®ƒçš„åŠ è½½çš„é¡ºåºæ—¶æœ‰å…³ç³»çš„, å…¶ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Orderæ³¨è§£æ¥è®¾å®šæˆ‘ä»¬@Beanæ³¨è§£çš„åŠ è½½é¡ºåº</p> 
<p>Â  Â  Â  Â  å¦‚æœå¤šä¸ªBeançš„åç§°ç›¸åŒ, é‚£ä¹ˆç¨‹åºæ‰§è¡Œä¸ä¼šæŠ¥é”™, ä½†æ˜¯ç¬¬ä¸€ä¸ªBeanä¹‹åçš„å¯¹è±¡ä¸ä¼šè¢«å­˜æ”¾åˆ°å®¹å™¨ä¸­, ä¹Ÿå°±æ˜¯åªæœ‰åœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºBeançš„æ—¶å€™, ä¼šå°†å¯¹è±¡å’ŒBeanåç§°å…³è”èµ·æ¥, åç»­å†æœ‰ç›¸åŒåç§°çš„Beanå­˜å‚¨çš„æ—¶å€™,Â  å®¹å™¨ä¼šè‡ªåŠ¨å¿½ç•¥.</p> 
<p>Â  Â  Â  Â  åŒæ—¶å¦‚æœæˆ‘ä»¬çš„æ–¹æ³•é‡Œé¢ä¼ å…¥äº†å‚æ•°, é‚£ä¹ˆåœ¨ç¼–è¯‘æœŸé—´ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸:</p> 
<pre><code class="language-java">    @Bean("getTest1")
    public Test1 test1(int age) {
        Test1 test1 = new Test1();
        test1.setAge(age);
        test1.setName("å¼ ä¸‰");
        return test1;
    }</code></pre> 
<p>Â  Â  Â  Â  Â æˆ–è€…ç‰ˆæœ¬æ›´é«˜ä¸€ç‚¹çš„ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘å‰å°±å‡ºç°é”™è¯¯æç¤º:</p> 
<p><img alt="" height="183" src="https://images2.imgbox.com/c3/44/TQr3TzVR_o.png" width="737"></p> 
<h2 id="(4)%20%E8%8E%B7%E5%8F%96Bean%E5%AF%B9%E8%B1%A1%20--%20%E5%AF%B9%E8%B1%A1%E8%A3%85%E9%85%8D%C2%A0">(4) è·å–Beanå¯¹è±¡ -- å¯¹è±¡è£…é…Â </h2> 
<p>Â  Â  Â  Â  è·å–Beanå¯¹è±¡, ä¹Ÿå«ä½œå¯¹è±¡è£…é…, æ˜¯æŠŠå¯¹è±¡å–å‡ºæ¥æ”¾åˆ°æŸä¸ªç±»ä¸­, æœ‰æ—¶å€™é¡µè„šå¯¹è±¡æ³¨å…¥</p> 
<p>Â  Â  Â  Â  å¯¹è±¡è£…é…çš„å®ç°æ–¹æ³•æœ‰ä»¥ä¸‹ä¸‰ç§:</p> 
<ol><li>å±æ€§æ³¨å…¥</li><li>æ„é€ æ–¹æ³•æ³¨å…¥</li><li>Setteræ³¨å…¥Â </li></ol> 
<h3 id="%C2%A0%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5">Â å±æ€§æ³¨å…¥</h3> 
<p>Â  Â  Â  Â  å±æ€§æ³¨å…¥æ˜¯ä½¿ç”¨@Autowiredå®ç°çš„, å°†Serviceç±»æ³¨å…¥åˆ°Controllerä¸­, Serviceç±»ä¸­çš„ä»£ç å®ç°å¦‚ä¸‹:</p> 
<p>é¦–å…ˆåˆ›å»ºUserç±»:</p> 
<pre><code class="language-java">package com.java.demo.User;

public class User {
    private int age;
    private String name;

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        return "User{" +
                "age=" + age +
                ", name='" + name + '\'' +
                '}';
    }
}
</code></pre> 
<p>åˆ›å»ºUserServiceç±»:</p> 
<pre><code class="language-java">@Service
public class UserService {
    public User getUser(Integer id) {
        User user = new User();
        user.setAge(id);
        user.setName("my" + id);
        return user;
    }
}</code></pre> 
<p>åˆ›å»ºUserControllerç±»:</p> 
<pre><code class="language-java">@Controller
public class UserController {
    @Autowired
    private UserService userService;

    public User getUser(Integer id) {
        return userService.getUser(id);
    }
}</code></pre> 
<p>Â ç”Ÿæˆå¯åŠ¨ç±»:</p> 
<pre><code class="language-java">public class Main {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("springConfig.xml");
        UserController userController = context.getBean(UserController.class);
        System.out.println(userController.getUser(1).toString());
    }
}</code></pre> 
<p>Â Â Â Â Â Â Â Â è§£é‡Š: æˆ‘ä»¬é¦–å…ˆé…ç½®å¥½springä¸Šä¸‹æ–‡å¯¹è±¡ä¹‹å, å°±å»è·å–è¿™ä¸ªuserControllerçš„Beanå¯¹è±¡, ç„¶åè°ƒç”¨å…¶getUseræ–¹æ³•Â ,ä½†æ˜¯ä½ å¯èƒ½ä¼šé—®, userControllerçš„getUseræ–¹æ³•é‡Œé¢æ˜¯UserServiceçš„getUseræ–¹æ³•,ä½†æ˜¯è¿™ä¸ªå¯¹è±¡é‡Œé¢çš„UserServiceå­—æ®µuserServiceæœªèµ‹å€¼, æ€ä¹ˆèƒ½è°ƒç”¨å…¶getUseræ–¹æ³•å•Š, è¿™å…¶å®å°±æ˜¯Autowiredæ³¨è§£çš„ä½œç”¨, ä»–è‡ªåŠ¨å°†UserServiceçš„Beanå¯¹è±¡èµ‹å€¼ç»™è¿™ä¸ªUserServiceå­—æ®µ, ç„¶åè°ƒç”¨.</p> 
<p>Â  Â  Â  Â  éšååœ¨userServiceçš„å¯¹è±¡ä¸­è°ƒç”¨getUser(1)</p> 
<p class="img-center"><img alt="" height="172" src="https://images2.imgbox.com/4d/ea/mNXtJ1iV_o.png" width="282"></p> 
<p>Â  Â  Â  Â  Â æœ€åè¿”å›User, è°ƒç”¨è¿™ä¸ªUserçš„toStringæ–¹æ³•. ç”Ÿæˆçš„ç»“æœå¦‚ä¸‹:</p> 
<p class="img-center"><img alt="" height="100" src="https://images2.imgbox.com/c5/35/rSc4r74m_o.png" width="414"></p> 
<h3 id="%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5%E4%BC%98%E7%BC%BA%E7%82%B9" style="background-color:transparent;">å±æ€§æ³¨å…¥ä¼˜ç¼ºç‚¹</h3> 
<p>Â  Â  Â  Â  å±æ€§æ³¨å…¥ä½¿ç”¨éå¸¸ç®€å•, ä½†æ˜¯ä¹Ÿå­˜åœ¨ç€ä¸€äº›é—®é¢˜:</p> 
<p><span style="color:#fe2c24;"><strong>(a)</strong></span> æ— æ³•æ³¨å…¥è¢«finalä¿®é¥°çš„å˜é‡</p> 
<p><img alt="" height="99" src="https://images2.imgbox.com/73/65/6gD5ycol_o.png" width="945"></p> 
<p>Â  Â  Â  Â  å›¾ä¸­æ˜¾ç¤º, å˜è„¸æ²¡æœ‰è¢«åˆå§‹åŒ–, è¿™ä¸ªæ—¶å€™å¦‚æœæˆ‘ä»¬åœ¨è¿™ä¸ªç±»ä¸­åŠ ä¸Šè¿™ä¸ªå˜é‡çš„æ„é€ æ–¹æ³•:</p> 
<pre><code class="language-java">    @Autowired
    private final UserService userService;

    public UserController() {
        userService = new UserService();
    }</code></pre> 
<p>Â  Â  Â  Â  å°±ä¸ä¼šå‡ºç°ç¼–è¯‘å‰å¼‚å¸¸.Â </p> 
<p><span style="color:#fe2c24;"><strong>(b)</strong></span> é€šç”¨æ€§é—®é¢˜: åªæ˜¯ç”¨ä¸iocå®¹å™¨</p> 
<p><span style="color:#fe2c24;"><strong>(c)</strong></span> æ›´å®¹æ˜“è¿èƒŒå•ä¸€æ€§è®¾è®¡å…ƒç´ , ä½†æ˜¯ç”¨èµ·æ¥æ›´ç®€å•.</p> 
<h3 id="setter%E6%B3%A8%E5%85%A5%C2%A0" style="background-color:transparent;">setteræ³¨å…¥Â </h3> 
<p>Â  Â  Â  Â  åˆ›å»ºç±»UserService:</p> 
<pre><code class="language-java">public class UserService {

    public UserRepository userRepository;

    @Autowired
    public void setUserRepository(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public void sayHi() {
        System.out.println("UserService says hi");
        userRepository.add();
    }
}</code></pre> 
<p>Â  Â  Â  Â  Â åˆ›å»ºç±»UserRepositoryç±»:</p> 
<pre><code class="language-java">@Repository
public class UserRepository {
    public int add() {
        System.out.println("userRepository add");
        return 1;
    }
}</code></pre> 
<p>Â  Â  Â  Â  æ·»åŠ mainæ–¹æ³•:</p> 
<pre><code class="language-java">public class Main {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("springConfig.xml");
        UserService userService = context.getBean("userService", UserService.class);
        userService.sayHi();
    }
}</code></pre> 
<p>Â </p> 
<p>Â  Â  Â  Â  æ­¤æ—¶UserServiceç±»ä¸­çš„UserRepositoryå­—æ®µä¼šæ ¹æ®@Autowiredä¿®é¥°çš„setteræ–¹æ³•è‡ªåŠ¨æ³¨å…¥Beanå¯¹è±¡.</p> 
<p>Â  Â  Â  Â  ç»“æœè¾“å‡º--</p> 
<p class="img-center"><img alt="" height="116" src="https://images2.imgbox.com/43/5a/jDo1bv6p_o.png" width="430"></p> 
<h3 id="%C2%A0setter%E6%B3%A8%E5%85%A5%E4%BC%98%E7%BC%BA%E7%82%B9">Â setteræ³¨å…¥ä¼˜ç¼ºç‚¹</h3> 
<p class="img-center"><img alt="" height="47" src="https://images2.imgbox.com/af/7a/9GeSnyyy_o.png" width="671"></p> 
<p>(a) æ— æ³•æ³¨å…¥è¢«finalä¿®é¥°çš„å˜é‡ .</p> 
<p>(b) setterä¸­æ¯ä¸€æ¬¡éƒ½åªè®¾ç½®ä¸€ä¸ªå±æ€§, éµå®ˆè®¾ç½®çš„å•ä¸€æ€§è®¾è®¡åŸåˆ™.Â </p> 
<p>(c) setteræ³¨å…¥çš„å¯¹è±¡å¯ä»¥è¢«ä¿®æ”¹.</p> 
<h3 id="%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5%20(%E5%AE%98%E6%96%B9%E6%8E%A8%E8%8D%90)" style="background-color:transparent;">æ„é€ æ–¹æ³•æ³¨å…¥ (<span style="color:#fe2c24;">å®˜æ–¹æ¨è</span>)</h3> 
<p>Â  Â  Â  Â  Â åˆ›å»ºUserRepositoryç±»:</p> 
<pre><code class="language-java">@Repository
public class UserRepository {
    public int add() {
        System.out.println("userRepository add");
        return 1;
    }
}</code></pre> 
<p>Â  Â  Â  Â  åˆ›å»ºUserServiceç±»:</p> 
<pre><code class="language-java">@Service
public class UserService {

    private UserRepository userRepository;

    @Autowired
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public void sayHi() {
        System.out.println("sayHi in UserService: " + userRepository.add());
    }
}</code></pre> 
<p>Â  Â  Â  Â  æ·»åŠ å¯åŠ¨é¡¹:</p> 
<pre><code class="language-java">public class Main {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("springConfig.xml");
        UserService userService = context.getBean("userService", UserService.class);
        userService.sayHi();
    }
}</code></pre> 
<p>Â  Â  Â  Â  Â -- è¾“å‡º</p> 
<p class="img-center"><img alt="" height="117" src="https://images2.imgbox.com/36/8e/yjXEm3ad_o.png" width="386"></p> 
<p>Â  Â  Â  Â  Â æ­¤æ—¶æ­¤åˆ»,æˆ‘å°†UserServiceç±»ä¸­çš„æ„é€ æ–¹æ³•ä¸Šé¢çš„@Autowiredæ³¨è§£ç»™æ³¨é‡Šæ‰:</p> 
<pre><code class="language-java">@Service
public class UserService {

    private UserRepository userRepository;

    // @Autowired
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public void sayHi() {
        System.out.println("sayHi in UserService: " + userRepository.add());
    }
}</code></pre> 
<p>Â  Â  Â  Â  å¯åŠ¨, å‘ç°ä»ç„¶å¯ä»¥è¾“å‡ºç»“æœ:</p> 
<p class="img-center"><img alt="" height="109" src="https://images2.imgbox.com/9e/e6/F4KH6vM0_o.png" width="393"></p> 
<p>Â  Â  Â  Â  ä¸ºä»€ä¹ˆ? å…¶å®è¿™æ˜¯å®˜æ–¹æ¨èçš„æ³¨å…¥æ–¹æ³•,æ‰€ä»¥è¢«springå®˜æ–¹ç‰¹åˆ«ç…§é¡¾çš„æ³¨å…¥æ–¹å¼,Â Â æ ‡å‡†çš„æ–¹æ³•æ˜¯è¦åŠ çš„.Â </p> 
<p>Â  Â  Â  Â  å¦‚æœå½“å‰ç±»ä¸­åªå­˜åœ¨ä¸€ä¸ªæ„é€ æ–¹æ³•æ—¶, @Autowiredæ˜¯å¯ä»¥çœç•¥çš„.</p> 
<p>Â  Â  Â  Â  å¦‚æœæœ‰å¤šä¸ªæ„é€ æ–¹æ³•, ä»ç„¶æ³¨é‡Šæ‰@Autowired :</p> 
<pre><code class="language-java">//    @Autowired
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public UserService(UserRepository userRepository, Integer i) {
        this.userRepository = userRepository;
    }</code></pre> 
<p>Â  Â  Â  Â  Â æ­¤æ—¶å¯åŠ¨çš„è¯æ˜¯ä¼šæŠ¥é”™çš„:</p> 
<p><img alt="" height="219" src="https://images2.imgbox.com/10/1f/jRrIDIU1_o.png" width="1200"></p> 
<p>Â  Â  Â  Â  Â é‡Šæ”¾æ‰è¿™ä¸ª @Autowired :</p> 
<pre><code class="language-java">@Service
public class UserService {

    private UserRepository userRepository;

    @Autowired
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public UserService(UserRepository userRepository, Integer i) {
        this.userRepository = userRepository;
    }
    public void sayHi() {
        System.out.println("sayHi in UserService: " + userRepository.add());
    }
}</code></pre> 
<p>Â  Â  Â  Â  é—®é¢˜æ¶ˆå¤±:</p> 
<p class="img-center"><img alt="" height="109" src="https://images2.imgbox.com/0d/9a/rhEm61B0_o.png" width="393"></p> 
<p>Â  Â  Â  Â  Â ä½¿ç”¨æ„é€ æ–¹æ³•å»æ³¨å…¥ä¸€ä¸ªå¯¹è±¡, å³ä½¿è¿™ä¸ªå¯¹è±¡æ˜¯è¢«finalä¿®é¥°çš„, ä»ç„¶å¯ä»¥æ³¨å…¥:</p> 
<p>Â </p> 
<pre><code class="language-java">    private final UserRepository userRepository;

    @Autowired
    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }</code></pre> 
<h3 id="%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E4%BC%98%E7%BC%BA%E7%82%B9">æ„é€ æ–¹æ³•ä¼˜ç¼ºç‚¹</h3> 
<p>Â  Â  Â  <span style="color:#a2e043;"><strong>Â  </strong></span><span style="color:#1c7331;"><strong>ä¼˜ç‚¹</strong></span></p> 
<ul><li>Â å¯ä»¥æ³¨å…¥ä¸€ä¸ªè¢«finalä¿®é¥°çš„å˜é‡</li><li>æ³¨å…¥çš„å¯¹è±¡ä¸ä¼šè¢«ä¿®æ”¹, å› ä¸ºæ„é€ æ–¹æ³•åªä¼šåŠ è½½ä¸€æ¬¡</li><li>æ„é€ æ–¹æ³•æ³¨å…¥å¯ä»¥ä¿è¯æ³¨å…¥å¯¹è±¡å®Œå…¨åˆå§‹åŒ–</li><li>æ„é€ æ–¹æ³•æ³¨å…¥é€šç”¨æ€§æ›´å¥½</li></ul> 
<p>Â  Â  Â  Â  ç¼ºç‚¹</p> 
<ul><li>å†™æ³•æ¯”å±æ€§æ³¨å…¥å¤æ‚</li><li>ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥, æ— æ³•è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜.</li></ul> 
<h2 id="(5)%20%E5%8F%A6%E5%A4%96%E4%B8%80%E7%A7%8D%E6%B3%A8%E5%85%A5%E5%85%B3%E9%94%AE%E5%AD%97%3A%20%40Resource">(5) å¦å¤–ä¸€ç§æ³¨å…¥å…³é”®å­—: @Resource</h2> 
<p>Â  Â  Â  Â  Â åœ¨è¿›è¡Œç±»æ³¨å…¥çš„æ—¶å€™,é™¤äº†å¯ä»¥ä½¿ç”¨@Autowired æ³¨è§£ä¹‹å¤–, è¿˜å¯ä»¥ä½¿ç”¨@Resourceè¿›è¡Œæ³¨å…¥, å¦‚ä¸‹:</p> 
<pre><code class="language-java">@Controller
public class UserController {
    @Resource
    private UserService userService;
    
    public User getUser(Integer id) {
        return UserService.getUser(id);
    }
}</code></pre> 
<p><strong>Â @Autowired å’Œ @Resource çš„åŒºåˆ«</strong></p> 
<ul><li>å‡ºèº«ä¸åŒ, @Autowired æ¥è‡ªspring, è€Œ@Resourceæ¥è‡ªJDKæ³¨è§£</li><li>ä½¿ç”¨æ—¶è®¾ç½®çš„å‚æ•°ä¸åŒ, ç›¸æ¯”äº@Autowiredæ¥è¯´, @Resourceæ”¯æŒæ›´å¤šçš„å‚æ•°è®¾ç½®, ä¾‹å¦‚name, æ ¹æ®åè¯è·å–Bean</li><li>@Autowired å¯ä»¥ç”¨äºsetteræ³¨å…¥, æ„é€ æ–¹æ³•æ³¨å…¥, å±æ€§æ³¨å…¥, ä½†æ˜¯@Resourceåªèƒ½ç”¨äºsetteræ³¨å…¥, å’Œå±æ€§æ³¨å…¥, <span style="color:#fe2c24;">ä¸èƒ½</span>ä½¿ç”¨æ„é€ æ–¹æ³•æ³¨å…¥.</li><li>IDEAå…¼å®¹æ€§ä¸åŒ, ä½¿ç”¨@Autowired å¯èƒ½åœ¨ideaä¸“ä¸šç‰ˆå¯èƒ½ä¼šå‡ºç°è¯¯æŠ¥çš„é—®é¢˜.</li></ul> 
<h2 id="(6)%20%E5%90%8C%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%A4%9A%E4%B8%AA%40Bean%E6%B3%A8%E5%85%A5%E6%8A%A5%E9%94%99">(6) åŒä¸€ä¸ªå˜é‡å¤šä¸ª@Beanæ³¨å…¥æŠ¥é”™</h2> 
<p>Â  Â  Â  Â  å¯¹äºåŒä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ³¨å…¥çš„æ—¶å€™, ä½†æ˜¯æ‰¾åˆ°äº†å¤šä¸ªBeanå¯¹è±¡, æ­¤æ—¶springå°±ä¸çŸ¥é“æ³¨å…¥å“ªä¸€ä¸ª,å°±ä¼šäº§ç”ŸæŠ¥é”™ä¿¡æ¯, ä»£ç å¦‚ä¸‹;</p> 
<pre><code class="language-java">@Component
public class Users {
    
    @Bean
    public User user1() {
        User user = new User();
        user.setAge(18);
        user.setName("å¼ ä¸‰");
        return user;
    }
    
    @Bean
    public User user2() {
        User user = new User();
        user.setAge(20);
        user.setName("æå››");
        return user;
    }
}</code></pre> 
<p>Â  Â  Â  Â  åœ¨å¦å¤–ä¸€ä¸ªç±»ä¸­è·å–Userå¯¹è±¡, å¦‚ä¸‹:</p> 
<pre><code class="language-java">public class UserController {
    @Resource
    private User user;

    public User getUser() {
        return user;
    }
}</code></pre> 
<p>Â  Â  Â  Â  mainæ–¹æ³•:</p> 
<pre><code class="language-java">    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext("springConfig.xml");
        UserController userController = context.getBean("userController", UserController.class);

    }</code></pre> 
<blockquote> 
 <p>Â  Â  Â  Â  Â -- è¾“å‡º</p> 
 <p><img alt="" height="43" src="https://images2.imgbox.com/4a/76/YwzoIabh_o.png" width="701"></p> 
 <p>Â  Â  Â  Â  æ‰¾åˆ°äº†ä¸¤ä¸ªBeanå¯¹è±¡. æŠ›å‡ºæ­¤å¼‚å¸¸.Â </p> 
</blockquote> 
<blockquote> 
 <p>Â  Â  Â  Â  Â åˆ†æ: Userç±»ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ä½¿ç”¨äº†@Beanæ³¨è§£, åœ¨UserControllerç±»ä¸­ä½¿ç”¨@Resourceè¿›è¡Œå±æ€§æ³¨å…¥, æ­¤æ—¶å°±ä¼šæ ¹æ®@Beanæ¥è·å–åˆ°è¿™ä¸ªUserå¯¹è±¡,ä½†æ˜¯è¿™é‡Œæœ‰ä¸¤ä¸ªBeanå¯¹è±¡, åˆ°åº•èµ‹å€¼å“ªä¸€ä¸ª?</p> 
</blockquote> 
<blockquote> 
 <p>Â  Â  Â  Â  åŸå› : éå”¯ä¸€çš„Beanå¯¹è±¡</p> 
</blockquote> 
<blockquote> 
 <p>Â  Â  Â  Â  è§£å†³æ–¹æ¡ˆ:</p> 
 <ul><li>@Resourceçš„nameå€¼å»å®šä¹‰, ä¾‹å¦‚ @Resource(name = "user1")</li><li>ä½¿ç”¨@Qualifieræ³¨è§£å®šä¹‰å…¶ä½¿ç”¨çš„Beanå¯¹è±¡çš„åç§°</li></ul> 
</blockquote> 
<blockquote> 
 <p>Â Â Â Â Â Â Â Â Â è§£å†³æ–¹æ¡ˆçš„å®ä¾‹:</p> 
 <p>(a) ä½¿ç”¨@Resource çš„nameæ³¨è§£:</p> 
 <pre><code class="language-java">@Controller
public class UserController {
    @Resource(name = "user1")
    private User user;

    public User getUser() {
        return user;
    }
}</code></pre> 
 <p>(b) ä½¿ç”¨@Qualifieræ³¨è§£:</p> 
 <pre><code class="language-java">@Controller
public class UserController {
    @Resource
    @Qualifier(value = "user1")
    private User user;

    public User getUser() {
        return user;
    }
}</code></pre> 
 <p></p> 
</blockquote> 
<p id="(7)%20Bean%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F"></p> 
<p></p> 
<h2 id="%E6%80%BB%E7%BB%93%C2%A0">æ€»ç»“Â </h2> 
<ul><li>å°†å¯¹è±¡å­˜å‚¨åˆ°springä¸­çš„æ–¹æ³•: 
  <ul><li>ä½¿ç”¨ç±»æ³¨è§£: @Controller, @Service, @Repository, @Configuration, @Component</li><li>ä½¿ç”¨æ–¹æ³•æ³¨è§£: @Bean, å¿…é¡»é…åˆä¸Šé¢çš„ç±»æ³¨è§£æ¥ä½¿ç”¨</li></ul></li><li>Beanå‘½åçš„è§„åˆ™, é¦–å­—æ¯å’Œç¬¬äºŒä¸ªå­—æ¯éƒ½éå¤§å†™, è·å–Beançš„ç”¨é¦–å­—æ¯å°å†™,å¦‚æœé¦–å­—æ¯å’Œç¬¬äºŒä¸ªå­—æ¯éƒ½æ˜¯å¤§å†™, é‚£ä¹ˆç›´æ¥ä½¿ç”¨æ¬§åŸæ¥çš„Beanåè·å–Beanå¯¹è±¡.</li><li>ä»springä¸­è·å–å¯¹è±¡ 
  <ul><li>å±æ€§æ³¨å…¥</li><li>setteræ³¨å…¥</li><li>æ„é€ æ–¹æ³•æ³¨å…¥(å®˜æ–¹æ¨è)</li></ul></li><li>æ³¨å…¥çš„å…³é”®å­—è¿˜æœ‰ 
  <ul><li>@Autowired</li><li>@Resource</li><li>@Resourceå’Œ@Autowiredçš„åŒºåˆ«</li></ul></li><li>è§£å†³åŒä¸€å˜é‡ä¸åŒçš„Beanå¯¹è±¡çš„é—®é¢˜ 
  <ul><li>ä½¿ç”¨@Resource(name = "xxx")Â </li><li>ä½¿ç”¨@Qualifier(value = "xxx")</li></ul></li></ul> 
<hr> 
<hr> 
<p></p> 
<p>Â <img alt="" height="315" src="https://images2.imgbox.com/0e/ea/ne69Brp3_o.png" width="560"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14a4983190540506f1d1142c467ea1e0/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">qtæŒ‰ç…§ä¸åŒç¼–ç æ ¼å¼è¯»å–æ–‡å­—(UTF-16LE,UTF-8,UTF-8BOM,UTF-16BE)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8cadcfe37279007966782e992a90e9e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">PyTorchåŸºæœ¬æ“ä½œå’Œå·¥ä½œæµç¨‹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹ä¸­å›½çš„åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>