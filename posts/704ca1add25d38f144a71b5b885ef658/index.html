<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>富文本编辑器CKEditor配置与使用 - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="富文本编辑器CKEditor配置与使用" />
<meta property="og:description" content="富文本编辑器CKEditor配置与使用 起因 因为这学期 Java Web 大作业项目选的是在线新闻发布系统，有在线编辑器的需求，所以有了这篇文章。
最开始选的是 Markdown 编辑器，但又想了想，Markdown好想不怎么合适，因为对于编辑新闻来说，主要就是排版和图片这些，而且对于不擅长Markdown语法的编辑者更是十分困难去编写新闻，与Markdown相比，富文本更适合这个需求，它就像一个在线的Word，只需要操作上方的按钮即可完成简单的排版工作。
开始 放弃了 Editor.md 的Markdown编辑器，转向了 CKEditor 的富文本编辑器，之后便是搜索各种资料，再加上官方文档，已完成CKEditor的配置。
参考 CKEditor5基本使用
富文本编辑器CKEditor配置及使用
CKEditor 4.12.1富文本编辑器的配置与使用（详细版）
CKEditor实现图片上传
CKEditor已升级到5.x以上的版本了，可能是因为版本较新，使用和写教程配置的不多，可参考的并不多，而且在阅读官方文档遇到很多困难，就我的感觉是，5以上版本给使用者自由度很大，因此配置也较复杂多样。
搞了很久之后终于放弃了版本5，最终选择的是版本4.8，上面参考链接对我帮助最大的是第二的和第三个。
下载官方js文件
进入官网点击Release notes选择4.8.0版本点击Download.Zip下载
备注：目前最新版本4.9.0有bug，所以用4.8.0版本
访问官网有点慢，耐心等待就好
官方js解压后复制到项目中，引入CKEditor的js文件
&lt;script src=&#34;${pageContext.request.contextPath}/Static/js/lib/ckEditor/ckeditor.js&#34;&gt;&lt;/script&gt; 页面中使用CKEditor
&lt;!--在需要使用编辑器的地方插入textarea标签 --&gt; 内容：&lt;textarea name=&#34;content&#34; id=&#34;content&#34;&gt;&lt;/textarea&gt; &lt;!--将相应的控件替换成编辑器代码 若想要自定义高度加入{height:&#34;xxx&#34;} --&gt; &lt;script type=&#34;text/javascript&#34;&gt; window.onload = function () { CKEDITOR.replace(&#39;content&#39;, {height: &#34;475px&#34;}); }; &lt;/script&gt; 示例：
&lt;%@ page contentType=&#34;text/html;charset=UTF-8&#34; language=&#34;java&#34; %&gt; &lt;%@ taglib prefix=&#34;c&#34; uri=&#34;http://java.sun.com/jsp/jstl/core&#34; %&gt; &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;edit&lt;/title&gt; &lt;script src=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/704ca1add25d38f144a71b5b885ef658/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-05T20:41:10+08:00" />
<meta property="article:modified_time" content="2021-01-05T20:41:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">富文本编辑器CKEditor配置与使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="CKEditor_0"></a>富文本编辑器CKEditor配置与使用</h2> 
<h3><a id="_3"></a>起因</h3> 
<p>因为这学期 <strong>Java Web</strong> 大作业项目选的是在线新闻发布系统，有在线编辑器的需求，所以有了这篇文章。</p> 
<p>最开始选的是 <strong>Markdown</strong> 编辑器，但又想了想，Markdown好想不怎么合适，因为对于编辑新闻来说，主要就是排版和图片这些，而且对于不擅长Markdown语法的编辑者更是十分困难去编写新闻，与Markdown相比，富文本更适合这个需求，它就像一个在线的Word，只需要操作上方的按钮即可完成简单的排版工作。</p> 
 
<h3><a id="_11"></a>开始</h3> 
<p>放弃了 <a href="https://pandao.github.io/editor.md/" rel="nofollow">Editor.md</a> 的Markdown编辑器，转向了 <a href="https://ckeditor.com/" rel="nofollow">CKEditor</a> 的富文本编辑器，之后便是搜索各种资料，再加上官方文档，已完成CKEditor的配置。</p> 
<h4><a id="_15"></a>参考</h4> 
<p><a href="https://www.jianshu.com/p/47e25447b771" rel="nofollow">CKEditor5基本使用</a></p> 
<p><a href="https://blog.csdn.net/sinat_31986807/article/details/79667543">富文本编辑器CKEditor配置及使用</a></p> 
<p><a href="https://blog.csdn.net/wuhouchao/article/details/97645662">CKEditor 4.12.1富文本编辑器的配置与使用（详细版）</a></p> 
<p><a href="https://itmyhome.blog.csdn.net/article/details/17264627" rel="nofollow">CKEditor实现图片上传</a></p> 
<p>CKEditor已升级到5.x以上的版本了，可能是因为版本较新，使用和写教程配置的不多，可参考的并不多，而且在阅读官方文档遇到很多困难，就我的感觉是，5以上版本给使用者自由度很大，因此配置也较复杂多样。</p> 
<p>搞了很久之后终于放弃了版本5，最终选择的是版本4.8，上面参考链接对我帮助最大的是第二的和第三个。</p> 
<blockquote> 
 <p>下载官方js文件</p> 
</blockquote> 
<p>进入<a href="https://ckeditor.com/ckeditor-4/download/" rel="nofollow">官网</a>点击Release notes选择4.8.0版本点击Download.Zip下载</p> 
<p>备注：目前最新版本4.9.0有bug，所以用4.8.0版本</p> 
<p><img src="https://images2.imgbox.com/03/f2/nqhUck9m_o.png" alt="官网"></p> 
<p>访问官网有点慢，耐心等待就好</p> 
<blockquote> 
 <p>官方js解压后复制到项目中，引入CKEditor的js文件</p> 
</blockquote> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/Static/js/lib/ckEditor/ckeditor.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<blockquote> 
 <p>页面中使用CKEditor</p> 
</blockquote> 
<pre><code class="prism language-html"><span class="token comment">&lt;!--在需要使用编辑器的地方插入textarea标签 --&gt;</span>
内容：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--将相应的控件替换成编辑器代码 若想要自定义高度加入{height:"xxx"} --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
    window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token constant">CKEDITOR</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>height<span class="token punctuation">:</span> <span class="token string">"475px"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>示例：</p> 
<pre><code class="prism language-html">&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/Static/js/lib/ckEditor/ckeditor.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
        window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token constant">CKEDITOR</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>height<span class="token punctuation">:</span> <span class="token string">"475px"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>   
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/addNews<span class="token punctuation">"</span></span> <span class="token attr-name">onsubmit</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user_id<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${sessionScope.user.user_id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        标题：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        类别：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>category_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.categorys}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>category<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${category.category_id}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>${category.category_name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        内容：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>state<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>发布<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>效果展示：</p> 
<p><img src="https://images2.imgbox.com/7d/e9/eWvOc6oj_o.png" alt="新闻编辑"></p> 
<p>后台取值：</p> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"addNews"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">addNews</span><span class="token punctuation">(</span>News news<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>图片上传</p> 
</blockquote> 
<ul><li>清空图像预览框中的文字</li></ul> 
<p><img src="https://images2.imgbox.com/33/76/ovJAqJfm_o.png" alt="原始图像上传"></p> 
<p>找到项目下的ckeditor文件夹下的config.js中添加：</p> 
<pre><code class="prism language-javascript">    config<span class="token punctuation">.</span>image_previewText<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e1/d1/0c5debxX_o.png" alt=""></p> 
<p>效果如下：</p> 
<p><img src="https://images2.imgbox.com/38/ae/nk0P6Jeh_o.png" alt=""></p> 
<ul><li>配置上传图片请求地址</li></ul> 
<p>接着上面config.js中添加：</p> 
<pre><code class="prism language-javascript">    config<span class="token punctuation">.</span>filebrowserUploadUrl<span class="token operator">=</span><span class="token string">"/xxx/uploadImage"</span><span class="token punctuation">;</span>
</code></pre> 
<p>参考的文章里都说了，这里还需要回传一段js脚本：</p> 
<pre><code class="prism language-java">        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;script type=\"text/javascript\"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String callback <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"CKEditorFuncNum"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"window.parent.CKEDITOR.tools.callFunction("</span> <span class="token operator">+</span> callback<span class="token operator">+</span> <span class="token string">",'"</span> <span class="token operator">+</span> imageContextPath <span class="token operator">+</span> <span class="token string">"','')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;/script&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>有了这段代码，图片上传成功后，由你设置的上传地址 + filename（自己可设定）相对地址，就可以使用这个图片，直接转到“图像”页面。这时可以对图片大小等进行修改。</p> 
<p><img src="https://images2.imgbox.com/9a/d8/hH9TNqWy_o.png" alt="上传预览"></p> 
<p>点击确定后编辑器如下：</p> 
<p><img src="https://images2.imgbox.com/8b/1d/9JPQ5sRY_o.png" alt="上传成功并显示"></p> 
<ul><li>上传的图片重新显示到页面</li></ul> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${pageContext.request.contextPath}/updateNews<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>news_id<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.news.news_id}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user_id<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${sessionScope.user.user_id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    标题：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.news.title}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    类别：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>category_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${requestScope.categorys}<span class="token punctuation">"</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>category<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${category.category_id}<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">&lt;c:</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${category.category_id==requestScope.news.category_id}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    selected="true"
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>if</span><span class="token punctuation">&gt;</span></span>&gt;${category.category_name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    内容：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>${news.content}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>state<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${news.state}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>修改<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<ul><li>我的后台上传代码</li></ul> 
<pre><code class="prism language-java"><span class="token comment">/**
 * @ClassName: ImageUploadUtil
 * @Description: 图片上传工具类，包括ckeditor操作
 * created by Vinne.WU
 * 2019.7.17 14:27
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ImageUploadUtils</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 图片类型</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> fileTypes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{<!-- --></span>
        fileTypes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">".jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileTypes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">".jpeg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileTypes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">".bmp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileTypes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">".gif"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fileTypes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">".png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 图片上传
     *
     * @param request
     * @param DirectoryName
     * @return
     * @throws IllegalStateException
     * @throws IOException
     * @Title upload
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">upload</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> String DirectoryName<span class="token punctuation">)</span> <span class="token keyword">throws</span> IllegalStateException<span class="token punctuation">,</span>
            IOException <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建一个通用的多部分解析器</span>
        CommonsMultipartResolver multipartResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommonsMultipartResolver</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 图片名称</span>
        String fileName <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token comment">// 判断 request 是否有文件上传,即多部分请求</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>multipartResolver<span class="token punctuation">.</span><span class="token function">isMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 转换成多部分request</span>
            MultipartHttpServletRequest multiRequest <span class="token operator">=</span> <span class="token punctuation">(</span>MultipartHttpServletRequest<span class="token punctuation">)</span> request<span class="token punctuation">;</span>
            <span class="token comment">// 取得request中的所有文件名</span>
            Iterator<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> iter <span class="token operator">=</span> multiRequest<span class="token punctuation">.</span><span class="token function">getFileNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 记录上传过程起始时的时间，用来计算上传时间</span>
                <span class="token keyword">long</span> pre <span class="token operator">=</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 取得上传文件</span>
                MultipartFile file <span class="token operator">=</span> multiRequest<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>file <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 取得当前上传文件的文件名称</span>
                    <span class="token comment">//String myFileName = file.getOriginalFilename();</span>
                    String oFileName<span class="token operator">=</span>file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//时间命名图片</span>
                    String myFileName<span class="token operator">=</span>Long<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token operator">+</span>oFileName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>oFileName<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>myFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 如果名称不为“”,说明该文件存在，否则说明该文件不存在</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>myFileName<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 获得图片的原始名称</span>
                        String originalFilename <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 获得图片后缀名称,如果后缀不为图片格式，则不上传</span>
                        String suffix <span class="token operator">=</span> originalFilename<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>originalFilename<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>fileTypes<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>suffix<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token keyword">continue</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token comment">// 获得上传路径的绝对路径地址(/upload)--&gt;</span>
                        String realPath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span> <span class="token operator">+</span> DirectoryName<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//String realPath=request.getContextPath()+"/Static/img" ;</span>
                        <span class="token comment">// 如果路径不存在，则创建该路径</span>
                        File realPathDirectory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>realPathDirectory <span class="token operator">==</span> null <span class="token operator">||</span> <span class="token operator">!</span>realPathDirectory<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            realPathDirectory<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token comment">// 重命名上传后的文件名 111112323.jpg</span>
                        fileName <span class="token operator">=</span> myFileName<span class="token punctuation">;</span>
                        <span class="token comment">// 定义上传路径 .../upload/111112323.jpg</span>
                        File uploadFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>realPathDirectory <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>uploadFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span>uploadFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> fileName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * ckeditor文件上传功能，回调，传回图片路径，实现预览效果。
     *
     * @param request
     * @param response
     * @param DirectoryName
     * @throws IOException
     * @Title ckeditor
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">ckeditor</span><span class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span class="token punctuation">,</span> String DirectoryName<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        String fileName <span class="token operator">=</span> <span class="token function">upload</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> DirectoryName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 结合ckeditor功能</span>
        <span class="token comment">// imageContextPath为图片在服务器地址，如upload/123.jpg,非绝对路径</span>
        String imageContextPath <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> DirectoryName <span class="token operator">+</span> <span class="token string">"/"</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>DirectoryName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//构建json回调消息</span>
        PrintWriter out<span class="token operator">=</span>response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回"图像"选项卡并显示图片  request.getContextPath()为web项目名</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;script type=\"text/javascript\"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String callback <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"CKEditorFuncNum"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"window.parent.CKEDITOR.tools.callFunction("</span> <span class="token operator">+</span> callback
                <span class="token operator">+</span> <span class="token string">",'"</span> <span class="token operator">+</span> imageContextPath <span class="token operator">+</span> <span class="token string">"','')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"&lt;/script&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>因为我的最终大作业是SSM框架的所以在配置SpringMVC是要加入：</p> 
<pre><code class="prism language-xml">    <span class="token comment">&lt;!-- 定义文件上传解析器 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>multipartResolver<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 设定默认编码 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>defaultEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 设定文件上传的最大值为10M，单位B，10*1024*1024 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxUploadSize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>10485760<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!-- 设定文件上传时写入内存的最大值，如果小于这个参数不会生成临时文件，默认为10240 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>maxInMemorySize<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>40960<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>使用过程中发现上传含中文图片回显会有问题，js代码传中文不行，所以将就把图片命名为</p> 
<pre><code class="prism language-java">System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这样也能避免上传图片名称一样时覆盖问题，不过一定程度上会导致用户同一时间点上传图片覆盖，不过这个几率挺小的，毕竟毫秒单位啊。</p> 
<h4><a id="java_HTMLIMGsrc_308"></a>最后分享“java 获取HTML文本IMG标签的src地址”</h4> 
<p><a href="https://www.jianshu.com/p/5d57b5d9d768" rel="nofollow">参考</a></p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 获取HTML文件里面的IMG标签的SRC地址
     * @param htmlText 带html格式的文本
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> <span class="token function">GetHtmlImageSrcList</span><span class="token punctuation">(</span>String htmlText<span class="token punctuation">)</span>   
    <span class="token punctuation">{<!-- --></span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> imgSrc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Matcher m <span class="token operator">=</span> Pattern<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"src=\"?(.*?)(\"|&gt;|\\s+)"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>htmlText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>    
            imgSrc<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> imgSrc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * 去掉所有的HTML,获取其中的文本信息 
     * @param htmlText
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">GetHtmlText</span><span class="token punctuation">(</span>String htmlText<span class="token punctuation">)</span>   
    <span class="token punctuation">{<!-- --></span>
        String regEx_html <span class="token operator">=</span> <span class="token string">"&lt;[^&gt;]+&gt;"</span><span class="token punctuation">;</span> <span class="token comment">// 定义HTML标签的正则表达式 </span>
        Pattern p_html <span class="token operator">=</span> Pattern<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>regEx_html<span class="token punctuation">,</span> Pattern<span class="token punctuation">.</span>CASE_INSENSITIVE<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        Matcher m_html <span class="token operator">=</span> p_html<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>htmlText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        htmlText <span class="token operator">=</span> m_html<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 过滤HTML标签</span>
        <span class="token keyword">return</span> htmlText<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_343"></a>这次分享结束</h3> 
<p>再次强调这是个人学习记录，谈不上教程</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1152d0b5c82048100449c1fb4c90b2f5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">epc项目设计流程图_6张图！ EPC工程总承包管理全套流程图解（珍藏版）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/09a6c9f1a07e8189f983d83fb6f7125e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DVWA配置allow_url_include解决飘红</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>