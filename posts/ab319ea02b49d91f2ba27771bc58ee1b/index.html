<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS7离线安装GCC9.3.0（亲测） - 编程中国的博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS7离线安装GCC9.3.0（亲测）" />
<meta property="og:description" content="目录
前言
安装文件下载
离线安装
安装GMP
安装MPFR
安装MPC
安装ISL-0.24
安装GCC-9.3.0
配置环境变量
更新动态库
参考资料
前言 安装CentOS7后，系统会默认安装GCC4.8.5（可执行文件位于 /usr/bin 目录，头文件位于 /usr/include 目录，库文件位于 /usr/lib 目录）。但有些C/C&#43;&#43;源代码需要较高版本编译器才能编译，且服务器还在公司内网，不能在线升级编译器。本文主要介绍如何在不删除原编译器的条件下，离线安装GCC9.3.0。
安装文件下载 GCC依赖四个库：GMP、MPFR、MPC、ISL。GMP：计算任意精度的数学库, 包括支持整数,有理数和浮点。MPFR： 一个多精度高效的浮点计算C语言库, 基于GMP。MPC：一个支持高精度复数的算术运算的C库，并能正确的进行结果舍入。ISL：用于操作集合和线性约束下的整数点的关系的库，支持集合的交，并和补操作。
其中，MPFR依赖GMP，MPC依赖GMP和MPFR，GCC依赖上面四个库，所以推荐的编译安装顺序是GMP-&gt;MPFR-&gt;MPC-&gt;ISL-&gt;GCC。
我们选择下载如下版本，且给出了下载地址：
GMP-6.2.1 https://ftp.gnu.org/gnu/gmp/gmp-6.2.1.tar.xzMPFR-4.2.0 https://www.mpfr.org/mpfr-current/mpfr-4.2.0.tar.xzMPC-1.3.1 https://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gzISL -0.24 http://ftp.tsukuba.wide.ad.jp/software/gcc/infrastructure/isl-0.24.tar.bz2GCC-9.3.0 http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-9.3.0/gcc-9.3.0.tar.xz 离线安装 安装GMP 将下载的gmp-6.2.1.tar.xz解压缩到/home目录（/home/gmp-6.2.1），为了便于后续管理，新建 /usr/local/gmp-6.2.1 目录，并将gmp库安装于此目录，安装指令如下：
cd /home/gmp-6.2.1
./configure --prefix=/usr/local/gmp-6.2.1
make -j8
make install -j8
安装MPFR 将下载的mpfr-4.2.0.tar.xz解压缩到/home目录（/home/mpfr-4.2.0），新建 /usr/local/mpfr-4.2.0 目录，并将mpfr库安装于此目录，安装指令如下：
cd /home/mpfr-4.2.0
./configure --prefix=/usr/local/mpfr-4.2.0 --with-gmp-include=/usr/local/gmp-6.2.1/include --with-gmp-lib=/usr/local/gmp-6.2.1/lib
make -j8
make install -j8
由于MPFR库依赖GMP库，因此需要–with命令指定GMP库的头文件目录和库文件目录。
安装MPC 将下载的mpc-1.3.1.tar.xz解压缩到/home目录（/home/mpc-1.3.1），新建 /usr/local/mpc-1.3.1 目录，并将mpc库安装于此目录，安装指令如下：
cd /home/mpc-1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/ab319ea02b49d91f2ba27771bc58ee1b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-23T14:20:33+08:00" />
<meta property="article:modified_time" content="2023-06-23T14:20:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程中国的博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程中国的博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS7离线安装GCC9.3.0（亲测）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:40px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD-toc" style="margin-left:40px;"><a href="#%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD" rel="nofollow">安装文件下载</a></p> 
<p id="%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85-toc" style="margin-left:40px;"><a href="#%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85" rel="nofollow">离线安装</a></p> 
<p id="%E5%AE%89%E8%A3%85GMP-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E8%A3%85GMP" rel="nofollow">安装GMP</a></p> 
<p id="%E5%AE%89%E8%A3%85MPFR-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E8%A3%85MPFR" rel="nofollow">安装MPFR</a></p> 
<p id="%E5%AE%89%E8%A3%85MPC-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E8%A3%85MPC" rel="nofollow">安装MPC</a></p> 
<p id="%E5%AE%89%E8%A3%85ISL-0.24-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E8%A3%85ISL-0.24" rel="nofollow">安装ISL-0.24</a></p> 
<p id="%E5%AE%89%E8%A3%85GCC-9.3.0-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E8%A3%85GCC-9.3.0" rel="nofollow">安装GCC-9.3.0</a></p> 
<p id="%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">配置环境变量</a></p> 
<p id="%E6%9B%B4%E6%96%B0%E5%8A%A8%E6%80%81%E5%BA%93-toc" style="margin-left:40px;"><a href="#%E6%9B%B4%E6%96%B0%E5%8A%A8%E6%80%81%E5%BA%93" rel="nofollow">更新动态库</a></p> 
<p id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99-toc" style="margin-left:40px;"><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" rel="nofollow">参考资料</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E5%89%8D%E8%A8%80">前言</h3> 
<p>       安装CentOS7后，系统会默认安装GCC4.8.5（可执行文件位于 /usr/bin 目录，头文件位于 /usr/include 目录，库文件位于 /usr/lib 目录）。但有些C/C++源代码需要较高版本编译器才能编译，且服务器还在公司内网，不能在线升级编译器。本文主要介绍如何在不删除原编译器的条件下，离线安装GCC9.3.0。</p> 
<h3 id="%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD">安装文件下载</h3> 
<p>       GCC依赖四个库：GMP、MPFR、MPC、ISL。GMP：计算任意精度的数学库, 包括支持整数,有理数和浮点。MPFR： 一个多精度高效的浮点计算C语言库, 基于GMP。MPC：一个支持高精度复数的算术运算的C库，并能正确的进行结果舍入。ISL：用于操作集合和线性约束下的整数点的关系的库，支持集合的交，并和补操作。</p> 
<p>      其中，MPFR依赖GMP，MPC依赖GMP和MPFR，GCC依赖上面四个库，所以推荐的编译安装顺序是GMP-&gt;MPFR-&gt;MPC-&gt;ISL-&gt;GCC。</p> 
<p>      我们选择下载如下版本，且给出了下载地址：</p> 
<ul><li>GMP-6.2.1    <a href="https://ftp.gnu.org/gnu/gmp/gmp-6.2.1.tar.xz" rel="nofollow" title="https://ftp.gnu.org/gnu/gmp/gmp-6.2.1.tar.xz">https://ftp.gnu.org/gnu/gmp/gmp-6.2.1.tar.xz</a></li><li>MPFR-4.2.0  <a href="https://www.mpfr.org/mpfr-current/mpfr-4.2.0.tar.xz" rel="nofollow" title="https://www.mpfr.org/mpfr-current/mpfr-4.2.0.tar.xz">https://www.mpfr.org/mpfr-current/mpfr-4.2.0.tar.xz</a></li><li>MPC-1.3.1   <a href="https://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz" rel="nofollow" title=" https://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz"> https://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz</a></li><li>ISL -0.24      <a href="http://ftp.tsukuba.wide.ad.jp/software/gcc/infrastructure/isl-0.24.tar.bz2" rel="nofollow" title="http://ftp.tsukuba.wide.ad.jp/software/gcc/infrastructure/isl-0.24.tar.bz2">http://ftp.tsukuba.wide.ad.jp/software/gcc/infrastructure/isl-0.24.tar.bz2</a></li><li>GCC-9.3.0   <a href="http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-9.3.0/gcc-9.3.0.tar.xz" rel="nofollow" title=" http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-9.3.0/gcc-9.3.0.tar.xz"> http://ftp.tsukuba.wide.ad.jp/software/gcc/releases/gcc-9.3.0/gcc-9.3.0.tar.xz</a></li></ul> 
<h3 id="%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85">离线安装</h3> 
<h4 id="%E5%AE%89%E8%A3%85GMP">安装GMP</h4> 
<p>        将下载的gmp-6.2.1.tar.xz解压缩到/home目录（/home/gmp-6.2.1），为了便于后续管理，新建 /usr/local/gmp-6.2.1 目录，并将gmp库安装于此目录，安装指令如下：</p> 
<blockquote> 
 <p>cd /home/gmp-6.2.1</p> 
 <p>./configure --prefix=/usr/local/gmp-6.2.1</p> 
 <p>make  -j8</p> 
 <p>make  install  -j8</p> 
</blockquote> 
<h4 id="%E5%AE%89%E8%A3%85MPFR">安装MPFR</h4> 
<p>        将下载的mpfr-4.2.0.tar.xz解压缩到/home目录（/home/mpfr-4.2.0），新建 /usr/local/mpfr-4.2.0 目录，并将mpfr库安装于此目录，安装指令如下：</p> 
<blockquote> 
 <p>cd /home/mpfr-4.2.0</p> 
 <p>./configure --prefix=/usr/local/mpfr-4.2.0 --with-gmp-include=/usr/local/gmp-6.2.1/include --with-gmp-lib=/usr/local/gmp-6.2.1/lib</p> 
 <p>make  -j8</p> 
 <p>make  install  -j8</p> 
</blockquote> 
<p>        由于MPFR库依赖GMP库，因此需要–with命令指定GMP库的头文件目录和库文件目录。</p> 
<h4 id="%E5%AE%89%E8%A3%85MPC">安装MPC</h4> 
<p>        将下载的mpc-1.3.1.tar.xz解压缩到/home目录（/home/mpc-1.3.1），新建 /usr/local/mpc-1.3.1 目录，并将mpc库安装于此目录，安装指令如下：</p> 
<blockquote> 
 <p>cd /home/mpc-1.3.1</p> 
 <p>./configure --prefix=/usr/local/mpc-1.3.1 --with-gmp-include=/usr/local/gmp-6.2.1/include --with-gmp-lib=/usr/local/gmp-6.2.1/lib  --with-mpfr-include=/usr/local/mpfr-4.2.0/include --with-mpfr-lib=/usr/local/mpfr-4.2.0/lib</p> 
 <p>make  -j8</p> 
 <p>make  install  -j8</p> 
</blockquote> 
<p>        由于MPC库依赖GMP库和MPFR库，因此需要–with命令指定GMP库和MPFR库的头文件目录和库文件目录。</p> 
<h4 id="%E5%AE%89%E8%A3%85ISL-0.24">安装ISL-0.24</h4> 
<p>        将下载的isl-0.24.tar.bz2解压缩到/home目录（/home/isl-0.24），新建 /usr/local/isl-0.24 目录，并将isl库安装于此目录，安装指令如下：</p> 
<blockquote> 
 <p>cd /home/isl-0.24.</p> 
 <p>./configure --prefix=/usr/local/isl-0.24  --with-gmp-prefix=/usr/local/gmp-6.2.1</p> 
 <p>make  -j8</p> 
 <p>make  install  -j8</p> 
</blockquote> 
<h4 id="%E5%AE%89%E8%A3%85GCC-9.3.0">安装GCC-9.3.0</h4> 
<p>        安装gcc之前，需将前面安装的依赖库路径配置到环境变量中，否则会提示找不到相关依赖库。</p> 
<blockquote> 
 <p>export LD_LIBRARY_PATH=/usr/local/gmp-6.2.1/lib:/usr/local/mpfr-4.2.0/lib:/usr/local/mpc-1.3.1/lib:/usr/local/isl-0.24/lib:$LD_LIBRARY_PATH</p> 
</blockquote> 
<p>       将下载的gcc-9.3.0.tar.xz解压缩到/home目录（/home/gcc-9.3.0），新建 /usr/local/gcc-9.3.0 目录，并将gcc库安装于此目录，安装指令如下：</p> 
<pre><code>--enable-threads=posix --disable-checking --disable-multilib --enable-languages=c,c++ --with-gmp=/usr/local/gmp-4.3.2 --with-mpfr=/usr/local/mpfr-3.1.4 --with-mpc=/usr/local/mpc-1.0.3</code></pre> 
<blockquote> 
 <p>cd /home/gcc-9.3.0</p> 
 <p>./configure --prefix=/usr/local/gcc-9.3.0 --with-gmp=/usr/local/gmp-6.2.1/  --with-mpfr=/usr/local/mpfr-4.2.0  --with-mpc=/usr/local/mpc-1.3.1 --with-isl=/usr/local/isl-0.24 --disable-multilib</p> 
 <p>make  -j8</p> 
 <p>make  install  -j8</p> 
</blockquote> 
<p>在configure环节，不同系统可能会报错，根据提示增加编译选项即可。</p> 
<h3 id="%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">配置环境变量</h3> 
<p>        在文件<code>/etc/profile中最后添加一行，内容如下：</code></p> 
<blockquote> 
 <p>export PATH=/usr/local/gcc-9.3.0/bin:$PATH</p> 
</blockquote> 
<p>        使其立即生效：</p> 
<blockquote> 
 <p>source /etc/profile</p> 
</blockquote> 
<h3 id="%E6%9B%B4%E6%96%B0%E5%8A%A8%E6%80%81%E5%BA%93">更新动态库</h3> 
<p>        不更新动态库，会导致编译成功的新程序，运行时报错。</p> 
<p>原因是因为升级GCC后相应的动态库没有更新，导致新编译器编译程序成功，运行不成功。</p> 
<ul><li>使用如下命令，你会发现当前库是一个软链接</li></ul> 
<blockquote> 
 <p>ls -l /usr/lib64/libstdc++.so.6</p> 
</blockquote> 
<ul><li>使用如下命令，查看动态库，你会发现版本太低</li></ul> 
<blockquote> 
 <p>strings /usr/lib64/libstdc++.so.6.0.19 | grep CXXABI</p> 
</blockquote> 
<ul><li>更新gcc-9.3.0安装目录下的相应动态库到/usr/lib64目录下。</li></ul> 
<p>        先删除/usr/lib64/libstdc++.so.6，再重新创建软链接：</p> 
<blockquote> 
 <p>ln -s /usr/local/gcc-9.3.0/lib64/libstdc++.so.6.0.28 /usr/lib64/libstdc++.so.6</p> 
</blockquote> 
<p>        更新gcc、g++链接。首先备份gcc4.8.5，如下：</p> 
<blockquote> 
 <p>mv /usr/bin/gcc /usr/bin/gcc-4.8.5</p> 
 <p>mv /usr/bin/g++ /usr/bin/g++-4.8.5</p> 
</blockquote> 
<p>        创建gcc-9.3.0链接，如下：</p> 
<blockquote> 
 <p>ln -s /usr/local/gcc-9.3.0/bin/gcc /usr/bin/gcc</p> 
 <p>ln -s /usr/local/gcc-9.3.0/bin/g++ /usr/bin/g++</p> 
</blockquote> 
<p>         至此，gcc-9.3.0安装完成。使用如下命令查看版本：</p> 
<blockquote> 
 <p>gcc  -v</p> 
</blockquote> 
<h3 id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">参考资料</h3> 
<ul><li><a class="link-info" href="http://www.manongjc.com/detail/51-xkjdtczqbbnjids.html" rel="nofollow" title="Linux下离线手动下载安装C++开发环境">Linux下离线手动下载安装C++开发环境</a></li><li><a class="link-info" href="https://blog.csdn.net/qq_37304075/article/details/128577700" title="GCC-9.3.0离线安装">GCC-9.3.0离线安装</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eefbb059b743fd0ed64c2d52df53a89e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">linux学习[11]磁盘与文件系统(2)：lsblk&amp;blkid&amp;parted&amp;fdisk&amp;gdisk&amp;mkfs</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ed6d57267e1fbf6b02353b1e274d4790/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux入侵检测病毒清理流程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程中国的博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>